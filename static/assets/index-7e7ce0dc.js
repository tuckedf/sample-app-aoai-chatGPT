var uj=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var cUe=uj((Oi,$i)=>{function O8(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var ac=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Zk(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){if(this instanceof r){var s=[null];s.push.apply(s,arguments);var i=Function.bind.apply(e,s);return new i}return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Rm={},cj={get exports(){return Rm},set exports(t){Rm=t}},nT={},w={},dj={get exports(){return w},set exports(t){w=t}},Rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dg=Symbol.for("react.element"),hj=Symbol.for("react.portal"),fj=Symbol.for("react.fragment"),pj=Symbol.for("react.strict_mode"),mj=Symbol.for("react.profiler"),gj=Symbol.for("react.provider"),yj=Symbol.for("react.context"),vj=Symbol.for("react.forward_ref"),bj=Symbol.for("react.suspense"),Ej=Symbol.for("react.memo"),Tj=Symbol.for("react.lazy"),W5=Symbol.iterator;function xj(t){return t===null||typeof t!="object"?null:(t=W5&&t[W5]||t["@@iterator"],typeof t=="function"?t:null)}var $8={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L8=Object.assign,P8={};function Gf(t,e,n){this.props=t,this.context=e,this.refs=P8,this.updater=n||$8}Gf.prototype.isReactComponent={};Gf.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Gf.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function M8(){}M8.prototype=Gf.prototype;function Jk(t,e,n){this.props=t,this.context=e,this.refs=P8,this.updater=n||$8}var eI=Jk.prototype=new M8;eI.constructor=Jk;L8(eI,Gf.prototype);eI.isPureReactComponent=!0;var V5=Array.isArray,B8=Object.prototype.hasOwnProperty,tI={current:null},z8={key:!0,ref:!0,__self:!0,__source:!0};function H8(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)B8.call(e,r)&&!z8.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Dg,type:t,key:i,ref:o,props:s,_owner:tI.current}}function Cj(t,e){return{$$typeof:Dg,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function nI(t){return typeof t=="object"&&t!==null&&t.$$typeof===Dg}function Sj(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var G5=/\/+/g;function g2(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Sj(""+t.key):e.toString(36)}function nb(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Dg:case hj:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+g2(o,0):r,V5(s)?(n="",t!=null&&(n=t.replace(G5,"$&/")+"/"),nb(s,e,n,"",function(u){return u})):s!=null&&(nI(s)&&(s=Cj(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(G5,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",V5(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+g2(i,a);o+=nb(i,e,n,l,s)}else if(l=xj(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+g2(i,a++),o+=nb(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function qy(t,e,n){if(t==null)return t;var r=[],s=0;return nb(t,r,"","",function(i){return e.call(n,i,s++)}),r}function wj(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gs={current:null},rb={transition:null},_j={ReactCurrentDispatcher:Gs,ReactCurrentBatchConfig:rb,ReactCurrentOwner:tI};Rt.Children={map:qy,forEach:function(t,e,n){qy(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return qy(t,function(){e++}),e},toArray:function(t){return qy(t,function(e){return e})||[]},only:function(t){if(!nI(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Rt.Component=Gf;Rt.Fragment=fj;Rt.Profiler=mj;Rt.PureComponent=Jk;Rt.StrictMode=pj;Rt.Suspense=bj;Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_j;Rt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=L8({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=tI.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)B8.call(e,l)&&!z8.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Dg,type:t.type,key:s,ref:i,props:r,_owner:o}};Rt.createContext=function(t){return t={$$typeof:yj,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:gj,_context:t},t.Consumer=t};Rt.createElement=H8;Rt.createFactory=function(t){var e=H8.bind(null,t);return e.type=t,e};Rt.createRef=function(){return{current:null}};Rt.forwardRef=function(t){return{$$typeof:vj,render:t}};Rt.isValidElement=nI;Rt.lazy=function(t){return{$$typeof:Tj,_payload:{_status:-1,_result:t},_init:wj}};Rt.memo=function(t,e){return{$$typeof:Ej,type:t,compare:e===void 0?null:e}};Rt.startTransition=function(t){var e=rb.transition;rb.transition={};try{t()}finally{rb.transition=e}};Rt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Rt.useCallback=function(t,e){return Gs.current.useCallback(t,e)};Rt.useContext=function(t){return Gs.current.useContext(t)};Rt.useDebugValue=function(){};Rt.useDeferredValue=function(t){return Gs.current.useDeferredValue(t)};Rt.useEffect=function(t,e){return Gs.current.useEffect(t,e)};Rt.useId=function(){return Gs.current.useId()};Rt.useImperativeHandle=function(t,e,n){return Gs.current.useImperativeHandle(t,e,n)};Rt.useInsertionEffect=function(t,e){return Gs.current.useInsertionEffect(t,e)};Rt.useLayoutEffect=function(t,e){return Gs.current.useLayoutEffect(t,e)};Rt.useMemo=function(t,e){return Gs.current.useMemo(t,e)};Rt.useReducer=function(t,e,n){return Gs.current.useReducer(t,e,n)};Rt.useRef=function(t){return Gs.current.useRef(t)};Rt.useState=function(t){return Gs.current.useState(t)};Rt.useSyncExternalStore=function(t,e,n){return Gs.current.useSyncExternalStore(t,e,n)};Rt.useTransition=function(){return Gs.current.useTransition()};Rt.version="18.2.0";(function(t){t.exports=Rt})(dj);const ks=Qk(w),Rb=O8({__proto__:null,default:ks},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kj=w,Ij=Symbol.for("react.element"),Nj=Symbol.for("react.fragment"),Aj=Object.prototype.hasOwnProperty,Dj=kj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rj={key:!0,ref:!0,__self:!0,__source:!0};function U8(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Aj.call(e,r)&&!Rj.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Ij,type:t,key:i,ref:o,props:s,_owner:Dj.current}}nT.Fragment=Nj;nT.jsx=U8;nT.jsxs=U8;(function(t){t.exports=nT})(cj);const Ba=Rm.Fragment,te=Rm.jsx,Xe=Rm.jsxs;var j5={},sb=void 0;try{sb=window}catch{}function rI(t,e){if(typeof sb<"u"){var n=sb.__packages__=sb.__packages__||{};if(!n[t]||!j5[t]){j5[t]=e;var r=n[t]=n[t]||[];r.push(e)}}}rI("@fluentui/set-version","6.0.0");var bw=function(t,e){return bw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},bw(t,e)};function un(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");bw(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var U=function(){return U=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},U.apply(this,arguments)};function rl(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function jf(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function sa(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var E1={none:0,insertNode:1,appendChild:2},K5="__stylesheet__",Fj=typeof navigator<"u"&&/rv:11.0/.test(navigator.userAgent),Ih={};try{Ih=window||{}}catch{}var mh,Eo=function(){function t(e,n){var r,s,i,o,a,l;this._rules=[],this._preservedRules=[],this._counter=0,this._keyToClassName={},this._onInsertRuleCallbacks=[],this._onResetCallbacks=[],this._classNameToArgs={},this._config=U({injectionMode:typeof document>"u"?E1.none:E1.insertNode,defaultPrefix:"css",namespace:void 0,cspSettings:void 0},e),this._classNameToArgs=(r=n==null?void 0:n.classNameToArgs)!==null&&r!==void 0?r:this._classNameToArgs,this._counter=(s=n==null?void 0:n.counter)!==null&&s!==void 0?s:this._counter,this._keyToClassName=(o=(i=this._config.classNameCache)!==null&&i!==void 0?i:n==null?void 0:n.keyToClassName)!==null&&o!==void 0?o:this._keyToClassName,this._preservedRules=(a=n==null?void 0:n.preservedRules)!==null&&a!==void 0?a:this._preservedRules,this._rules=(l=n==null?void 0:n.rules)!==null&&l!==void 0?l:this._rules}return t.getInstance=function(){if(mh=Ih[K5],!mh||mh._lastStyleElement&&mh._lastStyleElement.ownerDocument!==document){var e=(Ih==null?void 0:Ih.FabricConfig)||{},n=new t(e.mergeStyles,e.serializedStylesheet);mh=n,Ih[K5]=n}return mh},t.prototype.serialize=function(){return JSON.stringify({classNameToArgs:this._classNameToArgs,counter:this._counter,keyToClassName:this._keyToClassName,preservedRules:this._preservedRules,rules:this._rules})},t.prototype.setConfig=function(e){this._config=U(U({},this._config),e)},t.prototype.onReset=function(e){var n=this;return this._onResetCallbacks.push(e),function(){n._onResetCallbacks=n._onResetCallbacks.filter(function(r){return r!==e})}},t.prototype.onInsertRule=function(e){var n=this;return this._onInsertRuleCallbacks.push(e),function(){n._onInsertRuleCallbacks=n._onInsertRuleCallbacks.filter(function(r){return r!==e})}},t.prototype.getClassName=function(e){var n=this._config.namespace,r=e||this._config.defaultPrefix;return"".concat(n?n+"-":"").concat(r,"-").concat(this._counter++)},t.prototype.cacheClassName=function(e,n,r,s){this._keyToClassName[n]=e,this._classNameToArgs[e]={args:r,rules:s}},t.prototype.classNameFromKey=function(e){return this._keyToClassName[e]},t.prototype.getClassNameCache=function(){return this._keyToClassName},t.prototype.argsFromClassName=function(e){var n=this._classNameToArgs[e];return n&&n.args},t.prototype.insertedRulesFromClassName=function(e){var n=this._classNameToArgs[e];return n&&n.rules},t.prototype.insertRule=function(e,n){var r=this._config.injectionMode,s=r!==E1.none?this._getStyleElement():void 0;if(n&&this._preservedRules.push(e),s)switch(r){case E1.insertNode:var i=s.sheet;try{i.insertRule(e,i.cssRules.length)}catch{}break;case E1.appendChild:s.appendChild(document.createTextNode(e));break}else this._rules.push(e);this._config.onInsertRule&&this._config.onInsertRule(e),this._onInsertRuleCallbacks.forEach(function(o){return o()})},t.prototype.getRules=function(e){return(e?this._preservedRules.join(""):"")+this._rules.join("")},t.prototype.reset=function(){this._rules=[],this._counter=0,this._classNameToArgs={},this._keyToClassName={},this._onResetCallbacks.forEach(function(e){return e()})},t.prototype.resetKeys=function(){this._keyToClassName={}},t.prototype._getStyleElement=function(){var e=this;return!this._styleElement&&typeof document<"u"&&(this._styleElement=this._createStyleElement(),Fj||window.requestAnimationFrame(function(){e._styleElement=void 0})),this._styleElement},t.prototype._createStyleElement=function(){var e=document.head,n=document.createElement("style"),r=null;n.setAttribute("data-merge-styles","true");var s=this._config.cspSettings;if(s&&s.nonce&&n.setAttribute("nonce",s.nonce),this._lastStyleElement)r=this._lastStyleElement.nextElementSibling;else{var i=this._findPlaceholderStyleTag();i?r=i.nextElementSibling:r=e.childNodes[0]}return e.insertBefore(n,e.contains(r)?r:null),this._lastStyleElement=n,n},t.prototype._findPlaceholderStyleTag=function(){var e=document.head;return e?e.querySelector("style[data-merge-styles]"):null},t}();function W8(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=[],r=[],s=Eo.getInstance();function i(o){for(var a=0,l=o;a<l.length;a++){var u=l[a];if(u)if(typeof u=="string")if(u.indexOf(" ")>=0)i(u.split(" "));else{var c=s.argsFromClassName(u);c?i(c):n.indexOf(u)===-1&&n.push(u)}else Array.isArray(u)?i(u):typeof u=="object"&&r.push(u)}}return i(t),{classes:n,objects:r}}function V8(t){Jh!==t&&(Jh=t)}function G8(){return Jh===void 0&&(Jh=typeof document<"u"&&!!document.documentElement&&document.documentElement.getAttribute("dir")==="rtl"),Jh}var Jh;Jh=G8();function rT(){return{rtl:G8()}}var q5={};function Oj(t,e){var n=t[e];n.charAt(0)!=="-"&&(t[e]=q5[n]=q5[n]||n.replace(/([A-Z])/g,"-$1").toLowerCase())}var Xy;function $j(){var t;if(!Xy){var e=typeof document<"u"?document:void 0,n=typeof navigator<"u"?navigator:void 0,r=(t=n==null?void 0:n.userAgent)===null||t===void 0?void 0:t.toLowerCase();e?Xy={isWebkit:!!(e&&"WebkitAppearance"in e.documentElement.style),isMoz:!!(r&&r.indexOf("firefox")>-1),isOpera:!!(r&&r.indexOf("opera")>-1),isMs:!!(n&&(/rv:11.0/i.test(n.userAgent)||/Edge\/\d./i.test(navigator.userAgent)))}:Xy={isWebkit:!0,isMoz:!0,isOpera:!0,isMs:!0}}return Xy}var X5={"user-select":1};function Lj(t,e){var n=$j(),r=t[e];if(X5[r]){var s=t[e+1];X5[r]&&(n.isWebkit&&t.push("-webkit-"+r,s),n.isMoz&&t.push("-moz-"+r,s),n.isMs&&t.push("-ms-"+r,s),n.isOpera&&t.push("-o-"+r,s))}}var Pj=["column-count","font-weight","flex","flex-grow","flex-shrink","fill-opacity","opacity","order","z-index","zoom"];function Mj(t,e){var n=t[e],r=t[e+1];if(typeof r=="number"){var s=Pj.indexOf(n)>-1,i=n.indexOf("--")>-1,o=s||i?"":"px";t[e+1]="".concat(r).concat(o)}}var Yy,yu="left",vu="right",Bj="@noflip",Y5=(Yy={},Yy[yu]=vu,Yy[vu]=yu,Yy),Q5={"w-resize":"e-resize","sw-resize":"se-resize","nw-resize":"ne-resize"};function zj(t,e,n){if(t.rtl){var r=e[n];if(!r)return;var s=e[n+1];if(typeof s=="string"&&s.indexOf(Bj)>=0)e[n+1]=s.replace(/\s*(?:\/\*\s*)?\@noflip\b(?:\s*\*\/)?\s*?/g,"");else if(r.indexOf(yu)>=0)e[n]=r.replace(yu,vu);else if(r.indexOf(vu)>=0)e[n]=r.replace(vu,yu);else if(String(s).indexOf(yu)>=0)e[n+1]=s.replace(yu,vu);else if(String(s).indexOf(vu)>=0)e[n+1]=s.replace(vu,yu);else if(Y5[r])e[n]=Y5[r];else if(Q5[s])e[n+1]=Q5[s];else switch(r){case"margin":case"padding":e[n+1]=Uj(s);break;case"box-shadow":e[n+1]=Hj(s,0);break}}}function Hj(t,e){var n=t.split(" "),r=parseInt(n[e],10);return n[0]=n[0].replace(String(r),String(r*-1)),n.join(" ")}function Uj(t){if(typeof t=="string"){var e=t.split(" ");if(e.length===4)return"".concat(e[0]," ").concat(e[3]," ").concat(e[2]," ").concat(e[1])}return t}function Wj(t){for(var e=[],n=0,r=0,s=0;s<t.length;s++)switch(t[s]){case"(":r++;break;case")":r&&r--;break;case"	":case" ":r||(s>n&&e.push(t.substring(n,s)),n=s+1);break}return n<t.length&&e.push(t.substring(n)),e}var Vj="displayName";function Gj(t){var e=t&&t["&"];return e?e.displayName:void 0}var j8=/\:global\((.+?)\)/g;function jj(t){if(!j8.test(t))return t;for(var e=[],n=/\:global\((.+?)\)/g,r=null;r=n.exec(t);)r[1].indexOf(",")>-1&&e.push([r.index,r.index+r[0].length,r[1].split(",").map(function(s){return":global(".concat(s.trim(),")")}).join(", ")]);return e.reverse().reduce(function(s,i){var o=i[0],a=i[1],l=i[2],u=s.slice(0,o),c=s.slice(a);return u+l+c},t)}function Z5(t,e){return t.indexOf(":global(")>=0?t.replace(j8,"$1"):t.indexOf(":")===0?e+t:t.indexOf("&")<0?e+" "+t:t}function J5(t,e,n,r){e===void 0&&(e={__order:[]}),n.indexOf("@")===0?(n=n+"{"+t,ef([r],e,n)):n.indexOf(",")>-1?jj(n).split(",").map(function(s){return s.trim()}).forEach(function(s){return ef([r],e,Z5(s,t))}):ef([r],e,Z5(n,t))}function ef(t,e,n){e===void 0&&(e={__order:[]}),n===void 0&&(n="&");var r=Eo.getInstance(),s=e[n];s||(s={},e[n]=s,e.__order.push(n));for(var i=0,o=t;i<o.length;i++){var a=o[i];if(typeof a=="string"){var l=r.argsFromClassName(a);l&&ef(l,e,n)}else if(Array.isArray(a))ef(a,e,n);else for(var u in a)if(a.hasOwnProperty(u)){var c=a[u];if(u==="selectors"){var d=a.selectors;for(var h in d)d.hasOwnProperty(h)&&J5(n,e,h,d[h])}else typeof c=="object"?c!==null&&J5(n,e,u,c):c!==void 0&&(u==="margin"||u==="padding"?Kj(s,u,c):s[u]=c)}}return e}function Kj(t,e,n){var r=typeof n=="string"?Wj(n):[n];r.length===0&&r.push(n),r[r.length-1]==="!important"&&(r=r.slice(0,-1).map(function(s){return s+" !important"})),t[e+"Top"]=r[0],t[e+"Right"]=r[1]||r[0],t[e+"Bottom"]=r[2]||r[0],t[e+"Left"]=r[3]||r[1]||r[0]}function qj(t,e){for(var n=[t.rtl?"rtl":"ltr"],r=!1,s=0,i=e.__order;s<i.length;s++){var o=i[s];n.push(o);var a=e[o];for(var l in a)a.hasOwnProperty(l)&&a[l]!==void 0&&(r=!0,n.push(l,a[l]))}return r?n.join(""):void 0}function K8(t,e){return e<=0?"":e===1?t:t+K8(t,e-1)}function sI(t,e){if(!e)return"";var n=[];for(var r in e)e.hasOwnProperty(r)&&r!==Vj&&e[r]!==void 0&&n.push(r,e[r]);for(var s=0;s<n.length;s+=2)Oj(n,s),Mj(n,s),zj(t,n,s),Lj(n,s);for(var s=1;s<n.length;s+=4)n.splice(s,1,":",n[s],";");return n.join("")}function q8(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=ef(e),s=qj(t,r);if(s){var i=Eo.getInstance(),o={className:i.classNameFromKey(s),key:s,args:e};if(!o.className){o.className=i.getClassName(Gj(r));for(var a=[],l=0,u=r.__order;l<u.length;l++){var c=u[l];a.push(c,sI(t,r[c]))}o.rulesToInsert=a}return o}}function X8(t,e){e===void 0&&(e=1);var n=Eo.getInstance(),r=t.className,s=t.key,i=t.args,o=t.rulesToInsert;if(o){for(var a=0;a<o.length;a+=2){var l=o[a+1];if(l){var u=o[a];u=u.replace(/&/g,K8(".".concat(t.className),e));var c="".concat(u,"{").concat(l,"}").concat(u.indexOf("@")===0?"}":"");n.insertRule(c)}}n.cacheClassName(r,s,i,o)}}function Xj(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=q8.apply(void 0,sa([t],e,!1));return r?(X8(r,t.specificityMultiplier),r.className):""}function Da(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Y8(t,rT())}function Y8(t,e){var n=t instanceof Array?t:[t],r=W8(n),s=r.classes,i=r.objects;return i.length&&s.push(Xj(e||{},i)),s.join(" ")}function sl(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t&&t.length===1&&t[0]&&!t[0].subComponentStyles)return t[0];for(var n={},r={},s=0,i=t;s<i.length;s++){var o=i[s];if(o){for(var a in o)if(o.hasOwnProperty(a)){if(a==="subComponentStyles"&&o.subComponentStyles!==void 0){var l=o.subComponentStyles;for(var u in l)l.hasOwnProperty(u)&&(r.hasOwnProperty(u)?r[u].push(l[u]):r[u]=[l[u]]);continue}var c=n[a],d=o[a];c===void 0?n[a]=d:n[a]=sa(sa([],Array.isArray(c)?c:[c],!0),Array.isArray(d)?d:[d],!0)}}}if(Object.keys(r).length>0){n.subComponentStyles={};var h=n.subComponentStyles,f=function(p){if(r.hasOwnProperty(p)){var m=r[p];h[p]=function(y){return sl.apply(void 0,m.map(function(g){return typeof g=="function"?g(y):g}))}}};for(var u in r)f(u)}return n}function Rg(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Q8(t,rT())}function Q8(t,e){var n={subComponentStyles:{}},r=t[0];if(!r&&t.length<=1)return{subComponentStyles:{}};var s=sl.apply(void 0,t),i=[];for(var o in s)if(s.hasOwnProperty(o)){if(o==="subComponentStyles"){n.subComponentStyles=s.subComponentStyles||{};continue}var a=s[o],l=W8(a),u=l.classes,c=l.objects;if(c!=null&&c.length){var d=q8(e||{},{displayName:o},c);d&&(i.push(d),n[o]=u.concat([d.className]).join(" "))}else n[o]=u.join(" ")}for(var h=0,f=i;h<f.length;h++){var d=f[h];d&&X8(d,e==null?void 0:e.specificityMultiplier)}return n}function Z8(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=[],s=0,i=e;s<i.length;s++){var o=i[s];o&&r.push(typeof o=="function"?o(t):o)}return r.length===1?r[0]:r.length?sl.apply(void 0,r):{}}function J8(t){var e=Eo.getInstance(),n=sI(rT(),t),r=e.classNameFromKey(n);if(!r){var s=e.getClassName();e.insertRule("@font-face{".concat(n,"}"),!0),e.cacheClassName(s,n,[],["font-face",n])}}function Wi(t){var e=Eo.getInstance(),n=[];for(var r in t)t.hasOwnProperty(r)&&n.push(r,"{",sI(rT(),t[r]),"}");var s=n.join(""),i=e.classNameFromKey(s);if(i)return i;var o=e.getClassName();return e.insertRule("@keyframes ".concat(o,"{").concat(s,"}"),!0),e.cacheClassName(o,s,[],["keyframes",s]),o}function Yj(t){var e={},n=function(s){if(t.hasOwnProperty(s)){var i;Object.defineProperty(e,s,{get:function(){return i===void 0&&(i=Da(t[s]).toString()),i},enumerable:!0,configurable:!0})}};for(var r in t)n(r);return e}function sT(){return typeof window<"u"&&!!(window.document&&window.document.createElement)}var Ew=void 0;try{Ew=window}catch{}function Sn(t){if(!(!sT()||typeof Ew>"u")){var e=t;return e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:Ew}}var Kf=function(){function t(e,n){this._timeoutIds=null,this._immediateIds=null,this._intervalIds=null,this._animationFrameIds=null,this._isDisposed=!1,this._parent=e||null,this._onErrorHandler=n,this._noop=function(){}}return t.prototype.dispose=function(){var e;if(this._isDisposed=!0,this._parent=null,this._timeoutIds){for(e in this._timeoutIds)this._timeoutIds.hasOwnProperty(e)&&this.clearTimeout(parseInt(e,10));this._timeoutIds=null}if(this._immediateIds){for(e in this._immediateIds)this._immediateIds.hasOwnProperty(e)&&this.clearImmediate(parseInt(e,10));this._immediateIds=null}if(this._intervalIds){for(e in this._intervalIds)this._intervalIds.hasOwnProperty(e)&&this.clearInterval(parseInt(e,10));this._intervalIds=null}if(this._animationFrameIds){for(e in this._animationFrameIds)this._animationFrameIds.hasOwnProperty(e)&&this.cancelAnimationFrame(parseInt(e,10));this._animationFrameIds=null}},t.prototype.setTimeout=function(e,n){var r=this,s=0;return this._isDisposed||(this._timeoutIds||(this._timeoutIds={}),s=setTimeout(function(){try{r._timeoutIds&&delete r._timeoutIds[s],e.apply(r._parent)}catch(i){r._logError(i)}},n),this._timeoutIds[s]=!0),s},t.prototype.clearTimeout=function(e){this._timeoutIds&&this._timeoutIds[e]&&(clearTimeout(e),delete this._timeoutIds[e])},t.prototype.setImmediate=function(e,n){var r=this,s=0,i=Sn(n);if(!this._isDisposed){this._immediateIds||(this._immediateIds={});var o=function(){try{r._immediateIds&&delete r._immediateIds[s],e.apply(r._parent)}catch(a){r._logError(a)}};s=i.setTimeout(o,0),this._immediateIds[s]=!0}return s},t.prototype.clearImmediate=function(e,n){var r=Sn(n);this._immediateIds&&this._immediateIds[e]&&(r.clearTimeout(e),delete this._immediateIds[e])},t.prototype.setInterval=function(e,n){var r=this,s=0;return this._isDisposed||(this._intervalIds||(this._intervalIds={}),s=setInterval(function(){try{e.apply(r._parent)}catch(i){r._logError(i)}},n),this._intervalIds[s]=!0),s},t.prototype.clearInterval=function(e){this._intervalIds&&this._intervalIds[e]&&(clearInterval(e),delete this._intervalIds[e])},t.prototype.throttle=function(e,n,r){var s=this;if(this._isDisposed)return this._noop;var i=n||0,o=!0,a=!0,l=0,u,c,d=null;r&&typeof r.leading=="boolean"&&(o=r.leading),r&&typeof r.trailing=="boolean"&&(a=r.trailing);var h=function(p){var m=Date.now(),y=m-l,g=o?i-y:i;return y>=i&&(!p||o)?(l=m,d&&(s.clearTimeout(d),d=null),u=e.apply(s._parent,c)):d===null&&a&&(d=s.setTimeout(h,g)),u},f=function(){for(var p=[],m=0;m<arguments.length;m++)p[m]=arguments[m];return c=p,h(!0)};return f},t.prototype.debounce=function(e,n,r){var s=this;if(this._isDisposed){var i=function(){};return i.cancel=function(){},i.flush=function(){return null},i.pending=function(){return!1},i}var o=n||0,a=!1,l=!0,u=null,c=0,d=Date.now(),h,f,p=null;r&&typeof r.leading=="boolean"&&(a=r.leading),r&&typeof r.trailing=="boolean"&&(l=r.trailing),r&&typeof r.maxWait=="number"&&!isNaN(r.maxWait)&&(u=r.maxWait);var m=function(x){p&&(s.clearTimeout(p),p=null),d=x},y=function(x){m(x),h=e.apply(s._parent,f)},g=function(x){var C=Date.now(),S=!1;x&&(a&&C-c>=o&&(S=!0),c=C);var N=C-c,I=o-N,F=C-d,L=!1;return u!==null&&(F>=u&&p?L=!0:I=Math.min(I,u-F)),N>=o||L||S?y(C):(p===null||!x)&&l&&(p=s.setTimeout(g,I)),h},v=function(){return!!p},E=function(){v()&&m(Date.now())},b=function(){return v()&&y(Date.now()),h},T=function(){for(var x=[],C=0;C<arguments.length;C++)x[C]=arguments[C];return f=x,g(!0)};return T.cancel=E,T.flush=b,T.pending=v,T},t.prototype.requestAnimationFrame=function(e,n){var r=this,s=0,i=Sn(n);if(!this._isDisposed){this._animationFrameIds||(this._animationFrameIds={});var o=function(){try{r._animationFrameIds&&delete r._animationFrameIds[s],e.apply(r._parent)}catch(a){r._logError(a)}};s=i.requestAnimationFrame?i.requestAnimationFrame(o):i.setTimeout(o,0),this._animationFrameIds[s]=!0}return s},t.prototype.cancelAnimationFrame=function(e,n){var r=Sn(n);this._animationFrameIds&&this._animationFrameIds[e]&&(r.cancelAnimationFrame?r.cancelAnimationFrame(e):r.clearTimeout(e),delete this._animationFrameIds[e])},t.prototype._logError=function(e){this._onErrorHandler&&this._onErrorHandler(e)},t}();function iI(t,e){if(!t||!e)return!t&&!e;for(var n in t)if(t.hasOwnProperty(n)&&(!e.hasOwnProperty(n)||e[n]!==t[n]))return!1;for(var n in e)if(e.hasOwnProperty(n)&&!t.hasOwnProperty(n))return!1;return!0}function jc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return Qj.apply(this,[null,t].concat(e))}function Qj(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];e=e||{};for(var s=0,i=n;s<i.length;s++){var o=i[s];if(o)for(var a in o)o.hasOwnProperty(a)&&(!t||t(a))&&(e[a]=o[a])}return e}var ro=function(){function t(e){this._id=t._uniqueId++,this._parent=e,this._eventRecords=[]}return t.raise=function(e,n,r,s){var i;if(t._isElement(e)){if(typeof document<"u"&&document.createEvent){var o=document.createEvent("HTMLEvents");o.initEvent(n,s||!1,!0),jc(o,r),i=e.dispatchEvent(o)}else if(typeof document<"u"&&document.createEventObject){var a=document.createEventObject(r);e.fireEvent("on"+n,a)}}else for(;e&&i!==!1;){var l=e.__events__,u=l?l[n]:null;if(u){for(var c in u)if(u.hasOwnProperty(c))for(var d=u[c],h=0;i!==!1&&h<d.length;h++){var f=d[h];f.objectCallback&&(i=f.objectCallback.call(f.parent,r))}}e=s?e.parent:null}return i},t.isObserved=function(e,n){var r=e&&e.__events__;return!!r&&!!r[n]},t.isDeclared=function(e,n){var r=e&&e.__declaredEvents;return!!r&&!!r[n]},t.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},t._isElement=function(e){return!!e&&(!!e.addEventListener||typeof HTMLElement<"u"&&e instanceof HTMLElement)},t.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this.off(),this._parent=null)},t.prototype.onAll=function(e,n,r){for(var s in n)n.hasOwnProperty(s)&&this.on(e,s,n[s],r)},t.prototype.on=function(e,n,r,s){var i=this;if(n.indexOf(",")>-1)for(var o=n.split(/[ ,]+/),a=0;a<o.length;a++)this.on(e,o[a],r,s);else{var l=this._parent,u={target:e,eventName:n,parent:l,callback:r,options:s},o=e.__events__=e.__events__||{};if(o[n]=o[n]||{count:0},o[n][this._id]=o[n][this._id]||[],o[n][this._id].push(u),o[n].count++,t._isElement(e)){var c=function(){for(var f=[],p=0;p<arguments.length;p++)f[p]=arguments[p];if(!i._isDisposed){var m;try{if(m=r.apply(l,f),m===!1&&f[0]){var y=f[0];y.preventDefault&&y.preventDefault(),y.stopPropagation&&y.stopPropagation(),y.cancelBubble=!0}}catch{}return m}};u.elementCallback=c,e.addEventListener?e.addEventListener(n,c,s):e.attachEvent&&e.attachEvent("on"+n,c)}else{var d=function(){for(var f=[],p=0;p<arguments.length;p++)f[p]=arguments[p];if(!i._isDisposed)return r.apply(l,f)};u.objectCallback=d}this._eventRecords.push(u)}},t.prototype.off=function(e,n,r,s){for(var i=0;i<this._eventRecords.length;i++){var o=this._eventRecords[i];if((!e||e===o.target)&&(!n||n===o.eventName)&&(!r||r===o.callback)&&(typeof s!="boolean"||s===o.options)){var a=o.target.__events__,l=a[o.eventName],u=l?l[this._id]:null;u&&(u.length===1||!r?(l.count-=u.length,delete a[o.eventName][this._id]):(l.count--,u.splice(u.indexOf(o),1)),l.count||delete a[o.eventName]),o.elementCallback&&(o.target.removeEventListener?o.target.removeEventListener(o.eventName,o.elementCallback,o.options):o.target.detachEvent&&o.target.detachEvent("on"+o.eventName,o.elementCallback)),this._eventRecords.splice(i--,1)}}},t.prototype.raise=function(e,n,r){return t.raise(this._parent,e,n,r)},t.prototype.declare=function(e){var n=this._parent.__declaredEvents=this._parent.__declaredEvents||{};if(typeof e=="string")n[e]=!0;else for(var r=0;r<e.length;r++)n[e[r]]=!0},t._uniqueId=0,t}();function Ps(t){if(!(!sT()||typeof document>"u")){var e=t;return e&&e.ownerDocument?e.ownerDocument:document}}var y2,um=0,e$=Da({overflow:"hidden !important"}),e4="data-is-scrollable",Zj=function(t,e){if(t){var n=0,r=null,s=function(o){o.targetTouches.length===1&&(n=o.targetTouches[0].clientY)},i=function(o){if(o.targetTouches.length===1&&(o.stopPropagation(),!!r)){var a=o.targetTouches[0].clientY-n,l=oI(o.target);l&&(r=l),r.scrollTop===0&&a>0&&o.preventDefault(),r.scrollHeight-Math.ceil(r.scrollTop)<=r.clientHeight&&a<0&&o.preventDefault()}};e.on(t,"touchstart",s,{passive:!1}),e.on(t,"touchmove",i,{passive:!1}),r=t}},Jj=function(t,e){if(t){var n=function(r){r.stopPropagation()};e.on(t,"touchmove",n,{passive:!1})}},t$=function(t){t.preventDefault()};function eK(){var t=Ps();t&&t.body&&!um&&(t.body.classList.add(e$),t.body.addEventListener("touchmove",t$,{passive:!1,capture:!1})),um++}function tK(){if(um>0){var t=Ps();t&&t.body&&um===1&&(t.body.classList.remove(e$),t.body.removeEventListener("touchmove",t$)),um--}}function nK(){if(y2===void 0){var t=document.createElement("div");t.style.setProperty("width","100px"),t.style.setProperty("height","100px"),t.style.setProperty("overflow","scroll"),t.style.setProperty("position","absolute"),t.style.setProperty("top","-9999px"),document.body.appendChild(t),y2=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return y2}function oI(t){for(var e=t,n=Ps(t);e&&e!==n.body;){if(e.getAttribute(e4)==="true")return e;e=e.parentElement}for(e=t;e&&e!==n.body;){if(e.getAttribute(e4)!=="false"){var r=getComputedStyle(e),s=r?r.getPropertyValue("overflow-y"):"";if(s&&(s==="scroll"||s==="auto"))return e}e=e.parentElement}return(!e||e===n.body)&&(e=Sn(t)),e}var rK=void 0;function aI(t){console&&console.warn&&console.warn(t)}function n$(t,e,n,r,s){if(s===!0&&!1)for(var i,o;i<o.length;i++)var a}(function(t){un(e,t);function e(n,r){var s=t.call(this,n,r)||this;return sK(s,e.prototype,["componentDidMount","shouldComponentUpdate","getSnapshotBeforeUpdate","render","componentDidUpdate","componentWillUnmount"]),s}return e.prototype.componentDidUpdate=function(n,r){this._updateComponentRef(n,this.props)},e.prototype.componentDidMount=function(){this._setComponentRef(this.props.componentRef,this)},e.prototype.componentWillUnmount=function(){if(this._setComponentRef(this.props.componentRef,null),this.__disposables){for(var n=0,r=this._disposables.length;n<r;n++){var s=this.__disposables[n];s.dispose&&s.dispose()}this.__disposables=null}},Object.defineProperty(e.prototype,"className",{get:function(){if(!this.__className){var n=/function (.{1,})\(/,r=n.exec(this.constructor.toString());this.__className=r&&r.length>1?r[1]:""}return this.__className},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_disposables",{get:function(){return this.__disposables||(this.__disposables=[]),this.__disposables},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_async",{get:function(){return this.__async||(this.__async=new Kf(this),this._disposables.push(this.__async)),this.__async},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_events",{get:function(){return this.__events||(this.__events=new ro(this),this._disposables.push(this.__events)),this.__events},enumerable:!1,configurable:!0}),e.prototype._resolveRef=function(n){var r=this;return this.__resolves||(this.__resolves={}),this.__resolves[n]||(this.__resolves[n]=function(s){return r[n]=s}),this.__resolves[n]},e.prototype._updateComponentRef=function(n,r){r===void 0&&(r={}),n&&r&&n.componentRef!==r.componentRef&&(this._setComponentRef(n.componentRef,null),this._setComponentRef(r.componentRef,this))},e.prototype._warnDeprecations=function(n){this.className,this.props},e.prototype._warnMutuallyExclusive=function(n){this.className,this.props},e.prototype._warnConditionallyRequiredProps=function(n,r,s){n$(this.className,this.props,n,r,s)},e.prototype._setComponentRef=function(n,r){!this._skipComponentRefResolution&&n&&(typeof n=="function"&&n(r),typeof n=="object"&&(n.current=r))},e})(w.Component);function sK(t,e,n){for(var r=0,s=n.length;r<s;r++)iK(t,e,n[r])}function iK(t,e,n){var r=t[n],s=e[n];(r||s)&&(t[n]=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a;return s&&(a=s.apply(this,i)),r!==s&&(a=r.apply(this,i)),a})}function mf(){return null}var r$=function(t){un(e,t);function e(n){var r=t.call(this,n)||this;return r.state={isRendered:Sn()===void 0},r}return e.prototype.componentDidMount=function(){var n=this,r=this.props.delay;this._timeoutId=window.setTimeout(function(){n.setState({isRendered:!0})},r)},e.prototype.componentWillUnmount=function(){this._timeoutId&&clearTimeout(this._timeoutId)},e.prototype.render=function(){return this.state.isRendered?w.Children.only(this.props.children):null},e.defaultProps={delay:0},e}(w.Component),v2="__globalSettings__",lI="__callbacks__",oK=0,s$=function(){function t(){}return t.getValue=function(e,n){var r=Tw();return r[e]===void 0&&(r[e]=typeof n=="function"?n():n),r[e]},t.setValue=function(e,n){var r=Tw(),s=r[lI],i=r[e];if(n!==i){r[e]=n;var o={oldValue:i,value:n,key:e};for(var a in s)s.hasOwnProperty(a)&&s[a](o)}return n},t.addChangeListener=function(e){var n=e.__id__,r=t4();n||(n=e.__id__=String(oK++)),r[n]=e},t.removeChangeListener=function(e){var n=t4();delete n[e.__id__]},t}();function Tw(){var t,e=Sn(),n=e||{};return n[v2]||(n[v2]=(t={},t[lI]={},t)),n[v2]}function t4(){var t=Tw();return t[lI]}var je={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pauseBreak:19,capslock:20,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,del:46,zero:48,one:49,two:50,three:51,four:52,five:53,six:54,seven:55,eight:56,nine:57,colon:58,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,leftWindow:91,rightWindow:92,select:93,zero_numpad:96,one_numpad:97,two_numpad:98,three_numpad:99,four_numpad:100,five_numpad:101,six_numpad:102,seven_numpad:103,eight_numpad:104,nine_numpad:105,multiply:106,add:107,subtract:109,decimalPoint:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrollLock:145,semicolon:186,equalSign:187,comma:188,dash:189,period:190,forwardSlash:191,graveAccent:192,openBracket:219,backSlash:220,closeBracket:221,singleQuote:222},za=function(){function t(e,n,r,s){e===void 0&&(e=0),n===void 0&&(n=0),r===void 0&&(r=0),s===void 0&&(s=0),this.top=r,this.bottom=s,this.left=e,this.right=n}return Object.defineProperty(t.prototype,"width",{get:function(){return this.right-this.left},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.bottom-this.top},enumerable:!1,configurable:!0}),t.prototype.equals=function(e){return parseFloat(this.top.toFixed(4))===parseFloat(e.top.toFixed(4))&&parseFloat(this.bottom.toFixed(4))===parseFloat(e.bottom.toFixed(4))&&parseFloat(this.left.toFixed(4))===parseFloat(e.left.toFixed(4))&&parseFloat(this.right.toFixed(4))===parseFloat(e.right.toFixed(4))},t}();function aK(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.length<2?e[0]:function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];e.forEach(function(i){return i&&i.apply(t,r)})}}function Fg(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.filter(function(r){return r}).join(" ").trim();return n===""?void 0:n}function lK(t,e,n){n===void 0&&(n=0);for(var r=-1,s=n;t&&s<t.length;s++)if(e(t[s],s)){r=s;break}return r}function uK(t,e,n){var r=t.slice();return r.splice(e,0,n),r}function cK(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function i$(t){var e=null;try{var n=Sn();e=n?n.sessionStorage.getItem(t):null}catch{}return e}function dK(t,e){var n;try{(n=Sn())===null||n===void 0||n.sessionStorage.setItem(t,e)}catch{}}var o$="isRTL",bl;function As(t){if(t===void 0&&(t={}),t.rtl!==void 0)return t.rtl;if(bl===void 0){var e=i$(o$);e!==null&&(bl=e==="1",hK(bl));var n=Ps();bl===void 0&&n&&(bl=(n.body&&n.body.getAttribute("dir")||n.documentElement.getAttribute("dir"))==="rtl",V8(bl))}return!!bl}function hK(t,e){e===void 0&&(e=!1);var n=Ps();n&&n.documentElement.setAttribute("dir",t?"rtl":"ltr"),e&&dK(o$,t?"1":"0"),bl=t,V8(bl)}function fK(t){return t&&!!t._virtual}function pK(t){var e;return t&&fK(t)&&(e=t._virtual.parent),e}function Vo(t,e){return e===void 0&&(e=!0),t&&(e&&pK(t)||t.parentNode&&t.parentNode)}function oi(t,e,n){n===void 0&&(n=!0);var r=!1;if(t&&e)if(n)if(t===e)r=!0;else for(r=!1;e;){var s=Vo(e);if(s===t){r=!0;break}e=s}else t.contains&&(r=t.contains(e));return r}function uI(t,e){return!t||t===document.body?null:e(t)?t:uI(Vo(t),e)}function mK(t,e){var n=uI(t,function(r){return r.hasAttribute(e)});return n&&n.getAttribute(e)}var xw="data-portal-element";function gK(t){t.setAttribute(xw,"true")}function a$(t,e){var n=uI(t,function(r){return e===r||r.hasAttribute(xw)});return n!==null&&n.hasAttribute(xw)}function yK(t,e){var n=t,r=e;n._virtual||(n._virtual={children:[]});var s=n._virtual.parent;if(s&&s!==e){var i=s._virtual.children.indexOf(n);i>-1&&s._virtual.children.splice(i,1)}n._virtual.parent=r||void 0,r&&(r._virtual||(r._virtual={children:[]}),r._virtual.children.push(n))}var vK="data-is-focusable",bK="data-is-visible",EK="data-focuszone-id",TK="data-is-sub-focuszone";function xK(t,e,n){return ws(t,e,!0,!1,!1,n)}function CK(t,e,n){return ri(t,e,!0,!1,!0,n)}function SK(t,e,n,r){return r===void 0&&(r=!0),ws(t,e,r,!1,!1,n,!1,!0)}function wK(t,e,n,r){return r===void 0&&(r=!0),ri(t,e,r,!1,!0,n,!1,!0)}function _K(t,e){var n=ws(t,t,!0,!1,!1,!0,void 0,void 0,e);return n?(c$(n),!0):!1}function ri(t,e,n,r,s,i,o,a){if(!e||!o&&e===t)return null;var l=iT(e);if(s&&l&&(i||!(El(e)||cI(e)))){var u=ri(t,e.lastElementChild,!0,!0,!0,i,o,a);if(u){if(a&&ka(u,!0)||!a)return u;var c=ri(t,u.previousElementSibling,!0,!0,!0,i,o,a);if(c)return c;for(var d=u.parentElement;d&&d!==e;){var h=ri(t,d.previousElementSibling,!0,!0,!0,i,o,a);if(h)return h;d=d.parentElement}}}if(n&&l&&ka(e,a))return e;var f=ri(t,e.previousElementSibling,!0,!0,!0,i,o,a);return f||(r?null:ri(t,e.parentElement,!0,!1,!1,i,o,a))}function ws(t,e,n,r,s,i,o,a,l){if(!e||e===t&&s&&!o)return null;var u=l?l$:iT,c=u(e);if(n&&c&&ka(e,a))return e;if(!s&&c&&(i||!(El(e)||cI(e)))){var d=ws(t,e.firstElementChild,!0,!0,!1,i,o,a,l);if(d)return d}if(e===t)return null;var h=ws(t,e.nextElementSibling,!0,!0,!1,i,o,a,l);return h||(r?null:ws(t,e.parentElement,!1,!1,!0,i,o,a,l))}function iT(t){if(!t||!t.getAttribute)return!1;var e=t.getAttribute(bK);return e!=null?e==="true":t.offsetHeight!==0||t.offsetParent!==null||t.isVisible===!0}function l$(t){return!!t&&iT(t)&&!t.hidden&&window.getComputedStyle(t).visibility!=="hidden"}function ka(t,e){if(!t||t.disabled)return!1;var n=0,r=null;t&&t.getAttribute&&(r=t.getAttribute("tabIndex"),r&&(n=parseInt(r,10)));var s=t.getAttribute?t.getAttribute(vK):null,i=r!==null&&n>=0,o=!!t&&s!=="false"&&(t.tagName==="A"||t.tagName==="BUTTON"||t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.tagName==="SELECT"||s==="true"||i);return e?n!==-1&&o:o}function El(t){return!!(t&&t.getAttribute&&t.getAttribute(EK))}function cI(t){return!!(t&&t.getAttribute&&t.getAttribute(TK)==="true")}function kK(t){var e=Ps(t),n=e&&e.activeElement;return!!(n&&oi(t,n))}function u$(t,e){return mK(t,e)!=="true"}var gh=void 0;function c$(t){if(t){if(gh){gh=t;return}gh=t;var e=Sn(t);e&&e.requestAnimationFrame(function(){gh&&gh.focus(),gh=void 0})}}function IK(t,e){for(var n=t,r=0,s=e;r<s.length;r++){var i=s[r],o=n.children[Math.min(i,n.children.length-1)];if(!o)break;n=o}return n=ka(n)&&iT(n)?n:ws(t,n,!0)||ri(t,n),n}function NK(t,e){for(var n=[];e&&t&&e!==t;){var r=Vo(e,!0);if(r===null)return[];n.unshift(Array.prototype.indexOf.call(r.children,e)),e=r}return n}function Ra(t,e,n,r){return t.addEventListener(e,n,r),function(){return t.removeEventListener(e,n,r)}}var AK=50,DK=5,ib=0,b2=Eo.getInstance();b2&&b2.onReset&&b2.onReset(function(){return ib++});var Qy="__retval__";function Sr(t){t===void 0&&(t={});var e=new Map,n=0,r=0,s=ib,i=function(o,a){var l;if(a===void 0&&(a={}),t.useStaticStyles&&typeof o=="function"&&o.__noStyleOverride__)return o(a);r++;var u=e,c=a.theme,d=c&&c.rtl!==void 0?c.rtl:As(),h=t.disableCaching;if(s!==ib&&(s=ib,e=new Map,n=0),t.disableCaching||(u=n4(e,o),u=n4(u,a)),(h||!u[Qy])&&(o===void 0?u[Qy]={}:u[Qy]=Q8([typeof o=="function"?o(a):o],{rtl:!!d,specificityMultiplier:t.useStaticStyles?DK:void 0}),h||n++),n>(t.cacheSize||AK)){var f=Sn();!((l=f==null?void 0:f.FabricConfig)===null||l===void 0)&&l.enableClassNameCacheFullWarning&&(console.warn("Styles are being recalculated too frequently. Cache miss rate is ".concat(n,"/").concat(r,".")),console.trace()),e.clear(),n=0,t.disableCaching=!0}return u[Qy]};return i}function E2(t,e){return e=RK(e),t.has(e)||t.set(e,new Map),t.get(e)}function n4(t,e){if(typeof e=="function"){var n=e.__cachedInputs__;if(n)for(var r=0,s=e.__cachedInputs__;r<s.length;r++){var i=s[r];t=E2(t,i)}else t=E2(t,e)}else if(typeof e=="object")for(var o in e)e.hasOwnProperty(o)&&(t=E2(t,e[o]));return t}function RK(t){switch(t){case void 0:return"__undefined__";case null:return"__null__";default:return t}}var r4=!1,ob=0,FK={empty:!0},T2={},Fm=typeof WeakMap>"u"?null:WeakMap;function OK(){ob++}function Un(t,e,n){if(e===void 0&&(e=100),n===void 0&&(n=!1),!Fm)return t;if(!r4){var r=Eo.getInstance();r&&r.onReset&&Eo.getInstance().onReset(OK),r4=!0}var s,i=0,o=ob;return function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];var c=s;(s===void 0||o!==ob||e>0&&i>e)&&(s=s4(),i=0,o=ob),c=s;for(var d=0;d<l.length;d++){var h=$K(l[d]);c.map.has(h)||c.map.set(h,s4()),c=c.map.get(h)}return c.hasOwnProperty("value")||(c.value=t.apply(void 0,l),i++),n&&(c.value===null||c.value===void 0)&&(c.value=t.apply(void 0,l)),c.value}}function gf(t){if(!Fm)return t;var e=new Fm;function n(r){if(!r||typeof r!="function"&&typeof r!="object")return t(r);if(e.has(r))return e.get(r);var s=t(r);return e.set(r,s),s}return n}function $K(t){if(t){if(typeof t=="object"||typeof t=="function")return t;T2[t]||(T2[t]={val:t})}else return FK;return T2[t]}function s4(){return{map:Fm?new Fm:null}}function LK(t){var e=t,n=gf(function(r){if(t===r)throw new Error("Attempted to compose a component with itself.");var s=r,i=gf(function(a){var l=function(u){return w.createElement(s,U({},u,{defaultRender:a}))};return l}),o=function(a){var l=a.defaultRender;return w.createElement(e,U({},a,{defaultRender:l?i(l):s}))};return o});return n}var PK=gf(LK);function MK(t,e){return PK(t)(e)}function BK(t,e){return t[e]!==void 0&&t[e]!==null}function Fs(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],r=0,s=t;r<s.length;r++){var i=s[r];if(i)if(typeof i=="string")n.push(i);else if(i.hasOwnProperty("toString")&&typeof i.toString=="function")n.push(i.toString());else for(var o in i)i[o]&&n.push(o)}return n.join(" ")}var zK="customizations",HK={settings:{},scopedSettings:{},inCustomizerContext:!1},lu=s$.getValue(zK,{settings:{},scopedSettings:{},inCustomizerContext:!1}),Zy=[],mo=function(){function t(){}return t.reset=function(){lu.settings={},lu.scopedSettings={}},t.applySettings=function(e){lu.settings=U(U({},lu.settings),e),t._raiseChange()},t.applyScopedSettings=function(e,n){lu.scopedSettings[e]=U(U({},lu.scopedSettings[e]),n),t._raiseChange()},t.getSettings=function(e,n,r){r===void 0&&(r=HK);for(var s={},i=n&&r.scopedSettings[n]||{},o=n&&lu.scopedSettings[n]||{},a=0,l=e;a<l.length;a++){var u=l[a];s[u]=i[u]||r.settings[u]||o[u]||lu.settings[u]}return s},t.applyBatchedUpdates=function(e,n){t._suppressUpdates=!0;try{e()}catch{}t._suppressUpdates=!1,n||t._raiseChange()},t.observe=function(e){Zy.push(e)},t.unobserve=function(e){Zy=Zy.filter(function(n){return n!==e})},t._raiseChange=function(){t._suppressUpdates||Zy.forEach(function(e){return e()})},t}(),Om=w.createContext({customizations:{inCustomizerContext:!1,settings:{},scopedSettings:{}}});function UK(t,e){t===void 0&&(t={});var n=d$(e)?e:VK(e);return n(t)}function WK(t,e){t===void 0&&(t={});var n=d$(e)?e:GK(e);return n(t)}function d$(t){return typeof t=="function"}function VK(t){return function(e){return t?U(U({},e),t):e}}function GK(t){return t===void 0&&(t={}),function(e){var n=U({},e);for(var r in t)t.hasOwnProperty(r)&&(n[r]=U(U({},e[r]),t[r]));return n}}function jK(t,e){var n=(e||{}).customizations,r=n===void 0?{settings:{},scopedSettings:{}}:n;return{customizations:{settings:UK(r.settings,t.settings),scopedSettings:WK(r.scopedSettings,t.scopedSettings),inCustomizerContext:!0}}}var KK=function(t){un(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._onCustomizationChange=function(){return n.forceUpdate()},n}return e.prototype.componentDidMount=function(){mo.observe(this._onCustomizationChange)},e.prototype.componentWillUnmount=function(){mo.unobserve(this._onCustomizationChange)},e.prototype.render=function(){var n=this,r=this.props.contextTransform;return w.createElement(Om.Consumer,null,function(s){var i=jK(n.props,s);return r&&(i=r(i)),w.createElement(Om.Provider,{value:i},n.props.children)})},e}(w.Component);function h$(t,e){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function oT(t,e,n){return function(s){var i,o=(i=function(a){un(l,a);function l(u){var c=a.call(this,u)||this;return c._styleCache={},c._onSettingChanged=c._onSettingChanged.bind(c),c}return l.prototype.componentDidMount=function(){mo.observe(this._onSettingChanged)},l.prototype.componentWillUnmount=function(){mo.unobserve(this._onSettingChanged)},l.prototype.render=function(){var u=this;return w.createElement(Om.Consumer,null,function(c){var d=mo.getSettings(e,t,c.customizations),h=u.props;if(d.styles&&typeof d.styles=="function"&&(d.styles=d.styles(U(U({},d),h))),n&&d.styles){if(u._styleCache.default!==d.styles||u._styleCache.component!==h.styles){var f=sl(d.styles,h.styles);u._styleCache.default=d.styles,u._styleCache.component=h.styles,u._styleCache.merged=f}return w.createElement(s,U({},d,h,{styles:u._styleCache.merged}))}return w.createElement(s,U({},d,h))})},l.prototype._onSettingChanged=function(){this.forceUpdate()},l}(w.Component),i.displayName="Customized"+t,i);return h$(s,o)}}function qK(t,e){var n=XK(),r=w.useContext(Om).customizations,s=r.inCustomizerContext;return w.useEffect(function(){return s||mo.observe(n),function(){s||mo.unobserve(n)}},[s]),mo.getSettings(t,e,r)}function XK(){var t=w.useState(0),e=t[1];return function(){return e(function(n){return++n})}}function YK(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=aK(t,t[n],e[n]))}var Fb="__currentId__",QK="id__",Ob=Sn()||{};Ob[Fb]===void 0&&(Ob[Fb]=0);var i4=!1;function Ds(t){if(!i4){var e=Eo.getInstance();e&&e.onReset&&e.onReset(ZK),i4=!0}var n=Ob[Fb]++;return(t===void 0?QK:t)+n}function ZK(t){t===void 0&&(t=0),Ob[Fb]=t}var qn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n={},r=0,s=t;r<s.length;r++)for(var i=s[r],o=Array.isArray(i)?i:Object.keys(i),a=0,l=o;a<l.length;a++){var u=l[a];n[u]=1}return n},JK=qn(["onCopy","onCut","onPaste","onCompositionEnd","onCompositionStart","onCompositionUpdate","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onInput","onSubmit","onLoad","onError","onKeyDown","onKeyDownCapture","onKeyPress","onKeyUp","onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting","onClick","onClickCapture","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onMouseUpCapture","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onScroll","onWheel","onPointerCancel","onPointerDown","onPointerEnter","onPointerLeave","onPointerMove","onPointerOut","onPointerOver","onPointerUp","onGotPointerCapture","onLostPointerCapture"]),eq=qn(["accessKey","children","className","contentEditable","dir","draggable","hidden","htmlFor","id","lang","ref","role","style","tabIndex","title","translate","spellCheck","name"]),Wn=qn(eq,JK);qn(Wn,["form"]);var tq=qn(Wn,["height","loop","muted","preload","src","width"]);qn(tq,["poster"]);qn(Wn,["start"]);qn(Wn,["value"]);var f$=qn(Wn,["download","href","hrefLang","media","rel","target","type"]),yd=qn(Wn,["autoFocus","disabled","form","formAction","formEncType","formMethod","formNoValidate","formTarget","type","value"]),p$=qn(yd,["accept","alt","autoCapitalize","autoComplete","checked","dirname","form","height","inputMode","list","max","maxLength","min","minLength","multiple","pattern","placeholder","readOnly","required","src","step","size","type","value","width"]),nq=qn(yd,["autoCapitalize","cols","dirname","form","maxLength","minLength","placeholder","readOnly","required","rows","wrap"]);qn(yd,["form","multiple","required"]);qn(Wn,["selected","value"]);qn(Wn,["cellPadding","cellSpacing"]);qn(Wn,["rowSpan","scope"]);qn(Wn,["colSpan","headers","rowSpan","scope"]);qn(Wn,["span"]);qn(Wn,["span"]);qn(Wn,["acceptCharset","action","encType","encType","method","noValidate","target"]);qn(Wn,["allow","allowFullScreen","allowPaymentRequest","allowTransparency","csp","height","importance","referrerPolicy","sandbox","src","srcDoc","width"]);var rq=qn(Wn,["alt","crossOrigin","height","src","srcSet","useMap","width"]),jl=Wn;function yn(t,e,n){for(var r=Array.isArray(e),s={},i=Object.keys(t),o=0,a=i;o<a.length;o++){var l=a[o],u=!r&&e[l]||r&&e.indexOf(l)>=0||l.indexOf("data-")===0||l.indexOf("aria-")===0;u&&(!n||(n==null?void 0:n.indexOf(l))===-1)&&(s[l]=t[l])}return s}var sq=["setState","render","componentWillMount","UNSAFE_componentWillMount","componentDidMount","componentWillReceiveProps","UNSAFE_componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","getSnapshotBeforeUpdate","UNSAFE_componentWillUpdate","componentDidUpdate","componentWillUnmount"];function iq(t,e,n){n===void 0&&(n=sq);var r=[],s=function(o){typeof e[o]=="function"&&t[o]===void 0&&(!n||n.indexOf(o)===-1)&&(r.push(o),t[o]=function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];e[o].apply(e,a)})};for(var i in e)s(i);return r}function oq(t,e){e.forEach(function(n){return delete t[n]})}function Kl(t){YK(t,{componentDidMount:aq,componentDidUpdate:lq,componentWillUnmount:uq})}function aq(){$b(this.props.componentRef,this)}function lq(t){t.componentRef!==this.props.componentRef&&($b(t.componentRef,null),$b(this.props.componentRef,this))}function uq(){$b(this.props.componentRef,null)}function $b(t,e){t&&(typeof t=="object"?t.current=e:typeof t=="function"&&t(e))}var Fo,cq=(Fo={},Fo[je.up]=1,Fo[je.down]=1,Fo[je.left]=1,Fo[je.right]=1,Fo[je.home]=1,Fo[je.end]=1,Fo[je.tab]=1,Fo[je.pageUp]=1,Fo[je.pageDown]=1,Fo);function m$(t){return!!cq[t]}var as="ms-Fabric--isFocusVisible",o4="ms-Fabric--isFocusHidden";function a4(t,e){t&&(t.classList.add(e?as:o4),t.classList.remove(e?o4:as))}function ld(t,e,n){var r;n?n.forEach(function(s){return a4(s.current,t)}):a4((r=Sn(e))===null||r===void 0?void 0:r.document.body,t)}var l4=new WeakMap,u4=new WeakMap;function c4(t,e){var n,r=l4.get(t);return r?n=r+e:n=1,l4.set(t,n),n}function dq(t){var e=u4.get(t);if(e)return e;var n=function(o){return y$(o,t.registeredProviders)},r=function(o){return v$(o,t.registeredProviders)},s=function(o){return b$(o,t.registeredProviders)},i=function(o){return E$(o,t.registeredProviders)};return e={onMouseDown:n,onPointerDown:r,onKeyDown:s,onKeyUp:i},u4.set(t,e),e}var Lb=w.createContext(void 0);function dI(t){var e=w.useContext(Lb);w.useEffect(function(){var n,r,s,i,o=Sn(t==null?void 0:t.current);if(!(!o||((n=o.FabricConfig)===null||n===void 0?void 0:n.disableFocusRects)===!0)){var a=o,l,u,c,d;if(!((r=e==null?void 0:e.providerRef)===null||r===void 0)&&r.current&&(!((i=(s=e==null?void 0:e.providerRef)===null||s===void 0?void 0:s.current)===null||i===void 0)&&i.addEventListener)){a=e.providerRef.current;var h=dq(e);l=h.onMouseDown,u=h.onPointerDown,c=h.onKeyDown,d=h.onKeyUp}else l=y$,u=v$,c=b$,d=E$;var f=c4(a,1);return f<=1&&(a.addEventListener("mousedown",l,!0),a.addEventListener("pointerdown",u,!0),a.addEventListener("keydown",c,!0),a.addEventListener("keyup",d,!0)),function(){var p;!o||((p=o.FabricConfig)===null||p===void 0?void 0:p.disableFocusRects)===!0||(f=c4(a,-1),f===0&&(a.removeEventListener("mousedown",l,!0),a.removeEventListener("pointerdown",u,!0),a.removeEventListener("keydown",c,!0),a.removeEventListener("keyup",d,!0)))}}},[e,t])}var g$=function(t){return dI(t.rootRef),null};function y$(t,e){ld(!1,t.target,e)}function v$(t,e){t.pointerType!=="mouse"&&ld(!1,t.target,e)}function b$(t,e){m$(t.which)&&ld(!0,t.target,e)}function E$(t,e){m$(t.which)&&ld(!0,t.target,e)}var T$=function(t){var e=t.providerRef,n=t.layerRoot,r=w.useState([])[0],s=w.useContext(Lb),i=s!==void 0&&!n,o=w.useMemo(function(){return i?void 0:{providerRef:e,registeredProviders:r,registerProvider:function(a){r.push(a),s==null||s.registerProvider(a)},unregisterProvider:function(a){s==null||s.unregisterProvider(a);var l=r.indexOf(a);l>=0&&r.splice(l,1)}}},[e,r,s,i]);return w.useEffect(function(){if(o)return o.registerProvider(o.providerRef),function(){return o.unregisterProvider(o.providerRef)}},[o]),o?w.createElement(Lb.Provider,{value:o},t.children):w.createElement(w.Fragment,null,t.children)};function hq(t){var e=null;try{var n=Sn();e=n?n.localStorage.getItem(t):null}catch{}return e}var Nc,d4="language";function fq(t){if(t===void 0&&(t="sessionStorage"),Nc===void 0){var e=Ps(),n=t==="localStorage"?hq(d4):t==="sessionStorage"?i$(d4):void 0;n&&(Nc=n),Nc===void 0&&e&&(Nc=e.documentElement.getAttribute("lang")),Nc===void 0&&(Nc="en")}return Nc}function h4(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,s=e;r<s.length;r++){var i=s[r];x$(t||{},i)}return t}function x$(t,e,n){n===void 0&&(n=[]),n.push(e);for(var r in e)if(e.hasOwnProperty(r)&&r!=="__proto__"&&r!=="constructor"&&r!=="prototype"){var s=e[r];if(typeof s=="object"&&s!==null&&!Array.isArray(s)){var i=n.indexOf(s)>-1;t[r]=i?s:x$(t[r]||{},s,n)}else t[r]=s}return n.pop(),t}var f4=function(){return!window||!window.navigator||!window.navigator.userAgent?!1:/iPad|iPhone|iPod/i.test(window.navigator.userAgent)},pq=["TEMPLATE","STYLE","SCRIPT"];function C$(t){var e=Ps(t);if(!e)return function(){};for(var n=[];t!==e.body&&t.parentElement;){for(var r=0,s=t.parentElement.children;r<s.length;r++){var i=s[r],o=i.getAttribute("aria-hidden");i!==t&&(o==null?void 0:o.toLowerCase())!=="true"&&pq.indexOf(i.tagName)===-1&&n.push([i,o])}t=t.parentElement}return n.forEach(function(a){var l=a[0];l.setAttribute("aria-hidden","true")}),function(){mq(n),n=[]}}function mq(t){t.forEach(function(e){var n=e[0],r=e[1];r?n.setAttribute("aria-hidden",r):n.removeAttribute("aria-hidden")})}var x2;function p4(t){var e;if(typeof x2>"u"||t){var n=Sn(),r=(e=n==null?void 0:n.navigator)===null||e===void 0?void 0:e.userAgent;x2=!!r&&r.indexOf("Macintosh")!==-1}return!!x2}function gq(t){var e=gf(function(n){var r=gf(function(s){return function(i){return n(i,s)}});return function(s,i){return t(s,i?r(i):n)}});return e}var yq=gf(gq);function Cw(t,e){return yq(t)(e)}var vq=["theme","styles"];function wr(t,e,n,r,s){r=r||{scope:"",fields:void 0};var i=r.scope,o=r.fields,a=o===void 0?vq:o,l=w.forwardRef(function(c,d){var h=w.useRef(),f=qK(a,i),p=f.styles;f.dir;var m=rl(f,["styles","dir"]),y=n?n(c):void 0,g=h.current&&h.current.__cachedInputs__||[],v=c.styles;if(!h.current||p!==g[1]||v!==g[2]){var E=function(b){return Z8(b,e,p,v)};E.__cachedInputs__=[e,p,v],E.__noStyleOverride__=!p&&!v,h.current=E}return w.createElement(t,U({ref:d},m,y,c,{styles:h.current}))});l.displayName="Styled".concat(t.displayName||t.name);var u=s?w.memo(l):l;return l.displayName&&(u.displayName=l.displayName),u}var bq=function(){var t,e=Sn();return!((t=e==null?void 0:e.navigator)===null||t===void 0)&&t.userAgent?e.navigator.userAgent.indexOf("rv:11.0")>-1:!1};function Og(t,e){for(var n=U({},e),r=0,s=Object.keys(t);r<s.length;r++){var i=s[r];n[i]===void 0&&(n[i]=t[i])}return n}var Eq=function(t){return function(e){for(var n=0,r=t.refs;n<r.length;n++){var s=r[n];typeof s=="function"?s(e):s&&(s.current=e)}}},S$=function(t){var e={refs:[]};return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return(!e.resolver||!cK(e.refs,n))&&(e.resolver=Eq(e)),e.refs=n,e.resolver}},yf=sT()?w.useLayoutEffect:w.useEffect,Tq="icons",Ni=s$.getValue(Tq,{__options:{disableWarnings:!1,warnOnMissingIcons:!0},__remapped:{}}),C2=Eo.getInstance();C2&&C2.onReset&&C2.onReset(function(){for(var t in Ni)Ni.hasOwnProperty(t)&&Ni[t].subset&&(Ni[t].subset.className=void 0)});var Pb=function(t){return t.toLowerCase()};function _r(t,e){var n=U(U({},t),{isRegistered:!1,className:void 0}),r=t.icons;e=e?U(U({},Ni.__options),e):Ni.__options;for(var s in r)if(r.hasOwnProperty(s)){var i=r[s],o=Pb(s);Ni[o]?Cq(s):Ni[o]={code:i,subset:n}}}function Ac(t,e){Ni.__remapped[Pb(t)]=Pb(e)}function xq(t){var e=void 0,n=Ni.__options;if(t=t?Pb(t):"",t=Ni.__remapped[t]||t,t)if(e=Ni[t],e){var r=e.subset;r&&r.fontFace&&(r.isRegistered||(J8(r.fontFace),r.isRegistered=!0),r.className||(r.className=Da(r.style,{fontFamily:r.fontFace.fontFamily,fontWeight:r.fontFace.fontWeight||"normal",fontStyle:r.fontFace.fontStyle||"normal"})))}else!n.disableWarnings&&n.warnOnMissingIcons&&aI('The icon "'+t+'" was used but not registered. See https://github.com/microsoft/fluentui/wiki/Using-icons for more information.');return e}var T1=[],S2=void 0;function Cq(t){var e=Ni.__options,n=2e3,r=10;e.disableWarnings||(T1.push(t),S2===void 0&&(S2=setTimeout(function(){aI(`Some icons were re-registered. Applications should only call registerIcons for any given icon once. Redefining what an icon is may have unintended consequences. Duplicates include: 
`+T1.slice(0,r).join(", ")+(T1.length>r?" (+ "+(T1.length-r)+" more)":"")),S2=void 0,T1=[]},n)))}function Sq(t,e,n,r,s){s===void 0&&(s=!1);var i=U({primaryButtonBorder:"transparent",errorText:r?"#F1707B":"#a4262c",messageText:r?"#F3F2F1":"#323130",messageLink:r?"#6CB8F6":"#005A9E",messageLinkHovered:r?"#82C7FF":"#004578",infoIcon:r?"#C8C6C4":"#605e5c",errorIcon:r?"#F1707B":"#A80000",blockingIcon:r?"#442726":"#FDE7E9",warningIcon:r?"#C8C6C4":"#797775",severeWarningIcon:r?"#FCE100":"#D83B01",successIcon:r?"#92C353":"#107C10",infoBackground:r?"#323130":"#f3f2f1",errorBackground:r?"#442726":"#FDE7E9",blockingBackground:r?"#442726":"#FDE7E9",warningBackground:r?"#433519":"#FFF4CE",severeWarningBackground:r?"#4F2A0F":"#FED9CC",successBackground:r?"#393D1B":"#DFF6DD",warningHighlight:r?"#fff100":"#ffb900",successText:r?"#92c353":"#107C10"},n),o=w$(t,e,i,r);return wq(o,s)}function w$(t,e,n,r,s){var i={},o=t||{},a=o.white,l=o.black,u=o.themePrimary,c=o.themeDark,d=o.themeDarker,h=o.themeDarkAlt,f=o.themeLighter,p=o.neutralLight,m=o.neutralLighter,y=o.neutralDark,g=o.neutralQuaternary,v=o.neutralQuaternaryAlt,E=o.neutralPrimary,b=o.neutralSecondary,T=o.neutralSecondaryAlt,x=o.neutralTertiary,C=o.neutralTertiaryAlt,S=o.neutralLighterAlt,N=o.accent;return a&&(i.bodyBackground=a,i.bodyFrameBackground=a,i.accentButtonText=a,i.buttonBackground=a,i.primaryButtonText=a,i.primaryButtonTextHovered=a,i.primaryButtonTextPressed=a,i.inputBackground=a,i.inputForegroundChecked=a,i.listBackground=a,i.menuBackground=a,i.cardStandoutBackground=a),l&&(i.bodyTextChecked=l,i.buttonTextCheckedHovered=l),u&&(i.link=u,i.primaryButtonBackground=u,i.inputBackgroundChecked=u,i.inputIcon=u,i.inputFocusBorderAlt=u,i.menuIcon=u,i.menuHeader=u,i.accentButtonBackground=u),c&&(i.primaryButtonBackgroundPressed=c,i.inputBackgroundCheckedHovered=c,i.inputIconHovered=c),d&&(i.linkHovered=d),h&&(i.primaryButtonBackgroundHovered=h),f&&(i.inputPlaceholderBackgroundChecked=f),p&&(i.bodyBackgroundChecked=p,i.bodyFrameDivider=p,i.bodyDivider=p,i.variantBorder=p,i.buttonBackgroundCheckedHovered=p,i.buttonBackgroundPressed=p,i.listItemBackgroundChecked=p,i.listHeaderBackgroundPressed=p,i.menuItemBackgroundPressed=p,i.menuItemBackgroundChecked=p),m&&(i.bodyBackgroundHovered=m,i.buttonBackgroundHovered=m,i.buttonBackgroundDisabled=m,i.buttonBorderDisabled=m,i.primaryButtonBackgroundDisabled=m,i.disabledBackground=m,i.listItemBackgroundHovered=m,i.listHeaderBackgroundHovered=m,i.menuItemBackgroundHovered=m),g&&(i.primaryButtonTextDisabled=g,i.disabledSubtext=g),v&&(i.listItemBackgroundCheckedHovered=v),x&&(i.disabledBodyText=x,i.variantBorderHovered=(n==null?void 0:n.variantBorderHovered)||x,i.buttonTextDisabled=x,i.inputIconDisabled=x,i.disabledText=x),E&&(i.bodyText=E,i.actionLink=E,i.buttonText=E,i.inputBorderHovered=E,i.inputText=E,i.listText=E,i.menuItemText=E),S&&(i.bodyStandoutBackground=S,i.defaultStateBackground=S),y&&(i.actionLinkHovered=y,i.buttonTextHovered=y,i.buttonTextChecked=y,i.buttonTextPressed=y,i.inputTextHovered=y,i.menuItemTextHovered=y),b&&(i.bodySubtext=b,i.focusBorder=b,i.inputBorder=b,i.smallInputBorder=b,i.inputPlaceholderText=b),T&&(i.buttonBorder=T),C&&(i.disabledBodySubtext=C,i.disabledBorder=C,i.buttonBackgroundChecked=C,i.menuDivider=C),N&&(i.accentButtonBackground=N),e!=null&&e.elevation4&&(i.cardShadow=e.elevation4),!r&&(e!=null&&e.elevation8)?i.cardShadowHovered=e.elevation8:i.variantBorderHovered&&(i.cardShadowHovered="0 0 1px "+i.variantBorderHovered),i=U(U({},i),n),i}function wq(t,e){var n="";return e===!0&&(n=" /* @deprecated */"),t.listTextColor=t.listText+n,t.menuItemBackgroundChecked+=n,t.warningHighlight+=n,t.warningText=t.messageText+n,t.successText+=n,t}function _q(t,e){var n,r,s;e===void 0&&(e={});var i=h4({},t,e,{semanticColors:w$(e.palette,e.effects,e.semanticColors,e.isInverted===void 0?t.isInverted:e.isInverted)});if(!((n=e.palette)===null||n===void 0)&&n.themePrimary&&!(!((r=e.palette)===null||r===void 0)&&r.accent)&&(i.palette.accent=e.palette.themePrimary),e.defaultFontStyle)for(var o=0,a=Object.keys(i.fonts);o<a.length;o++){var l=a[o];i.fonts[l]=h4(i.fonts[l],e.defaultFontStyle,(s=e==null?void 0:e.fonts)===null||s===void 0?void 0:s[l])}return i}var m4={themeDarker:"#004578",themeDark:"#005a9e",themeDarkAlt:"#106ebe",themePrimary:"#0078d4",themeSecondary:"#2b88d8",themeTertiary:"#71afe5",themeLight:"#c7e0f4",themeLighter:"#deecf9",themeLighterAlt:"#eff6fc",black:"#000000",blackTranslucent40:"rgba(0,0,0,.4)",neutralDark:"#201f1e",neutralPrimary:"#323130",neutralPrimaryAlt:"#3b3a39",neutralSecondary:"#605e5c",neutralSecondaryAlt:"#8a8886",neutralTertiary:"#a19f9d",neutralTertiaryAlt:"#c8c6c4",neutralQuaternary:"#d2d0ce",neutralQuaternaryAlt:"#e1dfdd",neutralLight:"#edebe9",neutralLighter:"#f3f2f1",neutralLighterAlt:"#faf9f8",accent:"#0078d4",white:"#ffffff",whiteTranslucent40:"rgba(255,255,255,.4)",yellowDark:"#d29200",yellow:"#ffb900",yellowLight:"#fff100",orange:"#d83b01",orangeLight:"#ea4300",orangeLighter:"#ff8c00",redDark:"#a4262c",red:"#e81123",magentaDark:"#5c005c",magenta:"#b4009e",magentaLight:"#e3008c",purpleDark:"#32145a",purple:"#5c2d91",purpleLight:"#b4a0ff",blueDark:"#002050",blueMid:"#00188f",blue:"#0078d4",blueLight:"#00bcf2",tealDark:"#004b50",teal:"#008272",tealLight:"#00b294",greenDark:"#004b1c",green:"#107c10",greenLight:"#bad80a"},$h;(function(t){t.depth0="0 0 0 0 transparent",t.depth4="0 1.6px 3.6px 0 rgba(0, 0, 0, 0.132), 0 0.3px 0.9px 0 rgba(0, 0, 0, 0.108)",t.depth8="0 3.2px 7.2px 0 rgba(0, 0, 0, 0.132), 0 0.6px 1.8px 0 rgba(0, 0, 0, 0.108)",t.depth16="0 6.4px 14.4px 0 rgba(0, 0, 0, 0.132), 0 1.2px 3.6px 0 rgba(0, 0, 0, 0.108)",t.depth64="0 25.6px 57.6px 0 rgba(0, 0, 0, 0.22), 0 4.8px 14.4px 0 rgba(0, 0, 0, 0.18)"})($h||($h={}));var g4={elevation4:$h.depth4,elevation8:$h.depth8,elevation16:$h.depth16,elevation64:$h.depth64,roundedCorner2:"2px",roundedCorner4:"4px",roundedCorner6:"6px"},kq={s2:"4px",s1:"8px",m:"16px",l1:"20px",l2:"32px"},rn="cubic-bezier(.1,.9,.2,1)",Ci="cubic-bezier(.1,.25,.75,.9)",Q1="0.167s",Sw="0.267s",jt="0.367s",ww="0.467s",Dr=Wi({from:{opacity:0},to:{opacity:1}}),Rr=Wi({from:{opacity:1},to:{opacity:0,visibility:"hidden"}}),Iq=lc(-10),Nq=lc(-20),Aq=lc(-40),Dq=lc(-400),Rq=lc(10),Fq=lc(20),Oq=lc(40),$q=lc(400),Lq=aT(10),Pq=aT(20),Mq=aT(-10),Bq=aT(-20),zq=uc(10),Hq=uc(20),Uq=uc(40),Wq=uc(400),Vq=uc(-10),Gq=uc(-20),jq=uc(-40),Kq=uc(-400),qq=lT(-10),Xq=lT(-20),Yq=lT(10),Qq=lT(20),Zq=Wi({from:{transform:"scale3d(.98,.98,1)"},to:{transform:"scale3d(1,1,1)"}}),Jq=Wi({from:{transform:"scale3d(1,1,1)"},to:{transform:"scale3d(.98,.98,1)"}}),eX=Wi({from:{transform:"scale3d(1.03,1.03,1)"},to:{transform:"scale3d(1,1,1)"}}),tX=Wi({from:{transform:"scale3d(1,1,1)"},to:{transform:"scale3d(1.03,1.03,1)"}}),nX=Wi({from:{transform:"rotateZ(0deg)"},to:{transform:"rotateZ(90deg)"}}),rX=Wi({from:{transform:"rotateZ(0deg)"},to:{transform:"rotateZ(-90deg)"}}),sX={easeFunction1:rn,easeFunction2:Ci,durationValue1:Q1,durationValue2:Sw,durationValue3:jt,durationValue4:ww},iX={slideRightIn10:Ct(Dr+","+Iq,jt,rn),slideRightIn20:Ct(Dr+","+Nq,jt,rn),slideRightIn40:Ct(Dr+","+Aq,jt,rn),slideRightIn400:Ct(Dr+","+Dq,jt,rn),slideLeftIn10:Ct(Dr+","+Rq,jt,rn),slideLeftIn20:Ct(Dr+","+Fq,jt,rn),slideLeftIn40:Ct(Dr+","+Oq,jt,rn),slideLeftIn400:Ct(Dr+","+$q,jt,rn),slideUpIn10:Ct(Dr+","+Lq,jt,rn),slideUpIn20:Ct(Dr+","+Pq,jt,rn),slideDownIn10:Ct(Dr+","+Mq,jt,rn),slideDownIn20:Ct(Dr+","+Bq,jt,rn),slideRightOut10:Ct(Rr+","+zq,jt,rn),slideRightOut20:Ct(Rr+","+Hq,jt,rn),slideRightOut40:Ct(Rr+","+Uq,jt,rn),slideRightOut400:Ct(Rr+","+Wq,jt,rn),slideLeftOut10:Ct(Rr+","+Vq,jt,rn),slideLeftOut20:Ct(Rr+","+Gq,jt,rn),slideLeftOut40:Ct(Rr+","+jq,jt,rn),slideLeftOut400:Ct(Rr+","+Kq,jt,rn),slideUpOut10:Ct(Rr+","+qq,jt,rn),slideUpOut20:Ct(Rr+","+Xq,jt,rn),slideDownOut10:Ct(Rr+","+Yq,jt,rn),slideDownOut20:Ct(Rr+","+Qq,jt,rn),scaleUpIn100:Ct(Dr+","+Zq,jt,rn),scaleDownIn100:Ct(Dr+","+eX,jt,rn),scaleUpOut103:Ct(Rr+","+tX,Q1,Ci),scaleDownOut98:Ct(Rr+","+Jq,Q1,Ci),fadeIn100:Ct(Dr,Q1,Ci),fadeIn200:Ct(Dr,Sw,Ci),fadeIn400:Ct(Dr,jt,Ci),fadeIn500:Ct(Dr,ww,Ci),fadeOut100:Ct(Rr,Q1,Ci),fadeOut200:Ct(Rr,Sw,Ci),fadeOut400:Ct(Rr,jt,Ci),fadeOut500:Ct(Rr,ww,Ci),rotate90deg:Ct(nX,"0.1s",Ci),rotateN90deg:Ct(rX,"0.1s",Ci)};function Ct(t,e,n){return{animationName:t,animationDuration:e,animationTimingFunction:n,animationFillMode:"both"}}function lc(t){return Wi({from:{transform:"translate3d("+t+"px,0,0)",pointerEvents:"none"},to:{transform:"translate3d(0,0,0)",pointerEvents:"auto"}})}function aT(t){return Wi({from:{transform:"translate3d(0,"+t+"px,0)",pointerEvents:"none"},to:{transform:"translate3d(0,0,0)",pointerEvents:"auto"}})}function uc(t){return Wi({from:{transform:"translate3d(0,0,0)"},to:{transform:"translate3d("+t+"px,0,0)"}})}function lT(t){return Wi({from:{transform:"translate3d(0,0,0)"},to:{transform:"translate3d(0,"+t+"px,0)"}})}var Pn;(function(t){t.Arabic="Segoe UI Web (Arabic)",t.Cyrillic="Segoe UI Web (Cyrillic)",t.EastEuropean="Segoe UI Web (East European)",t.Greek="Segoe UI Web (Greek)",t.Hebrew="Segoe UI Web (Hebrew)",t.Thai="Leelawadee UI Web",t.Vietnamese="Segoe UI Web (Vietnamese)",t.WestEuropean="Segoe UI Web (West European)",t.Selawik="Selawik Web",t.Armenian="Segoe UI Web (Armenian)",t.Georgian="Segoe UI Web (Georgian)"})(Pn||(Pn={}));var Kt;(function(t){t.Arabic="'"+Pn.Arabic+"'",t.ChineseSimplified="'Microsoft Yahei UI', Verdana, Simsun",t.ChineseTraditional="'Microsoft Jhenghei UI', Pmingliu",t.Cyrillic="'"+Pn.Cyrillic+"'",t.EastEuropean="'"+Pn.EastEuropean+"'",t.Greek="'"+Pn.Greek+"'",t.Hebrew="'"+Pn.Hebrew+"'",t.Hindi="'Nirmala UI'",t.Japanese="'Yu Gothic UI', 'Meiryo UI', Meiryo, 'MS Pgothic', Osaka",t.Korean="'Malgun Gothic', Gulim",t.Selawik="'"+Pn.Selawik+"'",t.Thai="'Leelawadee UI Web', 'Kmer UI'",t.Vietnamese="'"+Pn.Vietnamese+"'",t.WestEuropean="'"+Pn.WestEuropean+"'",t.Armenian="'"+Pn.Armenian+"'",t.Georgian="'"+Pn.Georgian+"'"})(Kt||(Kt={}));var Ts;(function(t){t.size10="10px",t.size12="12px",t.size14="14px",t.size16="16px",t.size18="18px",t.size20="20px",t.size24="24px",t.size28="28px",t.size32="32px",t.size42="42px",t.size68="68px",t.mini="10px",t.xSmall="10px",t.small="12px",t.smallPlus="12px",t.medium="14px",t.mediumPlus="16px",t.icon="16px",t.large="18px",t.xLarge="20px",t.xLargePlus="24px",t.xxLarge="28px",t.xxLargePlus="32px",t.superLarge="42px",t.mega="68px"})(Ts||(Ts={}));var sn;(function(t){t.light=100,t.semilight=300,t.regular=400,t.semibold=600,t.bold=700})(sn||(sn={}));var jo;(function(t){t.xSmall="10px",t.small="12px",t.medium="16px",t.large="20px"})(jo||(jo={}));var oX="'Segoe UI', -apple-system, BlinkMacSystemFont, 'Roboto', 'Helvetica Neue', sans-serif",aX="'Segoe UI', '"+Pn.WestEuropean+"'",w2={ar:Kt.Arabic,bg:Kt.Cyrillic,cs:Kt.EastEuropean,el:Kt.Greek,et:Kt.EastEuropean,he:Kt.Hebrew,hi:Kt.Hindi,hr:Kt.EastEuropean,hu:Kt.EastEuropean,ja:Kt.Japanese,kk:Kt.EastEuropean,ko:Kt.Korean,lt:Kt.EastEuropean,lv:Kt.EastEuropean,pl:Kt.EastEuropean,ru:Kt.Cyrillic,sk:Kt.EastEuropean,"sr-latn":Kt.EastEuropean,th:Kt.Thai,tr:Kt.EastEuropean,uk:Kt.Cyrillic,vi:Kt.Vietnamese,"zh-hans":Kt.ChineseSimplified,"zh-hant":Kt.ChineseTraditional,hy:Kt.Armenian,ka:Kt.Georgian};function lX(t){return t+", "+oX}function uX(t){for(var e in w2)if(w2.hasOwnProperty(e)&&t&&e.indexOf(t)===0)return w2[e];return aX}function Ti(t,e,n){return{fontFamily:n,MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontSize:t,fontWeight:e}}function cX(t){var e=uX(t),n=lX(e),r={tiny:Ti(Ts.mini,sn.regular,n),xSmall:Ti(Ts.xSmall,sn.regular,n),small:Ti(Ts.small,sn.regular,n),smallPlus:Ti(Ts.smallPlus,sn.regular,n),medium:Ti(Ts.medium,sn.regular,n),mediumPlus:Ti(Ts.mediumPlus,sn.regular,n),large:Ti(Ts.large,sn.regular,n),xLarge:Ti(Ts.xLarge,sn.semibold,n),xLargePlus:Ti(Ts.xLargePlus,sn.semibold,n),xxLarge:Ti(Ts.xxLarge,sn.semibold,n),xxLargePlus:Ti(Ts.xxLargePlus,sn.semibold,n),superLarge:Ti(Ts.superLarge,sn.semibold,n),mega:Ti(Ts.mega,sn.semibold,n)};return r}var dX="https://res-1.cdn.office.net/files/fabric-cdn-prod_20221209.001/assets",hX=cX(fq());function Kc(t,e,n,r){t="'"+t+"'";var s=r!==void 0?"local('"+r+"'),":"";J8({fontFamily:t,src:s+("url('"+e+".woff2') format('woff2'),")+("url('"+e+".woff') format('woff')"),fontWeight:n,fontStyle:"normal",fontDisplay:"swap"})}function Oo(t,e,n,r,s){r===void 0&&(r="segoeui");var i=t+"/"+n+"/"+r;Kc(e,i+"-light",sn.light,s&&s+" Light"),Kc(e,i+"-semilight",sn.semilight,s&&s+" SemiLight"),Kc(e,i+"-regular",sn.regular,s),Kc(e,i+"-semibold",sn.semibold,s&&s+" SemiBold"),Kc(e,i+"-bold",sn.bold,s&&s+" Bold")}function fX(t){if(t){var e=t+"/fonts";Oo(e,Pn.Thai,"leelawadeeui-thai","leelawadeeui"),Oo(e,Pn.Arabic,"segoeui-arabic"),Oo(e,Pn.Cyrillic,"segoeui-cyrillic"),Oo(e,Pn.EastEuropean,"segoeui-easteuropean"),Oo(e,Pn.Greek,"segoeui-greek"),Oo(e,Pn.Hebrew,"segoeui-hebrew"),Oo(e,Pn.Vietnamese,"segoeui-vietnamese"),Oo(e,Pn.WestEuropean,"segoeui-westeuropean","segoeui","Segoe UI"),Oo(e,Kt.Selawik,"selawik","selawik"),Oo(e,Pn.Armenian,"segoeui-armenian"),Oo(e,Pn.Georgian,"segoeui-georgian"),Kc("Leelawadee UI Web",e+"/leelawadeeui-thai/leelawadeeui-semilight",sn.light),Kc("Leelawadee UI Web",e+"/leelawadeeui-thai/leelawadeeui-bold",sn.semibold)}}function pX(){var t,e,n=(t=Sn())===null||t===void 0?void 0:t.FabricConfig;return(e=n==null?void 0:n.fontBaseUrl)!==null&&e!==void 0?e:dX}fX(pX());function $g(t,e){t===void 0&&(t={}),e===void 0&&(e=!1);var n=!!t.isInverted,r={palette:m4,effects:g4,fonts:hX,spacing:kq,isInverted:n,disableGlobalClassNames:!1,semanticColors:Sq(m4,g4,void 0,n,e),rtl:void 0};return _q(r,t)}var we="@media screen and (-ms-high-contrast: active), screen and (forced-colors: active)",_2=320,_$=480,mX=640,k2=_$-1,k$=mX-1;function I$(t,e){var n=typeof t=="number"?" and (min-width: "+t+"px)":"",r=typeof e=="number"?" and (max-width: "+e+"px)":"";return"@media only screen"+n+r}function ar(){return{forcedColorAdjust:"none",MsHighContrastAdjust:"none"}}var vf;(function(t){t.Nav=1,t.ScrollablePane=1,t.FocusStyle=1,t.Coachmark=1e3,t.Layer=1e6,t.KeytipLayer=1000001})(vf||(vf={}));function Ol(t,e,n,r,s,i,o,a){return typeof e=="number"||!e?y4(t,{inset:e,position:n,highContrastStyle:r,borderColor:s,outlineColor:i,isFocusedOnly:o,borderRadius:a}):y4(t,e)}function y4(t,e){var n,r;e===void 0&&(e={});var s=e.borderRadius,i=e.inset,o=i===void 0?0:i,a=e.width,l=a===void 0?1:a,u=e.position,c=u===void 0?"relative":u,d=e.highContrastStyle,h=e.borderColor,f=h===void 0?t.palette.white:h,p=e.outlineColor,m=p===void 0?t.palette.neutralSecondary:p,y=e.isFocusedOnly,g=y===void 0?!0:y,v=e.pointerEvents;return{outline:"transparent",position:c,selectors:(n={"::-moz-focus-inner":{border:"0"}},n["."+as+" &"+(g?":focus":"")+":after"]={content:'""',position:"absolute",pointerEvents:v,left:o+1,top:o+1,bottom:o+1,right:o+1,border:l+"px solid "+f,outline:l+"px solid "+m,zIndex:vf.FocusStyle,borderRadius:s,selectors:(r={},r[we]=d,r)},n)}}function gX(){return{selectors:{"&::-moz-focus-inner":{border:0},"&":{outline:"transparent"}}}}var v4=function(t,e,n,r){var s,i,o;n===void 0&&(n="border"),r===void 0&&(r=-1);var a=n==="borderBottom";return{borderColor:t,selectors:{":after":(s={pointerEvents:"none",content:"''",position:"absolute",left:a?0:r,top:r,bottom:r,right:a?0:r},s[n]="2px solid "+t,s.borderRadius=e,s.width=n==="borderBottom"?"100%":void 0,s.selectors=(i={},i[we]=(o={},o[n==="border"?"borderColor":"borderBottomColor"]="Highlight",o),i),s)}}},hI={position:"absolute",width:1,height:1,margin:-1,padding:0,border:0,overflow:"hidden",whiteSpace:"nowrap"},yX=Un(function(t,e){var n=Eo.getInstance();return e?Object.keys(t).reduce(function(r,s){return r[s]=n.getClassName(t[s]),r},{}):t});function es(t,e,n){return yX(t,n!==void 0?n:e.disableGlobalClassNames)}var Lh=globalThis&&globalThis.__assign||function(){return Lh=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Lh.apply(this,arguments)},cm=typeof window>"u"?global:window,b4=cm&&cm.CSPSettings&&cm.CSPSettings.nonce,Ai=vX();function vX(){var t=cm.__themeState__||{theme:void 0,lastStyleElement:void 0,registeredStyles:[]};return t.runState||(t=Lh(Lh({},t),{perf:{count:0,duration:0},runState:{flushTimer:0,mode:0,buffer:[]}})),t.registeredThemableStyles||(t=Lh(Lh({},t),{registeredThemableStyles:[]})),cm.__themeState__=t,t}function bX(t,e){Ai.loadStyles?Ai.loadStyles(N$(t).styleString,t):CX(t)}function EX(t){Ai.theme=t,xX()}function TX(t){t===void 0&&(t=3),(t===3||t===2)&&(E4(Ai.registeredStyles),Ai.registeredStyles=[]),(t===3||t===1)&&(E4(Ai.registeredThemableStyles),Ai.registeredThemableStyles=[])}function E4(t){t.forEach(function(e){var n=e&&e.styleElement;n&&n.parentElement&&n.parentElement.removeChild(n)})}function xX(){if(Ai.theme){for(var t=[],e=0,n=Ai.registeredThemableStyles;e<n.length;e++){var r=n[e];t.push(r.themableStyle)}t.length>0&&(TX(1),bX([].concat.apply([],t)))}}function N$(t){var e=Ai.theme,n=!1,r=(t||[]).map(function(s){var i=s.theme;if(i){n=!0;var o=e?e[i]:void 0,a=s.defaultValue||"inherit";return e&&!o&&console&&!(i in e)&&typeof DEBUG<"u"&&DEBUG&&console.warn('Theming value not provided for "'.concat(i,'". Falling back to "').concat(a,'".')),o||a}else return s.rawString});return{styleString:r.join(""),themable:n}}function CX(t){if(!(typeof document>"u")){var e=document.getElementsByTagName("head")[0],n=document.createElement("style"),r=N$(t),s=r.styleString,i=r.themable;n.setAttribute("data-load-themed-styles","true"),b4&&n.setAttribute("nonce",b4),n.appendChild(document.createTextNode(s)),Ai.perf.count++,e.appendChild(n);var o=document.createEvent("HTMLEvents");o.initEvent("styleinsert",!0,!1),o.args={newStyle:n},document.dispatchEvent(o);var a={styleElement:n,themableStyle:t};i?Ai.registeredThemableStyles.push(a):Ai.registeredStyles.push(a)}}var eo=$g({}),SX=[],_w="theme";function A$(){var t,e,n,r=Sn();!((e=r==null?void 0:r.FabricConfig)===null||e===void 0)&&e.legacyTheme?_X(r.FabricConfig.legacyTheme):mo.getSettings([_w]).theme||(!((n=r==null?void 0:r.FabricConfig)===null||n===void 0)&&n.theme&&(eo=$g(r.FabricConfig.theme)),mo.applySettings((t={},t[_w]=eo,t)))}A$();function wX(t){return t===void 0&&(t=!1),t===!0&&(eo=$g({},t)),eo}function _X(t,e){var n;return e===void 0&&(e=!1),eo=$g(t,e),EX(U(U(U(U({},eo.palette),eo.semanticColors),eo.effects),kX(eo))),mo.applySettings((n={},n[_w]=eo,n)),SX.forEach(function(r){try{r(eo)}catch{}}),eo}function kX(t){for(var e={},n=0,r=Object.keys(t.fonts);n<r.length;n++)for(var s=r[n],i=t.fonts[s],o=0,a=Object.keys(i);o<a.length;o++){var l=a[o],u=s+l.charAt(0).toUpperCase()+l.slice(1),c=i[l];l==="fontSize"&&typeof c=="number"&&(c=c+"px"),e[u]=c}return e}var I2={boxShadow:"none",margin:0,padding:0,boxSizing:"border-box"};function T4(t){return{selectors:{"::placeholder":t,":-ms-input-placeholder":t,"::-ms-input-placeholder":t}}}var Ph=Yj(iX);rI("@fluentui/style-utilities","8.9.1");A$();var Jn={topLeftEdge:0,topCenter:1,topRightEdge:2,topAutoEdge:3,bottomLeftEdge:4,bottomCenter:5,bottomRightEdge:6,bottomAutoEdge:7,leftTopEdge:8,leftCenter:9,leftBottomEdge:10,rightTopEdge:11,rightCenter:12,rightBottomEdge:13},qe;(function(t){t[t.top=1]="top",t[t.bottom=-1]="bottom",t[t.left=2]="left",t[t.right=-2]="right"})(qe||(qe={}));var x4;(function(t){t[t.top=0]="top",t[t.bottom=1]="bottom",t[t.start=2]="start",t[t.end=3]="end"})(x4||(x4={}));var ss;function Xs(t,e,n){return{targetEdge:t,alignmentEdge:e,isAuto:n}}var C4=(ss={},ss[Jn.topLeftEdge]=Xs(qe.top,qe.left),ss[Jn.topCenter]=Xs(qe.top),ss[Jn.topRightEdge]=Xs(qe.top,qe.right),ss[Jn.topAutoEdge]=Xs(qe.top,void 0,!0),ss[Jn.bottomLeftEdge]=Xs(qe.bottom,qe.left),ss[Jn.bottomCenter]=Xs(qe.bottom),ss[Jn.bottomRightEdge]=Xs(qe.bottom,qe.right),ss[Jn.bottomAutoEdge]=Xs(qe.bottom,void 0,!0),ss[Jn.leftTopEdge]=Xs(qe.left,qe.top),ss[Jn.leftCenter]=Xs(qe.left),ss[Jn.leftBottomEdge]=Xs(qe.left,qe.bottom),ss[Jn.rightTopEdge]=Xs(qe.right,qe.top),ss[Jn.rightCenter]=Xs(qe.right),ss[Jn.rightBottomEdge]=Xs(qe.right,qe.bottom),ss);function fI(t,e){return!(t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)}function Mb(t,e){var n=[];return t.top<e.top&&n.push(qe.top),t.bottom>e.bottom&&n.push(qe.bottom),t.left<e.left&&n.push(qe.left),t.right>e.right&&n.push(qe.right),n}function gs(t,e){return t[qe[e]]}function S4(t,e,n){return t[qe[e]]=n,t}function $m(t,e){var n=qf(e);return(gs(t,n.positiveEdge)+gs(t,n.negativeEdge))/2}function uT(t,e){return t>0?e:e*-1}function kw(t,e){return uT(t,gs(e,t))}function Il(t,e,n){var r=gs(t,n)-gs(e,n);return uT(n,r)}function bf(t,e,n,r){r===void 0&&(r=!0);var s=gs(t,e)-n,i=S4(t,e,n);return r&&(i=S4(t,e*-1,gs(t,e*-1)-s)),i}function Lm(t,e,n,r){return r===void 0&&(r=0),bf(t,n,gs(e,n)+uT(n,r))}function IX(t,e,n,r){r===void 0&&(r=0);var s=n*-1,i=uT(s,r);return bf(t,n*-1,gs(e,n)+i)}function Bb(t,e,n){var r=kw(n,t);return r>kw(n,e)}function NX(t,e){for(var n=Mb(t,e),r=0,s=0,i=n;s<i.length;s++){var o=i[s];r+=Math.pow(Il(t,e,o),2)}return r}function AX(t,e,n,r,s){s===void 0&&(s=0);var i=[qe.left,qe.right,qe.bottom,qe.top];As()&&(i[0]*=-1,i[1]*=-1);for(var o=t,a=r.targetEdge,l=r.alignmentEdge,u,c=a,d=l,h=0;h<4;h++){if(Bb(o,n,a))return{elementRectangle:o,targetEdge:a,alignmentEdge:l};var f=NX(o,n);(!u||f<u)&&(u=f,c=a,d=l),i.splice(i.indexOf(a),1),i.length>0&&(i.indexOf(a*-1)>-1?a=a*-1:(l=a,a=i.slice(-1)[0]),o=zb(t,e,{targetEdge:a,alignmentEdge:l},s))}return o=zb(t,e,{targetEdge:c,alignmentEdge:d},s),{elementRectangle:o,targetEdge:c,alignmentEdge:d}}function DX(t,e,n,r){var s=t.alignmentEdge,i=t.targetEdge,o=t.elementRectangle,a=s*-1,l=zb(o,e,{targetEdge:i,alignmentEdge:a},n,r);return{elementRectangle:l,targetEdge:i,alignmentEdge:a}}function RX(t,e,n,r,s,i,o){s===void 0&&(s=0);var a=r.alignmentEdge,l=r.alignTargetEdge,u={elementRectangle:t,targetEdge:r.targetEdge,alignmentEdge:a};!i&&!o&&(u=AX(t,e,n,r,s));var c=Mb(u.elementRectangle,n),d=i?-u.targetEdge:void 0;if(c.length>0)if(l)if(u.alignmentEdge&&c.indexOf(u.alignmentEdge*-1)>-1){var h=DX(u,e,s,o);if(fI(h.elementRectangle,n))return h;u=N2(Mb(h.elementRectangle,n),u,n,d)}else u=N2(c,u,n,d);else u=N2(c,u,n,d);return u}function N2(t,e,n,r){for(var s=0,i=t;s<i.length;s++){var o=i[s],a=void 0;if(r&&r===o*-1)a=bf(e.elementRectangle,o,gs(n,o),!1),e.forcedInBounds=!0;else{a=Lm(e.elementRectangle,n,o);var l=Bb(a,n,o*-1);l||(a=bf(a,o*-1,gs(n,o*-1),!1),e.forcedInBounds=!0)}e.elementRectangle=a}return e}function D$(t,e,n){var r=qf(e).positiveEdge,s=$m(t,e),i=s-gs(t,r);return bf(t,r,n-i)}function zb(t,e,n,r,s){r===void 0&&(r=0);var i=new za(t.left,t.right,t.top,t.bottom),o=n.alignmentEdge,a=n.targetEdge,l=s?a:a*-1;if(i=s?Lm(i,e,a,r):IX(i,e,a,r),o)i=Lm(i,e,o);else{var u=$m(e,a);i=D$(i,l,u)}return i}function qf(t){return t===qe.top||t===qe.bottom?{positiveEdge:qe.left,negativeEdge:qe.right}:{positiveEdge:qe.top,negativeEdge:qe.bottom}}function R$(t,e,n){return n&&Math.abs(Il(t,n,e))>Math.abs(Il(t,n,e*-1))?e*-1:e}function FX(t,e,n){return n!==void 0&&gs(t,e)===gs(n,e)}function OX(t,e,n,r,s,i,o,a){var l={},u=pI(e),c=i?n:n*-1,d=s||qf(n).positiveEdge;return(!o||FX(t,qX(d),r))&&(d=R$(t,d,r)),l[qe[c]]=Il(t,u,c),l[qe[d]]=Il(t,u,d),a&&(l[qe[c*-1]]=Il(t,u,c*-1),l[qe[d*-1]]=Il(t,u,d*-1)),l}function $X(t){return Math.sqrt(t*t*2)}function LX(t,e,n){if(t===void 0&&(t=Jn.bottomAutoEdge),n)return{alignmentEdge:n.alignmentEdge,isAuto:n.isAuto,targetEdge:n.targetEdge};var r=U({},C4[t]);return As()?(r.alignmentEdge&&r.alignmentEdge%2===0&&(r.alignmentEdge=r.alignmentEdge*-1),e!==void 0?C4[e]:r):r}function PX(t,e,n,r,s){return t.isAuto&&(t.alignmentEdge=F$(t.targetEdge,e,n)),t.alignTargetEdge=s,t}function F$(t,e,n){var r=$m(e,t),s=$m(n,t),i=qf(t),o=i.positiveEdge,a=i.negativeEdge;return r<=s?o:a}function MX(t,e,n,r,s,i,o){var a=zb(t,e,r,s,o);return fI(a,n)?{elementRectangle:a,targetEdge:r.targetEdge,alignmentEdge:r.alignmentEdge}:RX(a,e,n,r,s,i,o)}function BX(t,e,n){var r=t.targetEdge*-1,s=new za(0,t.elementRectangle.width,0,t.elementRectangle.height),i={},o=R$(t.elementRectangle,t.alignmentEdge?t.alignmentEdge:qf(r).positiveEdge,n),a=Il(t.elementRectangle,t.targetRectangle,r),l=a>Math.abs(gs(e,r));return i[qe[r]]=gs(e,r),i[qe[o]]=Il(e,s,o),{elementPosition:U({},i),closestEdge:F$(t.targetEdge,e,s),targetEdge:r,hideBeak:!l}}function zX(t,e){var n=e.targetRectangle,r=qf(e.targetEdge),s=r.positiveEdge,i=r.negativeEdge,o=$m(n,e.targetEdge),a=new za(t/2,e.elementRectangle.width-t/2,t/2,e.elementRectangle.height-t/2),l=new za(0,t,0,t);return l=bf(l,e.targetEdge*-1,-t/2),l=D$(l,e.targetEdge*-1,o-kw(s,e.elementRectangle)),Bb(l,a,s)?Bb(l,a,i)||(l=Lm(l,a,i)):l=Lm(l,a,s),l}function pI(t){var e=t.getBoundingClientRect();return new za(e.left,e.right,e.top,e.bottom)}function HX(t){return new za(t.left,t.right,t.top,t.bottom)}function UX(t,e){var n;if(e){if(e.preventDefault){var r=e;n=new za(r.clientX,r.clientX,r.clientY,r.clientY)}else if(e.getBoundingClientRect)n=pI(e);else{var s=e,i=s.left||s.x,o=s.top||s.y,a=s.right||i,l=s.bottom||o;n=new za(i,a,o,l)}if(!fI(n,t))for(var u=Mb(n,t),c=0,d=u;c<d.length;c++){var h=d[c];n[qe[h]]=t[qe[h]]}}else n=new za(0,0,0,0);return n}function WX(t,e,n,r){var s=t.gapSpace?t.gapSpace:0,i=UX(n,t.target),o=PX(LX(t.directionalHint,t.directionalHintForRTL,r),i,n,t.coverTarget,t.alignTargetEdge),a=MX(pI(e),i,n,o,s,t.directionalHintFixed,t.coverTarget);return U(U({},a),{targetRectangle:i})}function VX(t,e,n,r,s){var i=OX(t.elementRectangle,e,t.targetEdge,n,t.alignmentEdge,r,s,t.forcedInBounds);return{elementPosition:i,targetEdge:t.targetEdge,alignmentEdge:t.alignmentEdge}}function O$(t,e,n,r,s){var i=t.isBeakVisible&&t.beakWidth||0,o=$X(i)/2+(t.gapSpace?t.gapSpace:0),a=t;a.gapSpace=o;var l=t.bounds?HX(t.bounds):new za(0,window.innerWidth-nK(),0,window.innerHeight),u=WX(a,n,l,r),c=zX(i,u),d=BX(u,c,l);return U(U({},VX(u,e,l,t.coverTarget,s)),{beakPosition:d})}function GX(t,e,n,r){return O$(t,e,n,r,!0)}function jX(t,e,n,r){return O$(t,e,n,r)}function KX(t,e,n,r){return GX(t,e,n,r)}function qX(t){return t*-1}function XX(t,e){var n=void 0;if(e.getWindowSegments&&(n=e.getWindowSegments()),n===void 0||n.length<=1)return{top:0,left:0,right:e.innerWidth,bottom:e.innerHeight,width:e.innerWidth,height:e.innerHeight};var r=0,s=0;if(t!==null&&t.getBoundingClientRect){var i=t.getBoundingClientRect();r=(i.left+i.right)/2,s=(i.top+i.bottom)/2}else t!==null&&(r=t.left||t.x,s=t.top||t.y);for(var o={top:0,left:0,right:0,bottom:0,width:0,height:0},a=0,l=n;a<l.length;a++){var u=l[a];r&&u.left<=r&&u.right>=r&&s&&u.top<=s&&u.bottom>=s&&(o={top:u.top,left:u.left,right:u.right,bottom:u.bottom,width:u.width,height:u.height})}return o}function YX(t,e){return XX(t,e)}function Xf(){var t=w.useRef();return t.current||(t.current=new Kf),w.useEffect(function(){return function(){var e;(e=t.current)===null||e===void 0||e.dispose(),t.current=void 0}},[]),t.current}function go(t){var e=w.useRef();return e.current===void 0&&(e.current={value:typeof t=="function"?t():t}),e.current.value}function Lg(t){var e=w.useState(t),n=e[0],r=e[1],s=go(function(){return function(){r(!0)}}),i=go(function(){return function(){r(!1)}}),o=go(function(){return function(){r(function(a){return!a})}});return[n,{setTrue:s,setFalse:i,toggle:o}]}function Iw(t,e,n){var r=w.useState(e),s=r[0],i=r[1],o=go(t!==void 0),a=o?t:s,l=w.useRef(a),u=w.useRef(n);w.useEffect(function(){l.current=a,u.current=n});var c=go(function(){return function(d,h){var f=typeof d=="function"?d(l.current):d;u.current&&u.current(h,f),o||i(f)}});return[a,c]}function A2(t){var e=w.useRef(function(){throw new Error("Cannot call an event handler while rendering")});return yf(function(){e.current=t},[t]),go(function(){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=e.current;return s.apply(void 0,n)}})}function Yf(t,e){var n=w.useRef(e);return n.current||(n.current=Ds(t)),n.current}function Xa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=w.useCallback(function(r){n.current=r;for(var s=0,i=t;s<i.length;s++){var o=i[s];typeof o=="function"?o(r):o&&(o.current=r)}},sa([],t,!0));return n}function Pm(t,e,n,r){var s=w.useRef(n);s.current=n,w.useEffect(function(){var i=t&&"current"in t?t.current:t;if(i){var o=Ra(i,e,function(a){return s.current(a)},r);return o}},[t,e,r])}function mI(t){var e=w.useRef();return w.useEffect(function(){e.current=t}),e.current}var QX=function(){var t=go({});return w.useEffect(function(){return function(){for(var e=0,n=Object.keys(t);e<n.length;e++){var r=n[e];clearTimeout(r)}}},[t]),go({setTimeout:function(e,n){var r=setTimeout(e,n);return t[r]=1,r},clearTimeout:function(e){delete t[e],clearTimeout(e)}})},gI=w.createContext({window:typeof window=="object"?window:void 0}),cT=function(){return w.useContext(gI).window},ZX=function(){var t;return(t=w.useContext(gI).window)===null||t===void 0?void 0:t.document};function $$(t,e){var n=w.useRef(),r=w.useRef(null),s=cT();if(!t||t!==n.current||typeof t=="string"){var i=e==null?void 0:e.current;if(t)if(typeof t=="string"){var o=Ps(i);r.current=o?o.querySelector(t):null}else"stopPropagation"in t||"getBoundingClientRect"in t?r.current=t:"current"in t?r.current=t.current:r.current=t;n.current=t}return[r,s]}var L$=function(t){var e=w.useRef(t);e.current=t,w.useEffect(function(){return function(){var n;(n=e.current)===null||n===void 0||n.call(e)}},[])};function JX(t,e){var n=Xf(),r=w.useState(!1),s=r[0],i=r[1];return w.useEffect(function(){return n.requestAnimationFrame(function(){var o;if(!(t.style&&t.style.overflowY)){var a=!1;if(e&&e.current&&(!((o=e.current)===null||o===void 0)&&o.firstElementChild)){var l=e.current.clientHeight,u=e.current.firstElementChild.clientHeight;l>0&&u>l&&(a=u-l>1)}s!==a&&i(a)}}),function(){return n.dispose()}}),s}function eY(t){var e=t.originalElement,n=t.containsFocus;e&&n&&e!==Sn()&&setTimeout(function(){var r;(r=e.focus)===null||r===void 0||r.call(e)},0)}function tY(t,e){var n=t.onRestoreFocus,r=n===void 0?eY:n,s=w.useRef(),i=w.useRef(!1);w.useEffect(function(){return s.current=Ps().activeElement,kK(e.current)&&(i.current=!0),function(){var o;r==null||r({originalElement:s.current,containsFocus:i.current,documentContainsFocus:((o=Ps())===null||o===void 0?void 0:o.hasFocus())||!1}),s.current=void 0}},[]),Pm(e,"focus",w.useCallback(function(){i.current=!0},[]),!0),Pm(e,"blur",w.useCallback(function(o){e.current&&o.relatedTarget&&!e.current.contains(o.relatedTarget)&&(i.current=!1)},[]),!0)}function nY(t,e){var n=String(t["aria-modal"]).toLowerCase()==="true"&&t.enableAriaHiddenSiblings;w.useEffect(function(){if(n&&e.current){var r=C$(e.current);return r}},[e,n])}var yI=w.forwardRef(function(t,e){var n=Og({shouldRestoreFocus:!0,enableAriaHiddenSiblings:!0},t),r=w.useRef(),s=Xa(r,e);nY(n,r),tY(n,r);var i=n.role,o=n.className,a=n.ariaLabel,l=n.ariaLabelledBy,u=n.ariaDescribedBy,c=n.style,d=n.children,h=n.onDismiss,f=JX(n,r),p=w.useCallback(function(y){switch(y.which){case je.escape:h&&(h(y),y.preventDefault(),y.stopPropagation());break}},[h]),m=cT();return Pm(m,"keydown",p),w.createElement("div",U({ref:s},yn(n,jl),{className:o,role:i,"aria-label":a,"aria-labelledby":l,"aria-describedby":u,onKeyDown:p,style:U({overflowY:f?"scroll":void 0,outline:"none"},c)}),d)});yI.displayName="Popup";var yh,rY="CalloutContentBase",sY=(yh={},yh[qe.top]=Ph.slideUpIn10,yh[qe.bottom]=Ph.slideDownIn10,yh[qe.left]=Ph.slideLeftIn10,yh[qe.right]=Ph.slideRightIn10,yh),w4={top:0,left:0},iY={opacity:0,filter:"opacity(0)",pointerEvents:"none"},oY=["role","aria-roledescription"],P$={preventDismissOnLostFocus:!1,preventDismissOnScroll:!1,preventDismissOnResize:!1,isBeakVisible:!0,beakWidth:16,gapSpace:0,minPagePadding:8,directionalHint:Jn.bottomAutoEdge},aY=Sr({disableCaching:!0});function lY(t,e,n){var r=t.bounds,s=t.minPagePadding,i=s===void 0?P$.minPagePadding:s,o=t.target,a=w.useState(!1),l=a[0],u=a[1],c=w.useRef(),d=w.useCallback(function(){if(!c.current||l){var f=typeof r=="function"?n?r(o,n):void 0:r;!f&&n&&(f=YX(e.current,n),f={top:f.top+i,left:f.left+i,right:f.right-i,bottom:f.bottom-i,width:f.width-i*2,height:f.height-i*2}),c.current=f,l&&u(!1)}return c.current},[r,i,o,e,n,l]),h=Xf();return Pm(n,"resize",h.debounce(function(){u(!0)},500,{leading:!0})),d}function uY(t,e,n){var r,s=t.calloutMaxHeight,i=t.finalHeight,o=t.directionalHint,a=t.directionalHintFixed,l=t.hidden,u=w.useState(),c=u[0],d=u[1],h=(r=n==null?void 0:n.elementPosition)!==null&&r!==void 0?r:{},f=h.top,p=h.bottom;return w.useEffect(function(){var m,y=(m=e())!==null&&m!==void 0?m:{},g=y.top,v=y.bottom;!s&&!l?typeof f=="number"&&v?d(v-f):typeof p=="number"&&typeof g=="number"&&v&&d(v-g-p):d(s||void 0)},[p,s,i,o,a,e,l,n,f]),c}function cY(t,e,n,r,s){var i=w.useState(),o=i[0],a=i[1],l=w.useRef(0),u=w.useRef(),c=Xf(),d=t.hidden,h=t.target,f=t.finalHeight,p=t.calloutMaxHeight,m=t.onPositioned,y=t.directionalHint;return w.useEffect(function(){if(d)a(void 0),l.current=0;else{var g=c.requestAnimationFrame(function(){var v,E;if(e.current&&n){var b=U(U({},t),{target:r.current,bounds:s()}),T=n.cloneNode(!0);T.style.maxHeight=p?""+p:"",T.style.visibility="hidden",(v=n.parentElement)===null||v===void 0||v.appendChild(T);var x=u.current===h?o:void 0,C=f?KX(b,e.current,T,x):jX(b,e.current,T,x);(E=n.parentElement)===null||E===void 0||E.removeChild(T),!o&&C||o&&C&&!pY(o,C)&&l.current<5?(l.current++,a(C)):l.current>0&&(l.current=0,m==null||m(o))}},n);return u.current=h,function(){c.cancelAnimationFrame(g),u.current=void 0}}},[d,y,c,n,p,e,r,f,s,m,o,t,h]),o}function dY(t,e,n){var r=t.hidden,s=t.setInitialFocus,i=Xf(),o=!!e;w.useEffect(function(){if(!r&&s&&o&&n){var a=i.requestAnimationFrame(function(){return _K(n)},n);return function(){return i.cancelAnimationFrame(a)}}},[r,o,i,n,s])}function hY(t,e,n,r,s){var i=t.hidden,o=t.onDismiss,a=t.preventDismissOnScroll,l=t.preventDismissOnResize,u=t.preventDismissOnLostFocus,c=t.dismissOnTargetClick,d=t.shouldDismissOnWindowFocus,h=t.preventDismissOnEvent,f=w.useRef(!1),p=Xf(),m=go([function(){f.current=!0},function(){f.current=!1}]),y=!!e;return w.useEffect(function(){var g=function(C){y&&!a&&b(C)},v=function(C){!l&&!(h&&h(C))&&(o==null||o(C))},E=function(C){u||b(C)},b=function(C){var S=C.composedPath?C.composedPath():[],N=S.length>0?S[0]:C.target,I=n.current&&!oi(n.current,N);if(I&&f.current){f.current=!1;return}if(!r.current&&I||C.target!==s&&I&&(!r.current||"stopPropagation"in r.current||c||N!==r.current&&!oi(r.current,N))){if(h&&h(C))return;o==null||o(C)}},T=function(C){d&&(h&&!h(C)||!h&&!u)&&!(s!=null&&s.document.hasFocus())&&C.relatedTarget===null&&(o==null||o(C))},x=new Promise(function(C){p.setTimeout(function(){if(!i&&s){var S=[Ra(s,"scroll",g,!0),Ra(s,"resize",v,!0),Ra(s.document.documentElement,"focus",E,!0),Ra(s.document.documentElement,"click",E,!0),Ra(s,"blur",T,!0)];C(function(){S.forEach(function(N){return N()})})}},0)});return function(){x.then(function(C){return C()})}},[i,p,n,r,s,o,d,c,u,l,a,y,h]),m}var M$=w.memo(w.forwardRef(function(t,e){var n=Og(P$,t),r=n.styles,s=n.style,i=n.ariaLabel,o=n.ariaDescribedBy,a=n.ariaLabelledBy,l=n.className,u=n.isBeakVisible,c=n.children,d=n.beakWidth,h=n.calloutWidth,f=n.calloutMaxWidth,p=n.calloutMinWidth,m=n.doNotLayer,y=n.finalHeight,g=n.hideOverflow,v=g===void 0?!!y:g,E=n.backgroundColor,b=n.calloutMaxHeight,T=n.onScroll,x=n.shouldRestoreFocus,C=x===void 0?!0:x,S=n.target,N=n.hidden,I=n.onLayerMounted,F=n.popupProps,L=w.useRef(null),z=w.useState(null),H=z[0],$=z[1],M=w.useCallback(function(dt){$(dt)},[]),j=Xa(L,e),P=$$(n.target,{current:H}),B=P[0],K=P[1],A=lY(n,B,K),O=cY(n,L,H,B,A),se=uY(n,A,O),ae=hY(n,O,L,B,K),de=ae[0],le=ae[1],ve=(O==null?void 0:O.elementPosition.top)&&(O==null?void 0:O.elementPosition.bottom),Ne=U(U({},O==null?void 0:O.elementPosition),{maxHeight:se});if(ve&&(Ne.bottom=void 0),dY(n,O,H),w.useEffect(function(){N||I==null||I()},[N]),!K)return null;var _e=v,Se=u&&!!S,Fe=aY(r,{theme:n.theme,className:l,overflowYHidden:_e,calloutWidth:h,positions:O,beakWidth:d,backgroundColor:E,calloutMaxWidth:f,calloutMinWidth:p,doNotLayer:m}),et=U(U({maxHeight:b||"100%"},s),_e&&{overflowY:"hidden"}),ot=n.hidden?{visibility:"hidden"}:void 0;return w.createElement("div",{ref:j,className:Fe.container,style:ot},w.createElement("div",U({},yn(n,jl,oY),{className:Fs(Fe.root,O&&O.targetEdge&&sY[O.targetEdge]),style:O?U({},Ne):iY,tabIndex:-1,ref:M}),Se&&w.createElement("div",{className:Fe.beak,style:fY(O)}),Se&&w.createElement("div",{className:Fe.beakCurtain}),w.createElement(yI,U({role:n.role,"aria-roledescription":n["aria-roledescription"],ariaDescribedBy:o,ariaLabel:i,ariaLabelledBy:a,className:Fe.calloutMain,onDismiss:n.onDismiss,onMouseDown:de,onMouseUp:le,onRestoreFocus:n.onRestoreFocus,onScroll:T,shouldRestoreFocus:C,style:et},F),c)))}),function(t,e){return!e.shouldUpdateWhenHidden&&t.hidden&&e.hidden?!0:iI(t,e)});function fY(t){var e,n,r=U(U({},(e=t==null?void 0:t.beakPosition)===null||e===void 0?void 0:e.elementPosition),{display:!((n=t==null?void 0:t.beakPosition)===null||n===void 0)&&n.hideBeak?"none":void 0});return!r.top&&!r.bottom&&!r.left&&!r.right&&(r.left=w4.left,r.top=w4.top),r}function pY(t,e){return _4(t.elementPosition,e.elementPosition)&&_4(t.beakPosition.elementPosition,e.beakPosition.elementPosition)}function _4(t,e){for(var n in e)if(e.hasOwnProperty(n)){var r=t[n],s=e[n];if(r!==void 0&&s!==void 0){if(r.toFixed(2)!==s.toFixed(2))return!1}else return!1}return!0}M$.displayName=rY;function mY(t){return{height:t,width:t}}var gY={container:"ms-Callout-container",root:"ms-Callout",beak:"ms-Callout-beak",beakCurtain:"ms-Callout-beakCurtain",calloutMain:"ms-Callout-main"},yY=function(t){var e,n=t.theme,r=t.className,s=t.overflowYHidden,i=t.calloutWidth,o=t.beakWidth,a=t.backgroundColor,l=t.calloutMaxWidth,u=t.calloutMinWidth,c=t.doNotLayer,d=es(gY,n),h=n.semanticColors,f=n.effects;return{container:[d.container,{position:"relative"}],root:[d.root,n.fonts.medium,{position:"absolute",display:"flex",zIndex:c?vf.Layer:void 0,boxSizing:"border-box",borderRadius:f.roundedCorner2,boxShadow:f.elevation16,selectors:(e={},e[we]={borderWidth:1,borderStyle:"solid",borderColor:"WindowText"},e)},gX(),r,!!i&&{width:i},!!l&&{maxWidth:l},!!u&&{minWidth:u}],beak:[d.beak,{position:"absolute",backgroundColor:h.menuBackground,boxShadow:"inherit",border:"inherit",boxSizing:"border-box",transform:"rotate(45deg)"},mY(o),a&&{backgroundColor:a}],beakCurtain:[d.beakCurtain,{position:"absolute",top:0,right:0,bottom:0,left:0,backgroundColor:h.menuBackground,borderRadius:f.roundedCorner2}],calloutMain:[d.calloutMain,{backgroundColor:h.menuBackground,overflowX:"hidden",overflowY:"auto",position:"relative",width:"100%",borderRadius:f.roundedCorner2},s&&{overflowY:"hidden"},a&&{backgroundColor:a}]}},vY=wr(M$,yY,void 0,{scope:"CalloutContent"}),B$=w.createContext(void 0),bY=function(){return function(){}};B$.Provider;function EY(){var t;return(t=w.useContext(B$))!==null&&t!==void 0?t:bY}var Hb={},TY={get exports(){return Hb},set exports(t){Hb=t}},Vi={},Nw={},xY={get exports(){return Nw},set exports(t){Nw=t}},z$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,B){var K=P.length;P.push(B);e:for(;0<K;){var A=K-1>>>1,O=P[A];if(0<s(O,B))P[A]=B,P[K]=O,K=A;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var B=P[0],K=P.pop();if(K!==B){P[0]=K;e:for(var A=0,O=P.length,se=O>>>1;A<se;){var ae=2*(A+1)-1,de=P[ae],le=ae+1,ve=P[le];if(0>s(de,K))le<O&&0>s(ve,de)?(P[A]=ve,P[le]=K,A=le):(P[A]=de,P[ae]=K,A=ae);else if(le<O&&0>s(ve,K))P[A]=ve,P[le]=K,A=le;else break e}}return B}function s(P,B){var K=P.sortIndex-B.sortIndex;return K!==0?K:P.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,f=!1,p=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(P){for(var B=n(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=P)r(u),B.sortIndex=B.expirationTime,e(l,B);else break;B=n(u)}}function b(P){if(m=!1,E(P),!p)if(n(l)!==null)p=!0,M(T);else{var B=n(u);B!==null&&j(b,B.startTime-P)}}function T(P,B){p=!1,m&&(m=!1,g(S),S=-1),f=!0;var K=h;try{for(E(B),d=n(l);d!==null&&(!(d.expirationTime>B)||P&&!F());){var A=d.callback;if(typeof A=="function"){d.callback=null,h=d.priorityLevel;var O=A(d.expirationTime<=B);B=t.unstable_now(),typeof O=="function"?d.callback=O:d===n(l)&&r(l),E(B)}else r(l);d=n(l)}if(d!==null)var se=!0;else{var ae=n(u);ae!==null&&j(b,ae.startTime-B),se=!1}return se}finally{d=null,h=K,f=!1}}var x=!1,C=null,S=-1,N=5,I=-1;function F(){return!(t.unstable_now()-I<N)}function L(){if(C!==null){var P=t.unstable_now();I=P;var B=!0;try{B=C(!0,P)}finally{B?z():(x=!1,C=null)}}else x=!1}var z;if(typeof v=="function")z=function(){v(L)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,$=H.port2;H.port1.onmessage=L,z=function(){$.postMessage(null)}}else z=function(){y(L,0)};function M(P){C=P,x||(x=!0,z())}function j(P,B){S=y(function(){P(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,M(T))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(P){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var K=h;h=B;try{return P()}finally{h=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,B){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var K=h;h=P;try{return B()}finally{h=K}},t.unstable_scheduleCallback=function(P,B,K){var A=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?A+K:A):K=A,P){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=K+O,P={id:c++,callback:B,priorityLevel:P,startTime:K,expirationTime:O,sortIndex:-1},K>A?(P.sortIndex=K,e(u,P),n(l)===null&&P===n(u)&&(m?(g(S),S=-1):m=!0,j(b,K-A))):(P.sortIndex=O,e(l,P),p||f||(p=!0,M(T))),P},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(P){var B=h;return function(){var K=h;h=B;try{return P.apply(this,arguments)}finally{h=K}}}})(z$);(function(t){t.exports=z$})(xY);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H$=w,zi=Nw;function ye(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var U$=new Set,Mm={};function Ud(t,e){Ef(t,e),Ef(t+"Capture",e)}function Ef(t,e){for(Mm[t]=e,t=0;t<e.length;t++)U$.add(e[t])}var $l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Aw=Object.prototype.hasOwnProperty,CY=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,k4={},I4={};function SY(t){return Aw.call(I4,t)?!0:Aw.call(k4,t)?!1:CY.test(t)?I4[t]=!0:(k4[t]=!0,!1)}function wY(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _Y(t,e,n,r){if(e===null||typeof e>"u"||wY(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function js(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Jr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Jr[t]=new js(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Jr[e]=new js(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Jr[t]=new js(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Jr[t]=new js(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Jr[t]=new js(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Jr[t]=new js(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Jr[t]=new js(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Jr[t]=new js(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Jr[t]=new js(t,5,!1,t.toLowerCase(),null,!1,!1)});var vI=/[\-:]([a-z])/g;function bI(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vI,bI);Jr[e]=new js(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vI,bI);Jr[e]=new js(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vI,bI);Jr[e]=new js(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Jr[t]=new js(t,1,!1,t.toLowerCase(),null,!1,!1)});Jr.xlinkHref=new js("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Jr[t]=new js(t,1,!1,t.toLowerCase(),null,!0,!0)});function EI(t,e,n,r){var s=Jr.hasOwnProperty(e)?Jr[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_Y(e,n,s,r)&&(n=null),r||s===null?SY(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ql=H$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jy=Symbol.for("react.element"),Mh=Symbol.for("react.portal"),Bh=Symbol.for("react.fragment"),TI=Symbol.for("react.strict_mode"),Dw=Symbol.for("react.profiler"),W$=Symbol.for("react.provider"),V$=Symbol.for("react.context"),xI=Symbol.for("react.forward_ref"),Rw=Symbol.for("react.suspense"),Fw=Symbol.for("react.suspense_list"),CI=Symbol.for("react.memo"),bu=Symbol.for("react.lazy"),G$=Symbol.for("react.offscreen"),N4=Symbol.iterator;function x1(t){return t===null||typeof t!="object"?null:(t=N4&&t[N4]||t["@@iterator"],typeof t=="function"?t:null)}var Hn=Object.assign,D2;function Z1(t){if(D2===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);D2=e&&e[1]||""}return`
`+D2+t}var R2=!1;function F2(t,e){if(!t||R2)return"";R2=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{R2=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Z1(t):""}function kY(t){switch(t.tag){case 5:return Z1(t.type);case 16:return Z1("Lazy");case 13:return Z1("Suspense");case 19:return Z1("SuspenseList");case 0:case 2:case 15:return t=F2(t.type,!1),t;case 11:return t=F2(t.type.render,!1),t;case 1:return t=F2(t.type,!0),t;default:return""}}function Ow(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bh:return"Fragment";case Mh:return"Portal";case Dw:return"Profiler";case TI:return"StrictMode";case Rw:return"Suspense";case Fw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case V$:return(t.displayName||"Context")+".Consumer";case W$:return(t._context.displayName||"Context")+".Provider";case xI:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case CI:return e=t.displayName||null,e!==null?e:Ow(t.type)||"Memo";case bu:e=t._payload,t=t._init;try{return Ow(t(e))}catch{}}return null}function IY(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ow(e);case 8:return e===TI?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ku(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function j$(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function NY(t){var e=j$(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ev(t){t._valueTracker||(t._valueTracker=NY(t))}function K$(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=j$(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ub(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $w(t,e){var n=e.checked;return Hn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function A4(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ku(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function q$(t,e){e=e.checked,e!=null&&EI(t,"checked",e,!1)}function Lw(t,e){q$(t,e);var n=Ku(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Pw(t,e.type,n):e.hasOwnProperty("defaultValue")&&Pw(t,e.type,Ku(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function D4(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Pw(t,e,n){(e!=="number"||Ub(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var J1=Array.isArray;function tf(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ku(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Mw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ye(91));return Hn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function R4(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ye(92));if(J1(n)){if(1<n.length)throw Error(ye(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ku(n)}}function X$(t,e){var n=Ku(e.value),r=Ku(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function F4(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Y$(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Y$(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var tv,Q$=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(tv=tv||document.createElement("div"),tv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tv.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Bm(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var dm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AY=["Webkit","ms","Moz","O"];Object.keys(dm).forEach(function(t){AY.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),dm[e]=dm[t]})});function Z$(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||dm.hasOwnProperty(t)&&dm[t]?(""+e).trim():e+"px"}function J$(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Z$(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var DY=Hn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zw(t,e){if(e){if(DY[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ye(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ye(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ye(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ye(62))}}function Hw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uw=null;function SI(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ww=null,nf=null,rf=null;function O4(t){if(t=Bg(t)){if(typeof Ww!="function")throw Error(ye(280));var e=t.stateNode;e&&(e=mT(e),Ww(t.stateNode,t.type,e))}}function eL(t){nf?rf?rf.push(t):rf=[t]:nf=t}function tL(){if(nf){var t=nf,e=rf;if(rf=nf=null,O4(t),e)for(t=0;t<e.length;t++)O4(e[t])}}function nL(t,e){return t(e)}function rL(){}var O2=!1;function sL(t,e,n){if(O2)return t(e,n);O2=!0;try{return nL(t,e,n)}finally{O2=!1,(nf!==null||rf!==null)&&(rL(),tL())}}function zm(t,e){var n=t.stateNode;if(n===null)return null;var r=mT(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ye(231,e,typeof n));return n}var Vw=!1;if($l)try{var C1={};Object.defineProperty(C1,"passive",{get:function(){Vw=!0}}),window.addEventListener("test",C1,C1),window.removeEventListener("test",C1,C1)}catch{Vw=!1}function RY(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var hm=!1,Wb=null,Vb=!1,Gw=null,FY={onError:function(t){hm=!0,Wb=t}};function OY(t,e,n,r,s,i,o,a,l){hm=!1,Wb=null,RY.apply(FY,arguments)}function $Y(t,e,n,r,s,i,o,a,l){if(OY.apply(this,arguments),hm){if(hm){var u=Wb;hm=!1,Wb=null}else throw Error(ye(198));Vb||(Vb=!0,Gw=u)}}function Wd(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function iL(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $4(t){if(Wd(t)!==t)throw Error(ye(188))}function LY(t){var e=t.alternate;if(!e){if(e=Wd(t),e===null)throw Error(ye(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return $4(s),t;if(i===r)return $4(s),e;i=i.sibling}throw Error(ye(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(ye(189))}}if(n.alternate!==r)throw Error(ye(190))}if(n.tag!==3)throw Error(ye(188));return n.stateNode.current===n?t:e}function oL(t){return t=LY(t),t!==null?aL(t):null}function aL(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=aL(t);if(e!==null)return e;t=t.sibling}return null}var lL=zi.unstable_scheduleCallback,L4=zi.unstable_cancelCallback,PY=zi.unstable_shouldYield,MY=zi.unstable_requestPaint,tr=zi.unstable_now,BY=zi.unstable_getCurrentPriorityLevel,wI=zi.unstable_ImmediatePriority,uL=zi.unstable_UserBlockingPriority,Gb=zi.unstable_NormalPriority,zY=zi.unstable_LowPriority,cL=zi.unstable_IdlePriority,dT=null,Ha=null;function HY(t){if(Ha&&typeof Ha.onCommitFiberRoot=="function")try{Ha.onCommitFiberRoot(dT,t,void 0,(t.current.flags&128)===128)}catch{}}var Zo=Math.clz32?Math.clz32:VY,UY=Math.log,WY=Math.LN2;function VY(t){return t>>>=0,t===0?32:31-(UY(t)/WY|0)|0}var nv=64,rv=4194304;function em(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function jb(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=em(a):(i&=o,i!==0&&(r=em(i)))}else o=n&~s,o!==0?r=em(o):i!==0&&(r=em(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Zo(e),s=1<<n,r|=t[n],e&=~s;return r}function GY(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jY(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Zo(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=GY(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function jw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function dL(){var t=nv;return nv<<=1,!(nv&4194240)&&(nv=64),t}function $2(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Pg(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zo(e),t[e]=n}function KY(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Zo(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function _I(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Zo(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Xt=0;function hL(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var fL,kI,pL,mL,gL,Kw=!1,sv=[],$u=null,Lu=null,Pu=null,Hm=new Map,Um=new Map,Su=[],qY="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function P4(t,e){switch(t){case"focusin":case"focusout":$u=null;break;case"dragenter":case"dragleave":Lu=null;break;case"mouseover":case"mouseout":Pu=null;break;case"pointerover":case"pointerout":Hm.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Um.delete(e.pointerId)}}function S1(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Bg(e),e!==null&&kI(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function XY(t,e,n,r,s){switch(e){case"focusin":return $u=S1($u,t,e,n,r,s),!0;case"dragenter":return Lu=S1(Lu,t,e,n,r,s),!0;case"mouseover":return Pu=S1(Pu,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Hm.set(i,S1(Hm.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Um.set(i,S1(Um.get(i)||null,t,e,n,r,s)),!0}return!1}function yL(t){var e=ed(t.target);if(e!==null){var n=Wd(e);if(n!==null){if(e=n.tag,e===13){if(e=iL(n),e!==null){t.blockedOn=e,gL(t.priority,function(){pL(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ab(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Uw=r,n.target.dispatchEvent(r),Uw=null}else return e=Bg(n),e!==null&&kI(e),t.blockedOn=n,!1;e.shift()}return!0}function M4(t,e,n){ab(t)&&n.delete(e)}function YY(){Kw=!1,$u!==null&&ab($u)&&($u=null),Lu!==null&&ab(Lu)&&(Lu=null),Pu!==null&&ab(Pu)&&(Pu=null),Hm.forEach(M4),Um.forEach(M4)}function w1(t,e){t.blockedOn===e&&(t.blockedOn=null,Kw||(Kw=!0,zi.unstable_scheduleCallback(zi.unstable_NormalPriority,YY)))}function Wm(t){function e(s){return w1(s,t)}if(0<sv.length){w1(sv[0],t);for(var n=1;n<sv.length;n++){var r=sv[n];r.blockedOn===t&&(r.blockedOn=null)}}for($u!==null&&w1($u,t),Lu!==null&&w1(Lu,t),Pu!==null&&w1(Pu,t),Hm.forEach(e),Um.forEach(e),n=0;n<Su.length;n++)r=Su[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Su.length&&(n=Su[0],n.blockedOn===null);)yL(n),n.blockedOn===null&&Su.shift()}var sf=ql.ReactCurrentBatchConfig,Kb=!0;function QY(t,e,n,r){var s=Xt,i=sf.transition;sf.transition=null;try{Xt=1,II(t,e,n,r)}finally{Xt=s,sf.transition=i}}function ZY(t,e,n,r){var s=Xt,i=sf.transition;sf.transition=null;try{Xt=4,II(t,e,n,r)}finally{Xt=s,sf.transition=i}}function II(t,e,n,r){if(Kb){var s=qw(t,e,n,r);if(s===null)G2(t,e,r,qb,n),P4(t,r);else if(XY(s,t,e,n,r))r.stopPropagation();else if(P4(t,r),e&4&&-1<qY.indexOf(t)){for(;s!==null;){var i=Bg(s);if(i!==null&&fL(i),i=qw(t,e,n,r),i===null&&G2(t,e,r,qb,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else G2(t,e,r,null,n)}}var qb=null;function qw(t,e,n,r){if(qb=null,t=SI(r),t=ed(t),t!==null)if(e=Wd(t),e===null)t=null;else if(n=e.tag,n===13){if(t=iL(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qb=t,null}function vL(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(BY()){case wI:return 1;case uL:return 4;case Gb:case zY:return 16;case cL:return 536870912;default:return 16}default:return 16}}var ku=null,NI=null,lb=null;function bL(){if(lb)return lb;var t,e=NI,n=e.length,r,s="value"in ku?ku.value:ku.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return lb=s.slice(t,1<r?1-r:void 0)}function ub(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function iv(){return!0}function B4(){return!1}function Gi(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?iv:B4,this.isPropagationStopped=B4,this}return Hn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=iv)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=iv)},persist:function(){},isPersistent:iv}),e}var Qf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},AI=Gi(Qf),Mg=Hn({},Qf,{view:0,detail:0}),JY=Gi(Mg),L2,P2,_1,hT=Hn({},Mg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:DI,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_1&&(_1&&t.type==="mousemove"?(L2=t.screenX-_1.screenX,P2=t.screenY-_1.screenY):P2=L2=0,_1=t),L2)},movementY:function(t){return"movementY"in t?t.movementY:P2}}),z4=Gi(hT),eQ=Hn({},hT,{dataTransfer:0}),tQ=Gi(eQ),nQ=Hn({},Mg,{relatedTarget:0}),M2=Gi(nQ),rQ=Hn({},Qf,{animationName:0,elapsedTime:0,pseudoElement:0}),sQ=Gi(rQ),iQ=Hn({},Qf,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),oQ=Gi(iQ),aQ=Hn({},Qf,{data:0}),H4=Gi(aQ),lQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dQ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=cQ[t])?!!e[t]:!1}function DI(){return dQ}var hQ=Hn({},Mg,{key:function(t){if(t.key){var e=lQ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ub(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?uQ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:DI,charCode:function(t){return t.type==="keypress"?ub(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ub(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fQ=Gi(hQ),pQ=Hn({},hT,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),U4=Gi(pQ),mQ=Hn({},Mg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:DI}),gQ=Gi(mQ),yQ=Hn({},Qf,{propertyName:0,elapsedTime:0,pseudoElement:0}),vQ=Gi(yQ),bQ=Hn({},hT,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),EQ=Gi(bQ),TQ=[9,13,27,32],RI=$l&&"CompositionEvent"in window,fm=null;$l&&"documentMode"in document&&(fm=document.documentMode);var xQ=$l&&"TextEvent"in window&&!fm,EL=$l&&(!RI||fm&&8<fm&&11>=fm),W4=String.fromCharCode(32),V4=!1;function TL(t,e){switch(t){case"keyup":return TQ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xL(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zh=!1;function CQ(t,e){switch(t){case"compositionend":return xL(e);case"keypress":return e.which!==32?null:(V4=!0,W4);case"textInput":return t=e.data,t===W4&&V4?null:t;default:return null}}function SQ(t,e){if(zh)return t==="compositionend"||!RI&&TL(t,e)?(t=bL(),lb=NI=ku=null,zh=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return EL&&e.locale!=="ko"?null:e.data;default:return null}}var wQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function G4(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!wQ[t.type]:e==="textarea"}function CL(t,e,n,r){eL(r),e=Xb(e,"onChange"),0<e.length&&(n=new AI("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var pm=null,Vm=null;function _Q(t){OL(t,0)}function fT(t){var e=Wh(t);if(K$(e))return t}function kQ(t,e){if(t==="change")return e}var SL=!1;if($l){var B2;if($l){var z2="oninput"in document;if(!z2){var j4=document.createElement("div");j4.setAttribute("oninput","return;"),z2=typeof j4.oninput=="function"}B2=z2}else B2=!1;SL=B2&&(!document.documentMode||9<document.documentMode)}function K4(){pm&&(pm.detachEvent("onpropertychange",wL),Vm=pm=null)}function wL(t){if(t.propertyName==="value"&&fT(Vm)){var e=[];CL(e,Vm,t,SI(t)),sL(_Q,e)}}function IQ(t,e,n){t==="focusin"?(K4(),pm=e,Vm=n,pm.attachEvent("onpropertychange",wL)):t==="focusout"&&K4()}function NQ(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fT(Vm)}function AQ(t,e){if(t==="click")return fT(e)}function DQ(t,e){if(t==="input"||t==="change")return fT(e)}function RQ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ia=typeof Object.is=="function"?Object.is:RQ;function Gm(t,e){if(ia(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Aw.call(e,s)||!ia(t[s],e[s]))return!1}return!0}function q4(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function X4(t,e){var n=q4(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=q4(n)}}function _L(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?_L(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function kL(){for(var t=window,e=Ub();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ub(t.document)}return e}function FI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function FQ(t){var e=kL(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&_L(n.ownerDocument.documentElement,n)){if(r!==null&&FI(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=X4(n,i);var o=X4(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var OQ=$l&&"documentMode"in document&&11>=document.documentMode,Hh=null,Xw=null,mm=null,Yw=!1;function Y4(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Yw||Hh==null||Hh!==Ub(r)||(r=Hh,"selectionStart"in r&&FI(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),mm&&Gm(mm,r)||(mm=r,r=Xb(Xw,"onSelect"),0<r.length&&(e=new AI("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Hh)))}function ov(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Uh={animationend:ov("Animation","AnimationEnd"),animationiteration:ov("Animation","AnimationIteration"),animationstart:ov("Animation","AnimationStart"),transitionend:ov("Transition","TransitionEnd")},H2={},IL={};$l&&(IL=document.createElement("div").style,"AnimationEvent"in window||(delete Uh.animationend.animation,delete Uh.animationiteration.animation,delete Uh.animationstart.animation),"TransitionEvent"in window||delete Uh.transitionend.transition);function pT(t){if(H2[t])return H2[t];if(!Uh[t])return t;var e=Uh[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in IL)return H2[t]=e[n];return t}var NL=pT("animationend"),AL=pT("animationiteration"),DL=pT("animationstart"),RL=pT("transitionend"),FL=new Map,Q4="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cc(t,e){FL.set(t,e),Ud(e,[t])}for(var U2=0;U2<Q4.length;U2++){var W2=Q4[U2],$Q=W2.toLowerCase(),LQ=W2[0].toUpperCase()+W2.slice(1);cc($Q,"on"+LQ)}cc(NL,"onAnimationEnd");cc(AL,"onAnimationIteration");cc(DL,"onAnimationStart");cc("dblclick","onDoubleClick");cc("focusin","onFocus");cc("focusout","onBlur");cc(RL,"onTransitionEnd");Ef("onMouseEnter",["mouseout","mouseover"]);Ef("onMouseLeave",["mouseout","mouseover"]);Ef("onPointerEnter",["pointerout","pointerover"]);Ef("onPointerLeave",["pointerout","pointerover"]);Ud("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ud("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ud("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ud("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ud("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ud("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PQ=new Set("cancel close invalid load scroll toggle".split(" ").concat(tm));function Z4(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,$Y(r,e,void 0,t),t.currentTarget=null}function OL(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Z4(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Z4(s,a,u),i=l}}}if(Vb)throw t=Gw,Vb=!1,Gw=null,t}function Tn(t,e){var n=e[t_];n===void 0&&(n=e[t_]=new Set);var r=t+"__bubble";n.has(r)||($L(e,t,2,!1),n.add(r))}function V2(t,e,n){var r=0;e&&(r|=4),$L(n,t,r,e)}var av="_reactListening"+Math.random().toString(36).slice(2);function jm(t){if(!t[av]){t[av]=!0,U$.forEach(function(n){n!=="selectionchange"&&(PQ.has(n)||V2(n,!1,t),V2(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[av]||(e[av]=!0,V2("selectionchange",!1,e))}}function $L(t,e,n,r){switch(vL(e)){case 1:var s=QY;break;case 4:s=ZY;break;default:s=II}n=s.bind(null,e,n,t),s=void 0,!Vw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function G2(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ed(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}sL(function(){var u=i,c=SI(n),d=[];e:{var h=FL.get(t);if(h!==void 0){var f=AI,p=t;switch(t){case"keypress":if(ub(n)===0)break e;case"keydown":case"keyup":f=fQ;break;case"focusin":p="focus",f=M2;break;case"focusout":p="blur",f=M2;break;case"beforeblur":case"afterblur":f=M2;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=z4;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=tQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=gQ;break;case NL:case AL:case DL:f=sQ;break;case RL:f=vQ;break;case"scroll":f=JY;break;case"wheel":f=EQ;break;case"copy":case"cut":case"paste":f=oQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=U4}var m=(e&4)!==0,y=!m&&t==="scroll",g=m?h!==null?h+"Capture":null:h;m=[];for(var v=u,E;v!==null;){E=v;var b=E.stateNode;if(E.tag===5&&b!==null&&(E=b,g!==null&&(b=zm(v,g),b!=null&&m.push(Km(v,b,E)))),y)break;v=v.return}0<m.length&&(h=new f(h,p,null,n,c),d.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==Uw&&(p=n.relatedTarget||n.fromElement)&&(ed(p)||p[Ll]))break e;if((f||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=u,p=p?ed(p):null,p!==null&&(y=Wd(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(m=z4,b="onMouseLeave",g="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(m=U4,b="onPointerLeave",g="onPointerEnter",v="pointer"),y=f==null?h:Wh(f),E=p==null?h:Wh(p),h=new m(b,v+"leave",f,n,c),h.target=y,h.relatedTarget=E,b=null,ed(c)===u&&(m=new m(g,v+"enter",p,n,c),m.target=E,m.relatedTarget=y,b=m),y=b,f&&p)t:{for(m=f,g=p,v=0,E=m;E;E=vh(E))v++;for(E=0,b=g;b;b=vh(b))E++;for(;0<v-E;)m=vh(m),v--;for(;0<E-v;)g=vh(g),E--;for(;v--;){if(m===g||g!==null&&m===g.alternate)break t;m=vh(m),g=vh(g)}m=null}else m=null;f!==null&&J4(d,h,f,m,!1),p!==null&&y!==null&&J4(d,y,p,m,!0)}}e:{if(h=u?Wh(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var T=kQ;else if(G4(h))if(SL)T=DQ;else{T=NQ;var x=IQ}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(T=AQ);if(T&&(T=T(t,u))){CL(d,T,n,c);break e}x&&x(t,h,u),t==="focusout"&&(x=h._wrapperState)&&x.controlled&&h.type==="number"&&Pw(h,"number",h.value)}switch(x=u?Wh(u):window,t){case"focusin":(G4(x)||x.contentEditable==="true")&&(Hh=x,Xw=u,mm=null);break;case"focusout":mm=Xw=Hh=null;break;case"mousedown":Yw=!0;break;case"contextmenu":case"mouseup":case"dragend":Yw=!1,Y4(d,n,c);break;case"selectionchange":if(OQ)break;case"keydown":case"keyup":Y4(d,n,c)}var C;if(RI)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else zh?TL(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(EL&&n.locale!=="ko"&&(zh||S!=="onCompositionStart"?S==="onCompositionEnd"&&zh&&(C=bL()):(ku=c,NI="value"in ku?ku.value:ku.textContent,zh=!0)),x=Xb(u,S),0<x.length&&(S=new H4(S,t,null,n,c),d.push({event:S,listeners:x}),C?S.data=C:(C=xL(n),C!==null&&(S.data=C)))),(C=xQ?CQ(t,n):SQ(t,n))&&(u=Xb(u,"onBeforeInput"),0<u.length&&(c=new H4("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=C))}OL(d,e)})}function Km(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xb(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=zm(t,n),i!=null&&r.unshift(Km(t,i,s)),i=zm(t,e),i!=null&&r.push(Km(t,i,s))),t=t.return}return r}function vh(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function J4(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=zm(n,i),l!=null&&o.unshift(Km(n,l,a))):s||(l=zm(n,i),l!=null&&o.push(Km(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var MQ=/\r\n?/g,BQ=/\u0000|\uFFFD/g;function eD(t){return(typeof t=="string"?t:""+t).replace(MQ,`
`).replace(BQ,"")}function lv(t,e,n){if(e=eD(e),eD(t)!==e&&n)throw Error(ye(425))}function Yb(){}var Qw=null,Zw=null;function Jw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var e_=typeof setTimeout=="function"?setTimeout:void 0,zQ=typeof clearTimeout=="function"?clearTimeout:void 0,tD=typeof Promise=="function"?Promise:void 0,HQ=typeof queueMicrotask=="function"?queueMicrotask:typeof tD<"u"?function(t){return tD.resolve(null).then(t).catch(UQ)}:e_;function UQ(t){setTimeout(function(){throw t})}function j2(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Wm(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Wm(e)}function Mu(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function nD(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Zf=Math.random().toString(36).slice(2),Fa="__reactFiber$"+Zf,qm="__reactProps$"+Zf,Ll="__reactContainer$"+Zf,t_="__reactEvents$"+Zf,WQ="__reactListeners$"+Zf,VQ="__reactHandles$"+Zf;function ed(t){var e=t[Fa];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ll]||n[Fa]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=nD(t);t!==null;){if(n=t[Fa])return n;t=nD(t)}return e}t=n,n=t.parentNode}return null}function Bg(t){return t=t[Fa]||t[Ll],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Wh(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ye(33))}function mT(t){return t[qm]||null}var n_=[],Vh=-1;function dc(t){return{current:t}}function wn(t){0>Vh||(t.current=n_[Vh],n_[Vh]=null,Vh--)}function pn(t,e){Vh++,n_[Vh]=t.current,t.current=e}var qu={},ys=dc(qu),di=dc(!1),vd=qu;function Tf(t,e){var n=t.type.contextTypes;if(!n)return qu;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function hi(t){return t=t.childContextTypes,t!=null}function Qb(){wn(di),wn(ys)}function rD(t,e,n){if(ys.current!==qu)throw Error(ye(168));pn(ys,e),pn(di,n)}function LL(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ye(108,IY(t)||"Unknown",s));return Hn({},n,r)}function Zb(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qu,vd=ys.current,pn(ys,t),pn(di,di.current),!0}function sD(t,e,n){var r=t.stateNode;if(!r)throw Error(ye(169));n?(t=LL(t,e,vd),r.__reactInternalMemoizedMergedChildContext=t,wn(di),wn(ys),pn(ys,t)):wn(di),pn(di,n)}var xl=null,gT=!1,K2=!1;function PL(t){xl===null?xl=[t]:xl.push(t)}function GQ(t){gT=!0,PL(t)}function hc(){if(!K2&&xl!==null){K2=!0;var t=0,e=Xt;try{var n=xl;for(Xt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}xl=null,gT=!1}catch(s){throw xl!==null&&(xl=xl.slice(t+1)),lL(wI,hc),s}finally{Xt=e,K2=!1}}return null}var Gh=[],jh=0,Jb=null,eE=0,so=[],io=0,bd=null,Nl=1,Al="";function Bc(t,e){Gh[jh++]=eE,Gh[jh++]=Jb,Jb=t,eE=e}function ML(t,e,n){so[io++]=Nl,so[io++]=Al,so[io++]=bd,bd=t;var r=Nl;t=Al;var s=32-Zo(r)-1;r&=~(1<<s),n+=1;var i=32-Zo(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Nl=1<<32-Zo(e)+s|n<<s|r,Al=i+t}else Nl=1<<i|n<<s|r,Al=t}function OI(t){t.return!==null&&(Bc(t,1),ML(t,1,0))}function $I(t){for(;t===Jb;)Jb=Gh[--jh],Gh[jh]=null,eE=Gh[--jh],Gh[jh]=null;for(;t===bd;)bd=so[--io],so[io]=null,Al=so[--io],so[io]=null,Nl=so[--io],so[io]=null}var Li=null,Di=null,Dn=!1,Ko=null;function BL(t,e){var n=lo(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function iD(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Li=t,Di=Mu(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Li=t,Di=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=bd!==null?{id:Nl,overflow:Al}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=lo(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Li=t,Di=null,!0):!1;default:return!1}}function r_(t){return(t.mode&1)!==0&&(t.flags&128)===0}function s_(t){if(Dn){var e=Di;if(e){var n=e;if(!iD(t,e)){if(r_(t))throw Error(ye(418));e=Mu(n.nextSibling);var r=Li;e&&iD(t,e)?BL(r,n):(t.flags=t.flags&-4097|2,Dn=!1,Li=t)}}else{if(r_(t))throw Error(ye(418));t.flags=t.flags&-4097|2,Dn=!1,Li=t}}}function oD(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Li=t}function uv(t){if(t!==Li)return!1;if(!Dn)return oD(t),Dn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Jw(t.type,t.memoizedProps)),e&&(e=Di)){if(r_(t))throw zL(),Error(ye(418));for(;e;)BL(t,e),e=Mu(e.nextSibling)}if(oD(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ye(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Di=Mu(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Di=null}}else Di=Li?Mu(t.stateNode.nextSibling):null;return!0}function zL(){for(var t=Di;t;)t=Mu(t.nextSibling)}function xf(){Di=Li=null,Dn=!1}function LI(t){Ko===null?Ko=[t]:Ko.push(t)}var jQ=ql.ReactCurrentBatchConfig;function Uo(t,e){if(t&&t.defaultProps){e=Hn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var tE=dc(null),nE=null,Kh=null,PI=null;function MI(){PI=Kh=nE=null}function BI(t){var e=tE.current;wn(tE),t._currentValue=e}function i_(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function of(t,e){nE=t,PI=Kh=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(li=!0),t.firstContext=null)}function To(t){var e=t._currentValue;if(PI!==t)if(t={context:t,memoizedValue:e,next:null},Kh===null){if(nE===null)throw Error(ye(308));Kh=t,nE.dependencies={lanes:0,firstContext:t}}else Kh=Kh.next=t;return e}var td=null;function zI(t){td===null?td=[t]:td.push(t)}function HL(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,zI(e)):(n.next=s.next,s.next=n),e.interleaved=n,Pl(t,r)}function Pl(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Eu=!1;function HI(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function UL(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Rl(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bu(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Mt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Pl(t,n)}return s=r.interleaved,s===null?(e.next=e,zI(r)):(e.next=s.next,s.next=e),r.interleaved=e,Pl(t,n)}function cb(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_I(t,n)}}function aD(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function rE(t,e,n,r){var s=t.updateQueue;Eu=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,c=u=l=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(h=e,f=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Hn({},d,h);break e;case 2:Eu=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=d):c=c.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(1);if(c===null&&(l=d),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Td|=o,t.lanes=o,t.memoizedState=d}}function lD(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ye(191,s));s.call(r)}}}var WL=new H$.Component().refs;function o_(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Hn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var yT={isMounted:function(t){return(t=t._reactInternals)?Wd(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=$s(),s=Hu(t),i=Rl(r,s);i.payload=e,n!=null&&(i.callback=n),e=Bu(t,i,s),e!==null&&(Jo(e,t,s,r),cb(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=$s(),s=Hu(t),i=Rl(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Bu(t,i,s),e!==null&&(Jo(e,t,s,r),cb(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$s(),r=Hu(t),s=Rl(n,r);s.tag=2,e!=null&&(s.callback=e),e=Bu(t,s,r),e!==null&&(Jo(e,t,r,n),cb(e,t,r))}};function uD(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Gm(n,r)||!Gm(s,i):!0}function VL(t,e,n){var r=!1,s=qu,i=e.contextType;return typeof i=="object"&&i!==null?i=To(i):(s=hi(e)?vd:ys.current,r=e.contextTypes,i=(r=r!=null)?Tf(t,s):qu),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yT,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function cD(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&yT.enqueueReplaceState(e,e.state,null)}function a_(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=WL,HI(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=To(i):(i=hi(e)?vd:ys.current,s.context=Tf(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(o_(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&yT.enqueueReplaceState(s,s.state,null),rE(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function k1(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ye(309));var r=n.stateNode}if(!r)throw Error(ye(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;a===WL&&(a=s.refs={}),o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ye(284));if(!n._owner)throw Error(ye(290,t))}return t}function cv(t,e){throw t=Object.prototype.toString.call(e),Error(ye(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function dD(t){var e=t._init;return e(t._payload)}function GL(t){function e(g,v){if(t){var E=g.deletions;E===null?(g.deletions=[v],g.flags|=16):E.push(v)}}function n(g,v){if(!t)return null;for(;v!==null;)e(g,v),v=v.sibling;return null}function r(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function s(g,v){return g=Uu(g,v),g.index=0,g.sibling=null,g}function i(g,v,E){return g.index=E,t?(E=g.alternate,E!==null?(E=E.index,E<v?(g.flags|=2,v):E):(g.flags|=2,v)):(g.flags|=1048576,v)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,v,E,b){return v===null||v.tag!==6?(v=eS(E,g.mode,b),v.return=g,v):(v=s(v,E),v.return=g,v)}function l(g,v,E,b){var T=E.type;return T===Bh?c(g,v,E.props.children,b,E.key):v!==null&&(v.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===bu&&dD(T)===v.type)?(b=s(v,E.props),b.ref=k1(g,v,E),b.return=g,b):(b=gb(E.type,E.key,E.props,null,g.mode,b),b.ref=k1(g,v,E),b.return=g,b)}function u(g,v,E,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==E.containerInfo||v.stateNode.implementation!==E.implementation?(v=tS(E,g.mode,b),v.return=g,v):(v=s(v,E.children||[]),v.return=g,v)}function c(g,v,E,b,T){return v===null||v.tag!==7?(v=cd(E,g.mode,b,T),v.return=g,v):(v=s(v,E),v.return=g,v)}function d(g,v,E){if(typeof v=="string"&&v!==""||typeof v=="number")return v=eS(""+v,g.mode,E),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Jy:return E=gb(v.type,v.key,v.props,null,g.mode,E),E.ref=k1(g,null,v),E.return=g,E;case Mh:return v=tS(v,g.mode,E),v.return=g,v;case bu:var b=v._init;return d(g,b(v._payload),E)}if(J1(v)||x1(v))return v=cd(v,g.mode,E,null),v.return=g,v;cv(g,v)}return null}function h(g,v,E,b){var T=v!==null?v.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return T!==null?null:a(g,v,""+E,b);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Jy:return E.key===T?l(g,v,E,b):null;case Mh:return E.key===T?u(g,v,E,b):null;case bu:return T=E._init,h(g,v,T(E._payload),b)}if(J1(E)||x1(E))return T!==null?null:c(g,v,E,b,null);cv(g,E)}return null}function f(g,v,E,b,T){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(E)||null,a(v,g,""+b,T);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Jy:return g=g.get(b.key===null?E:b.key)||null,l(v,g,b,T);case Mh:return g=g.get(b.key===null?E:b.key)||null,u(v,g,b,T);case bu:var x=b._init;return f(g,v,E,x(b._payload),T)}if(J1(b)||x1(b))return g=g.get(E)||null,c(v,g,b,T,null);cv(v,b)}return null}function p(g,v,E,b){for(var T=null,x=null,C=v,S=v=0,N=null;C!==null&&S<E.length;S++){C.index>S?(N=C,C=null):N=C.sibling;var I=h(g,C,E[S],b);if(I===null){C===null&&(C=N);break}t&&C&&I.alternate===null&&e(g,C),v=i(I,v,S),x===null?T=I:x.sibling=I,x=I,C=N}if(S===E.length)return n(g,C),Dn&&Bc(g,S),T;if(C===null){for(;S<E.length;S++)C=d(g,E[S],b),C!==null&&(v=i(C,v,S),x===null?T=C:x.sibling=C,x=C);return Dn&&Bc(g,S),T}for(C=r(g,C);S<E.length;S++)N=f(C,g,S,E[S],b),N!==null&&(t&&N.alternate!==null&&C.delete(N.key===null?S:N.key),v=i(N,v,S),x===null?T=N:x.sibling=N,x=N);return t&&C.forEach(function(F){return e(g,F)}),Dn&&Bc(g,S),T}function m(g,v,E,b){var T=x1(E);if(typeof T!="function")throw Error(ye(150));if(E=T.call(E),E==null)throw Error(ye(151));for(var x=T=null,C=v,S=v=0,N=null,I=E.next();C!==null&&!I.done;S++,I=E.next()){C.index>S?(N=C,C=null):N=C.sibling;var F=h(g,C,I.value,b);if(F===null){C===null&&(C=N);break}t&&C&&F.alternate===null&&e(g,C),v=i(F,v,S),x===null?T=F:x.sibling=F,x=F,C=N}if(I.done)return n(g,C),Dn&&Bc(g,S),T;if(C===null){for(;!I.done;S++,I=E.next())I=d(g,I.value,b),I!==null&&(v=i(I,v,S),x===null?T=I:x.sibling=I,x=I);return Dn&&Bc(g,S),T}for(C=r(g,C);!I.done;S++,I=E.next())I=f(C,g,S,I.value,b),I!==null&&(t&&I.alternate!==null&&C.delete(I.key===null?S:I.key),v=i(I,v,S),x===null?T=I:x.sibling=I,x=I);return t&&C.forEach(function(L){return e(g,L)}),Dn&&Bc(g,S),T}function y(g,v,E,b){if(typeof E=="object"&&E!==null&&E.type===Bh&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Jy:e:{for(var T=E.key,x=v;x!==null;){if(x.key===T){if(T=E.type,T===Bh){if(x.tag===7){n(g,x.sibling),v=s(x,E.props.children),v.return=g,g=v;break e}}else if(x.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===bu&&dD(T)===x.type){n(g,x.sibling),v=s(x,E.props),v.ref=k1(g,x,E),v.return=g,g=v;break e}n(g,x);break}else e(g,x);x=x.sibling}E.type===Bh?(v=cd(E.props.children,g.mode,b,E.key),v.return=g,g=v):(b=gb(E.type,E.key,E.props,null,g.mode,b),b.ref=k1(g,v,E),b.return=g,g=b)}return o(g);case Mh:e:{for(x=E.key;v!==null;){if(v.key===x)if(v.tag===4&&v.stateNode.containerInfo===E.containerInfo&&v.stateNode.implementation===E.implementation){n(g,v.sibling),v=s(v,E.children||[]),v.return=g,g=v;break e}else{n(g,v);break}else e(g,v);v=v.sibling}v=tS(E,g.mode,b),v.return=g,g=v}return o(g);case bu:return x=E._init,y(g,v,x(E._payload),b)}if(J1(E))return p(g,v,E,b);if(x1(E))return m(g,v,E,b);cv(g,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,v!==null&&v.tag===6?(n(g,v.sibling),v=s(v,E),v.return=g,g=v):(n(g,v),v=eS(E,g.mode,b),v.return=g,g=v),o(g)):n(g,v)}return y}var Cf=GL(!0),jL=GL(!1),zg={},Ua=dc(zg),Xm=dc(zg),Ym=dc(zg);function nd(t){if(t===zg)throw Error(ye(174));return t}function UI(t,e){switch(pn(Ym,e),pn(Xm,t),pn(Ua,zg),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Bw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Bw(e,t)}wn(Ua),pn(Ua,e)}function Sf(){wn(Ua),wn(Xm),wn(Ym)}function KL(t){nd(Ym.current);var e=nd(Ua.current),n=Bw(e,t.type);e!==n&&(pn(Xm,t),pn(Ua,n))}function WI(t){Xm.current===t&&(wn(Ua),wn(Xm))}var Mn=dc(0);function sE(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var q2=[];function VI(){for(var t=0;t<q2.length;t++)q2[t]._workInProgressVersionPrimary=null;q2.length=0}var db=ql.ReactCurrentDispatcher,X2=ql.ReactCurrentBatchConfig,Ed=0,zn=null,gr=null,Fr=null,iE=!1,gm=!1,Qm=0,KQ=0;function is(){throw Error(ye(321))}function GI(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ia(t[n],e[n]))return!1;return!0}function jI(t,e,n,r,s,i){if(Ed=i,zn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,db.current=t===null||t.memoizedState===null?QQ:ZQ,t=n(r,s),gm){i=0;do{if(gm=!1,Qm=0,25<=i)throw Error(ye(301));i+=1,Fr=gr=null,e.updateQueue=null,db.current=JQ,t=n(r,s)}while(gm)}if(db.current=oE,e=gr!==null&&gr.next!==null,Ed=0,Fr=gr=zn=null,iE=!1,e)throw Error(ye(300));return t}function KI(){var t=Qm!==0;return Qm=0,t}function Sa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fr===null?zn.memoizedState=Fr=t:Fr=Fr.next=t,Fr}function xo(){if(gr===null){var t=zn.alternate;t=t!==null?t.memoizedState:null}else t=gr.next;var e=Fr===null?zn.memoizedState:Fr.next;if(e!==null)Fr=e,gr=t;else{if(t===null)throw Error(ye(310));gr=t,t={memoizedState:gr.memoizedState,baseState:gr.baseState,baseQueue:gr.baseQueue,queue:gr.queue,next:null},Fr===null?zn.memoizedState=Fr=t:Fr=Fr.next=t}return Fr}function Zm(t,e){return typeof e=="function"?e(t):e}function Y2(t){var e=xo(),n=e.queue;if(n===null)throw Error(ye(311));n.lastRenderedReducer=t;var r=gr,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var c=u.lane;if((Ed&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,zn.lanes|=c,Td|=c}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,ia(r,e.memoizedState)||(li=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,zn.lanes|=i,Td|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Q2(t){var e=xo(),n=e.queue;if(n===null)throw Error(ye(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);ia(i,e.memoizedState)||(li=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function qL(){}function XL(t,e){var n=zn,r=xo(),s=e(),i=!ia(r.memoizedState,s);if(i&&(r.memoizedState=s,li=!0),r=r.queue,qI(ZL.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Fr!==null&&Fr.memoizedState.tag&1){if(n.flags|=2048,Jm(9,QL.bind(null,n,r,s,e),void 0,null),Pr===null)throw Error(ye(349));Ed&30||YL(n,e,s)}return s}function YL(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=zn.updateQueue,e===null?(e={lastEffect:null,stores:null},zn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function QL(t,e,n,r){e.value=n,e.getSnapshot=r,JL(e)&&eP(t)}function ZL(t,e,n){return n(function(){JL(e)&&eP(t)})}function JL(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ia(t,n)}catch{return!0}}function eP(t){var e=Pl(t,1);e!==null&&Jo(e,t,1,-1)}function hD(t){var e=Sa();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zm,lastRenderedState:t},e.queue=t,t=t.dispatch=YQ.bind(null,zn,t),[e.memoizedState,t]}function Jm(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=zn.updateQueue,e===null?(e={lastEffect:null,stores:null},zn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function tP(){return xo().memoizedState}function hb(t,e,n,r){var s=Sa();zn.flags|=t,s.memoizedState=Jm(1|e,n,void 0,r===void 0?null:r)}function vT(t,e,n,r){var s=xo();r=r===void 0?null:r;var i=void 0;if(gr!==null){var o=gr.memoizedState;if(i=o.destroy,r!==null&&GI(r,o.deps)){s.memoizedState=Jm(e,n,i,r);return}}zn.flags|=t,s.memoizedState=Jm(1|e,n,i,r)}function fD(t,e){return hb(8390656,8,t,e)}function qI(t,e){return vT(2048,8,t,e)}function nP(t,e){return vT(4,2,t,e)}function rP(t,e){return vT(4,4,t,e)}function sP(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function iP(t,e,n){return n=n!=null?n.concat([t]):null,vT(4,4,sP.bind(null,e,t),n)}function XI(){}function oP(t,e){var n=xo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&GI(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function aP(t,e){var n=xo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&GI(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function lP(t,e,n){return Ed&21?(ia(n,e)||(n=dL(),zn.lanes|=n,Td|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,li=!0),t.memoizedState=n)}function qQ(t,e){var n=Xt;Xt=n!==0&&4>n?n:4,t(!0);var r=X2.transition;X2.transition={};try{t(!1),e()}finally{Xt=n,X2.transition=r}}function uP(){return xo().memoizedState}function XQ(t,e,n){var r=Hu(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},cP(t))dP(e,n);else if(n=HL(t,e,n,r),n!==null){var s=$s();Jo(n,t,r,s),hP(n,e,r)}}function YQ(t,e,n){var r=Hu(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(cP(t))dP(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,ia(a,o)){var l=e.interleaved;l===null?(s.next=s,zI(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=HL(t,e,s,r),n!==null&&(s=$s(),Jo(n,t,r,s),hP(n,e,r))}}function cP(t){var e=t.alternate;return t===zn||e!==null&&e===zn}function dP(t,e){gm=iE=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function hP(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_I(t,n)}}var oE={readContext:To,useCallback:is,useContext:is,useEffect:is,useImperativeHandle:is,useInsertionEffect:is,useLayoutEffect:is,useMemo:is,useReducer:is,useRef:is,useState:is,useDebugValue:is,useDeferredValue:is,useTransition:is,useMutableSource:is,useSyncExternalStore:is,useId:is,unstable_isNewReconciler:!1},QQ={readContext:To,useCallback:function(t,e){return Sa().memoizedState=[t,e===void 0?null:e],t},useContext:To,useEffect:fD,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hb(4194308,4,sP.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hb(4194308,4,t,e)},useInsertionEffect:function(t,e){return hb(4,2,t,e)},useMemo:function(t,e){var n=Sa();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Sa();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=XQ.bind(null,zn,t),[r.memoizedState,t]},useRef:function(t){var e=Sa();return t={current:t},e.memoizedState=t},useState:hD,useDebugValue:XI,useDeferredValue:function(t){return Sa().memoizedState=t},useTransition:function(){var t=hD(!1),e=t[0];return t=qQ.bind(null,t[1]),Sa().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=zn,s=Sa();if(Dn){if(n===void 0)throw Error(ye(407));n=n()}else{if(n=e(),Pr===null)throw Error(ye(349));Ed&30||YL(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,fD(ZL.bind(null,r,i,t),[t]),r.flags|=2048,Jm(9,QL.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Sa(),e=Pr.identifierPrefix;if(Dn){var n=Al,r=Nl;n=(r&~(1<<32-Zo(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Qm++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=KQ++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ZQ={readContext:To,useCallback:oP,useContext:To,useEffect:qI,useImperativeHandle:iP,useInsertionEffect:nP,useLayoutEffect:rP,useMemo:aP,useReducer:Y2,useRef:tP,useState:function(){return Y2(Zm)},useDebugValue:XI,useDeferredValue:function(t){var e=xo();return lP(e,gr.memoizedState,t)},useTransition:function(){var t=Y2(Zm)[0],e=xo().memoizedState;return[t,e]},useMutableSource:qL,useSyncExternalStore:XL,useId:uP,unstable_isNewReconciler:!1},JQ={readContext:To,useCallback:oP,useContext:To,useEffect:qI,useImperativeHandle:iP,useInsertionEffect:nP,useLayoutEffect:rP,useMemo:aP,useReducer:Q2,useRef:tP,useState:function(){return Q2(Zm)},useDebugValue:XI,useDeferredValue:function(t){var e=xo();return gr===null?e.memoizedState=t:lP(e,gr.memoizedState,t)},useTransition:function(){var t=Q2(Zm)[0],e=xo().memoizedState;return[t,e]},useMutableSource:qL,useSyncExternalStore:XL,useId:uP,unstable_isNewReconciler:!1};function wf(t,e){try{var n="",r=e;do n+=kY(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Z2(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function l_(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var eZ=typeof WeakMap=="function"?WeakMap:Map;function fP(t,e,n){n=Rl(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){lE||(lE=!0,v_=r),l_(t,e)},n}function pP(t,e,n){n=Rl(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){l_(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){l_(t,e),typeof r!="function"&&(zu===null?zu=new Set([this]):zu.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function pD(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new eZ;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=pZ.bind(null,t,e,n),e.then(t,t))}function mD(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function gD(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Rl(-1,1),e.tag=2,Bu(n,e,1))),n.lanes|=1),t)}var tZ=ql.ReactCurrentOwner,li=!1;function Ss(t,e,n,r){e.child=t===null?jL(e,null,n,r):Cf(e,t.child,n,r)}function yD(t,e,n,r,s){n=n.render;var i=e.ref;return of(e,s),r=jI(t,e,n,r,i,s),n=KI(),t!==null&&!li?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ml(t,e,s)):(Dn&&n&&OI(e),e.flags|=1,Ss(t,e,r,s),e.child)}function vD(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!rN(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,mP(t,e,i,r,s)):(t=gb(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Gm,n(o,r)&&t.ref===e.ref)return Ml(t,e,s)}return e.flags|=1,t=Uu(i,r),t.ref=e.ref,t.return=e,e.child=t}function mP(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Gm(i,r)&&t.ref===e.ref)if(li=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(li=!0);else return e.lanes=t.lanes,Ml(t,e,s)}return u_(t,e,n,r,s)}function gP(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pn(Xh,_i),_i|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pn(Xh,_i),_i|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,pn(Xh,_i),_i|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,pn(Xh,_i),_i|=r;return Ss(t,e,s,n),e.child}function yP(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function u_(t,e,n,r,s){var i=hi(n)?vd:ys.current;return i=Tf(e,i),of(e,s),n=jI(t,e,n,r,i,s),r=KI(),t!==null&&!li?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ml(t,e,s)):(Dn&&r&&OI(e),e.flags|=1,Ss(t,e,n,s),e.child)}function bD(t,e,n,r,s){if(hi(n)){var i=!0;Zb(e)}else i=!1;if(of(e,s),e.stateNode===null)fb(t,e),VL(e,n,r),a_(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=To(u):(u=hi(n)?vd:ys.current,u=Tf(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&cD(e,o,r,u),Eu=!1;var h=e.memoizedState;o.state=h,rE(e,r,o,s),l=e.memoizedState,a!==r||h!==l||di.current||Eu?(typeof c=="function"&&(o_(e,n,c,r),l=e.memoizedState),(a=Eu||uD(e,n,a,r,h,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,UL(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Uo(e.type,a),o.props=u,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=To(l):(l=hi(n)?vd:ys.current,l=Tf(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&cD(e,o,r,l),Eu=!1,h=e.memoizedState,o.state=h,rE(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||di.current||Eu?(typeof f=="function"&&(o_(e,n,f,r),p=e.memoizedState),(u=Eu||uD(e,n,u,r,h,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return c_(t,e,n,r,i,s)}function c_(t,e,n,r,s,i){yP(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&sD(e,n,!1),Ml(t,e,i);r=e.stateNode,tZ.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Cf(e,t.child,null,i),e.child=Cf(e,null,a,i)):Ss(t,e,a,i),e.memoizedState=r.state,s&&sD(e,n,!0),e.child}function vP(t){var e=t.stateNode;e.pendingContext?rD(t,e.pendingContext,e.pendingContext!==e.context):e.context&&rD(t,e.context,!1),UI(t,e.containerInfo)}function ED(t,e,n,r,s){return xf(),LI(s),e.flags|=256,Ss(t,e,n,r),e.child}var d_={dehydrated:null,treeContext:null,retryLane:0};function h_(t){return{baseLanes:t,cachePool:null,transitions:null}}function bP(t,e,n){var r=e.pendingProps,s=Mn.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),pn(Mn,s&1),t===null)return s_(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=TT(o,r,0,null),t=cd(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=h_(n),e.memoizedState=d_,t):YI(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return nZ(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Uu(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Uu(a,i):(i=cd(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?h_(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=d_,r}return i=t.child,t=i.sibling,r=Uu(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function YI(t,e){return e=TT({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function dv(t,e,n,r){return r!==null&&LI(r),Cf(e,t.child,null,n),t=YI(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function nZ(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Z2(Error(ye(422))),dv(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=TT({mode:"visible",children:r.children},s,0,null),i=cd(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Cf(e,t.child,null,o),e.child.memoizedState=h_(o),e.memoizedState=d_,i);if(!(e.mode&1))return dv(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(ye(419)),r=Z2(i,r,void 0),dv(t,e,o,r)}if(a=(o&t.childLanes)!==0,li||a){if(r=Pr,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Pl(t,s),Jo(r,t,s,-1))}return nN(),r=Z2(Error(ye(421))),dv(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=mZ.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Di=Mu(s.nextSibling),Li=e,Dn=!0,Ko=null,t!==null&&(so[io++]=Nl,so[io++]=Al,so[io++]=bd,Nl=t.id,Al=t.overflow,bd=e),e=YI(e,r.children),e.flags|=4096,e)}function TD(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),i_(t.return,e,n)}function J2(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function EP(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ss(t,e,r.children,n),r=Mn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&TD(t,n,e);else if(t.tag===19)TD(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(pn(Mn,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&sE(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),J2(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&sE(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}J2(e,!0,n,null,i);break;case"together":J2(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fb(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ml(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Td|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ye(153));if(e.child!==null){for(t=e.child,n=Uu(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Uu(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function rZ(t,e,n){switch(e.tag){case 3:vP(e),xf();break;case 5:KL(e);break;case 1:hi(e.type)&&Zb(e);break;case 4:UI(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;pn(tE,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(pn(Mn,Mn.current&1),e.flags|=128,null):n&e.child.childLanes?bP(t,e,n):(pn(Mn,Mn.current&1),t=Ml(t,e,n),t!==null?t.sibling:null);pn(Mn,Mn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return EP(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),pn(Mn,Mn.current),r)break;return null;case 22:case 23:return e.lanes=0,gP(t,e,n)}return Ml(t,e,n)}var TP,f_,xP,CP;TP=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};f_=function(){};xP=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,nd(Ua.current);var i=null;switch(n){case"input":s=$w(t,s),r=$w(t,r),i=[];break;case"select":s=Hn({},s,{value:void 0}),r=Hn({},r,{value:void 0}),i=[];break;case"textarea":s=Mw(t,s),r=Mw(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Yb)}zw(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Mm.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Mm.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Tn("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};CP=function(t,e,n,r){n!==r&&(e.flags|=4)};function I1(t,e){if(!Dn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function os(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function sZ(t,e,n){var r=e.pendingProps;switch($I(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return os(e),null;case 1:return hi(e.type)&&Qb(),os(e),null;case 3:return r=e.stateNode,Sf(),wn(di),wn(ys),VI(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(uv(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ko!==null&&(T_(Ko),Ko=null))),f_(t,e),os(e),null;case 5:WI(e);var s=nd(Ym.current);if(n=e.type,t!==null&&e.stateNode!=null)xP(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ye(166));return os(e),null}if(t=nd(Ua.current),uv(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Fa]=e,r[qm]=i,t=(e.mode&1)!==0,n){case"dialog":Tn("cancel",r),Tn("close",r);break;case"iframe":case"object":case"embed":Tn("load",r);break;case"video":case"audio":for(s=0;s<tm.length;s++)Tn(tm[s],r);break;case"source":Tn("error",r);break;case"img":case"image":case"link":Tn("error",r),Tn("load",r);break;case"details":Tn("toggle",r);break;case"input":A4(r,i),Tn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Tn("invalid",r);break;case"textarea":R4(r,i),Tn("invalid",r)}zw(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&lv(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&lv(r.textContent,a,t),s=["children",""+a]):Mm.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Tn("scroll",r)}switch(n){case"input":ev(r),D4(r,i,!0);break;case"textarea":ev(r),F4(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Yb)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Y$(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Fa]=e,t[qm]=r,TP(t,e,!1,!1),e.stateNode=t;e:{switch(o=Hw(n,r),n){case"dialog":Tn("cancel",t),Tn("close",t),s=r;break;case"iframe":case"object":case"embed":Tn("load",t),s=r;break;case"video":case"audio":for(s=0;s<tm.length;s++)Tn(tm[s],t);s=r;break;case"source":Tn("error",t),s=r;break;case"img":case"image":case"link":Tn("error",t),Tn("load",t),s=r;break;case"details":Tn("toggle",t),s=r;break;case"input":A4(t,r),s=$w(t,r),Tn("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Hn({},r,{value:void 0}),Tn("invalid",t);break;case"textarea":R4(t,r),s=Mw(t,r),Tn("invalid",t);break;default:s=r}zw(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?J$(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Q$(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Bm(t,l):typeof l=="number"&&Bm(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Mm.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Tn("scroll",t):l!=null&&EI(t,i,l,o))}switch(n){case"input":ev(t),D4(t,r,!1);break;case"textarea":ev(t),F4(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ku(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?tf(t,!!r.multiple,i,!1):r.defaultValue!=null&&tf(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Yb)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return os(e),null;case 6:if(t&&e.stateNode!=null)CP(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ye(166));if(n=nd(Ym.current),nd(Ua.current),uv(e)){if(r=e.stateNode,n=e.memoizedProps,r[Fa]=e,(i=r.nodeValue!==n)&&(t=Li,t!==null))switch(t.tag){case 3:lv(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&lv(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Fa]=e,e.stateNode=r}return os(e),null;case 13:if(wn(Mn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Dn&&Di!==null&&e.mode&1&&!(e.flags&128))zL(),xf(),e.flags|=98560,i=!1;else if(i=uv(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ye(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ye(317));i[Fa]=e}else xf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;os(e),i=!1}else Ko!==null&&(T_(Ko),Ko=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Mn.current&1?br===0&&(br=3):nN())),e.updateQueue!==null&&(e.flags|=4),os(e),null);case 4:return Sf(),f_(t,e),t===null&&jm(e.stateNode.containerInfo),os(e),null;case 10:return BI(e.type._context),os(e),null;case 17:return hi(e.type)&&Qb(),os(e),null;case 19:if(wn(Mn),i=e.memoizedState,i===null)return os(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)I1(i,!1);else{if(br!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=sE(t),o!==null){for(e.flags|=128,I1(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return pn(Mn,Mn.current&1|2),e.child}t=t.sibling}i.tail!==null&&tr()>_f&&(e.flags|=128,r=!0,I1(i,!1),e.lanes=4194304)}else{if(!r)if(t=sE(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),I1(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Dn)return os(e),null}else 2*tr()-i.renderingStartTime>_f&&n!==1073741824&&(e.flags|=128,r=!0,I1(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=tr(),e.sibling=null,n=Mn.current,pn(Mn,r?n&1|2:n&1),e):(os(e),null);case 22:case 23:return tN(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?_i&1073741824&&(os(e),e.subtreeFlags&6&&(e.flags|=8192)):os(e),null;case 24:return null;case 25:return null}throw Error(ye(156,e.tag))}function iZ(t,e){switch($I(e),e.tag){case 1:return hi(e.type)&&Qb(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Sf(),wn(di),wn(ys),VI(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return WI(e),null;case 13:if(wn(Mn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ye(340));xf()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return wn(Mn),null;case 4:return Sf(),null;case 10:return BI(e.type._context),null;case 22:case 23:return tN(),null;case 24:return null;default:return null}}var hv=!1,cs=!1,oZ=typeof WeakSet=="function"?WeakSet:Set,$e=null;function qh(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Gn(t,e,r)}else n.current=null}function p_(t,e,n){try{n()}catch(r){Gn(t,e,r)}}var xD=!1;function aZ(t,e){if(Qw=Kb,t=kL(),FI(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++u===s&&(a=o),h===i&&++c===r&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zw={focusedElem:t,selectionRange:n},Kb=!1,$e=e;$e!==null;)if(e=$e,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$e=t;else for(;$e!==null;){e=$e;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,y=p.memoizedState,g=e.stateNode,v=g.getSnapshotBeforeUpdate(e.elementType===e.type?m:Uo(e.type,m),y);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ye(163))}}catch(b){Gn(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,$e=t;break}$e=e.return}return p=xD,xD=!1,p}function ym(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&p_(e,n,i)}s=s.next}while(s!==r)}}function bT(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function m_(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function SP(t){var e=t.alternate;e!==null&&(t.alternate=null,SP(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Fa],delete e[qm],delete e[t_],delete e[WQ],delete e[VQ])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function wP(t){return t.tag===5||t.tag===3||t.tag===4}function CD(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||wP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function g_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Yb));else if(r!==4&&(t=t.child,t!==null))for(g_(t,e,n),t=t.sibling;t!==null;)g_(t,e,n),t=t.sibling}function y_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(y_(t,e,n),t=t.sibling;t!==null;)y_(t,e,n),t=t.sibling}var Kr=null,Go=!1;function uu(t,e,n){for(n=n.child;n!==null;)_P(t,e,n),n=n.sibling}function _P(t,e,n){if(Ha&&typeof Ha.onCommitFiberUnmount=="function")try{Ha.onCommitFiberUnmount(dT,n)}catch{}switch(n.tag){case 5:cs||qh(n,e);case 6:var r=Kr,s=Go;Kr=null,uu(t,e,n),Kr=r,Go=s,Kr!==null&&(Go?(t=Kr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Kr.removeChild(n.stateNode));break;case 18:Kr!==null&&(Go?(t=Kr,n=n.stateNode,t.nodeType===8?j2(t.parentNode,n):t.nodeType===1&&j2(t,n),Wm(t)):j2(Kr,n.stateNode));break;case 4:r=Kr,s=Go,Kr=n.stateNode.containerInfo,Go=!0,uu(t,e,n),Kr=r,Go=s;break;case 0:case 11:case 14:case 15:if(!cs&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&p_(n,e,o),s=s.next}while(s!==r)}uu(t,e,n);break;case 1:if(!cs&&(qh(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Gn(n,e,a)}uu(t,e,n);break;case 21:uu(t,e,n);break;case 22:n.mode&1?(cs=(r=cs)||n.memoizedState!==null,uu(t,e,n),cs=r):uu(t,e,n);break;default:uu(t,e,n)}}function SD(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new oZ),e.forEach(function(r){var s=gZ.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function $o(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Kr=a.stateNode,Go=!1;break e;case 3:Kr=a.stateNode.containerInfo,Go=!0;break e;case 4:Kr=a.stateNode.containerInfo,Go=!0;break e}a=a.return}if(Kr===null)throw Error(ye(160));_P(i,o,s),Kr=null,Go=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){Gn(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)kP(e,t),e=e.sibling}function kP(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($o(e,t),Ea(t),r&4){try{ym(3,t,t.return),bT(3,t)}catch(m){Gn(t,t.return,m)}try{ym(5,t,t.return)}catch(m){Gn(t,t.return,m)}}break;case 1:$o(e,t),Ea(t),r&512&&n!==null&&qh(n,n.return);break;case 5:if($o(e,t),Ea(t),r&512&&n!==null&&qh(n,n.return),t.flags&32){var s=t.stateNode;try{Bm(s,"")}catch(m){Gn(t,t.return,m)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&q$(s,i),Hw(a,o);var u=Hw(a,i);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?J$(s,d):c==="dangerouslySetInnerHTML"?Q$(s,d):c==="children"?Bm(s,d):EI(s,c,d,u)}switch(a){case"input":Lw(s,i);break;case"textarea":X$(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?tf(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?tf(s,!!i.multiple,i.defaultValue,!0):tf(s,!!i.multiple,i.multiple?[]:"",!1))}s[qm]=i}catch(m){Gn(t,t.return,m)}}break;case 6:if($o(e,t),Ea(t),r&4){if(t.stateNode===null)throw Error(ye(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(m){Gn(t,t.return,m)}}break;case 3:if($o(e,t),Ea(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Wm(e.containerInfo)}catch(m){Gn(t,t.return,m)}break;case 4:$o(e,t),Ea(t);break;case 13:$o(e,t),Ea(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(JI=tr())),r&4&&SD(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(cs=(u=cs)||c,$o(e,t),cs=u):$o(e,t),Ea(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for($e=t,c=t.child;c!==null;){for(d=$e=c;$e!==null;){switch(h=$e,f=h.child,h.tag){case 0:case 11:case 14:case 15:ym(4,h,h.return);break;case 1:qh(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Gn(r,n,m)}}break;case 5:qh(h,h.return);break;case 22:if(h.memoizedState!==null){_D(d);continue}}f!==null?(f.return=h,$e=f):_D(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Z$("display",o))}catch(m){Gn(t,t.return,m)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Gn(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:$o(e,t),Ea(t),r&4&&SD(t);break;case 21:break;default:$o(e,t),Ea(t)}}function Ea(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(wP(n)){var r=n;break e}n=n.return}throw Error(ye(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Bm(s,""),r.flags&=-33);var i=CD(t);y_(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=CD(t);g_(t,a,o);break;default:throw Error(ye(161))}}catch(l){Gn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function lZ(t,e,n){$e=t,IP(t)}function IP(t,e,n){for(var r=(t.mode&1)!==0;$e!==null;){var s=$e,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||hv;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||cs;a=hv;var u=cs;if(hv=o,(cs=l)&&!u)for($e=s;$e!==null;)o=$e,l=o.child,o.tag===22&&o.memoizedState!==null?kD(s):l!==null?(l.return=o,$e=l):kD(s);for(;i!==null;)$e=i,IP(i),i=i.sibling;$e=s,hv=a,cs=u}wD(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,$e=i):wD(t)}}function wD(t){for(;$e!==null;){var e=$e;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:cs||bT(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!cs)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Uo(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&lD(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}lD(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Wm(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ye(163))}cs||e.flags&512&&m_(e)}catch(h){Gn(e,e.return,h)}}if(e===t){$e=null;break}if(n=e.sibling,n!==null){n.return=e.return,$e=n;break}$e=e.return}}function _D(t){for(;$e!==null;){var e=$e;if(e===t){$e=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$e=n;break}$e=e.return}}function kD(t){for(;$e!==null;){var e=$e;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{bT(4,e)}catch(l){Gn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Gn(e,s,l)}}var i=e.return;try{m_(e)}catch(l){Gn(e,i,l)}break;case 5:var o=e.return;try{m_(e)}catch(l){Gn(e,o,l)}}}catch(l){Gn(e,e.return,l)}if(e===t){$e=null;break}var a=e.sibling;if(a!==null){a.return=e.return,$e=a;break}$e=e.return}}var uZ=Math.ceil,aE=ql.ReactCurrentDispatcher,QI=ql.ReactCurrentOwner,yo=ql.ReactCurrentBatchConfig,Mt=0,Pr=null,or=null,Qr=0,_i=0,Xh=dc(0),br=0,eg=null,Td=0,ET=0,ZI=0,vm=null,si=null,JI=0,_f=1/0,Tl=null,lE=!1,v_=null,zu=null,fv=!1,Iu=null,uE=0,bm=0,b_=null,pb=-1,mb=0;function $s(){return Mt&6?tr():pb!==-1?pb:pb=tr()}function Hu(t){return t.mode&1?Mt&2&&Qr!==0?Qr&-Qr:jQ.transition!==null?(mb===0&&(mb=dL()),mb):(t=Xt,t!==0||(t=window.event,t=t===void 0?16:vL(t.type)),t):1}function Jo(t,e,n,r){if(50<bm)throw bm=0,b_=null,Error(ye(185));Pg(t,n,r),(!(Mt&2)||t!==Pr)&&(t===Pr&&(!(Mt&2)&&(ET|=n),br===4&&wu(t,Qr)),fi(t,r),n===1&&Mt===0&&!(e.mode&1)&&(_f=tr()+500,gT&&hc()))}function fi(t,e){var n=t.callbackNode;jY(t,e);var r=jb(t,t===Pr?Qr:0);if(r===0)n!==null&&L4(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&L4(n),e===1)t.tag===0?GQ(ID.bind(null,t)):PL(ID.bind(null,t)),HQ(function(){!(Mt&6)&&hc()}),n=null;else{switch(hL(r)){case 1:n=wI;break;case 4:n=uL;break;case 16:n=Gb;break;case 536870912:n=cL;break;default:n=Gb}n=LP(n,NP.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function NP(t,e){if(pb=-1,mb=0,Mt&6)throw Error(ye(327));var n=t.callbackNode;if(af()&&t.callbackNode!==n)return null;var r=jb(t,t===Pr?Qr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=cE(t,r);else{e=r;var s=Mt;Mt|=2;var i=DP();(Pr!==t||Qr!==e)&&(Tl=null,_f=tr()+500,ud(t,e));do try{hZ();break}catch(a){AP(t,a)}while(1);MI(),aE.current=i,Mt=s,or!==null?e=0:(Pr=null,Qr=0,e=br)}if(e!==0){if(e===2&&(s=jw(t),s!==0&&(r=s,e=E_(t,s))),e===1)throw n=eg,ud(t,0),wu(t,r),fi(t,tr()),n;if(e===6)wu(t,r);else{if(s=t.current.alternate,!(r&30)&&!cZ(s)&&(e=cE(t,r),e===2&&(i=jw(t),i!==0&&(r=i,e=E_(t,i))),e===1))throw n=eg,ud(t,0),wu(t,r),fi(t,tr()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ye(345));case 2:zc(t,si,Tl);break;case 3:if(wu(t,r),(r&130023424)===r&&(e=JI+500-tr(),10<e)){if(jb(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){$s(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=e_(zc.bind(null,t,si,Tl),e);break}zc(t,si,Tl);break;case 4:if(wu(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Zo(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=tr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*uZ(r/1960))-r,10<r){t.timeoutHandle=e_(zc.bind(null,t,si,Tl),r);break}zc(t,si,Tl);break;case 5:zc(t,si,Tl);break;default:throw Error(ye(329))}}}return fi(t,tr()),t.callbackNode===n?NP.bind(null,t):null}function E_(t,e){var n=vm;return t.current.memoizedState.isDehydrated&&(ud(t,e).flags|=256),t=cE(t,e),t!==2&&(e=si,si=n,e!==null&&T_(e)),t}function T_(t){si===null?si=t:si.push.apply(si,t)}function cZ(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ia(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wu(t,e){for(e&=~ZI,e&=~ET,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Zo(e),r=1<<n;t[n]=-1,e&=~r}}function ID(t){if(Mt&6)throw Error(ye(327));af();var e=jb(t,0);if(!(e&1))return fi(t,tr()),null;var n=cE(t,e);if(t.tag!==0&&n===2){var r=jw(t);r!==0&&(e=r,n=E_(t,r))}if(n===1)throw n=eg,ud(t,0),wu(t,e),fi(t,tr()),n;if(n===6)throw Error(ye(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zc(t,si,Tl),fi(t,tr()),null}function eN(t,e){var n=Mt;Mt|=1;try{return t(e)}finally{Mt=n,Mt===0&&(_f=tr()+500,gT&&hc())}}function xd(t){Iu!==null&&Iu.tag===0&&!(Mt&6)&&af();var e=Mt;Mt|=1;var n=yo.transition,r=Xt;try{if(yo.transition=null,Xt=1,t)return t()}finally{Xt=r,yo.transition=n,Mt=e,!(Mt&6)&&hc()}}function tN(){_i=Xh.current,wn(Xh)}function ud(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,zQ(n)),or!==null)for(n=or.return;n!==null;){var r=n;switch($I(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Qb();break;case 3:Sf(),wn(di),wn(ys),VI();break;case 5:WI(r);break;case 4:Sf();break;case 13:wn(Mn);break;case 19:wn(Mn);break;case 10:BI(r.type._context);break;case 22:case 23:tN()}n=n.return}if(Pr=t,or=t=Uu(t.current,null),Qr=_i=e,br=0,eg=null,ZI=ET=Td=0,si=vm=null,td!==null){for(e=0;e<td.length;e++)if(n=td[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}td=null}return t}function AP(t,e){do{var n=or;try{if(MI(),db.current=oE,iE){for(var r=zn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}iE=!1}if(Ed=0,Fr=gr=zn=null,gm=!1,Qm=0,QI.current=null,n===null||n.return===null){br=1,eg=e,or=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Qr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=mD(o);if(f!==null){f.flags&=-257,gD(f,o,a,i,e),f.mode&1&&pD(i,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){pD(i,u,e),nN();break e}l=Error(ye(426))}}else if(Dn&&a.mode&1){var y=mD(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),gD(y,o,a,i,e),LI(wf(l,a));break e}}i=l=wf(l,a),br!==4&&(br=2),vm===null?vm=[i]:vm.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=fP(i,l,e);aD(i,g);break e;case 1:a=l;var v=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(zu===null||!zu.has(E)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=pP(i,a,e);aD(i,b);break e}}i=i.return}while(i!==null)}FP(n)}catch(T){e=T,or===n&&n!==null&&(or=n=n.return);continue}break}while(1)}function DP(){var t=aE.current;return aE.current=oE,t===null?oE:t}function nN(){(br===0||br===3||br===2)&&(br=4),Pr===null||!(Td&268435455)&&!(ET&268435455)||wu(Pr,Qr)}function cE(t,e){var n=Mt;Mt|=2;var r=DP();(Pr!==t||Qr!==e)&&(Tl=null,ud(t,e));do try{dZ();break}catch(s){AP(t,s)}while(1);if(MI(),Mt=n,aE.current=r,or!==null)throw Error(ye(261));return Pr=null,Qr=0,br}function dZ(){for(;or!==null;)RP(or)}function hZ(){for(;or!==null&&!PY();)RP(or)}function RP(t){var e=$P(t.alternate,t,_i);t.memoizedProps=t.pendingProps,e===null?FP(t):or=e,QI.current=null}function FP(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=iZ(n,e),n!==null){n.flags&=32767,or=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{br=6,or=null;return}}else if(n=sZ(n,e,_i),n!==null){or=n;return}if(e=e.sibling,e!==null){or=e;return}or=e=t}while(e!==null);br===0&&(br=5)}function zc(t,e,n){var r=Xt,s=yo.transition;try{yo.transition=null,Xt=1,fZ(t,e,n,r)}finally{yo.transition=s,Xt=r}return null}function fZ(t,e,n,r){do af();while(Iu!==null);if(Mt&6)throw Error(ye(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ye(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(KY(t,i),t===Pr&&(or=Pr=null,Qr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fv||(fv=!0,LP(Gb,function(){return af(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=yo.transition,yo.transition=null;var o=Xt;Xt=1;var a=Mt;Mt|=4,QI.current=null,aZ(t,n),kP(n,t),FQ(Zw),Kb=!!Qw,Zw=Qw=null,t.current=n,lZ(n),MY(),Mt=a,Xt=o,yo.transition=i}else t.current=n;if(fv&&(fv=!1,Iu=t,uE=s),i=t.pendingLanes,i===0&&(zu=null),HY(n.stateNode),fi(t,tr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(lE)throw lE=!1,t=v_,v_=null,t;return uE&1&&t.tag!==0&&af(),i=t.pendingLanes,i&1?t===b_?bm++:(bm=0,b_=t):bm=0,hc(),null}function af(){if(Iu!==null){var t=hL(uE),e=yo.transition,n=Xt;try{if(yo.transition=null,Xt=16>t?16:t,Iu===null)var r=!1;else{if(t=Iu,Iu=null,uE=0,Mt&6)throw Error(ye(331));var s=Mt;for(Mt|=4,$e=t.current;$e!==null;){var i=$e,o=i.child;if($e.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for($e=u;$e!==null;){var c=$e;switch(c.tag){case 0:case 11:case 15:ym(8,c,i)}var d=c.child;if(d!==null)d.return=c,$e=d;else for(;$e!==null;){c=$e;var h=c.sibling,f=c.return;if(SP(c),c===u){$e=null;break}if(h!==null){h.return=f,$e=h;break}$e=f}}}var p=i.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(m!==null)}}$e=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,$e=o;else e:for(;$e!==null;){if(i=$e,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ym(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,$e=g;break e}$e=i.return}}var v=t.current;for($e=v;$e!==null;){o=$e;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,$e=E;else e:for(o=v;$e!==null;){if(a=$e,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:bT(9,a)}}catch(T){Gn(a,a.return,T)}if(a===o){$e=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,$e=b;break e}$e=a.return}}if(Mt=s,hc(),Ha&&typeof Ha.onPostCommitFiberRoot=="function")try{Ha.onPostCommitFiberRoot(dT,t)}catch{}r=!0}return r}finally{Xt=n,yo.transition=e}}return!1}function ND(t,e,n){e=wf(n,e),e=fP(t,e,1),t=Bu(t,e,1),e=$s(),t!==null&&(Pg(t,1,e),fi(t,e))}function Gn(t,e,n){if(t.tag===3)ND(t,t,n);else for(;e!==null;){if(e.tag===3){ND(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zu===null||!zu.has(r))){t=wf(n,t),t=pP(e,t,1),e=Bu(e,t,1),t=$s(),e!==null&&(Pg(e,1,t),fi(e,t));break}}e=e.return}}function pZ(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=$s(),t.pingedLanes|=t.suspendedLanes&n,Pr===t&&(Qr&n)===n&&(br===4||br===3&&(Qr&130023424)===Qr&&500>tr()-JI?ud(t,0):ZI|=n),fi(t,e)}function OP(t,e){e===0&&(t.mode&1?(e=rv,rv<<=1,!(rv&130023424)&&(rv=4194304)):e=1);var n=$s();t=Pl(t,e),t!==null&&(Pg(t,e,n),fi(t,n))}function mZ(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),OP(t,n)}function gZ(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ye(314))}r!==null&&r.delete(e),OP(t,n)}var $P;$P=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||di.current)li=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return li=!1,rZ(t,e,n);li=!!(t.flags&131072)}else li=!1,Dn&&e.flags&1048576&&ML(e,eE,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;fb(t,e),t=e.pendingProps;var s=Tf(e,ys.current);of(e,n),s=jI(null,e,r,t,s,n);var i=KI();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,hi(r)?(i=!0,Zb(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,HI(e),s.updater=yT,e.stateNode=s,s._reactInternals=e,a_(e,r,t,n),e=c_(null,e,r,!0,i,n)):(e.tag=0,Dn&&i&&OI(e),Ss(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(fb(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=vZ(r),t=Uo(r,t),s){case 0:e=u_(null,e,r,t,n);break e;case 1:e=bD(null,e,r,t,n);break e;case 11:e=yD(null,e,r,t,n);break e;case 14:e=vD(null,e,r,Uo(r.type,t),n);break e}throw Error(ye(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Uo(r,s),u_(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Uo(r,s),bD(t,e,r,s,n);case 3:e:{if(vP(e),t===null)throw Error(ye(387));r=e.pendingProps,i=e.memoizedState,s=i.element,UL(t,e),rE(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=wf(Error(ye(423)),e),e=ED(t,e,r,n,s);break e}else if(r!==s){s=wf(Error(ye(424)),e),e=ED(t,e,r,n,s);break e}else for(Di=Mu(e.stateNode.containerInfo.firstChild),Li=e,Dn=!0,Ko=null,n=jL(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xf(),r===s){e=Ml(t,e,n);break e}Ss(t,e,r,n)}e=e.child}return e;case 5:return KL(e),t===null&&s_(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Jw(r,s)?o=null:i!==null&&Jw(r,i)&&(e.flags|=32),yP(t,e),Ss(t,e,o,n),e.child;case 6:return t===null&&s_(e),null;case 13:return bP(t,e,n);case 4:return UI(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Cf(e,null,r,n):Ss(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Uo(r,s),yD(t,e,r,s,n);case 7:return Ss(t,e,e.pendingProps,n),e.child;case 8:return Ss(t,e,e.pendingProps.children,n),e.child;case 12:return Ss(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,pn(tE,r._currentValue),r._currentValue=o,i!==null)if(ia(i.value,o)){if(i.children===s.children&&!di.current){e=Ml(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Rl(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),i_(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ye(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),i_(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ss(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,of(e,n),s=To(s),r=r(s),e.flags|=1,Ss(t,e,r,n),e.child;case 14:return r=e.type,s=Uo(r,e.pendingProps),s=Uo(r.type,s),vD(t,e,r,s,n);case 15:return mP(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Uo(r,s),fb(t,e),e.tag=1,hi(r)?(t=!0,Zb(e)):t=!1,of(e,n),VL(e,r,s),a_(e,r,s,n),c_(null,e,r,!0,t,n);case 19:return EP(t,e,n);case 22:return gP(t,e,n)}throw Error(ye(156,e.tag))};function LP(t,e){return lL(t,e)}function yZ(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lo(t,e,n,r){return new yZ(t,e,n,r)}function rN(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vZ(t){if(typeof t=="function")return rN(t)?1:0;if(t!=null){if(t=t.$$typeof,t===xI)return 11;if(t===CI)return 14}return 2}function Uu(t,e){var n=t.alternate;return n===null?(n=lo(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function gb(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")rN(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Bh:return cd(n.children,s,i,e);case TI:o=8,s|=8;break;case Dw:return t=lo(12,n,e,s|2),t.elementType=Dw,t.lanes=i,t;case Rw:return t=lo(13,n,e,s),t.elementType=Rw,t.lanes=i,t;case Fw:return t=lo(19,n,e,s),t.elementType=Fw,t.lanes=i,t;case G$:return TT(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case W$:o=10;break e;case V$:o=9;break e;case xI:o=11;break e;case CI:o=14;break e;case bu:o=16,r=null;break e}throw Error(ye(130,t==null?t:typeof t,""))}return e=lo(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function cd(t,e,n,r){return t=lo(7,t,r,e),t.lanes=n,t}function TT(t,e,n,r){return t=lo(22,t,r,e),t.elementType=G$,t.lanes=n,t.stateNode={isHidden:!1},t}function eS(t,e,n){return t=lo(6,t,null,e),t.lanes=n,t}function tS(t,e,n){return e=lo(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bZ(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$2(0),this.expirationTimes=$2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$2(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function sN(t,e,n,r,s,i,o,a,l){return t=new bZ(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=lo(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},HI(i),t}function EZ(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mh,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function PP(t){if(!t)return qu;t=t._reactInternals;e:{if(Wd(t)!==t||t.tag!==1)throw Error(ye(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(hi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ye(171))}if(t.tag===1){var n=t.type;if(hi(n))return LL(t,n,e)}return e}function MP(t,e,n,r,s,i,o,a,l){return t=sN(n,r,!0,t,s,i,o,a,l),t.context=PP(null),n=t.current,r=$s(),s=Hu(n),i=Rl(r,s),i.callback=e??null,Bu(n,i,s),t.current.lanes=s,Pg(t,s,r),fi(t,r),t}function xT(t,e,n,r){var s=e.current,i=$s(),o=Hu(s);return n=PP(n),e.context===null?e.context=n:e.pendingContext=n,e=Rl(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Bu(s,e,o),t!==null&&(Jo(t,s,o,i),cb(t,s,o)),o}function dE(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function AD(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function iN(t,e){AD(t,e),(t=t.alternate)&&AD(t,e)}function TZ(){return null}var BP=typeof reportError=="function"?reportError:function(t){console.error(t)};function oN(t){this._internalRoot=t}CT.prototype.render=oN.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ye(409));xT(t,e,null,null)};CT.prototype.unmount=oN.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xd(function(){xT(null,t,null,null)}),e[Ll]=null}};function CT(t){this._internalRoot=t}CT.prototype.unstable_scheduleHydration=function(t){if(t){var e=mL();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Su.length&&e!==0&&e<Su[n].priority;n++);Su.splice(n,0,t),n===0&&yL(t)}};function aN(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ST(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function DD(){}function xZ(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=dE(o);i.call(u)}}var o=MP(e,r,t,0,null,!1,!1,"",DD);return t._reactRootContainer=o,t[Ll]=o.current,jm(t.nodeType===8?t.parentNode:t),xd(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=dE(l);a.call(u)}}var l=sN(t,0,!1,null,null,!1,!1,"",DD);return t._reactRootContainer=l,t[Ll]=l.current,jm(t.nodeType===8?t.parentNode:t),xd(function(){xT(e,l,n,r)}),l}function wT(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=dE(o);a.call(l)}}xT(e,o,t,s)}else o=xZ(n,e,t,s,r);return dE(o)}fL=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=em(e.pendingLanes);n!==0&&(_I(e,n|1),fi(e,tr()),!(Mt&6)&&(_f=tr()+500,hc()))}break;case 13:xd(function(){var r=Pl(t,1);if(r!==null){var s=$s();Jo(r,t,1,s)}}),iN(t,1)}};kI=function(t){if(t.tag===13){var e=Pl(t,134217728);if(e!==null){var n=$s();Jo(e,t,134217728,n)}iN(t,134217728)}};pL=function(t){if(t.tag===13){var e=Hu(t),n=Pl(t,e);if(n!==null){var r=$s();Jo(n,t,e,r)}iN(t,e)}};mL=function(){return Xt};gL=function(t,e){var n=Xt;try{return Xt=t,e()}finally{Xt=n}};Ww=function(t,e,n){switch(e){case"input":if(Lw(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=mT(r);if(!s)throw Error(ye(90));K$(r),Lw(r,s)}}}break;case"textarea":X$(t,n);break;case"select":e=n.value,e!=null&&tf(t,!!n.multiple,e,!1)}};nL=eN;rL=xd;var CZ={usingClientEntryPoint:!1,Events:[Bg,Wh,mT,eL,tL,eN]},N1={findFiberByHostInstance:ed,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},SZ={bundleType:N1.bundleType,version:N1.version,rendererPackageName:N1.rendererPackageName,rendererConfig:N1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ql.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=oL(t),t===null?null:t.stateNode},findFiberByHostInstance:N1.findFiberByHostInstance||TZ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pv.isDisabled&&pv.supportsFiber)try{dT=pv.inject(SZ),Ha=pv}catch{}}Vi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CZ;Vi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!aN(e))throw Error(ye(200));return EZ(t,e,null,n)};Vi.createRoot=function(t,e){if(!aN(t))throw Error(ye(299));var n=!1,r="",s=BP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=sN(t,1,!1,null,null,n,!1,r,s),t[Ll]=e.current,jm(t.nodeType===8?t.parentNode:t),new oN(e)};Vi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ye(188)):(t=Object.keys(t).join(","),Error(ye(268,t)));return t=oL(e),t=t===null?null:t.stateNode,t};Vi.flushSync=function(t){return xd(t)};Vi.hydrate=function(t,e,n){if(!ST(e))throw Error(ye(200));return wT(null,t,e,!0,n)};Vi.hydrateRoot=function(t,e,n){if(!aN(t))throw Error(ye(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=BP;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=MP(e,null,t,1,n??null,s,!1,i,o),t[Ll]=e.current,jm(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new CT(e)};Vi.render=function(t,e,n){if(!ST(e))throw Error(ye(200));return wT(null,t,e,!1,n)};Vi.unmountComponentAtNode=function(t){if(!ST(t))throw Error(ye(40));return t._reactRootContainer?(xd(function(){wT(null,null,t,!1,function(){t._reactRootContainer=null,t[Ll]=null})}),!0):!1};Vi.unstable_batchedUpdates=eN;Vi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ST(n))throw Error(ye(200));if(t==null||t._reactInternals===void 0)throw Error(ye(38));return wT(t,e,n,!1,r)};Vi.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=Vi})(TY);const wZ=Qk(Hb);var _Z=Sr(),kZ=Un(function(t,e){return $g(U(U({},t),{rtl:e}))}),IZ=function(t){var e=t.theme,n=t.dir,r=As(e)?"rtl":"ltr",s=As()?"rtl":"ltr",i=n||r;return{rootDir:i!==r||i!==s?i:n,needsTheme:i!==r}},zP=w.forwardRef(function(t,e){var n=t.className,r=t.theme,s=t.applyTheme,i=t.applyThemeToBody,o=t.styles,a=_Z(o,{theme:r,applyTheme:s,className:n}),l=w.useRef(null);return AZ(i,a,l),w.createElement(w.Fragment,null,NZ(t,a,l,e))});zP.displayName="FabricBase";function NZ(t,e,n,r){var s=e.root,i=t.as,o=i===void 0?"div":i,a=t.dir,l=t.theme,u=yn(t,jl,["dir"]),c=IZ(t),d=c.rootDir,h=c.needsTheme,f=w.createElement(T$,{providerRef:n},w.createElement(o,U({dir:d},u,{className:s,ref:Xa(n,r)})));return h&&(f=w.createElement(KK,{settings:{theme:kZ(l,a==="rtl")}},f)),f}function AZ(t,e,n){var r=e.bodyThemed;return w.useEffect(function(){if(t){var s=Ps(n.current);if(s)return s.body.classList.add(r),function(){s.body.classList.remove(r)}}},[r,t,n]),n}var nS={fontFamily:"inherit"},DZ={root:"ms-Fabric",bodyThemed:"ms-Fabric-bodyThemed"},RZ=function(t){var e=t.applyTheme,n=t.className,r=t.preventBlanketFontInheritance,s=t.theme,i=es(DZ,s);return{root:[i.root,s.fonts.medium,{color:s.palette.neutralPrimary},!r&&{"& button":nS,"& input":nS,"& textarea":nS},e&&{color:s.semanticColors.bodyText,backgroundColor:s.semanticColors.bodyBackground},n],bodyThemed:[{backgroundColor:s.semanticColors.bodyBackground}]}},FZ=wr(zP,RZ,void 0,{scope:"Fabric"}),Em={},lN={},HP="fluent-default-layer-host",OZ="#"+HP;function $Z(t,e){Em[t]||(Em[t]=[]),Em[t].push(e);var n=lN[t];if(n)for(var r=0,s=n;r<s.length;r++){var i=s[r];i.notifyLayersChanged()}}function LZ(t,e){var n=Em[t];if(n){var r=n.indexOf(e);r>=0&&(n.splice(r,1),n.length===0&&delete Em[t])}var s=lN[t];if(s)for(var i=0,o=s;i<o.length;i++){var a=o[i];a.notifyLayersChanged()}}function PZ(t){var e=lN[t];return e&&e[0]||void 0}function MZ(t){var e=t.createElement("div");return e.setAttribute("id",HP),e.style.cssText="position:fixed;z-index:1000000",t==null||t.body.appendChild(e),e}function BZ(){return OZ}var zZ=Sr(),UP=w.forwardRef(function(t,e){var n=EY(),r=w.useRef(null),s=Xa(r,e),i=w.useRef(),o=w.useRef(null),a=w.useState(!1),l=a[0],u=a[1],c=t.children,d=t.className,h=t.eventBubblingEnabled,f=t.fabricProps,p=t.hostId,m=t.insertFirst,y=t.onLayerDidMount,g=y===void 0?function(){}:y,v=t.onLayerMounted,E=v===void 0?function(){}:v,b=t.onLayerWillUnmount,T=t.styles,x=t.theme,C=Xa(o,f==null?void 0:f.ref),S=zZ(T,{theme:x,className:d,isNotHost:!p}),N=function(L){var z,H;if(p){var $=PZ(p);return $?(z=$.rootRef.current)!==null&&z!==void 0?z:null:(H=L.getElementById(p))!==null&&H!==void 0?H:null}else{var M=BZ(),j=M?L.querySelector(M):null;return j||(j=MZ(L)),j}},I=function(){b==null||b();var L=i.current;i.current=void 0,L&&L.parentNode&&L.parentNode.removeChild(L)},F=function(){var L,z=Ps(r.current);if(z){var H=N(z);if(H){I();var $=((L=H.ownerDocument)!==null&&L!==void 0?L:z).createElement("div");$.className=S.root,gK($),yK($,r.current),m?H.insertBefore($,H.firstChild):H.appendChild($),i.current=$,u(!0)}}};return yf(function(){F(),p&&$Z(p,F);var L=i.current?n(i.current):void 0;return function(){L&&L(),I(),p&&LZ(p,F)}},[p]),w.useEffect(function(){i.current&&l&&(E==null||E(),g==null||g(),u(!1))},[l,E,g]),w.createElement("span",{className:"ms-layer",ref:s},i.current&&Hb.createPortal(w.createElement(T$,{layerRoot:!0,providerRef:C},w.createElement(FZ,U({},!h&&UZ(),f,{className:Fs(S.content,f==null?void 0:f.className),ref:C}),c)),i.current))});UP.displayName="LayerBase";var mv,HZ=function(t){t.eventPhase===Event.BUBBLING_PHASE&&t.type!=="mouseenter"&&t.type!=="mouseleave"&&t.type!=="touchstart"&&t.type!=="touchend"&&t.stopPropagation()};function UZ(){return mv||(mv={},["onClick","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOver","onMouseOut","onMouseUp","onTouchMove","onTouchStart","onTouchCancel","onTouchEnd","onKeyDown","onKeyPress","onKeyUp","onFocus","onBlur","onChange","onInput","onInvalid","onSubmit"].forEach(function(t){return mv[t]=HZ})),mv}var WZ={root:"ms-Layer",rootNoHost:"ms-Layer--fixed",content:"ms-Layer-content"},VZ=function(t){var e=t.className,n=t.isNotHost,r=t.theme,s=es(WZ,r);return{root:[s.root,r.fonts.medium,n&&[s.rootNoHost,{position:"fixed",zIndex:vf.Layer,top:0,left:0,bottom:0,right:0,visibility:"hidden"}],e],content:[s.content,{visibility:"visible"}]}},WP=wr(UP,VZ,void 0,{scope:"Layer",fields:["hostId","theme","styles"]}),VP=w.forwardRef(function(t,e){var n=t.layerProps,r=t.doNotLayer,s=rl(t,["layerProps","doNotLayer"]),i=w.createElement(vY,U({},s,{doNotLayer:r,ref:e}));return r?i:w.createElement(WP,U({},n),i)});VP.displayName="Callout";var GZ="FocusTrapZone",jZ={disabled:!1,disableFirstFocus:!1,forceFocusInsideTrap:!0,isClickableOutsideFocusTrap:!1},KZ=function(t,e,n){w.useImperativeHandle(t,function(){return{get previouslyFocusedElement(){return e},focus:n}},[n,e])},rd=w.forwardRef(function(t,e){var n,r=w.useRef(null),s=w.useRef(null),i=w.useRef(null),o=Xa(r,e),a=ZX(),l=(n=mI(!1))!==null&&n!==void 0?n:!0,u=Og(jZ,t),c=go({hasFocus:!1,focusStackId:Yf("ftz-",u.id)}),d=u.children,h=u.componentRef,f=u.disabled,p=u.disableFirstFocus,m=u.forceFocusInsideTrap,y=u.focusPreviouslyFocusedInnerElement,g=u.firstFocusableSelector,v=u.firstFocusableTarget,E=u.disableRestoreFocus,b=E===void 0?u.ignoreExternalFocusing:E,T=u.isClickableOutsideFocusTrap,x=u.enableAriaHiddenSiblings,C={"aria-hidden":!0,style:{pointerEvents:"none",position:"fixed"},tabIndex:f?-1:0,"data-is-visible":!0,"data-is-focus-trap-zone-bumper":!0},S=w.useCallback(function($){$!==s.current&&$!==i.current&&c$($)},[]),N=A2(function(){if(r.current){var $=c.previouslyFocusedElementInTrapZone;if(y&&$&&oi(r.current,$)){S($);return}var M=null;if(typeof v=="string")M=r.current.querySelector(v);else if(v)M=v(r.current);else if(g){var j=typeof g=="string"?g:g();M=r.current.querySelector("."+j)}M||(M=ws(r.current,r.current.firstChild,!1,!1,!1,!0)),M&&S(M)}}),I=function($){if(!(f||!r.current)){var M=$===c.hasFocus?wK(r.current,i.current,!0,!1):SK(r.current,s.current,!0,!1);M&&(M===s.current||M===i.current?N():M.focus())}},F=function($){var M;(M=u.onBlurCapture)===null||M===void 0||M.call(u,$);var j=$.relatedTarget;$.relatedTarget===null&&(j=a.activeElement),oi(r.current,j)||(c.hasFocus=!1)},L=function($){var M;(M=u.onFocusCapture)===null||M===void 0||M.call(u,$),$.target===s.current?I(!0):$.target===i.current&&I(!1),c.hasFocus=!0,$.target!==$.currentTarget&&!($.target===s.current||$.target===i.current)&&(c.previouslyFocusedElementInTrapZone=$.target)},z=A2(function($){if(rd.focusStack=rd.focusStack.filter(function(j){return c.focusStackId!==j}),!!a){var M=a.activeElement;!b&&typeof($==null?void 0:$.focus)=="function"&&(oi(r.current,M)||M===a.body)&&S($)}}),H=A2(function($){if(!f&&c.focusStackId===rd.focusStack.slice(-1)[0]){var M=$.target;M&&!oi(r.current,M)&&(a&&a.activeElement===a.body?setTimeout(function(){a&&a.activeElement===a.body&&(N(),c.hasFocus=!0)},0):(N(),c.hasFocus=!0),$.preventDefault(),$.stopPropagation())}});return w.useEffect(function(){var $=[];return m&&$.push(Ra(window,"focus",H,!0)),T||$.push(Ra(window,"click",H,!0)),function(){$.forEach(function(M){return M()})}},[m,T]),w.useEffect(function(){if(!(f||!l&&!m||!r.current)){rd.focusStack.push(c.focusStackId);var $=u.elementToFocusOnDismiss||a.activeElement;return!p&&!oi(r.current,$)&&N(),function(){return z($)}}},[m,f]),w.useEffect(function(){if(!f&&x){var $=C$(r.current);return $}},[f,x,r]),L$(function(){delete c.previouslyFocusedElementInTrapZone}),KZ(h,c.previouslyFocusedElementInTrapZone,N),w.createElement("div",U({"aria-labelledby":u.ariaLabelledBy},yn(u,jl),{ref:o,onFocusCapture:L,onBlurCapture:F}),w.createElement("div",U({},C,{ref:s})),d,w.createElement("div",U({},C,{ref:i})))});rd.displayName=GZ;rd.focusStack=[];var hE;(function(t){t[t.default=0]="default",t[t.image=1]="image",t[t.Default=1e5]="Default",t[t.Image=100001]="Image"})(hE||(hE={}));var ii;(function(t){t[t.center=0]="center",t[t.contain=1]="contain",t[t.cover=2]="cover",t[t.none=3]="none",t[t.centerCover=4]="centerCover",t[t.centerContain=5]="centerContain"})(ii||(ii={}));var tg;(function(t){t[t.landscape=0]="landscape",t[t.portrait=1]="portrait"})(tg||(tg={}));var Is;(function(t){t[t.notLoaded=0]="notLoaded",t[t.loaded=1]="loaded",t[t.error=2]="error",t[t.errorLoaded=3]="errorLoaded"})(Is||(Is={}));var qZ=Sr(),XZ=/\.svg$/i,YZ="fabricImage";function QZ(t,e){var n=t.onLoadingStateChange,r=t.onLoad,s=t.onError,i=t.src,o=w.useState(Is.notLoaded),a=o[0],l=o[1];yf(function(){l(Is.notLoaded)},[i]),w.useEffect(function(){if(a===Is.notLoaded){var d=e.current?i&&e.current.naturalWidth>0&&e.current.naturalHeight>0||e.current.complete&&XZ.test(i):!1;d&&l(Is.loaded)}}),w.useEffect(function(){n==null||n(a)},[a]);var u=w.useCallback(function(d){r==null||r(d),i&&l(Is.loaded)},[i,r]),c=w.useCallback(function(d){s==null||s(d),l(Is.error)},[s]);return[a,u,c]}var GP=w.forwardRef(function(t,e){var n=w.useRef(),r=w.useRef(),s=QZ(t,r),i=s[0],o=s[1],a=s[2],l=yn(t,rq,["width","height"]),u=t.src,c=t.alt,d=t.width,h=t.height,f=t.shouldFadeIn,p=f===void 0?!0:f,m=t.shouldStartVisible,y=t.className,g=t.imageFit,v=t.role,E=t.maximizeFrame,b=t.styles,T=t.theme,x=t.loading,C=ZZ(t,i,r,n),S=qZ(b,{theme:T,className:y,width:d,height:h,maximizeFrame:E,shouldFadeIn:p,shouldStartVisible:m,isLoaded:i===Is.loaded||i===Is.notLoaded&&t.shouldStartVisible,isLandscape:C===tg.landscape,isCenter:g===ii.center,isCenterContain:g===ii.centerContain,isCenterCover:g===ii.centerCover,isContain:g===ii.contain,isCover:g===ii.cover,isNone:g===ii.none,isError:i===Is.error,isNotImageFit:g===void 0});return w.createElement("div",{className:S.root,style:{width:d,height:h},ref:n},w.createElement("img",U({},l,{onLoad:o,onError:a,key:YZ+t.src||"",className:S.image,ref:Xa(r,e),src:u,alt:c,role:v,loading:x})))});GP.displayName="ImageBase";function ZZ(t,e,n,r){var s=w.useRef(e),i=w.useRef();return(i===void 0||s.current===Is.notLoaded&&e===Is.loaded)&&(i.current=JZ(t,e,n,r)),s.current=e,i.current}function JZ(t,e,n,r){var s=t.imageFit,i=t.width,o=t.height;if(t.coverStyle!==void 0)return t.coverStyle;if(e===Is.loaded&&(s===ii.cover||s===ii.contain||s===ii.centerContain||s===ii.centerCover)&&n.current&&r.current){var a=void 0;typeof i=="number"&&typeof o=="number"&&s!==ii.centerContain&&s!==ii.centerCover?a=i/o:a=r.current.clientWidth/r.current.clientHeight;var l=n.current.naturalWidth/n.current.naturalHeight;if(l>a)return tg.landscape}return tg.portrait}var eJ={root:"ms-Image",rootMaximizeFrame:"ms-Image--maximizeFrame",image:"ms-Image-image",imageCenter:"ms-Image-image--center",imageContain:"ms-Image-image--contain",imageCover:"ms-Image-image--cover",imageCenterContain:"ms-Image-image--centerContain",imageCenterCover:"ms-Image-image--centerCover",imageNone:"ms-Image-image--none",imageLandscape:"ms-Image-image--landscape",imagePortrait:"ms-Image-image--portrait"},tJ=function(t){var e=t.className,n=t.width,r=t.height,s=t.maximizeFrame,i=t.isLoaded,o=t.shouldFadeIn,a=t.shouldStartVisible,l=t.isLandscape,u=t.isCenter,c=t.isContain,d=t.isCover,h=t.isCenterContain,f=t.isCenterCover,p=t.isNone,m=t.isError,y=t.isNotImageFit,g=t.theme,v=es(eJ,g),E={position:"absolute",left:"50% /* @noflip */",top:"50%",transform:"translate(-50%,-50%)"},b=Sn(),T=b!==void 0&&b.navigator.msMaxTouchPoints===void 0,x=c&&l||d&&!l?{width:"100%",height:"auto"}:{width:"auto",height:"100%"};return{root:[v.root,g.fonts.medium,{overflow:"hidden"},s&&[v.rootMaximizeFrame,{height:"100%",width:"100%"}],i&&o&&!a&&Ph.fadeIn400,(u||c||d||h||f)&&{position:"relative"},e],image:[v.image,{display:"block",opacity:0},i&&["is-loaded",{opacity:1}],u&&[v.imageCenter,E],c&&[v.imageContain,T&&{width:"100%",height:"100%",objectFit:"contain"},!T&&x,!T&&E],d&&[v.imageCover,T&&{width:"100%",height:"100%",objectFit:"cover"},!T&&x,!T&&E],h&&[v.imageCenterContain,l&&{maxWidth:"100%"},!l&&{maxHeight:"100%"},E],f&&[v.imageCenterCover,l&&{maxHeight:"100%"},!l&&{maxWidth:"100%"},E],p&&[v.imageNone,{width:"auto",height:"auto"}],y&&[!!n&&!r&&{height:"auto",width:"100%"},!n&&!!r&&{height:"100%",width:"auto"},!!n&&!!r&&{height:"100%",width:"100%"}],l&&v.imageLandscape,!l&&v.imagePortrait,!i&&"is-notLoaded",o&&"is-fadeIn",m&&"is-error"]}},uN=wr(GP,tJ,void 0,{scope:"Image"},!0);uN.displayName="Image";var dd=Rg({root:{display:"inline-block"},placeholder:["ms-Icon-placeHolder",{width:"1em"}],image:["ms-Icon-imageContainer",{overflow:"hidden"}]}),jP="ms-Icon",nJ=function(t){var e=t.className,n=t.iconClassName,r=t.isPlaceholder,s=t.isImage,i=t.styles;return{root:[r&&dd.placeholder,dd.root,s&&dd.image,n,e,i&&i.root,i&&i.imageContainer]}},KP=Un(function(t){var e=xq(t)||{subset:{},code:void 0},n=e.code,r=e.subset;return n?{children:n,iconClassName:r.className,fontFamily:r.fontFace&&r.fontFace.fontFamily,mergeImageProps:r.mergeImageProps}:null},void 0,!0),fE=function(t){var e=t.iconName,n=t.className,r=t.style,s=r===void 0?{}:r,i=KP(e)||{},o=i.iconClassName,a=i.children,l=i.fontFamily,u=i.mergeImageProps,c=yn(t,Wn),d=t["aria-label"]||t.title,h=t["aria-label"]||t["aria-labelledby"]||t.title?{role:u?void 0:"img"}:{"aria-hidden":!0},f=a;return u&&typeof a=="object"&&typeof a.props=="object"&&d&&(f=w.cloneElement(a,{alt:d})),w.createElement("i",U({"data-icon-name":e},h,c,u?{title:void 0,"aria-label":void 0}:{},{className:Fs(jP,dd.root,o,!e&&dd.placeholder,n),style:U({fontFamily:l},s)}),f)};Un(function(t,e,n){return fE({iconName:t,className:e,"aria-label":n})});var rJ=Sr({cacheSize:100}),sJ=function(t){un(e,t);function e(n){var r=t.call(this,n)||this;return r._onImageLoadingStateChange=function(s){r.props.imageProps&&r.props.imageProps.onLoadingStateChange&&r.props.imageProps.onLoadingStateChange(s),s===Is.error&&r.setState({imageLoadError:!0})},r.state={imageLoadError:!1},r}return e.prototype.render=function(){var n=this.props,r=n.children,s=n.className,i=n.styles,o=n.iconName,a=n.imageErrorAs,l=n.theme,u=typeof o=="string"&&o.length===0,c=!!this.props.imageProps||this.props.iconType===hE.image||this.props.iconType===hE.Image,d=KP(o)||{},h=d.iconClassName,f=d.children,p=d.mergeImageProps,m=rJ(i,{theme:l,className:s,iconClassName:h,isImage:c,isPlaceholder:u}),y=c?"span":"i",g=yn(this.props,Wn,["aria-label"]),v=this.state.imageLoadError,E=U(U({},this.props.imageProps),{onLoadingStateChange:this._onImageLoadingStateChange}),b=v&&a||uN,T=this.props["aria-label"]||this.props.ariaLabel,x=E.alt||T||this.props.title,C=!!(x||this.props["aria-labelledby"]||E["aria-label"]||E["aria-labelledby"]),S=C?{role:c||p?void 0:"img","aria-label":c||p?void 0:x}:{"aria-hidden":!0},N=f;return p&&f&&typeof f=="object"&&x&&(N=w.cloneElement(f,{alt:x})),w.createElement(y,U({"data-icon-name":o},S,g,p?{title:void 0,"aria-label":void 0}:{},{className:m.root}),c?w.createElement(b,U({},E)):r||N)},e}(w.Component),Ya=wr(sJ,nJ,void 0,{scope:"Icon"},!0);Ya.displayName="Icon";var iJ=function(t){var e=t.className,n=t.imageProps,r=yn(t,Wn,["aria-label","aria-labelledby","title","aria-describedby"]),s=n.alt||t["aria-label"],i=s||t["aria-labelledby"]||t.title||n["aria-label"]||n["aria-labelledby"]||n.title,o={"aria-labelledby":t["aria-labelledby"],"aria-describedby":t["aria-describedby"],title:t.title},a=i?{}:{"aria-hidden":!0};return w.createElement("div",U({},a,r,{className:Fs(jP,dd.root,dd.image,e)}),w.createElement(uN,U({},o,n,{alt:i?s:""})))},x_={none:0,all:1,inputOnly:2},Cs;(function(t){t[t.vertical=0]="vertical",t[t.horizontal=1]="horizontal",t[t.bidirectional=2]="bidirectional",t[t.domOrder=3]="domOrder"})(Cs||(Cs={}));var gv="data-is-focusable",oJ="data-disable-click-on-enter",rS="data-focuszone-id",Ta="tabindex",sS="data-no-vertical-wrap",iS="data-no-horizontal-wrap",oS=999999999,A1=-999999999,aS,aJ="ms-FocusZone";function lJ(t,e){var n;typeof MouseEvent=="function"?n=new MouseEvent("click",{ctrlKey:e==null?void 0:e.ctrlKey,metaKey:e==null?void 0:e.metaKey,shiftKey:e==null?void 0:e.shiftKey,altKey:e==null?void 0:e.altKey,bubbles:e==null?void 0:e.bubbles,cancelable:e==null?void 0:e.cancelable}):(n=document.createEvent("MouseEvents"),n.initMouseEvent("click",e?e.bubbles:!1,e?e.cancelable:!1,window,0,0,0,0,0,e?e.ctrlKey:!1,e?e.altKey:!1,e?e.shiftKey:!1,e?e.metaKey:!1,0,null)),t.dispatchEvent(n)}function uJ(){return aS||(aS=Da({selectors:{":focus":{outline:"none"}}},aJ)),aS}var D1={},yv=new Set,cJ=["text","number","password","email","tel","url","search","textarea"],dl=!1,dJ=function(t){un(e,t);function e(n){var r,s,i,o,a=t.call(this,n)||this;a._root=w.createRef(),a._mergedRef=S$(),a._onFocus=function(u){if(!a._portalContainsElement(u.target)){var c=a.props,d=c.onActiveElementChanged,h=c.doNotAllowFocusEventToPropagate,f=c.stopFocusPropagation,p=c.onFocusNotification,m=c.onFocus,y=c.shouldFocusInnerElementWhenReceivedFocus,g=c.defaultTabbableElement,v=a._isImmediateDescendantOfZone(u.target),E;if(v)E=u.target;else for(var b=u.target;b&&b!==a._root.current;){if(ka(b)&&a._isImmediateDescendantOfZone(b)){E=b;break}b=Vo(b,dl)}if(y&&u.target===a._root.current){var T=g&&typeof g=="function"&&a._root.current&&g(a._root.current);T&&ka(T)?(E=T,T.focus()):(a.focus(!0),a._activeElement&&(E=null))}var x=!a._activeElement;E&&E!==a._activeElement&&((v||x)&&a._setFocusAlignment(E,!0,!0),a._activeElement=E,x&&a._updateTabIndexes()),d&&d(a._activeElement,u),(f||h)&&u.stopPropagation(),m?m(u):p&&p()}},a._onBlur=function(){a._setParkedFocus(!1)},a._onMouseDown=function(u){if(!a._portalContainsElement(u.target)){var c=a.props.disabled;if(!c){for(var d=u.target,h=[];d&&d!==a._root.current;)h.push(d),d=Vo(d,dl);for(;h.length&&(d=h.pop(),d&&ka(d)&&a._setActiveElement(d,!0),!El(d)););}}},a._onKeyDown=function(u,c){if(!a._portalContainsElement(u.target)){var d=a.props,h=d.direction,f=d.disabled,p=d.isInnerZoneKeystroke,m=d.pagingSupportDisabled,y=d.shouldEnterInnerZone;if(!f&&(a.props.onKeyDown&&a.props.onKeyDown(u),!u.isDefaultPrevented()&&!(a._getDocument().activeElement===a._root.current&&a._isInnerZone))){if((y&&y(u)||p&&p(u))&&a._isImmediateDescendantOfZone(u.target)){var g=a._getFirstInnerZone();if(g){if(!g.focus(!0))return}else if(cI(u.target)){if(!a.focusElement(ws(u.target,u.target.firstChild,!0)))return}else return}else{if(u.altKey)return;switch(u.which){case je.space:if(a._shouldRaiseClicksOnSpace&&a._tryInvokeClickForFocusable(u.target,u))break;return;case je.left:if(h!==Cs.vertical&&(a._preventDefaultWhenHandled(u),a._moveFocusLeft(c)))break;return;case je.right:if(h!==Cs.vertical&&(a._preventDefaultWhenHandled(u),a._moveFocusRight(c)))break;return;case je.up:if(h!==Cs.horizontal&&(a._preventDefaultWhenHandled(u),a._moveFocusUp()))break;return;case je.down:if(h!==Cs.horizontal&&(a._preventDefaultWhenHandled(u),a._moveFocusDown()))break;return;case je.pageDown:if(!m&&a._moveFocusPaging(!0))break;return;case je.pageUp:if(!m&&a._moveFocusPaging(!1))break;return;case je.tab:if(a.props.allowTabKey||a.props.handleTabKey===x_.all||a.props.handleTabKey===x_.inputOnly&&a._isElementInput(u.target)){var v=!1;if(a._processingTabKey=!0,h===Cs.vertical||!a._shouldWrapFocus(a._activeElement,iS))v=u.shiftKey?a._moveFocusUp():a._moveFocusDown();else{var E=As(c)?!u.shiftKey:u.shiftKey;v=E?a._moveFocusLeft(c):a._moveFocusRight(c)}if(a._processingTabKey=!1,v)break;a.props.shouldResetActiveElementWhenTabFromZone&&(a._activeElement=null)}return;case je.home:if(a._isContentEditableElement(u.target)||a._isElementInput(u.target)&&!a._shouldInputLoseFocus(u.target,!1))return!1;var b=a._root.current&&a._root.current.firstChild;if(a._root.current&&b&&a.focusElement(ws(a._root.current,b,!0)))break;return;case je.end:if(a._isContentEditableElement(u.target)||a._isElementInput(u.target)&&!a._shouldInputLoseFocus(u.target,!0))return!1;var T=a._root.current&&a._root.current.lastChild;if(a._root.current&&a.focusElement(ri(a._root.current,T,!0,!0,!0)))break;return;case je.enter:if(a._shouldRaiseClicksOnEnter&&a._tryInvokeClickForFocusable(u.target,u))break;return;default:return}}u.preventDefault(),u.stopPropagation()}}},a._getHorizontalDistanceFromCenter=function(u,c,d){var h=a._focusAlignment.left||a._focusAlignment.x||0,f=Math.floor(d.top),p=Math.floor(c.bottom),m=Math.floor(d.bottom),y=Math.floor(c.top),g=u&&f>p,v=!u&&m<y;return g||v?h>=d.left&&h<=d.left+d.width?0:Math.abs(d.left+d.width/2-h):a._shouldWrapFocus(a._activeElement,sS)?oS:A1},Kl(a),a._id=Ds("FocusZone"),a._focusAlignment={left:0,top:0},a._processingTabKey=!1;var l=(s=(r=n.shouldRaiseClicks)!==null&&r!==void 0?r:e.defaultProps.shouldRaiseClicks)!==null&&s!==void 0?s:!0;return a._shouldRaiseClicksOnEnter=(i=n.shouldRaiseClicksOnEnter)!==null&&i!==void 0?i:l,a._shouldRaiseClicksOnSpace=(o=n.shouldRaiseClicksOnSpace)!==null&&o!==void 0?o:l,a}return e.getOuterZones=function(){return yv.size},e._onKeyDownCapture=function(n){n.which===je.tab&&yv.forEach(function(r){return r._updateTabIndexes()})},e.prototype.componentDidMount=function(){var n=this._root.current;if(D1[this._id]=this,n){for(var r=Vo(n,dl);r&&r!==this._getDocument().body&&r.nodeType===1;){if(El(r)){this._isInnerZone=!0;break}r=Vo(r,dl)}this._isInnerZone||(yv.add(this),this._root.current&&this._root.current.addEventListener("keydown",e._onKeyDownCapture,!0)),this._root.current&&this._root.current.addEventListener("blur",this._onBlur,!0),this._updateTabIndexes(),this.props.defaultTabbableElement&&typeof this.props.defaultTabbableElement=="string"?this._activeElement=this._getDocument().querySelector(this.props.defaultTabbableElement):this.props.defaultActiveElement&&(this._activeElement=this._getDocument().querySelector(this.props.defaultActiveElement)),this.props.shouldFocusOnMount&&this.focus()}},e.prototype.componentDidUpdate=function(){var n=this._root.current,r=this._getDocument();if((this._activeElement&&!oi(this._root.current,this._activeElement,dl)||this._defaultFocusElement&&!oi(this._root.current,this._defaultFocusElement,dl))&&(this._activeElement=null,this._defaultFocusElement=null,this._updateTabIndexes()),!this.props.preventFocusRestoration&&r&&this._lastIndexPath&&(r.activeElement===r.body||r.activeElement===null||r.activeElement===n)){var s=IK(n,this._lastIndexPath);s?(this._setActiveElement(s,!0),s.focus(),this._setParkedFocus(!1)):this._setParkedFocus(!0)}},e.prototype.componentWillUnmount=function(){delete D1[this._id],this._isInnerZone||(yv.delete(this),this._root.current&&this._root.current.removeEventListener("keydown",e._onKeyDownCapture,!0)),this._root.current&&this._root.current.removeEventListener("blur",this._onBlur,!0),this._activeElement=null,this._defaultFocusElement=null},e.prototype.render=function(){var n=this,r=this.props,s=r.as,i=r.elementType,o=r.rootProps,a=r.ariaDescribedBy,l=r.ariaLabelledBy,u=r.className,c=yn(this.props,Wn),d=s||i||"div";this._evaluateFocusBeforeRender();var h=wX();return w.createElement(d,U({"aria-labelledby":l,"aria-describedby":a},c,o,{className:Fs(uJ(),u),ref:this._mergedRef(this.props.elementRef,this._root),"data-focuszone-id":this._id,onKeyDown:function(f){return n._onKeyDown(f,h)},onFocus:this._onFocus,onMouseDownCapture:this._onMouseDown}),this.props.children)},e.prototype.focus=function(n,r){if(n===void 0&&(n=!1),r===void 0&&(r=!1),this._root.current)if(!n&&this._root.current.getAttribute(gv)==="true"&&this._isInnerZone){var s=this._getOwnerZone(this._root.current);if(s!==this._root.current){var i=D1[s.getAttribute(rS)];return!!i&&i.focusElement(this._root.current)}return!1}else{if(!n&&this._activeElement&&oi(this._root.current,this._activeElement)&&ka(this._activeElement)&&(!r||l$(this._activeElement)))return this._activeElement.focus(),!0;var o=this._root.current.firstChild;return this.focusElement(ws(this._root.current,o,!0,void 0,void 0,void 0,void 0,void 0,r))}return!1},e.prototype.focusLast=function(){if(this._root.current){var n=this._root.current&&this._root.current.lastChild;return this.focusElement(ri(this._root.current,n,!0,!0,!0))}return!1},e.prototype.focusElement=function(n,r){var s=this.props,i=s.onBeforeFocus,o=s.shouldReceiveFocus;return o&&!o(n)||i&&!i(n)?!1:n?(this._setActiveElement(n,r),this._activeElement&&this._activeElement.focus(),!0):!1},e.prototype.setFocusAlignment=function(n){this._focusAlignment=n},Object.defineProperty(e.prototype,"defaultFocusElement",{get:function(){return this._defaultFocusElement},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeElement",{get:function(){return this._activeElement},enumerable:!1,configurable:!0}),e.prototype._evaluateFocusBeforeRender=function(){var n=this._root.current,r=this._getDocument();if(r){var s=r.activeElement;if(s!==n){var i=oi(n,s,!1);this._lastIndexPath=i?NK(n,s):void 0}}},e.prototype._setParkedFocus=function(n){var r=this._root.current;r&&this._isParked!==n&&(this._isParked=n,n?(this.props.allowFocusRoot||(this._parkedTabIndex=r.getAttribute("tabindex"),r.setAttribute("tabindex","-1")),r.focus()):this.props.allowFocusRoot||(this._parkedTabIndex?(r.setAttribute("tabindex",this._parkedTabIndex),this._parkedTabIndex=void 0):r.removeAttribute("tabindex")))},e.prototype._setActiveElement=function(n,r){var s=this._activeElement;this._activeElement=n,s&&(El(s)&&this._updateTabIndexes(s),s.tabIndex=-1),this._activeElement&&((!this._focusAlignment||r)&&this._setFocusAlignment(n,!0,!0),this._activeElement.tabIndex=0)},e.prototype._preventDefaultWhenHandled=function(n){this.props.preventDefaultWhenHandled&&n.preventDefault()},e.prototype._tryInvokeClickForFocusable=function(n,r){var s=n;if(s===this._root.current)return!1;do{if(s.tagName==="BUTTON"||s.tagName==="A"||s.tagName==="INPUT"||s.tagName==="TEXTAREA"||s.tagName==="SUMMARY")return!1;if(this._isImmediateDescendantOfZone(s)&&s.getAttribute(gv)==="true"&&s.getAttribute(oJ)!=="true")return lJ(s,r),!0;s=Vo(s,dl)}while(s!==this._root.current);return!1},e.prototype._getFirstInnerZone=function(n){if(n=n||this._activeElement||this._root.current,!n)return null;if(El(n))return D1[n.getAttribute(rS)];for(var r=n.firstElementChild;r;){if(El(r))return D1[r.getAttribute(rS)];var s=this._getFirstInnerZone(r);if(s)return s;r=r.nextElementSibling}return null},e.prototype._moveFocus=function(n,r,s,i){i===void 0&&(i=!0);var o=this._activeElement,a=-1,l=void 0,u=!1,c=this.props.direction===Cs.bidirectional;if(!o||!this._root.current||this._isElementInput(o)&&!this._shouldInputLoseFocus(o,n))return!1;var d=c?o.getBoundingClientRect():null;do if(o=n?ws(this._root.current,o):ri(this._root.current,o),c){if(o){var h=o.getBoundingClientRect(),f=r(d,h);if(f===-1&&a===-1){l=o;break}if(f>-1&&(a===-1||f<a)&&(a=f,l=o),a>=0&&f<0)break}}else{l=o;break}while(o);if(l&&l!==this._activeElement)u=!0,this.focusElement(l);else if(this.props.isCircularNavigation&&i)return n?this.focusElement(ws(this._root.current,this._root.current.firstElementChild,!0)):this.focusElement(ri(this._root.current,this._root.current.lastElementChild,!0,!0,!0));return u},e.prototype._moveFocusDown=function(){var n=this,r=-1,s=this._focusAlignment.left||this._focusAlignment.x||0;return this._moveFocus(!0,function(i,o){var a=-1,l=Math.floor(o.top),u=Math.floor(i.bottom);return l<u?n._shouldWrapFocus(n._activeElement,sS)?oS:A1:((r===-1&&l>=u||l===r)&&(r=l,s>=o.left&&s<=o.left+o.width?a=0:a=Math.abs(o.left+o.width/2-s)),a)})?(this._setFocusAlignment(this._activeElement,!1,!0),!0):!1},e.prototype._moveFocusUp=function(){var n=this,r=-1,s=this._focusAlignment.left||this._focusAlignment.x||0;return this._moveFocus(!1,function(i,o){var a=-1,l=Math.floor(o.bottom),u=Math.floor(o.top),c=Math.floor(i.top);return l>c?n._shouldWrapFocus(n._activeElement,sS)?oS:A1:((r===-1&&l<=c||u===r)&&(r=u,s>=o.left&&s<=o.left+o.width?a=0:a=Math.abs(o.left+o.width/2-s)),a)})?(this._setFocusAlignment(this._activeElement,!1,!0),!0):!1},e.prototype._moveFocusLeft=function(n){var r=this,s=this._shouldWrapFocus(this._activeElement,iS);return this._moveFocus(As(n),function(i,o){var a=-1,l;return As(n)?l=parseFloat(o.top.toFixed(3))<parseFloat(i.bottom.toFixed(3)):l=parseFloat(o.bottom.toFixed(3))>parseFloat(i.top.toFixed(3)),l&&o.right<=i.right&&r.props.direction!==Cs.vertical?a=i.right-o.right:s||(a=A1),a},void 0,s)?(this._setFocusAlignment(this._activeElement,!0,!1),!0):!1},e.prototype._moveFocusRight=function(n){var r=this,s=this._shouldWrapFocus(this._activeElement,iS);return this._moveFocus(!As(n),function(i,o){var a=-1,l;return As(n)?l=parseFloat(o.bottom.toFixed(3))>parseFloat(i.top.toFixed(3)):l=parseFloat(o.top.toFixed(3))<parseFloat(i.bottom.toFixed(3)),l&&o.left>=i.left&&r.props.direction!==Cs.vertical?a=o.left-i.left:s||(a=A1),a},void 0,s)?(this._setFocusAlignment(this._activeElement,!0,!1),!0):!1},e.prototype._moveFocusPaging=function(n,r){r===void 0&&(r=!0);var s=this._activeElement;if(!s||!this._root.current||this._isElementInput(s)&&!this._shouldInputLoseFocus(s,n))return!1;var i=oI(s);if(!i)return!1;var o=-1,a=void 0,l=-1,u=-1,c=i.clientHeight,d=s.getBoundingClientRect();do if(s=n?ws(this._root.current,s):ri(this._root.current,s),s){var h=s.getBoundingClientRect(),f=Math.floor(h.top),p=Math.floor(d.bottom),m=Math.floor(h.bottom),y=Math.floor(d.top),g=this._getHorizontalDistanceFromCenter(n,d,h),v=n&&f>p+c,E=!n&&m<y-c;if(v||E)break;g>-1&&(n&&f>l?(l=f,o=g,a=s):!n&&m<u?(u=m,o=g,a=s):(o===-1||g<=o)&&(o=g,a=s))}while(s);var b=!1;if(a&&a!==this._activeElement)b=!0,this.focusElement(a),this._setFocusAlignment(a,!1,!0);else if(this.props.isCircularNavigation&&r)return n?this.focusElement(ws(this._root.current,this._root.current.firstElementChild,!0)):this.focusElement(ri(this._root.current,this._root.current.lastElementChild,!0,!0,!0));return b},e.prototype._setFocusAlignment=function(n,r,s){if(this.props.direction===Cs.bidirectional&&(!this._focusAlignment||r||s)){var i=n.getBoundingClientRect(),o=i.left+i.width/2,a=i.top+i.height/2;this._focusAlignment||(this._focusAlignment={left:o,top:a}),r&&(this._focusAlignment.left=o),s&&(this._focusAlignment.top=a)}},e.prototype._isImmediateDescendantOfZone=function(n){return this._getOwnerZone(n)===this._root.current},e.prototype._getOwnerZone=function(n){for(var r=Vo(n,dl);r&&r!==this._root.current&&r!==this._getDocument().body;){if(El(r))return r;r=Vo(r,dl)}return r},e.prototype._updateTabIndexes=function(n){!this._activeElement&&this.props.defaultTabbableElement&&typeof this.props.defaultTabbableElement=="function"&&(this._activeElement=this.props.defaultTabbableElement(this._root.current)),!n&&this._root.current&&(this._defaultFocusElement=null,n=this._root.current,this._activeElement&&!oi(n,this._activeElement)&&(this._activeElement=null)),this._activeElement&&!ka(this._activeElement)&&(this._activeElement=null);for(var r=n&&n.children,s=0;r&&s<r.length;s++){var i=r[s];El(i)?i.getAttribute(gv)==="true"&&(!this._isInnerZone&&(!this._activeElement&&!this._defaultFocusElement||this._activeElement===i)?(this._defaultFocusElement=i,i.getAttribute(Ta)!=="0"&&i.setAttribute(Ta,"0")):i.getAttribute(Ta)!=="-1"&&i.setAttribute(Ta,"-1")):(i.getAttribute&&i.getAttribute(gv)==="false"&&i.setAttribute(Ta,"-1"),ka(i)?this.props.disabled?i.setAttribute(Ta,"-1"):!this._isInnerZone&&(!this._activeElement&&!this._defaultFocusElement||this._activeElement===i)?(this._defaultFocusElement=i,i.getAttribute(Ta)!=="0"&&i.setAttribute(Ta,"0")):i.getAttribute(Ta)!=="-1"&&i.setAttribute(Ta,"-1"):i.tagName==="svg"&&i.getAttribute("focusable")!=="false"&&i.setAttribute("focusable","false")),this._updateTabIndexes(i)}},e.prototype._isContentEditableElement=function(n){return n&&n.getAttribute("contenteditable")==="true"},e.prototype._isElementInput=function(n){return!!(n&&n.tagName&&(n.tagName.toLowerCase()==="input"||n.tagName.toLowerCase()==="textarea"))},e.prototype._shouldInputLoseFocus=function(n,r){if(!this._processingTabKey&&n&&n.type&&cJ.indexOf(n.type.toLowerCase())>-1){var s=n.selectionStart,i=n.selectionEnd,o=s!==i,a=n.value,l=n.readOnly;if(o||s>0&&!r&&!l||s!==a.length&&r&&!l||this.props.handleTabKey&&!(this.props.shouldInputLoseFocusOnArrowKey&&this.props.shouldInputLoseFocusOnArrowKey(n)))return!1}return!0},e.prototype._shouldWrapFocus=function(n,r){return this.props.checkForNoWrap?u$(n,r):!0},e.prototype._portalContainsElement=function(n){return n&&!!this._root.current&&a$(n,this._root.current)},e.prototype._getDocument=function(){return Ps(this._root.current)},e.defaultProps={isCircularNavigation:!1,direction:Cs.bidirectional,shouldRaiseClicks:!0},e}(w.Component),ti;(function(t){t[t.Normal=0]="Normal",t[t.Divider=1]="Divider",t[t.Header=2]="Header",t[t.Section=3]="Section"})(ti||(ti={}));function ng(t){return t.canCheck?!!(t.isChecked||t.checked):typeof t.isChecked=="boolean"?t.isChecked:typeof t.checked=="boolean"?t.checked:null}function Bl(t){return!!(t.subMenuProps||t.items)}function $a(t){return!!(t.isDisabled||t.disabled)}function qP(t){var e=ng(t),n=e!==null;return n?"menuitemcheckbox":"menuitem"}var RD=function(t){var e=t.item,n=t.classNames,r=e.iconProps;return w.createElement(Ya,U({},r,{className:n.icon}))},hJ=function(t){var e=t.item,n=t.hasIcons;return n?e.onRenderIcon?e.onRenderIcon(t,RD):RD(t):null},fJ=function(t){var e=t.onCheckmarkClick,n=t.item,r=t.classNames,s=ng(n);if(e){var i=function(o){return e(n,o)};return w.createElement(Ya,{iconName:n.canCheck!==!1&&s?"CheckMark":"",className:r.checkmarkIcon,onClick:i})}return null},pJ=function(t){var e=t.item,n=t.classNames;return e.text||e.name?w.createElement("span",{className:n.label},e.text||e.name):null},mJ=function(t){var e=t.item,n=t.classNames;return e.secondaryText?w.createElement("span",{className:n.secondaryText},e.secondaryText):null},gJ=function(t){var e=t.item,n=t.classNames,r=t.theme;return Bl(e)?w.createElement(Ya,U({iconName:As(r)?"ChevronLeft":"ChevronRight"},e.submenuIconProps,{className:n.subMenuIcon})):null},yJ=function(t){un(e,t);function e(n){var r=t.call(this,n)||this;return r.openSubMenu=function(){var s=r.props,i=s.item,o=s.openSubMenu,a=s.getSubmenuTarget;if(a){var l=a();Bl(i)&&o&&l&&o(i,l)}},r.dismissSubMenu=function(){var s=r.props,i=s.item,o=s.dismissSubMenu;Bl(i)&&o&&o()},r.dismissMenu=function(s){var i=r.props.dismissMenu;i&&i(void 0,s)},Kl(r),r}return e.prototype.render=function(){var n=this.props,r=n.item,s=n.classNames,i=r.onRenderContent||this._renderLayout;return w.createElement("div",{className:r.split?s.linkContentMenu:s.linkContent},i(this.props,{renderCheckMarkIcon:fJ,renderItemIcon:hJ,renderItemName:pJ,renderSecondaryText:mJ,renderSubMenuIcon:gJ}))},e.prototype._renderLayout=function(n,r){return w.createElement(w.Fragment,null,r.renderCheckMarkIcon(n),r.renderItemIcon(n),r.renderItemName(n),r.renderSecondaryText(n),r.renderSubMenuIcon(n))},e}(w.Component),vJ=Un(function(t){return Rg({wrapper:{display:"inline-flex",height:"100%",alignItems:"center"},divider:{width:1,height:"100%",backgroundColor:t.palette.neutralTertiaryAlt}})}),Tu=36,FD=I$(0,k$),bJ=Un(function(t){var e,n,r,s,i,o=t.semanticColors,a=t.fonts,l=t.palette,u=o.menuItemBackgroundHovered,c=o.menuItemTextHovered,d=o.menuItemBackgroundPressed,h=o.bodyDivider,f={item:[a.medium,{color:o.bodyText,position:"relative",boxSizing:"border-box"}],divider:{display:"block",height:"1px",backgroundColor:h,position:"relative"},root:[Ol(t),a.medium,{color:o.bodyText,backgroundColor:"transparent",border:"none",width:"100%",height:Tu,lineHeight:Tu,display:"block",cursor:"pointer",padding:"0px 8px 0 4px",textAlign:"left"}],rootDisabled:{color:o.disabledBodyText,cursor:"default",pointerEvents:"none",selectors:(e={},e[we]={color:"GrayText",opacity:1},e)},rootHovered:{backgroundColor:u,color:c,selectors:{".ms-ContextualMenu-icon":{color:l.themeDarkAlt},".ms-ContextualMenu-submenuIcon":{color:l.neutralPrimary}}},rootFocused:{backgroundColor:l.white},rootChecked:{selectors:{".ms-ContextualMenu-checkmarkIcon":{color:l.neutralPrimary}}},rootPressed:{backgroundColor:d,selectors:{".ms-ContextualMenu-icon":{color:l.themeDark},".ms-ContextualMenu-submenuIcon":{color:l.neutralPrimary}}},rootExpanded:{backgroundColor:d,color:o.bodyTextChecked,selectors:(n={".ms-ContextualMenu-submenuIcon":(r={},r[we]={color:"inherit"},r)},n[we]=U({},ar()),n)},linkContent:{whiteSpace:"nowrap",height:"inherit",display:"flex",alignItems:"center",maxWidth:"100%"},anchorLink:{padding:"0px 8px 0 4px",textRendering:"auto",color:"inherit",letterSpacing:"normal",wordSpacing:"normal",textTransform:"none",textIndent:"0px",textShadow:"none",textDecoration:"none",boxSizing:"border-box"},label:{margin:"0 4px",verticalAlign:"middle",display:"inline-block",flexGrow:"1",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},secondaryText:{color:t.palette.neutralSecondary,paddingLeft:"20px",textAlign:"right"},icon:{display:"inline-block",minHeight:"1px",maxHeight:Tu,fontSize:jo.medium,width:jo.medium,margin:"0 4px",verticalAlign:"middle",flexShrink:"0",selectors:(s={},s[FD]={fontSize:jo.large,width:jo.large},s)},iconColor:{color:o.menuIcon},iconDisabled:{color:o.disabledBodyText},checkmarkIcon:{color:o.bodySubtext},subMenuIcon:{height:Tu,lineHeight:Tu,color:l.neutralSecondary,textAlign:"center",display:"inline-block",verticalAlign:"middle",flexShrink:"0",fontSize:jo.small,selectors:(i={":hover":{color:l.neutralPrimary},":active":{color:l.neutralPrimary}},i[FD]={fontSize:jo.medium},i)},splitButtonFlexContainer:[Ol(t),{display:"flex",height:Tu,flexWrap:"nowrap",justifyContent:"center",alignItems:"flex-start"}]};return sl(f)}),OD="28px",EJ=I$(0,k$),TJ=Un(function(t){var e;return Rg(vJ(t),{wrapper:{position:"absolute",right:28,selectors:(e={},e[EJ]={right:32},e)},divider:{height:16,width:1}})}),xJ={item:"ms-ContextualMenu-item",divider:"ms-ContextualMenu-divider",root:"ms-ContextualMenu-link",isChecked:"is-checked",isExpanded:"is-expanded",isDisabled:"is-disabled",linkContent:"ms-ContextualMenu-linkContent",linkContentMenu:"ms-ContextualMenu-linkContent",icon:"ms-ContextualMenu-icon",iconColor:"ms-ContextualMenu-iconColor",checkmarkIcon:"ms-ContextualMenu-checkmarkIcon",subMenuIcon:"ms-ContextualMenu-submenuIcon",label:"ms-ContextualMenu-itemText",secondaryText:"ms-ContextualMenu-secondaryText",splitMenu:"ms-ContextualMenu-splitMenu",screenReaderText:"ms-ContextualMenu-screenReaderText"},CJ=Un(function(t,e,n,r,s,i,o,a,l,u,c,d){var h,f,p,m,y=bJ(t),g=es(xJ,t);return Rg({item:[g.item,y.item,o],divider:[g.divider,y.divider,a],root:[g.root,y.root,r&&[g.isChecked,y.rootChecked],s&&y.anchorLink,n&&[g.isExpanded,y.rootExpanded],e&&[g.isDisabled,y.rootDisabled],!e&&!n&&[{selectors:(h={":hover":y.rootHovered,":active":y.rootPressed},h["."+as+" &:focus, ."+as+" &:focus:hover"]=y.rootFocused,h["."+as+" &:hover"]={background:"inherit;"},h)}],d],splitPrimary:[y.root,{width:"calc(100% - "+OD+")"},r&&["is-checked",y.rootChecked],(e||c)&&["is-disabled",y.rootDisabled],!(e||c)&&!r&&[{selectors:(f={":hover":y.rootHovered},f[":hover ~ ."+g.splitMenu]=y.rootHovered,f[":active"]=y.rootPressed,f["."+as+" &:focus, ."+as+" &:focus:hover"]=y.rootFocused,f["."+as+" &:hover"]={background:"inherit;"},f)}]],splitMenu:[g.splitMenu,y.root,{flexBasis:"0",padding:"0 8px",minWidth:OD},n&&["is-expanded",y.rootExpanded],e&&["is-disabled",y.rootDisabled],!e&&!n&&[{selectors:(p={":hover":y.rootHovered,":active":y.rootPressed},p["."+as+" &:focus, ."+as+" &:focus:hover"]=y.rootFocused,p["."+as+" &:hover"]={background:"inherit;"},p)}]],anchorLink:y.anchorLink,linkContent:[g.linkContent,y.linkContent],linkContentMenu:[g.linkContentMenu,y.linkContent,{justifyContent:"center"}],icon:[g.icon,i&&y.iconColor,y.icon,l,e&&[g.isDisabled,y.iconDisabled]],iconColor:y.iconColor,checkmarkIcon:[g.checkmarkIcon,i&&y.checkmarkIcon,y.icon,l],subMenuIcon:[g.subMenuIcon,y.subMenuIcon,u,n&&{color:t.palette.neutralPrimary},e&&[y.iconDisabled]],label:[g.label,y.label],secondaryText:[g.secondaryText,y.secondaryText],splitContainer:[y.splitButtonFlexContainer,!e&&!r&&[{selectors:(m={},m["."+as+" &:focus, ."+as+" &:focus:hover"]=y.rootFocused,m)}]],screenReaderText:[g.screenReaderText,y.screenReaderText,hI,{visibility:"hidden"}]})}),XP=function(t){var e=t.theme,n=t.disabled,r=t.expanded,s=t.checked,i=t.isAnchorLink,o=t.knownIcon,a=t.itemClassName,l=t.dividerClassName,u=t.iconClassName,c=t.subMenuClassName,d=t.primaryDisabled,h=t.className;return CJ(e,n,r,s,i,o,a,l,u,c,d,h)},rg=wr(yJ,XP,void 0,{scope:"ContextualMenuItem"}),cN=function(t){un(e,t);function e(n){var r=t.call(this,n)||this;return r._onItemMouseEnter=function(s){var i=r.props,o=i.item,a=i.onItemMouseEnter;a&&a(o,s,s.currentTarget)},r._onItemClick=function(s){var i=r.props,o=i.item,a=i.onItemClickBase;a&&a(o,s,s.currentTarget)},r._onItemMouseLeave=function(s){var i=r.props,o=i.item,a=i.onItemMouseLeave;a&&a(o,s)},r._onItemKeyDown=function(s){var i=r.props,o=i.item,a=i.onItemKeyDown;a&&a(o,s)},r._onItemMouseMove=function(s){var i=r.props,o=i.item,a=i.onItemMouseMove;a&&a(o,s,s.currentTarget)},r._getSubmenuTarget=function(){},Kl(r),r}return e.prototype.shouldComponentUpdate=function(n){return!iI(n,this.props)},e}(w.Component),SJ="ktp",$D="-",wJ="data-ktp-target",_J="data-ktp-execute-target",kJ="ktp-layer-id",wa;(function(t){t.KEYTIP_ADDED="keytipAdded",t.KEYTIP_REMOVED="keytipRemoved",t.KEYTIP_UPDATED="keytipUpdated",t.PERSISTED_KEYTIP_ADDED="persistedKeytipAdded",t.PERSISTED_KEYTIP_REMOVED="persistedKeytipRemoved",t.PERSISTED_KEYTIP_EXECUTE="persistedKeytipExecute",t.ENTER_KEYTIP_MODE="enterKeytipMode",t.EXIT_KEYTIP_MODE="exitKeytipMode"})(wa||(wa={}));var IJ=function(){function t(){this.keytips={},this.persistedKeytips={},this.sequenceMapping={},this.inKeytipMode=!1,this.shouldEnterKeytipMode=!0,this.delayUpdatingKeytipChange=!1}return t.getInstance=function(){return this._instance},t.prototype.init=function(e){this.delayUpdatingKeytipChange=e},t.prototype.register=function(e,n){n===void 0&&(n=!1);var r=e;n||(r=this.addParentOverflow(e),this.sequenceMapping[r.keySequences.toString()]=r);var s=this._getUniqueKtp(r);if(n?this.persistedKeytips[s.uniqueID]=s:this.keytips[s.uniqueID]=s,this.inKeytipMode||!this.delayUpdatingKeytipChange){var i=n?wa.PERSISTED_KEYTIP_ADDED:wa.KEYTIP_ADDED;ro.raise(this,i,{keytip:r,uniqueID:s.uniqueID})}return s.uniqueID},t.prototype.update=function(e,n){var r=this.addParentOverflow(e),s=this._getUniqueKtp(r,n),i=this.keytips[n];i&&(s.keytip.visible=i.keytip.visible,this.keytips[n]=s,delete this.sequenceMapping[i.keytip.keySequences.toString()],this.sequenceMapping[s.keytip.keySequences.toString()]=s.keytip,(this.inKeytipMode||!this.delayUpdatingKeytipChange)&&ro.raise(this,wa.KEYTIP_UPDATED,{keytip:s.keytip,uniqueID:s.uniqueID}))},t.prototype.unregister=function(e,n,r){r===void 0&&(r=!1),r?delete this.persistedKeytips[n]:delete this.keytips[n],!r&&delete this.sequenceMapping[e.keySequences.toString()];var s=r?wa.PERSISTED_KEYTIP_REMOVED:wa.KEYTIP_REMOVED;(this.inKeytipMode||!this.delayUpdatingKeytipChange)&&ro.raise(this,s,{keytip:e,uniqueID:n})},t.prototype.enterKeytipMode=function(){ro.raise(this,wa.ENTER_KEYTIP_MODE)},t.prototype.exitKeytipMode=function(){ro.raise(this,wa.EXIT_KEYTIP_MODE)},t.prototype.getKeytips=function(){var e=this;return Object.keys(this.keytips).map(function(n){return e.keytips[n].keytip})},t.prototype.addParentOverflow=function(e){var n=sa([],e.keySequences);if(n.pop(),n.length!==0){var r=this.sequenceMapping[n.toString()];if(r&&r.overflowSetSequence)return U(U({},e),{overflowSetSequence:r.overflowSetSequence})}return e},t.prototype.menuExecute=function(e,n){ro.raise(this,wa.PERSISTED_KEYTIP_EXECUTE,{overflowButtonSequences:e,keytipSequences:n})},t.prototype._getUniqueKtp=function(e,n){return n===void 0&&(n=Ds()),{keytip:U({},e),uniqueID:n}},t._instance=new t,t}();function YP(t){return t.reduce(function(e,n){return e+$D+n.split("").join($D)},SJ)}function NJ(t,e){var n=e.length,r=sa([],e).pop(),s=sa([],t);return uK(s,n-1,r)}function AJ(t){var e=" "+kJ;return t.length?e+" "+YP(t):e}function DJ(t){var e=w.useRef(),n=t.keytipProps?U({disabled:t.disabled},t.keytipProps):void 0,r=go(IJ.getInstance()),s=mI(t);yf(function(){e.current&&n&&((s==null?void 0:s.keytipProps)!==t.keytipProps||(s==null?void 0:s.disabled)!==t.disabled)&&r.update(n,e.current)}),yf(function(){return n&&(e.current=r.register(n)),function(){n&&r.unregister(n,e.current)}},[]);var i={ariaDescribedBy:void 0,keytipId:void 0};return n&&(i=RJ(r,n,t.ariaDescribedBy)),i}function RJ(t,e,n){var r=t.addParentOverflow(e),s=Fg(n,AJ(r.keySequences)),i=sa([],r.keySequences);r.overflowSetSequence&&(i=NJ(i,r.overflowSetSequence));var o=YP(i);return{ariaDescribedBy:s,keytipId:o}}var sg=function(t){var e,n=t.children,r=rl(t,["children"]),s=DJ(r),i=s.keytipId,o=s.ariaDescribedBy;return n((e={},e[wJ]=i,e[_J]=i,e["aria-describedby"]=o,e))},FJ=function(t){un(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._anchor=w.createRef(),n._getMemoizedMenuButtonKeytipProps=Un(function(r){return U(U({},r),{hasMenu:!0})}),n._getSubmenuTarget=function(){return n._anchor.current?n._anchor.current:void 0},n._onItemClick=function(r){var s=n.props,i=s.item,o=s.onItemClick;o&&o(i,r)},n._renderAriaDescription=function(r,s){return r?w.createElement("span",{id:n._ariaDescriptionId,className:s},r):null},n}return e.prototype.render=function(){var n=this,r=this.props,s=r.item,i=r.classNames,o=r.index,a=r.focusableElementIndex,l=r.totalItemCount,u=r.hasCheckmarks,c=r.hasIcons,d=r.contextualMenuItemAs,h=d===void 0?rg:d,f=r.expandedMenuItemKey,p=r.onItemClick,m=r.openSubMenu,y=r.dismissSubMenu,g=r.dismissMenu,v=s.rel;s.target&&s.target.toLowerCase()==="_blank"&&(v=v||"nofollow noopener noreferrer");var E=Bl(s),b=yn(s,f$),T=$a(s),x=s.itemProps,C=s.ariaDescription,S=s.keytipProps;S&&E&&(S=this._getMemoizedMenuButtonKeytipProps(S)),C&&(this._ariaDescriptionId=Ds());var N=Fg(s.ariaDescribedBy,C?this._ariaDescriptionId:void 0,b["aria-describedby"]),I={"aria-describedby":N};return w.createElement("div",null,w.createElement(sg,{keytipProps:s.keytipProps,ariaDescribedBy:N,disabled:T},function(F){return w.createElement("a",U({},I,b,F,{ref:n._anchor,href:s.href,target:s.target,rel:v,className:i.root,role:"menuitem","aria-haspopup":E||void 0,"aria-expanded":E?s.key===f:void 0,"aria-posinset":a+1,"aria-setsize":l,"aria-disabled":$a(s),style:s.style,onClick:n._onItemClick,onMouseEnter:n._onItemMouseEnter,onMouseLeave:n._onItemMouseLeave,onMouseMove:n._onItemMouseMove,onKeyDown:E?n._onItemKeyDown:void 0}),w.createElement(h,U({componentRef:s.componentRef,item:s,classNames:i,index:o,onCheckmarkClick:u&&p?p:void 0,hasIcons:c,openSubMenu:m,dismissSubMenu:y,dismissMenu:g,getSubmenuTarget:n._getSubmenuTarget},x)),n._renderAriaDescription(C,i.screenReaderText))}))},e}(cN),OJ=function(t){un(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._btn=w.createRef(),n._getMemoizedMenuButtonKeytipProps=Un(function(r){return U(U({},r),{hasMenu:!0})}),n._renderAriaDescription=function(r,s){return r?w.createElement("span",{id:n._ariaDescriptionId,className:s},r):null},n._getSubmenuTarget=function(){return n._btn.current?n._btn.current:void 0},n}return e.prototype.render=function(){var n=this,r=this.props,s=r.item,i=r.classNames,o=r.index,a=r.focusableElementIndex,l=r.totalItemCount,u=r.hasCheckmarks,c=r.hasIcons,d=r.contextualMenuItemAs,h=d===void 0?rg:d,f=r.expandedMenuItemKey,p=r.onItemMouseDown,m=r.onItemClick,y=r.openSubMenu,g=r.dismissSubMenu,v=r.dismissMenu,E=ng(s),b=E!==null,T=qP(s),x=Bl(s),C=s.itemProps,S=s.ariaLabel,N=s.ariaDescription,I=yn(s,yd);delete I.disabled;var F=s.role||T;N&&(this._ariaDescriptionId=Ds());var L=Fg(s.ariaDescribedBy,N?this._ariaDescriptionId:void 0,I["aria-describedby"]),z={className:i.root,onClick:this._onItemClick,onKeyDown:x?this._onItemKeyDown:void 0,onMouseEnter:this._onItemMouseEnter,onMouseLeave:this._onItemMouseLeave,onMouseDown:function($){return p?p(s,$):void 0},onMouseMove:this._onItemMouseMove,href:s.href,title:s.title,"aria-label":S,"aria-describedby":L,"aria-haspopup":x||void 0,"aria-expanded":x?s.key===f:void 0,"aria-posinset":a+1,"aria-setsize":l,"aria-disabled":$a(s),"aria-checked":(F==="menuitemcheckbox"||F==="menuitemradio")&&b?!!E:void 0,"aria-selected":F==="menuitem"&&b?!!E:void 0,role:F,style:s.style},H=s.keytipProps;return H&&x&&(H=this._getMemoizedMenuButtonKeytipProps(H)),w.createElement(sg,{keytipProps:H,ariaDescribedBy:L,disabled:$a(s)},function($){return w.createElement("button",U({ref:n._btn},I,z,$),w.createElement(h,U({componentRef:s.componentRef,item:s,classNames:i,index:o,onCheckmarkClick:u&&m?m:void 0,hasIcons:c,openSubMenu:y,dismissSubMenu:g,dismissMenu:v,getSubmenuTarget:n._getSubmenuTarget},C)),n._renderAriaDescription(N,i.screenReaderText))})},e}(cN),$J=function(t){var e=t.theme,n=t.getClassNames,r=t.className;if(!e)throw new Error("Theme is undefined or null.");if(n){var s=n(e);return{wrapper:[s.wrapper],divider:[s.divider]}}return{wrapper:[{display:"inline-flex",height:"100%",alignItems:"center"},r],divider:[{width:1,height:"100%",backgroundColor:e.palette.neutralTertiaryAlt}]}},LJ=Sr(),QP=w.forwardRef(function(t,e){var n=t.styles,r=t.theme,s=t.getClassNames,i=t.className,o=LJ(n,{theme:r,getClassNames:s,className:i});return w.createElement("span",{className:o.wrapper,ref:e},w.createElement("span",{className:o.divider}))});QP.displayName="VerticalDividerBase";var PJ=wr(QP,$J,void 0,{scope:"VerticalDivider"}),MJ=500,BJ=function(t){un(e,t);function e(n){var r=t.call(this,n)||this;return r._getMemoizedMenuButtonKeytipProps=Un(function(s){return U(U({},s),{hasMenu:!0})}),r._onItemKeyDown=function(s){var i=r.props,o=i.item,a=i.onItemKeyDown;s.which===je.enter?(r._executeItemClick(s),s.preventDefault(),s.stopPropagation()):a&&a(o,s)},r._getSubmenuTarget=function(){return r._splitButton},r._renderAriaDescription=function(s,i){return s?w.createElement("span",{id:r._ariaDescriptionId,className:i},s):null},r._onItemMouseEnterPrimary=function(s){var i=r.props,o=i.item,a=i.onItemMouseEnter;a&&a(U(U({},o),{subMenuProps:void 0,items:void 0}),s,r._splitButton)},r._onItemMouseEnterIcon=function(s){var i=r.props,o=i.item,a=i.onItemMouseEnter;a&&a(o,s,r._splitButton)},r._onItemMouseMovePrimary=function(s){var i=r.props,o=i.item,a=i.onItemMouseMove;a&&a(U(U({},o),{subMenuProps:void 0,items:void 0}),s,r._splitButton)},r._onItemMouseMoveIcon=function(s){var i=r.props,o=i.item,a=i.onItemMouseMove;a&&a(o,s,r._splitButton)},r._onIconItemClick=function(s){var i=r.props,o=i.item,a=i.onItemClickBase;a&&a(o,s,r._splitButton?r._splitButton:s.currentTarget)},r._executeItemClick=function(s){var i=r.props,o=i.item,a=i.executeItemClick,l=i.onItemClick;if(!(o.disabled||o.isDisabled)){if(r._processingTouch&&l)return l(o,s);a&&a(o,s)}},r._onTouchStart=function(s){r._splitButton&&!("onpointerdown"in r._splitButton)&&r._handleTouchAndPointerEvent(s)},r._onPointerDown=function(s){s.pointerType==="touch"&&(r._handleTouchAndPointerEvent(s),s.preventDefault(),s.stopImmediatePropagation())},r._async=new Kf(r),r._events=new ro(r),r}return e.prototype.componentDidMount=function(){this._splitButton&&"onpointerdown"in this._splitButton&&this._events.on(this._splitButton,"pointerdown",this._onPointerDown,!0)},e.prototype.componentWillUnmount=function(){this._async.dispose(),this._events.dispose()},e.prototype.render=function(){var n=this,r=this.props,s=r.item,i=r.classNames,o=r.index,a=r.focusableElementIndex,l=r.totalItemCount,u=r.hasCheckmarks,c=r.hasIcons,d=r.onItemMouseLeave,h=r.expandedMenuItemKey,f=Bl(s),p=s.keytipProps;p&&(p=this._getMemoizedMenuButtonKeytipProps(p));var m=s.ariaDescription;return m&&(this._ariaDescriptionId=Ds()),w.createElement(sg,{keytipProps:p,disabled:$a(s)},function(y){return w.createElement("div",{"data-ktp-target":y["data-ktp-target"],ref:function(g){return n._splitButton=g},role:qP(s),"aria-label":s.ariaLabel,className:i.splitContainer,"aria-disabled":$a(s),"aria-expanded":f?s.key===h:void 0,"aria-haspopup":!0,"aria-describedby":Fg(s.ariaDescribedBy,m?n._ariaDescriptionId:void 0,y["aria-describedby"]),"aria-checked":s.isChecked||s.checked,"aria-posinset":a+1,"aria-setsize":l,onMouseEnter:n._onItemMouseEnterPrimary,onMouseLeave:d?d.bind(n,U(U({},s),{subMenuProps:null,items:null})):void 0,onMouseMove:n._onItemMouseMovePrimary,onKeyDown:n._onItemKeyDown,onClick:n._executeItemClick,onTouchStart:n._onTouchStart,tabIndex:0,"data-is-focusable":!0,"aria-roledescription":s["aria-roledescription"]},n._renderSplitPrimaryButton(s,i,o,u,c),n._renderSplitDivider(s),n._renderSplitIconButton(s,i,o,y),n._renderAriaDescription(m,i.screenReaderText))})},e.prototype._renderSplitPrimaryButton=function(n,r,s,i,o){var a=this.props,l=a.contextualMenuItemAs,u=l===void 0?rg:l,c=a.onItemClick,d={key:n.key,disabled:$a(n)||n.primaryDisabled,name:n.name,text:n.text||n.name,secondaryText:n.secondaryText,className:r.splitPrimary,canCheck:n.canCheck,isChecked:n.isChecked,checked:n.checked,iconProps:n.iconProps,onRenderIcon:n.onRenderIcon,data:n.data,"data-is-focusable":!1},h=n.itemProps;return w.createElement("button",U({},yn(d,yd)),w.createElement(u,U({"data-is-focusable":!1,item:d,classNames:r,index:s,onCheckmarkClick:i&&c?c:void 0,hasIcons:o},h)))},e.prototype._renderSplitDivider=function(n){var r=n.getSplitButtonVerticalDividerClassNames||TJ;return w.createElement(PJ,{getClassNames:r})},e.prototype._renderSplitIconButton=function(n,r,s,i){var o=this.props,a=o.contextualMenuItemAs,l=a===void 0?rg:a,u=o.onItemMouseLeave,c=o.onItemMouseDown,d=o.openSubMenu,h=o.dismissSubMenu,f=o.dismissMenu,p={onClick:this._onIconItemClick,disabled:$a(n),className:r.splitMenu,subMenuProps:n.subMenuProps,submenuIconProps:n.submenuIconProps,split:!0,key:n.key},m=U(U({},yn(p,yd)),{onMouseEnter:this._onItemMouseEnterIcon,onMouseLeave:u?u.bind(this,n):void 0,onMouseDown:function(g){return c?c(n,g):void 0},onMouseMove:this._onItemMouseMoveIcon,"data-is-focusable":!1,"data-ktp-execute-target":i["data-ktp-execute-target"],"aria-hidden":!0}),y=n.itemProps;return w.createElement("button",U({},m),w.createElement(l,U({componentRef:n.componentRef,item:p,classNames:r,index:s,hasIcons:!1,openSubMenu:d,dismissSubMenu:h,dismissMenu:f,getSubmenuTarget:this._getSubmenuTarget},y)))},e.prototype._handleTouchAndPointerEvent=function(n){var r=this,s=this.props.onTap;s&&s(n),this._lastTouchTimeoutId&&(this._async.clearTimeout(this._lastTouchTimeoutId),this._lastTouchTimeoutId=void 0),this._processingTouch=!0,this._lastTouchTimeoutId=this._async.setTimeout(function(){r._processingTouch=!1,r._lastTouchTimeoutId=void 0},MJ)},e}(cN),zJ=function(t){un(e,t);function e(n){var r=t.call(this,n)||this;return r._updateComposedComponentRef=r._updateComposedComponentRef.bind(r),r}return e.prototype._updateComposedComponentRef=function(n){this._composedComponentInstance=n,n?this._hoisted=iq(this,n):this._hoisted&&oq(this,this._hoisted)},e}(w.Component),Cd;(function(t){t[t.small=0]="small",t[t.medium=1]="medium",t[t.large=2]="large",t[t.xLarge=3]="xLarge",t[t.xxLarge=4]="xxLarge",t[t.xxxLarge=5]="xxxLarge",t[t.unknown=999]="unknown"})(Cd||(Cd={}));var HJ=[479,639,1023,1365,1919,99999999],ZP;function dN(){var t;return(t=ZP)!==null&&t!==void 0?t:Cd.large}function JP(t){var e,n=(e=function(r){un(s,r);function s(i){var o=r.call(this,i)||this;return o._onResize=function(){var a=e6(o.context.window);a!==o.state.responsiveMode&&o.setState({responsiveMode:a})},o._events=new ro(o),o._updateComposedComponentRef=o._updateComposedComponentRef.bind(o),o.state={responsiveMode:dN()},o}return s.prototype.componentDidMount=function(){this._events.on(this.context.window,"resize",this._onResize),this._onResize()},s.prototype.componentWillUnmount=function(){this._events.dispose()},s.prototype.render=function(){var i=this.state.responsiveMode;return i===Cd.unknown?null:w.createElement(t,U({ref:this._updateComposedComponentRef,responsiveMode:i},this.props))},s}(zJ),e.contextType=gI,e);return h$(t,n)}function UJ(t){try{return t.document.documentElement.clientWidth}catch{return t.innerWidth}}function e6(t){var e=Cd.small;if(t){try{for(;UJ(t)>HJ[e];)e++}catch{e=dN()}ZP=e}else throw new Error("Content was rendered in a server environment without providing a default responsive mode. Call setResponsiveMode to define what the responsive mode is.");return e}var t6=function(t,e){var n=w.useState(dN()),r=n[0],s=n[1],i=w.useCallback(function(){var a=e6(Sn(t.current));r!==a&&s(a)},[t,r]),o=cT();return Pm(o,"resize",i),w.useEffect(function(){e===void 0&&i()},[e]),e??r},WJ=w.createContext({}),VJ=Sr(),GJ=Sr(),jJ={items:[],shouldFocusOnMount:!0,gapSpace:0,directionalHint:Jn.bottomAutoEdge,beakWidth:16};function n6(t,e){var n=e==null?void 0:e.target,r=t.subMenuProps?t.subMenuProps.items:t.items;if(r){for(var s=[],i=0,o=r;i<o.length;i++){var a=o[i];if(a.preferMenuTargetAsEventTarget){var l=a.onClick,u=rl(a,["onClick"]);s.push(U(U({},u),{onClick:a6(l,n)}))}else s.push(a)}return s}}function KJ(t){return t.some(function(e){return!!(e.canCheck||e.sectionProps&&e.sectionProps.items.some(function(n){return n.canCheck===!0}))})}var r6=250,s6="ContextualMenu",qJ=Un(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(n){return Z8.apply(void 0,sa([n,XP],t))}});function XJ(t,e){var n=t.hidden,r=n===void 0?!1:n,s=t.onMenuDismissed,i=t.onMenuOpened,o=mI(r),a=w.useRef(i),l=w.useRef(s),u=w.useRef(t);a.current=i,l.current=s,u.current=t,w.useEffect(function(){var c,d;r&&o===!1?(c=l.current)===null||c===void 0||c.call(l,u.current):!r&&o!==!1&&((d=a.current)===null||d===void 0||d.call(a,u.current))},[r,o]),w.useEffect(function(){return function(){var c;return(c=l.current)===null||c===void 0?void 0:c.call(l,u.current)}},[])}function YJ(t,e){var n=t.hidden,r=t.items,s=t.theme,i=t.className,o=t.id,a=t.target,l=w.useState(),u=l[0],c=l[1],d=w.useState(),h=d[0],f=d[1],p=w.useState(),m=p[0],y=p[1],g=Yf(s6,o),v=w.useCallback(function(){y(void 0),c(void 0),f(void 0)},[]),E=w.useCallback(function(x,C,S){var N=x.key;u!==N&&(C.focus(),y(S),c(N),f(C))},[u]);w.useEffect(function(){n&&v()},[n,v]);var b=tee(e,v),T=function(){var x=o6(u,r),C=null;if(x&&(C={items:n6(x,{target:a}),target:h,onDismiss:b,isSubMenu:!0,id:g,shouldFocusOnMount:!0,shouldFocusOnContainer:m,directionalHint:As(s)?Jn.leftTopEdge:Jn.rightTopEdge,className:i,gapSpace:0,isBeakVisible:!1},x.subMenuProps&&jc(C,x.subMenuProps),x.preferMenuTargetAsEventTarget)){var S=x.onItemClick;C.onItemClick=a6(S,a)}return C};return[u,E,T,b]}function QJ(t){var e=t.delayUpdateFocusOnHover,n=t.hidden,r=w.useRef(!e),s=w.useRef(!1);w.useEffect(function(){r.current=!e,s.current=n?!1:!e&&s.current},[e,n]);var i=w.useCallback(function(){e&&(r.current=!1)},[e]);return[r,s,i]}function ZJ(t,e,n){var r=t.hidden,s=t.onRestoreFocus,i=w.useRef(),o=w.useCallback(function(a){var l,u;s?s(a):a!=null&&a.documentContainsFocus&&((u=(l=i.current)===null||l===void 0?void 0:l.focus)===null||u===void 0||u.call(l))},[s]);return yf(function(){var a,l;if(r)i.current&&(o({originalElement:i.current,containsFocus:!0,documentContainsFocus:((l=Ps())===null||l===void 0?void 0:l.hasFocus())||!1}),i.current=void 0);else{var u=e==null?void 0:e.document.activeElement;!(!((a=n.current)===null||a===void 0)&&a.contains(u))&&u.tagName!=="BODY"&&(i.current=u)}},[r,e==null?void 0:e.document.activeElement,o,n]),[o]}function JJ(t,e,n,r){var s=t.theme,i=t.isSubMenu,o=t.focusZoneProps,a=o===void 0?{}:o,l=a.checkForNoWrap,u=a.direction,c=u===void 0?Cs.vertical:u,d=w.useRef(),h=function(b,T,x){var C=!1;return T(b)&&(e(b,x),b.preventDefault(),b.stopPropagation(),C=!0),C},f=function(b){var T=As(s)?je.right:je.left;return b.which!==T||!i?!1:!!(c===Cs.vertical||l&&!u$(b.target,"data-no-horizontal-wrap"))},p=function(b){return b.which===je.escape||f(b)||b.which===je.up&&(b.altKey||b.metaKey)},m=function(b){d.current=LD(b);var T=b.which===je.escape&&(p4()||f4());return h(b,p,T)},y=function(b){var T=d.current&&LD(b);return d.current=!1,!!T&&!(f4()||p4())},g=function(b){return h(b,y,!0)},v=function(b){var T=m(b);if(!(T||!n.current)){var x=!!(b.altKey||b.metaKey),C=b.which===je.up,S=b.which===je.down;if(!x&&(C||S)){var N=C?CK(n.current,n.current.lastChild,!0):xK(n.current,n.current.firstChild,!0);N&&(N.focus(),b.preventDefault(),b.stopPropagation())}}},E=function(b,T){var x=As(s)?je.left:je.right;!b.disabled&&(T.which===x||T.which===je.enter||T.which===je.down&&(T.altKey||T.metaKey))&&(r(b,T.currentTarget),T.preventDefault())};return[m,g,v,E]}function eee(t){var e=w.useRef(!0),n=w.useRef(),r=function(){!e.current&&n.current!==void 0?(t.clearTimeout(n.current),n.current=void 0):e.current=!1,n.current=t.setTimeout(function(){e.current=!0},r6)};return[r,e]}function tee(t,e){var n=w.useRef(!1);w.useEffect(function(){return n.current=!0,function(){n.current=!1}},[]);var r=function(s,i){i?t(s,i):n.current&&e()};return r}function nee(t,e){var n=t.subMenuHoverDelay,r=n===void 0?r6:n,s=w.useRef(void 0),i=function(){s.current!==void 0&&(e.clearTimeout(s.current),s.current=void 0)},o=function(a){s.current=e.setTimeout(function(){a(),i()},r)};return[i,o,s]}function ree(t,e,n,r,s,i,o,a,l,u,c,d,h){var f=t.target,p=function(C,S,N){s.current&&(i.current=!0),!y()&&v(C,S,N)},m=function(C,S,N){var I=S.currentTarget;if(s.current)i.current=!0;else return;!e.current||n.current!==void 0||I===(r==null?void 0:r.document.activeElement)||v(C,S,N)},y=function(){return!e.current||!i.current},g=function(C,S){var N;if(!y()&&(u(),o===void 0))if(a.current.setActive)try{a.current.setActive()}catch{}else(N=a.current)===null||N===void 0||N.focus()},v=function(C,S,N){var I=N||S.currentTarget;C.key!==o&&(u(),o===void 0&&I.focus(),Bl(C)?(S.stopPropagation(),l(function(){I.focus(),c(C,I,!0)})):l(function(){d(S),I.focus()}))},E=function(C,S){b(C,S,S.currentTarget)},b=function(C,S,N){var I=n6(C,{target:f});if(u(),!Bl(C)&&(!I||!I.length))x(C,S);else if(C.key!==o){var F=typeof t.shouldFocusOnContainer=="boolean"?t.shouldFocusOnContainer:S.nativeEvent.pointerType==="mouse";c(C,N,F)}S.stopPropagation(),S.preventDefault()},T=function(C,S){x(C,S),S.stopPropagation()},x=function(C,S){if(!(C.disabled||C.isDisabled)){C.preferMenuTargetAsEventTarget&&l6(S,f);var N=!1;C.onClick?N=!!C.onClick(S,C):t.onItemClick&&(N=!!t.onItemClick(S,C)),(N||!S.defaultPrevented)&&h(S,!0)}};return[p,m,g,E,T,x,b]}var i6=w.memo(w.forwardRef(function(t,e){var n,r=Og(jJ,t);r.ref;var s=rl(r,["ref"]),i=w.useRef(null),o=Xf(),a=Yf(s6,s.id),l=function(oe,Y){var ue;return(ue=s.onDismiss)===null||ue===void 0?void 0:ue.call(s,oe,Y)},u=$$(s.target,i),c=u[0],d=u[1],h=ZJ(s,d,i)[0],f=YJ(s,l),p=f[0],m=f[1],y=f[2],g=f[3],v=QJ(s),E=v[0],b=v[1],T=v[2],x=eee(o),C=x[0],S=x[1],N=nee(s,o),I=N[0],F=N[1],L=N[2],z=t6(i,s.responsiveMode);XJ(s);var H=JJ(s,l,i,m),$=H[0],M=H[1],j=H[2],P=H[3],B=ree(s,S,L,d,E,b,p,i,F,I,m,g,l),K=B[0],A=B[1],O=B[2],se=B[3],ae=B[4],de=B[5],le=B[6],ve=function(oe,Y,ue){var Te=0,ht=oe.items,zt=oe.totalItemCount,st=oe.hasCheckmarks,Zt=oe.hasIcons;return w.createElement("ul",{className:Y.list,onKeyDown:$,onKeyUp:M,role:"presentation"},ht.map(function(Ht,pr){var bn=_e(Ht,pr,Te,zt,st,Zt,Y);if(Ht.itemType!==ti.Divider&&Ht.itemType!==ti.Header){var ba=Ht.customOnRenderListLength?Ht.customOnRenderListLength:1;Te+=ba}return bn}))},Ne=function(oe,Y){var ue=s.focusZoneAs,Te=ue===void 0?dJ:ue;return w.createElement(Te,U({},Y),oe)},_e=function(oe,Y,ue,Te,ht,zt,st){var Zt,Ht=[],pr=oe.iconProps||{iconName:"None"},bn=oe.getItemClassNames,ba=oe.itemProps,Ic=ba?ba.styles:void 0,Ky=oe.itemType===ti.Divider?oe.className:void 0,b1=oe.submenuIconProps?oe.submenuIconProps.className:"",cl;if(bn)cl=bn(s.theme,$a(oe),p===oe.key,!!ng(oe),!!oe.href,pr.iconName!=="None",oe.className,Ky,pr.className,b1,oe.primaryDisabled);else{var oj={theme:s.theme,disabled:$a(oe),expanded:p===oe.key,checked:!!ng(oe),isAnchorLink:!!oe.href,knownIcon:pr.iconName!=="None",itemClassName:oe.className,dividerClassName:Ky,iconClassName:pr.className,subMenuClassName:b1,primaryDisabled:oe.primaryDisabled};cl=GJ(qJ((Zt=st.subComponentStyles)===null||Zt===void 0?void 0:Zt.menuItem,Ic),oj)}switch((oe.text==="-"||oe.name==="-")&&(oe.itemType=ti.Divider),oe.itemType){case ti.Divider:Ht.push(ot(Y,cl));break;case ti.Header:Ht.push(ot(Y,cl));var aj=at(oe,cl,st,Y,ht,zt);Ht.push(et(aj,oe.key||Y,cl,oe.title));break;case ti.Section:Ht.push(Fe(oe,cl,st,Y,ht,zt));break;default:var U5=function(){return dt(oe,cl,Y,ue,Te,ht,zt)},lj=s.onRenderContextualMenuItem?s.onRenderContextualMenuItem(oe,U5):U5();Ht.push(et(lj,oe.key||Y,cl,oe.title));break}return w.createElement(w.Fragment,{key:oe.key},Ht)},Se=function(oe,Y){var ue=oe.index,Te=oe.focusableElementIndex,ht=oe.totalItemCount,zt=oe.hasCheckmarks,st=oe.hasIcons;return _e(oe,ue,Te,ht,zt,st,Y)},Fe=function(oe,Y,ue,Te,ht,zt){var st=oe.sectionProps;if(st){var Zt,Ht;if(st.title){var pr=void 0,bn="";if(typeof st.title=="string"){var ba=a+st.title.replace(/\s/g,"");pr={key:"section-"+st.title+"-title",itemType:ti.Header,text:st.title,id:ba},bn=ba}else{var Ic=st.title.id||a+st.title.key.replace(/\s/g,"");pr=U(U({},st.title),{id:Ic}),bn=Ic}pr&&(Ht={role:"group","aria-labelledby":bn},Zt=at(pr,Y,ue,Te,ht,zt))}if(st.items&&st.items.length>0)return w.createElement("li",{role:"presentation",key:st.key||oe.key||"section-"+Te},w.createElement("div",U({},Ht),w.createElement("ul",{className:ue.list,role:"presentation"},st.topDivider&&ot(Te,Y,!0,!0),Zt&&et(Zt,oe.key||Te,Y,oe.title),st.items.map(function(Ky,b1){return _e(Ky,b1,b1,st.items.length,ht,zt,ue)}),st.bottomDivider&&ot(Te,Y,!1,!0))))}},et=function(oe,Y,ue,Te){return w.createElement("li",{role:"presentation",title:Te,key:Y,className:ue.item},oe)},ot=function(oe,Y,ue,Te){return Te||oe>0?w.createElement("li",{role:"separator",key:"separator-"+oe+(ue===void 0?"":ue?"-top":"-bottom"),className:Y.divider,"aria-hidden":"true"}):null},dt=function(oe,Y,ue,Te,ht,zt,st){if(oe.onRender)return oe.onRender(U({"aria-posinset":Te+1,"aria-setsize":ht},oe),l);var Zt=s.contextualMenuItemAs,Ht={item:oe,classNames:Y,index:ue,focusableElementIndex:Te,totalItemCount:ht,hasCheckmarks:zt,hasIcons:st,contextualMenuItemAs:Zt,onItemMouseEnter:K,onItemMouseLeave:O,onItemMouseMove:A,onItemMouseDown:see,executeItemClick:de,onItemKeyDown:P,expandedMenuItemKey:p,openSubMenu:m,dismissSubMenu:g,dismissMenu:l};return oe.href?w.createElement(FJ,U({},Ht,{onItemClick:ae})):oe.split&&Bl(oe)?w.createElement(BJ,U({},Ht,{onItemClick:se,onItemClickBase:le,onTap:I})):w.createElement(OJ,U({},Ht,{onItemClick:se,onItemClickBase:le}))},at=function(oe,Y,ue,Te,ht,zt){var st=s.contextualMenuItemAs,Zt=st===void 0?rg:st,Ht=oe.itemProps,pr=oe.id,bn=Ht&&yn(Ht,jl);return w.createElement("div",U({id:pr,className:ue.header},bn,{style:oe.style}),w.createElement(Zt,U({item:oe,classNames:Y,index:Te,onCheckmarkClick:ht?se:void 0,hasIcons:zt},Ht)))},nt=s.isBeakVisible,me=s.items,Oe=s.labelElementId,Ge=s.id,Ye=s.className,lt=s.beakWidth,ft=s.directionalHint,Ve=s.directionalHintForRTL,dn=s.alignTargetEdge,Ln=s.gapSpace,Nn=s.coverTarget,ne=s.ariaLabel,fe=s.doNotLayer,De=s.target,Qe=s.bounds,ge=s.useTargetWidth,Bt=s.useTargetAsMinWidth,Qt=s.directionalHintFixed,vn=s.shouldFocusOnMount,pt=s.shouldFocusOnContainer,Tt=s.title,xt=s.styles,$t=s.theme,He=s.calloutProps,rs=s.onRenderSubMenu,fh=rs===void 0?PD:rs,Do=s.onRenderMenuList,va=Do===void 0?function(oe,Y){return ve(oe,Ki)}:Do,ul=s.focusZoneProps,Nr=s.getMenuClassNames,Ki=Nr?Nr($t,Ye):VJ(xt,{theme:$t,className:Ye}),_c=Wt(me);function Wt(oe){for(var Y=0,ue=oe;Y<ue.length;Y++){var Te=ue[Y];if(Te.iconProps||Te.itemType===ti.Section&&Te.sectionProps&&Wt(Te.sectionProps.items))return!0}return!1}var rt=U(U({direction:Cs.vertical,handleTabKey:x_.all,isCircularNavigation:!0},ul),{className:Fs(Ki.root,(n=s.focusZoneProps)===null||n===void 0?void 0:n.className)}),Zn=KJ(me),qi=p&&s.hidden!==!0?y():null;nt=nt===void 0?z<=Cd.medium:nt;var Ro,Ar=c.current;if((ge||Bt)&&Ar&&Ar.offsetWidth){var p2=Ar.getBoundingClientRect(),y1=p2.width-2;ge?Ro={width:y1}:Bt&&(Ro={minWidth:y1})}if(me&&me.length>0){for(var Xi=0,ph=0,v1=me;ph<v1.length;ph++){var kc=v1[ph];if(kc.itemType!==ti.Divider&&kc.itemType!==ti.Header){var jy=kc.customOnRenderListLength?kc.customOnRenderListLength:1;Xi+=jy}}var m2=Ki.subComponentStyles?Ki.subComponentStyles.callout:void 0;return w.createElement(WJ.Consumer,null,function(oe){return w.createElement(VP,U({styles:m2,onRestoreFocus:h},He,{target:De||oe.target,isBeakVisible:nt,beakWidth:lt,directionalHint:ft,directionalHintForRTL:Ve,gapSpace:Ln,coverTarget:Nn,doNotLayer:fe,className:Fs("ms-ContextualMenu-Callout",He&&He.className),setInitialFocus:vn,onDismiss:s.onDismiss||oe.onDismiss,onScroll:C,bounds:Qe,directionalHintFixed:Qt,alignTargetEdge:dn,hidden:s.hidden||oe.hidden,ref:e}),w.createElement("div",{style:Ro,ref:i,id:Ge,className:Ki.container,tabIndex:pt?0:-1,onKeyDown:j,onKeyUp:M,onFocusCapture:T,"aria-label":ne,"aria-labelledby":Oe,role:"menu"},Tt&&w.createElement("div",{className:Ki.title}," ",Tt," "),me&&me.length?Ne(va({ariaLabel:ne,items:me,totalItemCount:Xi,hasCheckmarks:Zn,hasIcons:_c,defaultMenuItemRenderer:function(Y){return Se(Y,Ki)},labelElementId:Oe},function(Y,ue){return ve(Y,Ki)}),rt):null,qi&&fh(qi,PD)),w.createElement(g$,null))})}else return null}),function(t,e){return!e.shouldUpdateWhenHidden&&t.hidden&&e.hidden?!0:iI(t,e)});i6.displayName="ContextualMenuBase";function LD(t){return t.which===je.alt||t.key==="Meta"}function see(t,e){var n;(n=t.onMouseDown)===null||n===void 0||n.call(t,t,e)}function PD(t,e){throw Error("ContextualMenuBase: onRenderSubMenu callback is null or undefined. Please ensure to set `onRenderSubMenu` property either manually or with `styled` helper.")}function o6(t,e){for(var n=0,r=e;n<r.length;n++){var s=r[n];if(s.itemType===ti.Section&&s.sectionProps){var i=o6(t,s.sectionProps.items);if(i)return i}else if(s.key&&s.key===t)return s}}function a6(t,e){return t&&function(n,r){return l6(n,e),t(n,r)}}function l6(t,e){t&&e&&(t.persist(),e instanceof Event?t.target=e.target:e instanceof Element&&(t.target=e))}var iee={root:"ms-ContextualMenu",container:"ms-ContextualMenu-container",list:"ms-ContextualMenu-list",header:"ms-ContextualMenu-header",title:"ms-ContextualMenu-title",isopen:"is-open"},oee=function(t){var e=t.className,n=t.theme,r=es(iee,n),s=n.fonts,i=n.semanticColors,o=n.effects;return{root:[n.fonts.medium,r.root,r.isopen,{backgroundColor:i.menuBackground,minWidth:"180px"},e],container:[r.container,{selectors:{":focus":{outline:0}}}],list:[r.list,r.isopen,{listStyleType:"none",margin:"0",padding:"0"}],header:[r.header,s.small,{fontWeight:sn.semibold,color:i.menuHeader,background:"none",backgroundColor:"transparent",border:"none",height:Tu,lineHeight:Tu,cursor:"default",padding:"0px 6px",userSelect:"none",textAlign:"left"}],title:[r.title,{fontSize:s.mediumPlus.fontSize,paddingRight:"14px",paddingLeft:"14px",paddingBottom:"5px",paddingTop:"5px",backgroundColor:i.menuItemBackgroundPressed}],subComponentStyles:{callout:{root:{boxShadow:o.elevation8}},menuItem:{}}}};function MD(t){return w.createElement(u6,U({},t))}var u6=wr(i6,oee,function(t){return{onRenderSubMenu:t.onRenderSubMenu?Cw(t.onRenderSubMenu,MD):MD}},{scope:"ContextualMenu"}),pE=u6;pE.displayName="ContextualMenu";var xs={msButton:"ms-Button",msButtonHasMenu:"ms-Button--hasMenu",msButtonIcon:"ms-Button-icon",msButtonMenuIcon:"ms-Button-menuIcon",msButtonLabel:"ms-Button-label",msButtonDescription:"ms-Button-description",msButtonScreenReaderText:"ms-Button-screenReaderText",msButtonFlexContainer:"ms-Button-flexContainer",msButtonTextContainer:"ms-Button-textContainer"},aee=Un(function(t,e,n,r,s,i,o,a,l,u,c){var d,h,f=es(xs,t||{}),p=u&&!c;return Rg({root:[f.msButton,e.root,r,l&&["is-checked",e.rootChecked],p&&["is-expanded",e.rootExpanded,{selectors:(d={},d[":hover ."+f.msButtonIcon]=e.iconExpandedHovered,d[":hover ."+f.msButtonMenuIcon]=e.menuIconExpandedHovered||e.rootExpandedHovered,d[":hover"]=e.rootExpandedHovered,d)}],a&&[xs.msButtonHasMenu,e.rootHasMenu],o&&["is-disabled",e.rootDisabled],!o&&!p&&!l&&{selectors:(h={":hover":e.rootHovered},h[":hover ."+f.msButtonLabel]=e.labelHovered,h[":hover ."+f.msButtonIcon]=e.iconHovered,h[":hover ."+f.msButtonDescription]=e.descriptionHovered,h[":hover ."+f.msButtonMenuIcon]=e.menuIconHovered,h[":focus"]=e.rootFocused,h[":active"]=e.rootPressed,h[":active ."+f.msButtonIcon]=e.iconPressed,h[":active ."+f.msButtonDescription]=e.descriptionPressed,h[":active ."+f.msButtonMenuIcon]=e.menuIconPressed,h)},o&&l&&[e.rootCheckedDisabled],!o&&l&&{selectors:{":hover":e.rootCheckedHovered,":active":e.rootCheckedPressed}},n],flexContainer:[f.msButtonFlexContainer,e.flexContainer],textContainer:[f.msButtonTextContainer,e.textContainer],icon:[f.msButtonIcon,s,e.icon,p&&e.iconExpanded,l&&e.iconChecked,o&&e.iconDisabled],label:[f.msButtonLabel,e.label,l&&e.labelChecked,o&&e.labelDisabled],menuIcon:[f.msButtonMenuIcon,i,e.menuIcon,l&&e.menuIconChecked,o&&!c&&e.menuIconDisabled,!o&&!p&&!l&&{selectors:{":hover":e.menuIconHovered,":active":e.menuIconPressed}},p&&["is-expanded",e.menuIconExpanded]],description:[f.msButtonDescription,e.description,l&&e.descriptionChecked,o&&e.descriptionDisabled],screenReaderText:[f.msButtonScreenReaderText,e.screenReaderText]})}),lee=Un(function(t,e,n,r,s){return{root:Da(t.splitButtonMenuButton,n&&[t.splitButtonMenuButtonExpanded],e&&[t.splitButtonMenuButtonDisabled],r&&!e&&[t.splitButtonMenuButtonChecked],s&&!e&&[{selectors:{":focus":t.splitButtonMenuFocused}}]),splitButtonContainer:Da(t.splitButtonContainer,!e&&r&&[t.splitButtonContainerChecked,{selectors:{":hover":t.splitButtonContainerCheckedHovered}}],!e&&!r&&[{selectors:{":hover":t.splitButtonContainerHovered,":focus":t.splitButtonContainerFocused}}],e&&t.splitButtonContainerDisabled),icon:Da(t.splitButtonMenuIcon,e&&t.splitButtonMenuIconDisabled,!e&&s&&t.splitButtonMenuIcon),flexContainer:Da(t.splitButtonFlexContainer),divider:Da(t.splitButtonDivider,(s||e)&&t.splitButtonDividerDisabled)}}),uee=500,cee="BaseButton",hN=function(t){un(e,t);function e(n){var r=t.call(this,n)||this;return r._buttonElement=w.createRef(),r._splitButtonContainer=w.createRef(),r._mergedRef=S$(),r._renderedVisibleMenu=!1,r._getMemoizedMenuButtonKeytipProps=Un(function(s){return U(U({},s),{hasMenu:!0})}),r._onRenderIcon=function(s,i){var o=r.props.iconProps;if(o&&(o.iconName!==void 0||o.imageProps)){var a=o.className,l=o.imageProps,u=rl(o,["className","imageProps"]);if(o.styles)return w.createElement(Ya,U({className:Fs(r._classNames.icon,a),imageProps:l},u));if(o.iconName)return w.createElement(fE,U({className:Fs(r._classNames.icon,a)},u));if(l)return w.createElement(iJ,U({className:Fs(r._classNames.icon,a),imageProps:l},u))}return null},r._onRenderTextContents=function(){var s=r.props,i=s.text,o=s.children,a=s.secondaryText,l=a===void 0?r.props.description:a,u=s.onRenderText,c=u===void 0?r._onRenderText:u,d=s.onRenderDescription,h=d===void 0?r._onRenderDescription:d;return i||typeof o=="string"||l?w.createElement("span",{className:r._classNames.textContainer},c(r.props,r._onRenderText),h(r.props,r._onRenderDescription)):[c(r.props,r._onRenderText),h(r.props,r._onRenderDescription)]},r._onRenderText=function(){var s=r.props.text,i=r.props.children;return s===void 0&&typeof i=="string"&&(s=i),r._hasText()?w.createElement("span",{key:r._labelId,className:r._classNames.label,id:r._labelId},s):null},r._onRenderChildren=function(){var s=r.props.children;return typeof s=="string"?null:s},r._onRenderDescription=function(s){var i=s.secondaryText,o=i===void 0?r.props.description:i;return o?w.createElement("span",{key:r._descriptionId,className:r._classNames.description,id:r._descriptionId},o):null},r._onRenderAriaDescription=function(){var s=r.props.ariaDescription;return s?w.createElement("span",{className:r._classNames.screenReaderText,id:r._ariaDescriptionId},s):null},r._onRenderMenuIcon=function(s){var i=r.props.menuIconProps;return w.createElement(fE,U({iconName:"ChevronDown"},i,{className:r._classNames.menuIcon}))},r._onRenderMenu=function(s){var i=r.props.menuAs?MK(r.props.menuAs,pE):pE;return w.createElement(i,U({},s))},r._onDismissMenu=function(s){var i=r.props.menuProps;i&&i.onDismiss&&i.onDismiss(s),(!s||!s.defaultPrevented)&&r._dismissMenu()},r._dismissMenu=function(){r._menuShouldFocusOnMount=void 0,r._menuShouldFocusOnContainer=void 0,r.setState({menuHidden:!0})},r._openMenu=function(s,i){i===void 0&&(i=!0),r.props.menuProps&&(r._menuShouldFocusOnContainer=s,r._menuShouldFocusOnMount=i,r._renderedVisibleMenu=!0,r.setState({menuHidden:!1}))},r._onToggleMenu=function(s){var i=!0;r.props.menuProps&&r.props.menuProps.shouldFocusOnMount===!1&&(i=!1),r.state.menuHidden?r._openMenu(s,i):r._dismissMenu()},r._onSplitContainerFocusCapture=function(s){var i=r._splitButtonContainer.current;!i||s.target&&a$(s.target,i)||i.focus()},r._onSplitButtonPrimaryClick=function(s){r.state.menuHidden||r._dismissMenu(),!r._processingTouch&&r.props.onClick?r.props.onClick(s):r._processingTouch&&r._onMenuClick(s)},r._onKeyDown=function(s){r.props.disabled&&(s.which===je.enter||s.which===je.space)?(s.preventDefault(),s.stopPropagation()):r.props.disabled||(r.props.menuProps?r._onMenuKeyDown(s):r.props.onKeyDown!==void 0&&r.props.onKeyDown(s))},r._onKeyUp=function(s){!r.props.disabled&&r.props.onKeyUp!==void 0&&r.props.onKeyUp(s)},r._onKeyPress=function(s){!r.props.disabled&&r.props.onKeyPress!==void 0&&r.props.onKeyPress(s)},r._onMouseUp=function(s){!r.props.disabled&&r.props.onMouseUp!==void 0&&r.props.onMouseUp(s)},r._onMouseDown=function(s){!r.props.disabled&&r.props.onMouseDown!==void 0&&r.props.onMouseDown(s)},r._onClick=function(s){r.props.disabled||(r.props.menuProps?r._onMenuClick(s):r.props.onClick!==void 0&&r.props.onClick(s))},r._onSplitButtonContainerKeyDown=function(s){s.which===je.enter||s.which===je.space?r._buttonElement.current&&(r._buttonElement.current.click(),s.preventDefault(),s.stopPropagation()):r._onMenuKeyDown(s)},r._onMenuKeyDown=function(s){var i;if(!r.props.disabled){r.props.onKeyDown&&r.props.onKeyDown(s);var o=s.which===je.up,a=s.which===je.down;if(!s.defaultPrevented&&r._isValidMenuOpenKey(s)){var l=r.props.onMenuClick;l&&l(s,r.props),r._onToggleMenu(!1),s.preventDefault(),s.stopPropagation()}if((s.which===je.enter||s.which===je.space)&&ld(!0,s.target,(i=r.context)===null||i===void 0?void 0:i.registeredProviders),!(s.altKey||s.metaKey)&&(o||a)&&!r.state.menuHidden&&r.props.menuProps){var u=r._menuShouldFocusOnMount!==void 0?r._menuShouldFocusOnMount:r.props.menuProps.shouldFocusOnMount;u||(s.preventDefault(),s.stopPropagation(),r._menuShouldFocusOnMount=!0,r.forceUpdate())}}},r._onTouchStart=function(){r._isSplitButton&&r._splitButtonContainer.current&&!("onpointerdown"in r._splitButtonContainer.current)&&r._handleTouchAndPointerEvent()},r._onMenuClick=function(s){var i=r.props,o=i.onMenuClick,a=i.menuProps;o&&o(s,r.props);var l=typeof(a==null?void 0:a.shouldFocusOnContainer)=="boolean"?a.shouldFocusOnContainer:s.nativeEvent.pointerType==="mouse";s.defaultPrevented||(r._onToggleMenu(l),s.preventDefault(),s.stopPropagation())},Kl(r),r._async=new Kf(r),r._events=new ro(r),n$(cee,n,["menuProps","onClick"],"split",r.props.split),r._labelId=Ds(),r._descriptionId=Ds(),r._ariaDescriptionId=Ds(),r.state={menuHidden:!0},r}return Object.defineProperty(e.prototype,"_isSplitButton",{get:function(){return!!this.props.menuProps&&!!this.props.onClick&&this.props.split===!0},enumerable:!1,configurable:!0}),e.prototype.render=function(){var n,r=this.props,s=r.ariaDescription,i=r.ariaLabel,o=r.ariaHidden,a=r.className,l=r.disabled,u=r.allowDisabledFocus,c=r.primaryDisabled,d=r.secondaryText,h=d===void 0?this.props.description:d,f=r.href,p=r.iconProps,m=r.menuIconProps,y=r.styles,g=r.checked,v=r.variantClassName,E=r.theme,b=r.toggle,T=r.getClassNames,x=r.role,C=this.state.menuHidden,S=l||c;this._classNames=T?T(E,a,v,p&&p.className,m&&m.className,S,g,!C,!!this.props.menuProps,this.props.split,!!u):aee(E,y,a,v,p&&p.className,m&&m.className,S,!!this.props.menuProps,g,!C,this.props.split);var N=this,I=N._ariaDescriptionId,F=N._labelId,L=N._descriptionId,z=!S&&!!f,H=z?"a":"button",$=yn(jc(z?{}:{type:"button"},this.props.rootProps,this.props),z?f$:yd,["disabled"]),M=i||$["aria-label"],j=void 0;s?j=I:h&&this.props.onRenderDescription!==mf?j=L:$["aria-describedby"]&&(j=$["aria-describedby"]);var P=void 0;$["aria-labelledby"]?P=$["aria-labelledby"]:j&&!M&&(P=this._hasText()?F:void 0);var B=!(this.props["data-is-focusable"]===!1||l&&!u||this._isSplitButton),K=x==="menuitemcheckbox"||x==="checkbox",A=K||b===!0?!!g:void 0,O=jc($,(n={className:this._classNames.root,ref:this._mergedRef(this.props.elementRef,this._buttonElement),disabled:S&&!u,onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onKeyUp:this._onKeyUp,onMouseDown:this._onMouseDown,onMouseUp:this._onMouseUp,onClick:this._onClick,"aria-label":M,"aria-labelledby":P,"aria-describedby":j,"aria-disabled":S,"data-is-focusable":B},n[K?"aria-checked":"aria-pressed"]=A,n));if(o&&(O["aria-hidden"]=!0),this._isSplitButton)return this._onRenderSplitButtonContent(H,O);if(this.props.menuProps){var se=this.props.menuProps.id,ae=se===void 0?this._labelId+"-menu":se;jc(O,{"aria-expanded":!C,"aria-controls":C?null:ae,"aria-haspopup":!0})}return this._onRenderContent(H,O)},e.prototype.componentDidMount=function(){this._isSplitButton&&this._splitButtonContainer.current&&("onpointerdown"in this._splitButtonContainer.current&&this._events.on(this._splitButtonContainer.current,"pointerdown",this._onPointerDown,!0),"onpointerup"in this._splitButtonContainer.current&&this.props.onPointerUp&&this._events.on(this._splitButtonContainer.current,"pointerup",this.props.onPointerUp,!0))},e.prototype.componentDidUpdate=function(n,r){this.props.onAfterMenuDismiss&&!r.menuHidden&&this.state.menuHidden&&this.props.onAfterMenuDismiss()},e.prototype.componentWillUnmount=function(){this._async.dispose(),this._events.dispose()},e.prototype.focus=function(){var n,r;this._isSplitButton&&this._splitButtonContainer.current?(ld(!0,void 0,(n=this.context)===null||n===void 0?void 0:n.registeredProviders),this._splitButtonContainer.current.focus()):this._buttonElement.current&&(ld(!0,void 0,(r=this.context)===null||r===void 0?void 0:r.registeredProviders),this._buttonElement.current.focus())},e.prototype.dismissMenu=function(){this._dismissMenu()},e.prototype.openMenu=function(n,r){this._openMenu(n,r)},e.prototype._onRenderContent=function(n,r){var s=this,i=this.props,o=n,a=i.menuIconProps,l=i.menuProps,u=i.onRenderIcon,c=u===void 0?this._onRenderIcon:u,d=i.onRenderAriaDescription,h=d===void 0?this._onRenderAriaDescription:d,f=i.onRenderChildren,p=f===void 0?this._onRenderChildren:f,m=i.onRenderMenu,y=m===void 0?this._onRenderMenu:m,g=i.onRenderMenuIcon,v=g===void 0?this._onRenderMenuIcon:g,E=i.disabled,b=i.keytipProps;b&&l&&(b=this._getMemoizedMenuButtonKeytipProps(b));var T=function(C){return w.createElement(o,U({},r,C),w.createElement("span",{className:s._classNames.flexContainer,"data-automationid":"splitbuttonprimary"},c(i,s._onRenderIcon),s._onRenderTextContents(),h(i,s._onRenderAriaDescription),p(i,s._onRenderChildren),!s._isSplitButton&&(l||a||s.props.onRenderMenuIcon)&&v(s.props,s._onRenderMenuIcon),l&&!l.doNotLayer&&s._shouldRenderMenu()&&y(s._getMenuProps(l),s._onRenderMenu)))},x=b?w.createElement(sg,{keytipProps:this._isSplitButton?void 0:b,ariaDescribedBy:r["aria-describedby"],disabled:E},function(C){return T(C)}):T();return l&&l.doNotLayer?w.createElement(w.Fragment,null,x,this._shouldRenderMenu()&&y(this._getMenuProps(l),this._onRenderMenu)):w.createElement(w.Fragment,null,x,w.createElement(g$,null))},e.prototype._shouldRenderMenu=function(){var n=this.state.menuHidden,r=this.props,s=r.persistMenu,i=r.renderPersistedMenuHiddenOnMount;if(n){if(s&&(this._renderedVisibleMenu||i))return!0}else return!0;return!1},e.prototype._hasText=function(){return this.props.text!==null&&(this.props.text!==void 0||typeof this.props.children=="string")},e.prototype._getMenuProps=function(n){var r=this.props.persistMenu,s=this.state.menuHidden;return!n.ariaLabel&&!n.labelElementId&&this._hasText()&&(n=U(U({},n),{labelElementId:this._labelId})),U(U({id:this._labelId+"-menu",directionalHint:Jn.bottomLeftEdge},n),{shouldFocusOnContainer:this._menuShouldFocusOnContainer,shouldFocusOnMount:this._menuShouldFocusOnMount,hidden:r?s:void 0,className:Fs("ms-BaseButton-menuhost",n.className),target:this._isSplitButton?this._splitButtonContainer.current:this._buttonElement.current,onDismiss:this._onDismissMenu})},e.prototype._onRenderSplitButtonContent=function(n,r){var s=this,i=this.props,o=i.styles,a=o===void 0?{}:o,l=i.disabled,u=i.allowDisabledFocus,c=i.checked,d=i.getSplitButtonClassNames,h=i.primaryDisabled,f=i.menuProps,p=i.toggle,m=i.role,y=i.primaryActionButtonProps,g=this.props.keytipProps,v=this.state.menuHidden,E=d?d(!!l,!v,!!c,!!u):a&&lee(a,!!l,!v,!!c,!!h);jc(r,{onClick:void 0,onPointerDown:void 0,onPointerUp:void 0,tabIndex:-1,"data-is-focusable":!1}),g&&f&&(g=this._getMemoizedMenuButtonKeytipProps(g));var b=yn(r,[],["disabled"]);y&&jc(r,y);var T=function(x){return w.createElement("div",U({},b,{"data-ktp-target":x?x["data-ktp-target"]:void 0,role:m||"button","aria-disabled":l,"aria-haspopup":!0,"aria-expanded":!v,"aria-pressed":p?!!c:void 0,"aria-describedby":Fg(r["aria-describedby"],x?x["aria-describedby"]:void 0),className:E&&E.splitButtonContainer,onKeyDown:s._onSplitButtonContainerKeyDown,onTouchStart:s._onTouchStart,ref:s._splitButtonContainer,"data-is-focusable":!0,onClick:!l&&!h?s._onSplitButtonPrimaryClick:void 0,tabIndex:!l&&!h||u?0:void 0,"aria-roledescription":r["aria-roledescription"],onFocusCapture:s._onSplitContainerFocusCapture}),w.createElement("span",{style:{display:"flex",width:"100%"}},s._onRenderContent(n,r),s._onRenderSplitButtonMenuButton(E,x),s._onRenderSplitButtonDivider(E)))};return g?w.createElement(sg,{keytipProps:g,disabled:l},function(x){return T(x)}):T()},e.prototype._onRenderSplitButtonDivider=function(n){if(n&&n.divider){var r=function(s){s.stopPropagation()};return w.createElement("span",{className:n.divider,"aria-hidden":!0,onClick:r})}return null},e.prototype._onRenderSplitButtonMenuButton=function(n,r){var s=this.props,i=s.allowDisabledFocus,o=s.checked,a=s.disabled,l=s.splitButtonMenuProps,u=s.splitButtonAriaLabel,c=s.primaryDisabled,d=this.state.menuHidden,h=this.props.menuIconProps;h===void 0&&(h={iconName:"ChevronDown"});var f=U(U({},l),{styles:n,checked:o,disabled:a,allowDisabledFocus:i,onClick:this._onMenuClick,menuProps:void 0,iconProps:U(U({},h),{className:this._classNames.menuIcon}),ariaLabel:u,"aria-haspopup":!0,"aria-expanded":!d,"data-is-focusable":!1});return w.createElement(e,U({},f,{"data-ktp-execute-target":r&&r["data-ktp-execute-target"],onMouseDown:this._onMouseDown,tabIndex:c&&!i?0:-1}))},e.prototype._onPointerDown=function(n){var r=this.props.onPointerDown;r&&r(n),n.pointerType==="touch"&&(this._handleTouchAndPointerEvent(),n.preventDefault(),n.stopImmediatePropagation())},e.prototype._handleTouchAndPointerEvent=function(){var n=this;this._lastTouchTimeoutId!==void 0&&(this._async.clearTimeout(this._lastTouchTimeoutId),this._lastTouchTimeoutId=void 0),this._processingTouch=!0,this._lastTouchTimeoutId=this._async.setTimeout(function(){n._processingTouch=!1,n._lastTouchTimeoutId=void 0,n.state.menuHidden&&n.focus()},uee)},e.prototype._isValidMenuOpenKey=function(n){return this.props.menuTriggerKeyCode?n.which===this.props.menuTriggerKeyCode:this.props.menuProps?n.which===je.down&&(n.altKey||n.metaKey):!1},e.defaultProps={baseClassName:"ms-Button",styles:{},split:!1},e.contextType=Lb,e}(w.Component),BD={outline:0},zD=function(t){return{fontSize:t,margin:"0 4px",height:"16px",lineHeight:"16px",textAlign:"center",flexShrink:0}},fN=Un(function(t){var e,n,r=t.semanticColors,s=t.effects,i=t.fonts,o=r.buttonBorder,a=r.disabledBackground,l=r.disabledText,u={left:-2,top:-2,bottom:-2,right:-2,outlineColor:"ButtonText"};return{root:[Ol(t,{inset:1,highContrastStyle:u,borderColor:"transparent"}),t.fonts.medium,{border:"1px solid "+o,borderRadius:s.roundedCorner2,boxSizing:"border-box",cursor:"pointer",display:"inline-block",padding:"0 16px",textDecoration:"none",textAlign:"center",userSelect:"none",selectors:{":active > span":{position:"relative",left:0,top:0}}}],rootDisabled:[Ol(t,{inset:1,highContrastStyle:u,borderColor:"transparent"}),{backgroundColor:a,borderColor:a,color:l,cursor:"default",selectors:{":hover":BD,":focus":BD}}],iconDisabled:{color:l,selectors:(e={},e[we]={color:"GrayText"},e)},menuIconDisabled:{color:l,selectors:(n={},n[we]={color:"GrayText"},n)},flexContainer:{display:"flex",height:"100%",flexWrap:"nowrap",justifyContent:"center",alignItems:"center"},description:{display:"block"},textContainer:{flexGrow:1,display:"block"},icon:zD(i.mediumPlus.fontSize),menuIcon:zD(i.small.fontSize),label:{margin:"0 4px",lineHeight:"100%",display:"block"},screenReaderText:hI}}),pN=Un(function(t,e){var n,r,s,i,o,a,l,u,c,d,h,f,p,m=t.effects,y=t.palette,g=t.semanticColors,v={left:-2,top:-2,bottom:-2,right:-2,border:"none"},E={position:"absolute",width:1,right:31,top:8,bottom:8},b={splitButtonContainer:[Ol(t,{highContrastStyle:v,inset:2,pointerEvents:"none"}),{display:"inline-flex",selectors:{".ms-Button--default":{borderTopRightRadius:"0",borderBottomRightRadius:"0",borderRight:"none",flexGrow:"1"},".ms-Button--primary":{borderTopRightRadius:"0",borderBottomRightRadius:"0",border:"none",flexGrow:"1",selectors:(n={},n[we]=U({color:"WindowText",backgroundColor:"Window",border:"1px solid WindowText",borderRightWidth:"0"},ar()),n[":hover"]={border:"none"},n[":active"]={border:"none"},n)},".ms-Button--primary + .ms-Button":{border:"none",selectors:(r={},r[we]={border:"1px solid WindowText",borderLeftWidth:"0"},r)}}}],splitButtonContainerHovered:{selectors:{".ms-Button--primary":{selectors:(s={},s[we]={color:"Window",backgroundColor:"Highlight"},s)},".ms-Button.is-disabled":{color:g.buttonTextDisabled,selectors:(i={},i[we]={color:"GrayText",borderColor:"GrayText",backgroundColor:"Window"},i)}}},splitButtonContainerChecked:{selectors:{".ms-Button--primary":{selectors:(o={},o[we]=U({color:"Window",backgroundColor:"WindowText"},ar()),o)}}},splitButtonContainerCheckedHovered:{selectors:{".ms-Button--primary":{selectors:(a={},a[we]=U({color:"Window",backgroundColor:"WindowText"},ar()),a)}}},splitButtonContainerFocused:{outline:"none!important"},splitButtonMenuButton:(l={padding:6,height:"auto",boxSizing:"border-box",borderRadius:0,borderTopRightRadius:m.roundedCorner2,borderBottomRightRadius:m.roundedCorner2,border:"1px solid "+y.neutralSecondaryAlt,borderLeft:"none",outline:"transparent",userSelect:"none",display:"inline-block",textDecoration:"none",textAlign:"center",cursor:"pointer",verticalAlign:"top",width:32,marginLeft:-1,marginTop:0,marginRight:0,marginBottom:0},l[we]={".ms-Button-menuIcon":{color:"WindowText"}},l),splitButtonDivider:U(U({},E),{selectors:(u={},u[we]={backgroundColor:"WindowText"},u)}),splitButtonDividerDisabled:U(U({},E),{selectors:(c={},c[we]={backgroundColor:"GrayText"},c)}),splitButtonMenuButtonDisabled:{pointerEvents:"none",border:"none",selectors:(d={":hover":{cursor:"default"},".ms-Button--primary":{selectors:(h={},h[we]={color:"GrayText",borderColor:"GrayText",backgroundColor:"Window"},h)},".ms-Button-menuIcon":{selectors:(f={},f[we]={color:"GrayText"},f)}},d[we]={color:"GrayText",border:"1px solid GrayText",backgroundColor:"Window"},d)},splitButtonFlexContainer:{display:"flex",height:"100%",flexWrap:"nowrap",justifyContent:"center",alignItems:"center"},splitButtonContainerDisabled:{outline:"none",border:"none",selectors:(p={},p[we]=U({color:"GrayText",borderColor:"GrayText",backgroundColor:"Window"},ar()),p)},splitButtonMenuFocused:U({},Ol(t,{highContrastStyle:v,inset:2}))};return sl(b,e)}),c6=function(){return{position:"absolute",width:1,right:31,top:8,bottom:8}};function dee(t){var e,n,r,s,i,o=t.semanticColors,a=t.palette,l=o.buttonBackground,u=o.buttonBackgroundPressed,c=o.buttonBackgroundHovered,d=o.buttonBackgroundDisabled,h=o.buttonText,f=o.buttonTextHovered,p=o.buttonTextDisabled,m=o.buttonTextChecked,y=o.buttonTextCheckedHovered;return{root:{backgroundColor:l,color:h},rootHovered:{backgroundColor:c,color:f,selectors:(e={},e[we]={borderColor:"Highlight",color:"Highlight"},e)},rootPressed:{backgroundColor:u,color:m},rootExpanded:{backgroundColor:u,color:m},rootChecked:{backgroundColor:u,color:m},rootCheckedHovered:{backgroundColor:u,color:y},rootDisabled:{color:p,backgroundColor:d,selectors:(n={},n[we]={color:"GrayText",borderColor:"GrayText",backgroundColor:"Window"},n)},splitButtonContainer:{selectors:(r={},r[we]={border:"none"},r)},splitButtonMenuButton:{color:a.white,backgroundColor:"transparent",selectors:{":hover":{backgroundColor:a.neutralLight,selectors:(s={},s[we]={color:"Highlight"},s)}}},splitButtonMenuButtonDisabled:{backgroundColor:o.buttonBackgroundDisabled,selectors:{":hover":{backgroundColor:o.buttonBackgroundDisabled}}},splitButtonDivider:U(U({},c6()),{backgroundColor:a.neutralTertiaryAlt,selectors:(i={},i[we]={backgroundColor:"WindowText"},i)}),splitButtonDividerDisabled:{backgroundColor:t.palette.neutralTertiaryAlt},splitButtonMenuButtonChecked:{backgroundColor:a.neutralQuaternaryAlt,selectors:{":hover":{backgroundColor:a.neutralQuaternaryAlt}}},splitButtonMenuButtonExpanded:{backgroundColor:a.neutralQuaternaryAlt,selectors:{":hover":{backgroundColor:a.neutralQuaternaryAlt}}},splitButtonMenuIcon:{color:o.buttonText},splitButtonMenuIconDisabled:{color:o.buttonTextDisabled}}}function hee(t){var e,n,r,s,i,o,a,l,u,c=t.palette,d=t.semanticColors;return{root:{backgroundColor:d.primaryButtonBackground,border:"1px solid "+d.primaryButtonBackground,color:d.primaryButtonText,selectors:(e={},e[we]=U({color:"Window",backgroundColor:"WindowText",borderColor:"WindowText"},ar()),e["."+as+" &:focus"]={selectors:{":after":{border:"none",outlineColor:c.white}}},e)},rootHovered:{backgroundColor:d.primaryButtonBackgroundHovered,border:"1px solid "+d.primaryButtonBackgroundHovered,color:d.primaryButtonTextHovered,selectors:(n={},n[we]={color:"Window",backgroundColor:"Highlight",borderColor:"Highlight"},n)},rootPressed:{backgroundColor:d.primaryButtonBackgroundPressed,border:"1px solid "+d.primaryButtonBackgroundPressed,color:d.primaryButtonTextPressed,selectors:(r={},r[we]=U({color:"Window",backgroundColor:"WindowText",borderColor:"WindowText"},ar()),r)},rootExpanded:{backgroundColor:d.primaryButtonBackgroundPressed,color:d.primaryButtonTextPressed},rootChecked:{backgroundColor:d.primaryButtonBackgroundPressed,color:d.primaryButtonTextPressed},rootCheckedHovered:{backgroundColor:d.primaryButtonBackgroundPressed,color:d.primaryButtonTextPressed},rootDisabled:{color:d.primaryButtonTextDisabled,backgroundColor:d.primaryButtonBackgroundDisabled,selectors:(s={},s[we]={color:"GrayText",borderColor:"GrayText",backgroundColor:"Window"},s)},splitButtonContainer:{selectors:(i={},i[we]={border:"none"},i)},splitButtonDivider:U(U({},c6()),{backgroundColor:c.white,selectors:(o={},o[we]={backgroundColor:"Window"},o)}),splitButtonMenuButton:{backgroundColor:d.primaryButtonBackground,color:d.primaryButtonText,selectors:(a={},a[we]={backgroundColor:"Canvas"},a[":hover"]={backgroundColor:d.primaryButtonBackgroundHovered,selectors:(l={},l[we]={color:"Highlight"},l)},a)},splitButtonMenuButtonDisabled:{backgroundColor:d.primaryButtonBackgroundDisabled,selectors:{":hover":{backgroundColor:d.primaryButtonBackgroundDisabled}}},splitButtonMenuButtonChecked:{backgroundColor:d.primaryButtonBackgroundPressed,selectors:{":hover":{backgroundColor:d.primaryButtonBackgroundPressed}}},splitButtonMenuButtonExpanded:{backgroundColor:d.primaryButtonBackgroundPressed,selectors:{":hover":{backgroundColor:d.primaryButtonBackgroundPressed}}},splitButtonMenuIcon:{color:d.primaryButtonText},splitButtonMenuIconDisabled:{color:c.neutralTertiary,selectors:(u={},u[we]={color:"GrayText"},u)}}}var fee="32px",pee="80px",mee=Un(function(t,e,n){var r=fN(t),s=pN(t),i={root:{minWidth:pee,height:fee},label:{fontWeight:sn.semibold}};return sl(r,i,n?hee(t):dee(t),s,e)}),Hg=function(t){un(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){var n=this.props,r=n.primary,s=r===void 0?!1:r,i=n.styles,o=n.theme;return w.createElement(hN,U({},this.props,{variantClassName:s?"ms-Button--primary":"ms-Button--default",styles:mee(o,i,s),onRenderDescription:mf}))},e=jf([oT("DefaultButton",["theme","styles"],!0)],e),e}(w.Component),gee=Un(function(t,e){var n,r=fN(t),s=pN(t),i=t.palette,o=t.semanticColors,a={root:{padding:"0 4px",width:"32px",height:"32px",backgroundColor:"transparent",border:"none",color:o.link},rootHovered:{color:i.themeDarkAlt,backgroundColor:i.neutralLighter,selectors:(n={},n[we]={borderColor:"Highlight",color:"Highlight"},n)},rootHasMenu:{width:"auto"},rootPressed:{color:i.themeDark,backgroundColor:i.neutralLight},rootExpanded:{color:i.themeDark,backgroundColor:i.neutralLight},rootChecked:{color:i.themeDark,backgroundColor:i.neutralLight},rootCheckedHovered:{color:i.themeDark,backgroundColor:i.neutralQuaternaryAlt},rootDisabled:{color:i.neutralTertiaryAlt}};return sl(r,a,s,e)}),Nu=function(t){un(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){var n=this.props,r=n.styles,s=n.theme;return w.createElement(hN,U({},this.props,{variantClassName:"ms-Button--icon",styles:gee(s,r),onRenderText:mf,onRenderDescription:mf}))},e=jf([oT("IconButton",["theme","styles"],!0)],e),e}(w.Component),d6=function(t){un(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){return w.createElement(Hg,U({},this.props,{primary:!0,onRenderDescription:mf}))},e=jf([oT("PrimaryButton",["theme","styles"],!0)],e),e}(w.Component),yee=Un(function(t,e,n,r){var s,i,o,a,l,u,c,d,h,f,p,m,y,g,v=fN(t),E=pN(t),b=t.palette,T=t.semanticColors,x={left:4,top:4,bottom:4,right:4,border:"none"},C={root:[Ol(t,{inset:2,highContrastStyle:x,borderColor:"transparent"}),t.fonts.medium,{minWidth:"40px",backgroundColor:b.white,color:b.neutralPrimary,padding:"0 4px",border:"none",borderRadius:0,selectors:(s={},s[we]={border:"none"},s)}],rootHovered:{backgroundColor:b.neutralLighter,color:b.neutralDark,selectors:(i={},i[we]={color:"Highlight"},i["."+xs.msButtonIcon]={color:b.themeDarkAlt},i["."+xs.msButtonMenuIcon]={color:b.neutralPrimary},i)},rootPressed:{backgroundColor:b.neutralLight,color:b.neutralDark,selectors:(o={},o["."+xs.msButtonIcon]={color:b.themeDark},o["."+xs.msButtonMenuIcon]={color:b.neutralPrimary},o)},rootChecked:{backgroundColor:b.neutralLight,color:b.neutralDark,selectors:(a={},a["."+xs.msButtonIcon]={color:b.themeDark},a["."+xs.msButtonMenuIcon]={color:b.neutralPrimary},a)},rootCheckedHovered:{backgroundColor:b.neutralQuaternaryAlt,selectors:(l={},l["."+xs.msButtonIcon]={color:b.themeDark},l["."+xs.msButtonMenuIcon]={color:b.neutralPrimary},l)},rootExpanded:{backgroundColor:b.neutralLight,color:b.neutralDark,selectors:(u={},u["."+xs.msButtonIcon]={color:b.themeDark},u["."+xs.msButtonMenuIcon]={color:b.neutralPrimary},u)},rootExpandedHovered:{backgroundColor:b.neutralQuaternaryAlt},rootDisabled:{backgroundColor:b.white,selectors:(c={},c["."+xs.msButtonIcon]={color:T.disabledBodySubtext,selectors:(d={},d[we]=U({color:"GrayText"},ar()),d)},c[we]=U({color:"GrayText",backgroundColor:"Window"},ar()),c)},splitButtonContainer:{height:"100%",selectors:(h={},h[we]={border:"none"},h)},splitButtonDividerDisabled:{selectors:(f={},f[we]={backgroundColor:"Window"},f)},splitButtonDivider:{backgroundColor:b.neutralTertiaryAlt},splitButtonMenuButton:{backgroundColor:b.white,border:"none",borderTopRightRadius:"0",borderBottomRightRadius:"0",color:b.neutralSecondary,selectors:{":hover":{backgroundColor:b.neutralLighter,color:b.neutralDark,selectors:(p={},p[we]={color:"Highlight"},p["."+xs.msButtonIcon]={color:b.neutralPrimary},p)},":active":{backgroundColor:b.neutralLight,selectors:(m={},m["."+xs.msButtonIcon]={color:b.neutralPrimary},m)}}},splitButtonMenuButtonDisabled:{backgroundColor:b.white,selectors:(y={},y[we]=U({color:"GrayText",border:"none",backgroundColor:"Window"},ar()),y)},splitButtonMenuButtonChecked:{backgroundColor:b.neutralLight,color:b.neutralDark,selectors:{":hover":{backgroundColor:b.neutralQuaternaryAlt}}},splitButtonMenuButtonExpanded:{backgroundColor:b.neutralLight,color:b.black,selectors:{":hover":{backgroundColor:b.neutralQuaternaryAlt}}},splitButtonMenuIcon:{color:b.neutralPrimary},splitButtonMenuIconDisabled:{color:b.neutralTertiary},label:{fontWeight:"normal"},icon:{color:b.themePrimary},menuIcon:(g={color:b.neutralSecondary},g[we]={color:"GrayText"},g)};return sl(v,E,C,e)}),ig=function(t){un(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){var n=this.props,r=n.styles,s=n.theme;return w.createElement(hN,U({},this.props,{variantClassName:"ms-Button--commandBar",styles:yee(s,r),onRenderDescription:mf}))},e=jf([oT("CommandBarButton",["theme","styles"],!0)],e),e}(w.Component),vee=Sr(),h6=w.forwardRef(function(t,e){var n=t.disabled,r=t.required,s=t.inputProps,i=t.name,o=t.ariaLabel,a=t.ariaLabelledBy,l=t.ariaDescribedBy,u=t.ariaPositionInSet,c=t.ariaSetSize,d=t.title,h=t.checkmarkIconProps,f=t.styles,p=t.theme,m=t.className,y=t.boxSide,g=y===void 0?"start":y,v=Yf("checkbox-",t.id),E=w.useRef(null),b=Xa(E,e),T=w.useRef(null),x=Iw(t.checked,t.defaultChecked,t.onChange),C=x[0],S=x[1],N=Iw(t.indeterminate,t.defaultIndeterminate),I=N[0],F=N[1];dI(E);var L=vee(f,{theme:p,className:m,disabled:n,indeterminate:I,checked:C,reversed:g!=="start",isUsingCustomLabelRender:!!t.onRenderLabel}),z=w.useCallback(function(B){I?(S(!!C,B),F(!1)):S(!C,B)},[S,F,I,C]),H=w.useCallback(function(B){return B&&B.label?w.createElement("span",{className:L.text,title:B.title},B.label):null},[L.text]),$=w.useCallback(function(B){if(T.current){var K=!!B;T.current.indeterminate=K,F(K)}},[F]);bee(t,C,I,$,T),w.useEffect(function(){return $(I)},[$,I]);var M=t.onRenderLabel||H,j=I?"mixed":void 0,P=U(U({className:L.input,type:"checkbox"},s),{checked:!!C,disabled:n,required:r,name:i,id:v,title:d,onChange:z,"aria-disabled":n,"aria-label":o,"aria-labelledby":a,"aria-describedby":l,"aria-posinset":u,"aria-setsize":c,"aria-checked":j});return w.createElement("div",{className:L.root,title:d,ref:b},w.createElement("input",U({},P,{ref:T,title:d,"data-ktp-execute-target":!0})),w.createElement("label",{className:L.label,htmlFor:v},w.createElement("div",{className:L.checkbox,"data-ktp-target":!0},w.createElement(Ya,U({iconName:"CheckMark"},h,{className:L.checkmark}))),M(t,H)))});h6.displayName="CheckboxBase";function bee(t,e,n,r,s){w.useImperativeHandle(t.componentRef,function(){return{get checked(){return!!e},get indeterminate(){return!!n},set indeterminate(i){r(i)},focus:function(){s.current&&s.current.focus()}}},[s,e,n,r])}var Eee={root:"ms-Checkbox",label:"ms-Checkbox-label",checkbox:"ms-Checkbox-checkbox",checkmark:"ms-Checkbox-checkmark",text:"ms-Checkbox-text"},HD="20px",UD="200ms",WD="cubic-bezier(.4, 0, .23, 1)",Tee=function(t){var e,n,r,s,i,o,a,l,u,c,d,h,f,p,m,y,g,v,E=t.className,b=t.theme,T=t.reversed,x=t.checked,C=t.disabled,S=t.isUsingCustomLabelRender,N=t.indeterminate,I=b.semanticColors,F=b.effects,L=b.palette,z=b.fonts,H=es(Eee,b),$=I.inputForegroundChecked,M=L.neutralSecondary,j=L.neutralPrimary,P=I.inputBackgroundChecked,B=I.inputBackgroundChecked,K=I.disabledBodySubtext,A=I.inputBorderHovered,O=I.inputBackgroundCheckedHovered,se=I.inputBackgroundChecked,ae=I.inputBackgroundCheckedHovered,de=I.inputBackgroundCheckedHovered,le=I.inputTextHovered,ve=I.disabledBodySubtext,Ne=I.bodyText,_e=I.disabledText,Se=[(e={content:'""',borderRadius:F.roundedCorner2,position:"absolute",width:10,height:10,top:4,left:4,boxSizing:"border-box",borderWidth:5,borderStyle:"solid",borderColor:C?K:P,transitionProperty:"border-width, border, border-color",transitionDuration:UD,transitionTimingFunction:WD},e[we]={borderColor:"WindowText"},e)];return{root:[H.root,{position:"relative",display:"flex"},T&&"reversed",x&&"is-checked",!C&&"is-enabled",C&&"is-disabled",!C&&[!x&&(n={},n[":hover ."+H.checkbox]=(r={borderColor:A},r[we]={borderColor:"Highlight"},r),n[":focus ."+H.checkbox]={borderColor:A},n[":hover ."+H.checkmark]=(s={color:M,opacity:"1"},s[we]={color:"Highlight"},s),n),x&&!N&&(i={},i[":hover ."+H.checkbox]={background:ae,borderColor:de},i[":focus ."+H.checkbox]={background:ae,borderColor:de},i[we]=(o={},o[":hover ."+H.checkbox]={background:"Highlight",borderColor:"Highlight"},o[":focus ."+H.checkbox]={background:"Highlight"},o[":focus:hover ."+H.checkbox]={background:"Highlight"},o[":focus:hover ."+H.checkmark]={color:"Window"},o[":hover ."+H.checkmark]={color:"Window"},o),i),N&&(a={},a[":hover ."+H.checkbox+", :hover ."+H.checkbox+":after"]=(l={borderColor:O},l[we]={borderColor:"WindowText"},l),a[":focus ."+H.checkbox]={borderColor:O},a[":hover ."+H.checkmark]={opacity:"0"},a),(u={},u[":hover ."+H.text+", :focus ."+H.text]=(c={color:le},c[we]={color:C?"GrayText":"WindowText"},c),u)],E],input:(d={position:"absolute",background:"none",opacity:0},d["."+as+" &:focus + label::before"]=(h={outline:"1px solid "+b.palette.neutralSecondary,outlineOffset:"2px"},h[we]={outline:"1px solid WindowText"},h),d),label:[H.label,b.fonts.medium,{display:"flex",alignItems:S?"center":"flex-start",cursor:C?"default":"pointer",position:"relative",userSelect:"none"},T&&{flexDirection:"row-reverse",justifyContent:"flex-end"},{"&::before":{position:"absolute",left:0,right:0,top:0,bottom:0,content:'""',pointerEvents:"none"}}],checkbox:[H.checkbox,(f={position:"relative",display:"flex",flexShrink:0,alignItems:"center",justifyContent:"center",height:HD,width:HD,border:"1px solid "+j,borderRadius:F.roundedCorner2,boxSizing:"border-box",transitionProperty:"background, border, border-color",transitionDuration:UD,transitionTimingFunction:WD,overflow:"hidden",":after":N?Se:null},f[we]=U({borderColor:"WindowText"},ar()),f),N&&{borderColor:P},T?{marginLeft:4}:{marginRight:4},!C&&!N&&x&&(p={background:se,borderColor:B},p[we]={background:"Highlight",borderColor:"Highlight"},p),C&&(m={borderColor:K},m[we]={borderColor:"GrayText"},m),x&&C&&(y={background:ve,borderColor:K},y[we]={background:"Window"},y)],checkmark:[H.checkmark,(g={opacity:x&&!N?"1":"0",color:$},g[we]=U({color:C?"GrayText":"Window"},ar()),g)],text:[H.text,(v={color:C?_e:Ne,fontSize:z.medium.fontSize,lineHeight:"20px"},v[we]=U({color:C?"GrayText":"WindowText"},ar()),v),T?{marginRight:4}:{marginLeft:4}]}},Mo=wr(h6,Tee,void 0,{scope:"Checkbox"}),xee=Sr({cacheSize:100}),Cee=function(t){un(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){var n=this.props,r=n.as,s=r===void 0?"label":r,i=n.children,o=n.className,a=n.disabled,l=n.styles,u=n.required,c=n.theme,d=xee(l,{className:o,disabled:a,required:u,theme:c});return w.createElement(s,U({},yn(this.props,jl),{className:d.root}),i)},e}(w.Component),See=function(t){var e,n=t.theme,r=t.className,s=t.disabled,i=t.required,o=n.semanticColors,a=sn.semibold,l=o.bodyText,u=o.disabledBodyText,c=o.errorText;return{root:["ms-Label",n.fonts.medium,{fontWeight:a,color:l,boxSizing:"border-box",boxShadow:"none",margin:0,display:"block",padding:"5px 0",wordWrap:"break-word",overflowWrap:"break-word"},s&&{color:u,selectors:(e={},e[we]=U({color:"GrayText"},ar()),e)},i&&{selectors:{"::after":{content:"' *'",color:c,paddingRight:12}}},r]}},C_=wr(Cee,See,void 0,{scope:"Label"}),wee=Sr(),_ee="",Dc="TextField",kee="RedEye",Iee="Hide",Nee=function(t){un(e,t);function e(n){var r=t.call(this,n)||this;r._textElement=w.createRef(),r._onFocus=function(o){r.props.onFocus&&r.props.onFocus(o),r.setState({isFocused:!0},function(){r.props.validateOnFocusIn&&r._validate(r.value)})},r._onBlur=function(o){r.props.onBlur&&r.props.onBlur(o),r.setState({isFocused:!1},function(){r.props.validateOnFocusOut&&r._validate(r.value)})},r._onRenderLabel=function(o){var a=o.label,l=o.required,u=r._classNames.subComponentStyles?r._classNames.subComponentStyles.label:void 0;return a?w.createElement(C_,{required:l,htmlFor:r._id,styles:u,disabled:o.disabled,id:r._labelId},o.label):null},r._onRenderDescription=function(o){return o.description?w.createElement("span",{className:r._classNames.description},o.description):null},r._onRevealButtonClick=function(o){r.setState(function(a){return{isRevealingPassword:!a.isRevealingPassword}})},r._onInputChange=function(o){var a,l,u=o.target,c=u.value,d=lS(r.props,r.state)||"";if(c===void 0||c===r._lastChangeValue||c===d){r._lastChangeValue=void 0;return}r._lastChangeValue=c,(l=(a=r.props).onChange)===null||l===void 0||l.call(a,o,c),r._isControlled||r.setState({uncontrolledValue:c})},Kl(r),r._async=new Kf(r),r._fallbackId=Ds(Dc),r._descriptionId=Ds(Dc+"Description"),r._labelId=Ds(Dc+"Label"),r._prefixId=Ds(Dc+"Prefix"),r._suffixId=Ds(Dc+"Suffix"),r._warnControlledUsage();var s=n.defaultValue,i=s===void 0?_ee:s;return typeof i=="number"&&(i=String(i)),r.state={uncontrolledValue:r._isControlled?void 0:i,isFocused:!1,errorMessage:""},r._delayedValidate=r._async.debounce(r._validate,r.props.deferredValidationTime),r._lastValidation=0,r}return Object.defineProperty(e.prototype,"value",{get:function(){return lS(this.props,this.state)},enumerable:!1,configurable:!0}),e.prototype.componentDidMount=function(){this._adjustInputHeight(),this.props.validateOnLoad&&this._validate(this.value)},e.prototype.componentWillUnmount=function(){this._async.dispose()},e.prototype.getSnapshotBeforeUpdate=function(n,r){return{selection:[this.selectionStart,this.selectionEnd]}},e.prototype.componentDidUpdate=function(n,r,s){var i=this.props,o=(s||{}).selection,a=o===void 0?[null,null]:o,l=a[0],u=a[1];!!n.multiline!=!!i.multiline&&r.isFocused&&(this.focus(),l!==null&&u!==null&&l>=0&&u>=0&&this.setSelectionRange(l,u)),n.value!==i.value&&(this._lastChangeValue=void 0);var c=lS(n,r),d=this.value;c!==d&&(this._warnControlledUsage(n),this.state.errorMessage&&!i.errorMessage&&this.setState({errorMessage:""}),this._adjustInputHeight(),VD(i)&&this._delayedValidate(d))},e.prototype.render=function(){var n=this.props,r=n.borderless,s=n.className,i=n.disabled,o=n.invalid,a=n.iconProps,l=n.inputClassName,u=n.label,c=n.multiline,d=n.required,h=n.underlined,f=n.prefix,p=n.resizable,m=n.suffix,y=n.theme,g=n.styles,v=n.autoAdjustHeight,E=n.canRevealPassword,b=n.revealPasswordAriaLabel,T=n.type,x=n.onRenderPrefix,C=x===void 0?this._onRenderPrefix:x,S=n.onRenderSuffix,N=S===void 0?this._onRenderSuffix:S,I=n.onRenderLabel,F=I===void 0?this._onRenderLabel:I,L=n.onRenderDescription,z=L===void 0?this._onRenderDescription:L,H=this.state,$=H.isFocused,M=H.isRevealingPassword,j=this._errorMessage,P=typeof o=="boolean"?o:!!j,B=!!E&&T==="password"&&Aee(),K=this._classNames=wee(g,{theme:y,className:s,disabled:i,focused:$,required:d,multiline:c,hasLabel:!!u,hasErrorMessage:P,borderless:r,resizable:p,hasIcon:!!a,underlined:h,inputClassName:l,autoAdjustHeight:v,hasRevealButton:B});return w.createElement("div",{ref:this.props.elementRef,className:K.root},w.createElement("div",{className:K.wrapper},F(this.props,this._onRenderLabel),w.createElement("div",{className:K.fieldGroup},(f!==void 0||this.props.onRenderPrefix)&&w.createElement("div",{className:K.prefix,id:this._prefixId},C(this.props,this._onRenderPrefix)),c?this._renderTextArea():this._renderInput(),a&&w.createElement(Ya,U({className:K.icon},a)),B&&w.createElement("button",{"aria-label":b,className:K.revealButton,onClick:this._onRevealButtonClick,"aria-pressed":!!M,type:"button"},w.createElement("span",{className:K.revealSpan},w.createElement(Ya,{className:K.revealIcon,iconName:M?Iee:kee}))),(m!==void 0||this.props.onRenderSuffix)&&w.createElement("div",{className:K.suffix,id:this._suffixId},N(this.props,this._onRenderSuffix)))),this._isDescriptionAvailable&&w.createElement("span",{id:this._descriptionId},z(this.props,this._onRenderDescription),j&&w.createElement("div",{role:"alert"},w.createElement(r$,null,this._renderErrorMessage()))))},e.prototype.focus=function(){this._textElement.current&&this._textElement.current.focus()},e.prototype.blur=function(){this._textElement.current&&this._textElement.current.blur()},e.prototype.select=function(){this._textElement.current&&this._textElement.current.select()},e.prototype.setSelectionStart=function(n){this._textElement.current&&(this._textElement.current.selectionStart=n)},e.prototype.setSelectionEnd=function(n){this._textElement.current&&(this._textElement.current.selectionEnd=n)},Object.defineProperty(e.prototype,"selectionStart",{get:function(){return this._textElement.current?this._textElement.current.selectionStart:-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectionEnd",{get:function(){return this._textElement.current?this._textElement.current.selectionEnd:-1},enumerable:!1,configurable:!0}),e.prototype.setSelectionRange=function(n,r){this._textElement.current&&this._textElement.current.setSelectionRange(n,r)},e.prototype._warnControlledUsage=function(n){this._id,this.props,this.props.value===null&&!this._hasWarnedNullValue&&(this._hasWarnedNullValue=!0,aI("Warning: 'value' prop on '"+Dc+"' should not be null. Consider using an empty string to clear the component or undefined to indicate an uncontrolled component."))},Object.defineProperty(e.prototype,"_id",{get:function(){return this.props.id||this._fallbackId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_isControlled",{get:function(){return BK(this.props,"value")},enumerable:!1,configurable:!0}),e.prototype._onRenderPrefix=function(n){var r=n.prefix;return w.createElement("span",{style:{paddingBottom:"1px"}},r)},e.prototype._onRenderSuffix=function(n){var r=n.suffix;return w.createElement("span",{style:{paddingBottom:"1px"}},r)},Object.defineProperty(e.prototype,"_errorMessage",{get:function(){var n=this.props.errorMessage,r=n===void 0?this.state.errorMessage:n;return r||""},enumerable:!1,configurable:!0}),e.prototype._renderErrorMessage=function(){var n=this._errorMessage;return n?typeof n=="string"?w.createElement("p",{className:this._classNames.errorMessage},w.createElement("span",{"data-automation-id":"error-message"},n)):w.createElement("div",{className:this._classNames.errorMessage,"data-automation-id":"error-message"},n):null},Object.defineProperty(e.prototype,"_isDescriptionAvailable",{get:function(){var n=this.props;return!!(n.onRenderDescription||n.description||this._errorMessage)},enumerable:!1,configurable:!0}),e.prototype._renderTextArea=function(){var n=this.props.invalid,r=n===void 0?!!this._errorMessage:n,s=yn(this.props,nq,["defaultValue"]),i=this.props["aria-labelledby"]||(this.props.label?this._labelId:void 0);return w.createElement("textarea",U({id:this._id},s,{ref:this._textElement,value:this.value||"",onInput:this._onInputChange,onChange:this._onInputChange,className:this._classNames.field,"aria-labelledby":i,"aria-describedby":this._isDescriptionAvailable?this._descriptionId:this.props["aria-describedby"],"aria-invalid":r,"aria-label":this.props.ariaLabel,readOnly:this.props.readOnly,onFocus:this._onFocus,onBlur:this._onBlur}))},e.prototype._renderInput=function(){var n=this.props,r=n.ariaLabel,s=n.invalid,i=s===void 0?!!this._errorMessage:s,o=n.onRenderPrefix,a=n.onRenderSuffix,l=n.prefix,u=n.suffix,c=n.type,d=c===void 0?"text":c,h=n.label,f=[];h&&f.push(this._labelId),(l!==void 0||o)&&f.push(this._prefixId),(u!==void 0||a)&&f.push(this._suffixId);var p=U(U({type:this.state.isRevealingPassword?"text":d,id:this._id},yn(this.props,p$,["defaultValue","type"])),{"aria-labelledby":this.props["aria-labelledby"]||(f.length>0?f.join(" "):void 0),ref:this._textElement,value:this.value||"",onInput:this._onInputChange,onChange:this._onInputChange,className:this._classNames.field,"aria-label":r,"aria-describedby":this._isDescriptionAvailable?this._descriptionId:this.props["aria-describedby"],"aria-invalid":i,onFocus:this._onFocus,onBlur:this._onBlur}),m=function(g){return w.createElement("input",U({},g))},y=this.props.onRenderInput||m;return y(p,m)},e.prototype._validate=function(n){var r=this;if(!(this._latestValidateValue===n&&VD(this.props))){this._latestValidateValue=n;var s=this.props.onGetErrorMessage,i=s&&s(n||"");if(i!==void 0)if(typeof i=="string"||!("then"in i))this.setState({errorMessage:i}),this._notifyAfterValidate(n,i);else{var o=++this._lastValidation;i.then(function(a){o===r._lastValidation&&r.setState({errorMessage:a}),r._notifyAfterValidate(n,a)})}else this._notifyAfterValidate(n,"")}},e.prototype._notifyAfterValidate=function(n,r){n===this.value&&this.props.onNotifyValidationResult&&this.props.onNotifyValidationResult(r,n)},e.prototype._adjustInputHeight=function(){if(this._textElement.current&&this.props.autoAdjustHeight&&this.props.multiline){var n=this._textElement.current;n.style.height="",n.style.height=n.scrollHeight+"px"}},e.defaultProps={resizable:!0,deferredValidationTime:200,validateOnLoad:!0},e}(w.Component);function lS(t,e){var n=t.value,r=n===void 0?e.uncontrolledValue:n;return typeof r=="number"?String(r):r}function VD(t){return!(t.validateOnFocusIn||t.validateOnFocusOut)}var vv;function Aee(){if(typeof vv!="boolean"){var t=Sn();if(t!=null&&t.navigator){var e=/Edg/.test(t.navigator.userAgent||"");vv=!(bq()||e)}else vv=!0}return vv}var Dee={root:"ms-TextField",description:"ms-TextField-description",errorMessage:"ms-TextField-errorMessage",field:"ms-TextField-field",fieldGroup:"ms-TextField-fieldGroup",prefix:"ms-TextField-prefix",suffix:"ms-TextField-suffix",wrapper:"ms-TextField-wrapper",revealButton:"ms-TextField-reveal",multiline:"ms-TextField--multiline",borderless:"ms-TextField--borderless",underlined:"ms-TextField--underlined",unresizable:"ms-TextField--unresizable",required:"is-required",disabled:"is-disabled",active:"is-active"};function Ree(t){var e=t.underlined,n=t.disabled,r=t.focused,s=t.theme,i=s.palette,o=s.fonts;return function(){var a;return{root:[e&&n&&{color:i.neutralTertiary},e&&{fontSize:o.medium.fontSize,marginRight:8,paddingLeft:12,paddingRight:0,lineHeight:"22px",height:32},e&&r&&{selectors:(a={},a[we]={height:31},a)}]}}}function Fee(t){var e,n,r,s,i,o,a,l,u,c,d,h,f=t.theme,p=t.className,m=t.disabled,y=t.focused,g=t.required,v=t.multiline,E=t.hasLabel,b=t.borderless,T=t.underlined,x=t.hasIcon,C=t.resizable,S=t.hasErrorMessage,N=t.inputClassName,I=t.autoAdjustHeight,F=t.hasRevealButton,L=f.semanticColors,z=f.effects,H=f.fonts,$=es(Dee,f),M={background:L.disabledBackground,color:m?L.disabledText:L.inputPlaceholderText,display:"flex",alignItems:"center",padding:"0 10px",lineHeight:1,whiteSpace:"nowrap",flexShrink:0,selectors:(e={},e[we]={background:"Window",color:m?"GrayText":"WindowText"},e)},j=[{color:L.inputPlaceholderText,opacity:1,selectors:(n={},n[we]={color:"GrayText"},n)}],P={color:L.disabledText,selectors:(r={},r[we]={color:"GrayText"},r)};return{root:[$.root,H.medium,g&&$.required,m&&$.disabled,y&&$.active,v&&$.multiline,b&&$.borderless,T&&$.underlined,I2,{position:"relative"},p],wrapper:[$.wrapper,T&&[{display:"flex",borderBottom:"1px solid "+(S?L.errorText:L.inputBorder),width:"100%"},m&&{borderBottomColor:L.disabledBackground,selectors:(s={},s[we]=U({borderColor:"GrayText"},ar()),s)},!m&&{selectors:{":hover":{borderBottomColor:S?L.errorText:L.inputBorderHovered,selectors:(i={},i[we]=U({borderBottomColor:"Highlight"},ar()),i)}}},y&&[{position:"relative"},v4(S?L.errorText:L.inputFocusBorderAlt,0,"borderBottom")]]],fieldGroup:[$.fieldGroup,I2,{border:"1px solid "+L.inputBorder,borderRadius:z.roundedCorner2,background:L.inputBackground,cursor:"text",height:32,display:"flex",flexDirection:"row",alignItems:"stretch",position:"relative"},v&&{minHeight:"60px",height:"auto",display:"flex"},!y&&!m&&{selectors:{":hover":{borderColor:L.inputBorderHovered,selectors:(o={},o[we]=U({borderColor:"Highlight"},ar()),o)}}},y&&!T&&v4(S?L.errorText:L.inputFocusBorderAlt,z.roundedCorner2),m&&{borderColor:L.disabledBackground,selectors:(a={},a[we]=U({borderColor:"GrayText"},ar()),a),cursor:"default"},b&&{border:"none"},b&&y&&{border:"none",selectors:{":after":{border:"none"}}},T&&{flex:"1 1 0px",border:"none",textAlign:"left"},T&&m&&{backgroundColor:"transparent"},S&&!T&&{borderColor:L.errorText,selectors:{"&:hover":{borderColor:L.errorText}}},!E&&g&&{selectors:(l={":before":{content:"'*'",color:L.errorText,position:"absolute",top:-5,right:-10}},l[we]={selectors:{":before":{color:"WindowText",right:-14}}},l)}],field:[H.medium,$.field,I2,{borderRadius:0,border:"none",background:"none",backgroundColor:"transparent",color:L.inputText,padding:"0 8px",width:"100%",minWidth:0,textOverflow:"ellipsis",outline:0,selectors:(u={"&:active, &:focus, &:hover":{outline:0},"::-ms-clear":{display:"none"}},u[we]={background:"Window",color:m?"GrayText":"WindowText"},u)},T4(j),v&&!C&&[$.unresizable,{resize:"none"}],v&&{minHeight:"inherit",lineHeight:17,flexGrow:1,paddingTop:6,paddingBottom:6,overflow:"auto",width:"100%"},v&&I&&{overflow:"hidden"},x&&!F&&{paddingRight:24},v&&x&&{paddingRight:40},m&&[{backgroundColor:L.disabledBackground,color:L.disabledText,borderColor:L.disabledBackground},T4(P)],T&&{textAlign:"left"},y&&!b&&{selectors:(c={},c[we]={paddingLeft:11,paddingRight:11},c)},y&&v&&!b&&{selectors:(d={},d[we]={paddingTop:4},d)},N],icon:[v&&{paddingRight:24,alignItems:"flex-end"},{pointerEvents:"none",position:"absolute",bottom:6,right:8,top:"auto",fontSize:jo.medium,lineHeight:18},m&&{color:L.disabledText}],description:[$.description,{color:L.bodySubtext,fontSize:H.xSmall.fontSize}],errorMessage:[$.errorMessage,Ph.slideDownIn20,H.small,{color:L.errorText,margin:0,paddingTop:5,display:"flex",alignItems:"center"}],prefix:[$.prefix,M],suffix:[$.suffix,M],revealButton:[$.revealButton,"ms-Button","ms-Button--icon",Ol(f,{inset:1}),{height:30,width:32,border:"none",padding:"0px 4px",backgroundColor:"transparent",color:L.link,selectors:{":hover":{outline:0,color:L.primaryButtonBackgroundHovered,backgroundColor:L.buttonBackgroundHovered,selectors:(h={},h[we]={borderColor:"Highlight",color:"Highlight"},h)},":focus":{outline:0}}},x&&{marginRight:28}],revealSpan:{display:"flex",height:"100%",alignItems:"center"},revealIcon:{margin:"0px 4px",pointerEvents:"none",bottom:6,right:8,top:"auto",fontSize:jo.medium,lineHeight:18},subComponentStyles:{label:Ree(t)}}}var mN=wr(Nee,Fee,void 0,{scope:"TextField"}),R1={auto:0,top:1,bottom:2,center:3},Oee=function(t){if(t===void 0)return 0;var e=0;return"scrollHeight"in t?e=t.scrollHeight:"document"in t&&(e=t.document.documentElement.scrollHeight),e},GD=function(t){if(t===void 0)return 0;var e=0;return"scrollTop"in t?e=t.scrollTop:"scrollY"in t&&(e=t.scrollY),Math.ceil(e)},bv=function(t,e){"scrollTop"in t?t.scrollTop=e:"scrollY"in t&&t.scrollTo(t.scrollX,e)},$ee=16,Lee=100,Pee=500,Mee=200,Bee=500,jD=10,zee=30,Hee=2,Uee=2,Wee="page-",KD="spacer-",qD={top:-1,bottom:-1,left:-1,right:-1,width:0,height:0},f6=function(t){return t.getBoundingClientRect()},Vee=f6,Gee=f6,jee=function(t){un(e,t);function e(n){var r=t.call(this,n)||this;return r._root=w.createRef(),r._surface=w.createRef(),r._pageRefs={},r._getDerivedStateFromProps=function(s,i){return(s.items!==r.props.items||s.renderCount!==r.props.renderCount||s.startIndex!==r.props.startIndex||s.version!==r.props.version||!i.hasMounted)&&sT()?(r._resetRequiredWindows(),r._requiredRect=null,r._measureVersion++,r._invalidatePageCache(),r._updatePages(s,i)):i},r._onRenderRoot=function(s){var i=s.rootRef,o=s.surfaceElement,a=s.divProps;return w.createElement("div",U({ref:i},a),o)},r._onRenderSurface=function(s){var i=s.surfaceRef,o=s.pageElements,a=s.divProps;return w.createElement("div",U({ref:i},a),o)},r._onRenderPage=function(s,i){for(var o,a=r.props,l=a.onRenderCell,u=a.onRenderCellConditional,c=a.role,d=s.page,h=d.items,f=h===void 0?[]:h,p=d.startIndex,m=rl(s,["page"]),y=c===void 0?"listitem":"presentation",g=[],v=0;v<f.length;v++){var E=p+v,b=f[v],T=r.props.getKey?r.props.getKey(b,E):b&&b.key;T==null&&(T=E);var x=u??l,C=(o=x==null?void 0:x(b,E,r.props.ignoreScrollingState?void 0:r.state.isScrolling))!==null&&o!==void 0?o:null;(!u||C)&&g.push(w.createElement("div",{role:y,className:"ms-List-cell",key:T,"data-list-index":E,"data-automationid":"ListCell"},C))}return w.createElement("div",U({},m),g)},Kl(r),r.state={pages:[],isScrolling:!1,getDerivedStateFromProps:r._getDerivedStateFromProps,hasMounted:!1},r._async=new Kf(r),r._events=new ro(r),r._estimatedPageHeight=0,r._totalEstimates=0,r._requiredWindowsAhead=0,r._requiredWindowsBehind=0,r._measureVersion=0,r._onAsyncScroll=r._async.debounce(r._onAsyncScroll,Lee,{leading:!1,maxWait:Pee}),r._onAsyncIdle=r._async.debounce(r._onAsyncIdle,Mee,{leading:!1}),r._onAsyncResize=r._async.debounce(r._onAsyncResize,$ee,{leading:!1}),r._onScrollingDone=r._async.debounce(r._onScrollingDone,Bee,{leading:!1}),r._cachedPageHeights={},r._estimatedPageHeight=0,r._focusedIndex=-1,r._pageCache={},r}return e.getDerivedStateFromProps=function(n,r){return r.getDerivedStateFromProps(n,r)},Object.defineProperty(e.prototype,"pageRefs",{get:function(){return this._pageRefs},enumerable:!1,configurable:!0}),e.prototype.scrollToIndex=function(n,r,s){s===void 0&&(s=R1.auto);for(var i=this.props.startIndex,o=this._getRenderCount(),a=i+o,l=this._allowedRect,u=0,c=1,d=i;d<a;d+=c){var h=this._getPageSpecification(this.props,d,l),f=h.height;c=h.itemCount;var p=d<=n&&d+c>n;if(p){if(r&&this._scrollElement){for(var m=Gee(this._scrollElement),y=GD(this._scrollElement),g={top:y,bottom:y+m.height},v=n-d,E=0;E<v;++E)u+=r(d+E);var b=u+r(n);switch(s){case R1.top:bv(this._scrollElement,u);return;case R1.bottom:bv(this._scrollElement,b-m.height);return;case R1.center:bv(this._scrollElement,(u+b-m.height)/2);return;case R1.auto:}var T=u>=g.top&&b<=g.bottom;if(T)return;var x=u<g.top,C=b>g.bottom;x||C&&(u=b-m.height)}this._scrollElement&&bv(this._scrollElement,u);return}u+=f}},e.prototype.getStartItemIndexInView=function(n){for(var r=this.state.pages||[],s=0,i=r;s<i.length;s++){var o=i[s],a=!o.isSpacer&&(this._scrollTop||0)>=o.top&&(this._scrollTop||0)<=o.top+o.height;if(a)if(n)for(var u=0,c=o.startIndex;c<o.startIndex+o.itemCount;c++){var l=n(c);if(o.top+u<=this._scrollTop&&this._scrollTop<o.top+u+l)return c;u+=l}else{var l=Math.floor(o.height/o.itemCount);return o.startIndex+Math.floor((this._scrollTop-o.top)/l)}}return 0},e.prototype.componentDidMount=function(){if(this.setState({hasMounted:!0}),this._scrollElement=oI(this._root.current),this._scrollTop=0,!this.props.getPageHeight){var n=this._updatePageMeasurements(this.state.pages);n&&(this._materializedRect=null,this.setState(this._updatePages(this.props,this.state)))}this._measureVersion++,this._events.on(window,"resize",this._onAsyncResize),this._root.current&&this._events.on(this._root.current,"focus",this._onFocus,!0),this._scrollElement&&(this._events.on(this._scrollElement,"scroll",this._onScroll),this._events.on(this._scrollElement,"scroll",this._onAsyncScroll))},e.prototype.componentDidUpdate=function(n,r){var s=this.props,i=this.state;if(this.state.pagesVersion!==r.pagesVersion){if(s.getPageHeight)this._onAsyncIdle();else{var o=this._updatePageMeasurements(i.pages);o?(this._materializedRect=null,this._onAsyncScroll()):this._onAsyncIdle()}s.onPagesUpdated&&s.onPagesUpdated(i.pages)}},e.prototype.componentWillUnmount=function(){this._async.dispose(),this._events.dispose(),delete this._scrollElement},e.prototype.shouldComponentUpdate=function(n,r){var s=this.state.pages,i=r.pages,o=!1;if(!r.isScrolling&&this.state.isScrolling||n.version!==this.props.version||n.className!==this.props.className)return!0;if(n.items===this.props.items&&s.length===i.length)for(var a=0;a<s.length;a++){var l=s[a],u=i[a];if(l.key!==u.key||l.itemCount!==u.itemCount){o=!0;break}}else o=!0;return o},e.prototype.forceUpdate=function(){this._invalidatePageCache(),this._updateRenderRects(this.props,this.state,!0),this.setState(this._updatePages(this.props,this.state)),this._measureVersion++,t.prototype.forceUpdate.call(this)},e.prototype.getTotalListHeight=function(){return this._surfaceRect.height},e.prototype.render=function(){for(var n=this.props,r=n.className,s=n.role,i=s===void 0?"list":s,o=n.onRenderSurface,a=n.onRenderRoot,l=this.state.pages,u=l===void 0?[]:l,c=[],d=yn(this.props,jl),h=0,f=u;h<f.length;h++){var p=f[h];c.push(this._renderPage(p))}var m=o?Cw(o,this._onRenderSurface):this._onRenderSurface,y=a?Cw(a,this._onRenderRoot):this._onRenderRoot;return y({rootRef:this._root,pages:u,surfaceElement:m({surfaceRef:this._surface,pages:u,pageElements:c,divProps:{role:"presentation",className:"ms-List-surface"}}),divProps:U(U({},d),{className:Fs("ms-List",r),role:c.length>0?i:void 0,"aria-label":c.length>0?d["aria-label"]:void 0})})},e.prototype._shouldVirtualize=function(n){n===void 0&&(n=this.props);var r=n.onShouldVirtualize;return!r||r(n)},e.prototype._invalidatePageCache=function(){this._pageCache={}},e.prototype._renderPage=function(n){var r=this,s=this.props.usePageCache,i;if(s&&(i=this._pageCache[n.key],i&&i.pageElement))return i.pageElement;var o=this._getPageStyle(n),a=this.props.onRenderPage,l=a===void 0?this._onRenderPage:a,u=l({page:n,className:"ms-List-page",key:n.key,ref:function(c){r._pageRefs[n.key]=c},style:o,role:"presentation"},this._onRenderPage);return s&&n.startIndex===0&&(this._pageCache[n.key]={page:n,pageElement:u}),u},e.prototype._getPageStyle=function(n){var r=this.props.getPageStyle;return U(U({},r?r(n):{}),n.items?{}:{height:n.height})},e.prototype._onFocus=function(n){for(var r=n.target;r!==this._surface.current;){var s=r.getAttribute("data-list-index");if(s){this._focusedIndex=Number(s);break}r=Vo(r)}},e.prototype._onScroll=function(){!this.state.isScrolling&&!this.props.ignoreScrollingState&&this.setState({isScrolling:!0}),this._resetRequiredWindows(),this._onScrollingDone()},e.prototype._resetRequiredWindows=function(){this._requiredWindowsAhead=0,this._requiredWindowsBehind=0},e.prototype._onAsyncScroll=function(){this._updateRenderRects(this.props,this.state),(!this._materializedRect||!Kee(this._requiredRect,this._materializedRect))&&this.setState(this._updatePages(this.props,this.state))},e.prototype._onAsyncIdle=function(){var n=this.props,r=n.renderedWindowsAhead,s=n.renderedWindowsBehind,i=this,o=i._requiredWindowsAhead,a=i._requiredWindowsBehind,l=Math.min(r,o+1),u=Math.min(s,a+1);(l!==o||u!==a)&&(this._requiredWindowsAhead=l,this._requiredWindowsBehind=u,this._updateRenderRects(this.props,this.state),this.setState(this._updatePages(this.props,this.state))),(r>l||s>u)&&this._onAsyncIdle()},e.prototype._onScrollingDone=function(){this.props.ignoreScrollingState||this.setState({isScrolling:!1})},e.prototype._onAsyncResize=function(){this.forceUpdate()},e.prototype._updatePages=function(n,r){this._requiredRect||this._updateRenderRects(n,r);var s=this._buildPages(n,r),i=r.pages;return this._notifyPageChanges(i,s.pages,this.props),U(U(U({},r),s),{pagesVersion:{}})},e.prototype._notifyPageChanges=function(n,r,s){var i=s.onPageAdded,o=s.onPageRemoved;if(i||o){for(var a={},l=0,u=n;l<u.length;l++){var c=u[l];c.items&&(a[c.startIndex]=c)}for(var d=0,h=r;d<h.length;d++){var c=h[d];c.items&&(a[c.startIndex]?delete a[c.startIndex]:this._onPageAdded(c))}for(var f in a)a.hasOwnProperty(f)&&this._onPageRemoved(a[f])}},e.prototype._updatePageMeasurements=function(n){var r=!1;if(!this._shouldVirtualize())return r;for(var s=0;s<n.length;s++){var i=n[s];i.items&&(r=this._measurePage(i)||r)}return r},e.prototype._measurePage=function(n){var r=!1,s=this._pageRefs[n.key],i=this._cachedPageHeights[n.startIndex];if(s&&this._shouldVirtualize()&&(!i||i.measureVersion!==this._measureVersion)){var o={width:s.clientWidth,height:s.clientHeight};(o.height||o.width)&&(r=n.height!==o.height,n.height=o.height,this._cachedPageHeights[n.startIndex]={height:o.height,measureVersion:this._measureVersion},this._estimatedPageHeight=Math.round((this._estimatedPageHeight*this._totalEstimates+o.height)/(this._totalEstimates+1)),this._totalEstimates++)}return r},e.prototype._onPageAdded=function(n){var r=this.props.onPageAdded;r&&r(n)},e.prototype._onPageRemoved=function(n){var r=this.props.onPageRemoved;r&&r(n)},e.prototype._buildPages=function(n,r){var s=n.renderCount,i=n.items,o=n.startIndex,a=n.getPageHeight;s=this._getRenderCount(n);for(var l=U({},qD),u=[],c=1,d=0,h=null,f=this._focusedIndex,p=o+s,m=this._shouldVirtualize(n),y=this._estimatedPageHeight===0&&!a,g=this._allowedRect,v=function(x){var C=E._getPageSpecification(n,x,g),S=C.height,N=C.data,I=C.key;c=C.itemCount;var F=d+S-1,L=lK(r.pages,function(K){return!!K.items&&K.startIndex===x})>-1,z=!g||F>=g.top&&d<=g.bottom,H=!E._requiredRect||F>=E._requiredRect.top&&d<=E._requiredRect.bottom,$=!y&&(H||z&&L)||!m,M=f>=x&&f<x+c,j=x===o;if($||M||j){h&&(u.push(h),h=null);var P=Math.min(c,p-x),B=E._createPage(I,i.slice(x,x+P),x,void 0,void 0,N);B.top=d,B.height=S,E._visibleRect&&E._visibleRect.bottom&&(B.isVisible=F>=E._visibleRect.top&&d<=E._visibleRect.bottom),u.push(B),H&&E._allowedRect&&qee(l,{top:d,bottom:F,height:S,left:g.left,right:g.right,width:g.width})}else h||(h=E._createPage(KD+x,void 0,x,0,void 0,N,!0)),h.height=(h.height||0)+(F-d)+1,h.itemCount+=c;if(d+=F-d+1,y&&m)return"break"},E=this,b=o;b<p;b+=c){var T=v(b);if(T==="break")break}return h&&(h.key=KD+"end",u.push(h)),this._materializedRect=l,U(U({},r),{pages:u,measureVersion:this._measureVersion})},e.prototype._getPageSpecification=function(n,r,s){var i=n.getPageSpecification;if(i){var o=i(r,s),a=o.itemCount,l=a===void 0?this._getItemCountForPage(r,s):a,u=o.height,c=u===void 0?this._getPageHeight(r,s,l):u;return{itemCount:l,height:c,data:o.data,key:o.key}}else{var l=this._getItemCountForPage(r,s);return{itemCount:l,height:this._getPageHeight(r,s,l)}}},e.prototype._getPageHeight=function(n,r,s){if(this.props.getPageHeight)return this.props.getPageHeight(n,r,s);var i=this._cachedPageHeights[n];return i?i.height:this._estimatedPageHeight||zee},e.prototype._getItemCountForPage=function(n,r){var s=this.props.getItemCountForPage?this.props.getItemCountForPage(n,r):jD;return s||jD},e.prototype._createPage=function(n,r,s,i,o,a,l){s===void 0&&(s=-1),i===void 0&&(i=r?r.length:0),o===void 0&&(o={}),n=n||Wee+s;var u=this._pageCache[n];return u&&u.page?u.page:{key:n,startIndex:s,itemCount:i,items:r,style:o,top:0,height:0,data:a,isSpacer:l||!1}},e.prototype._getRenderCount=function(n){var r=n||this.props,s=r.items,i=r.startIndex,o=r.renderCount;return o===void 0?s?s.length-i:0:o},e.prototype._updateRenderRects=function(n,r,s){var i=n.renderedWindowsAhead,o=n.renderedWindowsBehind,a=r.pages;if(this._shouldVirtualize(n)){var l=this._surfaceRect||U({},qD),u=Oee(this._scrollElement),c=GD(this._scrollElement);this._surface.current&&(s||!a||!this._surfaceRect||!u||u!==this._scrollHeight||Math.abs(this._scrollTop-c)>this._estimatedPageHeight/3)&&(l=this._surfaceRect=Vee(this._surface.current),this._scrollTop=c),(s||!u||u!==this._scrollHeight)&&this._measureVersion++,this._scrollHeight=u||0;var d=Math.max(0,-l.top),h=Sn(this._root.current),f={top:d,left:l.left,bottom:d+h.innerHeight,right:l.right,width:l.width,height:h.innerHeight};this._requiredRect=XD(f,this._requiredWindowsBehind,this._requiredWindowsAhead),this._allowedRect=XD(f,o,i),this._visibleRect=f}},e.defaultProps={startIndex:0,onRenderCell:function(n,r,s){return w.createElement(w.Fragment,null,n&&n.name||"")},onRenderCellConditional:void 0,renderedWindowsAhead:Uee,renderedWindowsBehind:Hee},e}(w.Component);function XD(t,e,n){var r=t.top-e*t.height,s=t.height+(e+n)*t.height;return{top:r,bottom:r+s,height:s,left:t.left,right:t.right,width:t.width}}function Kee(t,e){return t.top>=e.top&&t.left>=e.left&&t.bottom<=e.bottom&&t.right<=e.right}function qee(t,e){return t.top=e.top<t.top||t.top===-1?e.top:t.top,t.left=e.left<t.left||t.left===-1?e.left:t.left,t.bottom=e.bottom>t.bottom||t.bottom===-1?e.bottom:t.bottom,t.right=e.right>t.right||t.right===-1?e.right:t.right,t.width=t.right-t.left+1,t.height=t.bottom-t.top+1,t}var Yo;(function(t){t[t.xSmall=0]="xSmall",t[t.small=1]="small",t[t.medium=2]="medium",t[t.large=3]="large"})(Yo||(Yo={}));var S_;(function(t){t[t.normal=0]="normal",t[t.large=1]="large"})(S_||(S_={}));var Xee=Sr(),Yee=function(t){un(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(){var n=this.props,r=n.type,s=n.size,i=n.ariaLabel,o=n.ariaLive,a=n.styles,l=n.label,u=n.theme,c=n.className,d=n.labelPosition,h=i,f=yn(this.props,jl,["size"]),p=s;p===void 0&&r!==void 0&&(p=r===S_.large?Yo.large:Yo.medium);var m=Xee(a,{theme:u,size:p,className:c,labelPosition:d});return w.createElement("div",U({},f,{className:m.root}),w.createElement("div",{className:m.circle}),l&&w.createElement("div",{className:m.label},l),h&&w.createElement("div",{role:"status","aria-live":o},w.createElement(r$,null,w.createElement("div",{className:m.screenReaderText},h))))},e.defaultProps={size:Yo.medium,ariaLive:"polite",labelPosition:"bottom"},e}(w.Component),Qee={root:"ms-Spinner",circle:"ms-Spinner-circle",label:"ms-Spinner-label"},Zee=Un(function(){return Wi({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}})}),Jee=function(t){var e,n=t.theme,r=t.size,s=t.className,i=t.labelPosition,o=n.palette,a=es(Qee,n);return{root:[a.root,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},i==="top"&&{flexDirection:"column-reverse"},i==="right"&&{flexDirection:"row"},i==="left"&&{flexDirection:"row-reverse"},s],circle:[a.circle,{boxSizing:"border-box",borderRadius:"50%",border:"1.5px solid "+o.themeLight,borderTopColor:o.themePrimary,animationName:Zee(),animationDuration:"1.3s",animationIterationCount:"infinite",animationTimingFunction:"cubic-bezier(.53,.21,.29,.67)",selectors:(e={},e[we]=U({borderTopColor:"Highlight"},ar()),e)},r===Yo.xSmall&&["ms-Spinner--xSmall",{width:12,height:12}],r===Yo.small&&["ms-Spinner--small",{width:16,height:16}],r===Yo.medium&&["ms-Spinner--medium",{width:20,height:20}],r===Yo.large&&["ms-Spinner--large",{width:28,height:28}]],label:[a.label,n.fonts.small,{color:o.themePrimary,margin:"8px 0 0",textAlign:"center"},i==="top"&&{margin:"0 0 8px"},i==="right"&&{margin:"0 0 0 8px"},i==="left"&&{margin:"0 8px 0 0"}],screenReaderText:hI}},p6=wr(Yee,Jee,void 0,{scope:"Spinner"}),La;(function(t){t[t.normal=0]="normal",t[t.largeHeader=1]="largeHeader",t[t.close=2]="close"})(La||(La={}));var m6=sX.durationValue2,ete={root:"ms-Modal",main:"ms-Dialog-main",scrollableContent:"ms-Modal-scrollableContent",isOpen:"is-open",layer:"ms-Modal-Layer"},tte=function(t){var e,n=t.className,r=t.containerClassName,s=t.scrollableContentClassName,i=t.isOpen,o=t.isVisible,a=t.hasBeenOpened,l=t.modalRectangleTop,u=t.theme,c=t.topOffsetFixed,d=t.isModeless,h=t.layerClassName,f=t.isDefaultDragHandle,p=t.windowInnerHeight,m=u.palette,y=u.effects,g=u.fonts,v=es(ete,u);return{root:[v.root,g.medium,{backgroundColor:"transparent",position:"fixed",height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,pointerEvents:"none",transition:"opacity "+m6},c&&typeof l=="number"&&a&&{alignItems:"flex-start"},i&&v.isOpen,o&&{opacity:1},o&&!d&&{pointerEvents:"auto"},n],main:[v.main,{boxShadow:y.elevation64,borderRadius:y.roundedCorner2,backgroundColor:m.white,boxSizing:"border-box",position:"relative",textAlign:"left",outline:"3px solid transparent",maxHeight:"calc(100% - 32px)",maxWidth:"calc(100% - 32px)",minHeight:"176px",minWidth:"288px",overflowY:"auto",zIndex:d?vf.Layer:void 0},d&&{pointerEvents:"auto"},c&&typeof l=="number"&&a&&{top:l},f&&{cursor:"move"},r],scrollableContent:[v.scrollableContent,{overflowY:"auto",flexGrow:1,maxHeight:"100vh",selectors:(e={},e["@supports (-webkit-overflow-scrolling: touch)"]={maxHeight:p},e)},s],layer:d&&[h,v.layer,{pointerEvents:"none"}],keyboardMoveIconContainer:{position:"absolute",display:"flex",justifyContent:"center",width:"100%",padding:"3px 0px"},keyboardMoveIcon:{fontSize:g.xLargePlus.fontSize,width:"24px"}}},nte=Sr(),rte=function(t){un(e,t);function e(n){var r=t.call(this,n)||this;Kl(r);var s=r.props.allowTouchBodyScroll,i=s===void 0?!1:s;return r._allowTouchBodyScroll=i,r}return e.prototype.componentDidMount=function(){!this._allowTouchBodyScroll&&eK()},e.prototype.componentWillUnmount=function(){!this._allowTouchBodyScroll&&tK()},e.prototype.render=function(){var n=this.props,r=n.isDarkThemed,s=n.className,i=n.theme,o=n.styles,a=yn(this.props,jl),l=nte(o,{theme:i,className:s,isDark:r});return w.createElement("div",U({},a,{className:l.root}))},e}(w.Component),ste={root:"ms-Overlay",rootDark:"ms-Overlay--dark"},ite=function(t){var e,n=t.className,r=t.theme,s=t.isNone,i=t.isDark,o=r.palette,a=es(ste,r);return{root:[a.root,r.fonts.medium,{backgroundColor:o.whiteTranslucent40,top:0,right:0,bottom:0,left:0,position:"absolute",selectors:(e={},e[we]={border:"1px solid WindowText",opacity:0},e)},s&&{visibility:"hidden"},i&&[a.rootDark,{backgroundColor:o.blackTranslucent40}],n]}},ote=wr(rte,ite,void 0,{scope:"Overlay"}),ate=Un(function(t,e){return{root:Da(t,e&&{touchAction:"none",selectors:{"& *":{userSelect:"none"}}})}}),F1={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},lte=function(t){un(e,t);function e(n){var r=t.call(this,n)||this;return r._currentEventType=F1.mouse,r._events=[],r._onMouseDown=function(s){var i=w.Children.only(r.props.children).props.onMouseDown;return i&&i(s),r._currentEventType=F1.mouse,r._onDragStart(s)},r._onMouseUp=function(s){var i=w.Children.only(r.props.children).props.onMouseUp;return i&&i(s),r._currentEventType=F1.mouse,r._onDragStop(s)},r._onTouchStart=function(s){var i=w.Children.only(r.props.children).props.onTouchStart;return i&&i(s),r._currentEventType=F1.touch,r._onDragStart(s)},r._onTouchEnd=function(s){var i=w.Children.only(r.props.children).props.onTouchEnd;i&&i(s),r._currentEventType=F1.touch,r._onDragStop(s)},r._onDragStart=function(s){if(typeof s.button=="number"&&s.button!==0)return!1;if(!(r.props.handleSelector&&!r._matchesSelector(s.target,r.props.handleSelector)||r.props.preventDragSelector&&r._matchesSelector(s.target,r.props.preventDragSelector))){r._touchId=r._getTouchId(s);var i=r._getControlPosition(s);if(i!==void 0){var o=r._createDragDataFromPosition(i);r.props.onStart&&r.props.onStart(s,o),r.setState({isDragging:!0,lastPosition:i}),r._events=[Ra(document.body,r._currentEventType.move,r._onDrag,!0),Ra(document.body,r._currentEventType.stop,r._onDragStop,!0)]}}},r._onDrag=function(s){s.type==="touchmove"&&s.preventDefault();var i=r._getControlPosition(s);if(i){var o=r._createUpdatedDragData(r._createDragDataFromPosition(i)),a=o.position;r.props.onDragChange&&r.props.onDragChange(s,o),r.setState({position:a,lastPosition:i})}},r._onDragStop=function(s){if(r.state.isDragging){var i=r._getControlPosition(s);if(i){var o=r._createDragDataFromPosition(i);r.setState({isDragging:!1,lastPosition:void 0}),r.props.onStop&&r.props.onStop(s,o),r.props.position&&r.setState({position:r.props.position}),r._events.forEach(function(a){return a()})}}},r.state={isDragging:!1,position:r.props.position||{x:0,y:0},lastPosition:void 0},r}return e.prototype.componentDidUpdate=function(n){this.props.position&&(!n.position||this.props.position!==n.position)&&this.setState({position:this.props.position})},e.prototype.componentWillUnmount=function(){this._events.forEach(function(n){return n()})},e.prototype.render=function(){var n=w.Children.only(this.props.children),r=n.props,s=this.props.position,i=this.state,o=i.position,a=i.isDragging,l=o.x,u=o.y;return s&&!a&&(l=s.x,u=s.y),w.cloneElement(n,{style:U(U({},r.style),{transform:"translate("+l+"px, "+u+"px)"}),className:ate(r.className,this.state.isDragging).root,onMouseDown:this._onMouseDown,onMouseUp:this._onMouseUp,onTouchStart:this._onTouchStart,onTouchEnd:this._onTouchEnd})},e.prototype._getControlPosition=function(n){var r=this._getActiveTouch(n);if(!(this._touchId!==void 0&&!r)){var s=r||n;return{x:s.clientX,y:s.clientY}}},e.prototype._getActiveTouch=function(n){return n.targetTouches&&this._findTouchInTouchList(n.targetTouches)||n.changedTouches&&this._findTouchInTouchList(n.changedTouches)},e.prototype._getTouchId=function(n){var r=n.targetTouches&&n.targetTouches[0]||n.changedTouches&&n.changedTouches[0];if(r)return r.identifier},e.prototype._matchesSelector=function(n,r){if(!n||n===document.body)return!1;var s=n.matches||n.webkitMatchesSelector||n.msMatchesSelector;return s?s.call(n,r)||this._matchesSelector(n.parentElement,r):!1},e.prototype._findTouchInTouchList=function(n){if(this._touchId!==void 0){for(var r=0;r<n.length;r++)if(n[r].identifier===this._touchId)return n[r]}},e.prototype._createDragDataFromPosition=function(n){var r=this.state.lastPosition;return r===void 0?{delta:{x:0,y:0},lastPosition:n,position:n}:{delta:{x:n.x-r.x,y:n.y-r.y},lastPosition:r,position:n}},e.prototype._createUpdatedDragData=function(n){var r=this.state.position;return{position:{x:r.x+n.delta.x,y:r.y+n.delta.y},delta:n.delta,lastPosition:r}},e}(w.Component),bh={x:0,y:0},ute={isOpen:!1,isDarkOverlay:!0,className:"",containerClassName:"",enableAriaHiddenSiblings:!0},cte=Sr(),dte=function(t){var e=10;return t.shiftKey?t.ctrlKey||(e=50):t.ctrlKey&&(e=1),e},hte=function(t,e){w.useImperativeHandle(t.componentRef,function(){return{focus:function(){e.current&&e.current.focus()}}},[e])},g6=w.forwardRef(function(t,e){var n,r,s,i,o,a=Og(ute,t),l=a.allowTouchBodyScroll,u=a.className,c=a.children,d=a.containerClassName,h=a.scrollableContentClassName,f=a.elementToFocusOnDismiss,p=a.firstFocusableSelector,m=a.focusTrapZoneProps,y=a.forceFocusInsideTrap,g=a.disableRestoreFocus,v=g===void 0?a.ignoreExternalFocusing:g,E=a.isBlocking,b=a.isAlert,T=a.isClickableOutsideFocusTrap,x=a.isDarkOverlay,C=a.onDismiss,S=a.layerProps,N=a.overlay,I=a.isOpen,F=a.titleAriaId,L=a.styles,z=a.subtitleAriaId,H=a.theme,$=a.topOffsetFixed,M=a.responsiveMode,j=a.onLayerDidMount,P=a.isModeless,B=a.dragOptions,K=a.onDismissed,A=a.enableAriaHiddenSiblings,O=a.popupProps,se=w.useRef(null),ae=w.useRef(null),de=Xa(ae,m==null?void 0:m.componentRef),le=w.useRef(null),ve=Xa(se,e),Ne=t6(ve),_e=Yf("ModalFocusTrapZone",m==null?void 0:m.id),Se=cT(),Fe=QX(),et=Fe.setTimeout,ot=Fe.clearTimeout,dt=w.useState(I),at=dt[0],nt=dt[1],me=w.useState(I),Oe=me[0],Ge=me[1],Ye=w.useState(bh),lt=Ye[0],ft=Ye[1],Ve=w.useState(),dn=Ve[0],Ln=Ve[1],Nn=Lg(!1),ne=Nn[0],fe=Nn[1],De=fe.toggle,Qe=fe.setFalse,ge=go(function(){return{onModalCloseTimer:0,allowTouchBodyScroll:l,scrollableContent:null,lastSetCoordinates:bh,events:new ro({})}}),Bt=(B||{}).keepInBounds,Qt=b??(E&&!P),vn=S===void 0?"":S.className,pt=cte(L,{theme:H,className:u,containerClassName:d,scrollableContentClassName:h,isOpen:I,isVisible:Oe,hasBeenOpened:ge.hasBeenOpened,modalRectangleTop:dn,topOffsetFixed:$,isModeless:P,layerClassName:vn,windowInnerHeight:Se==null?void 0:Se.innerHeight,isDefaultDragHandle:B&&!B.dragHandleSelector}),Tt=U(U({eventBubblingEnabled:!1},S),{onLayerDidMount:S&&S.onLayerDidMount?S.onLayerDidMount:j,insertFirst:(S==null?void 0:S.insertFirst)||P,className:pt.layer}),xt=w.useCallback(function(Wt){Wt?ge.allowTouchBodyScroll?Jj(Wt,ge.events):Zj(Wt,ge.events):ge.events.off(ge.scrollableContent),ge.scrollableContent=Wt},[ge]),$t=function(){var Wt=le.current,rt=Wt==null?void 0:Wt.getBoundingClientRect();rt&&($&&Ln(rt.top),Bt&&(ge.minPosition={x:-rt.left,y:-rt.top},ge.maxPosition={x:rt.left,y:rt.top}))},He=w.useCallback(function(Wt,rt){var Zn=ge.minPosition,qi=ge.maxPosition;return Bt&&Zn&&qi&&(rt=Math.max(Zn[Wt],rt),rt=Math.min(qi[Wt],rt)),rt},[Bt,ge]),rs=function(){var Wt;ge.lastSetCoordinates=bh,Qe(),ge.isInKeyboardMoveMode=!1,nt(!1),ft(bh),(Wt=ge.disposeOnKeyUp)===null||Wt===void 0||Wt.call(ge),K==null||K()},fh=w.useCallback(function(){Qe(),ge.isInKeyboardMoveMode=!1},[ge,Qe]),Do=w.useCallback(function(Wt,rt){ft(function(Zn){return{x:He("x",Zn.x+rt.delta.x),y:He("y",Zn.y+rt.delta.y)}})},[He]),va=w.useCallback(function(){ae.current&&ae.current.focus()},[]),ul=function(){var Wt=function(rt){if(rt.altKey&&rt.ctrlKey&&rt.keyCode===je.space){rt.preventDefault(),rt.stopPropagation();return}var Zn=rt.altKey||rt.keyCode===je.escape;if(ne&&Zn&&Qe(),ge.isInKeyboardMoveMode&&(rt.keyCode===je.escape||rt.keyCode===je.enter)&&(ge.isInKeyboardMoveMode=!1,rt.preventDefault(),rt.stopPropagation()),ge.isInKeyboardMoveMode){var qi=!0,Ro=dte(rt);switch(rt.keyCode){case je.escape:ft(ge.lastSetCoordinates);case je.enter:{ge.lastSetCoordinates=bh;break}case je.up:{ft(function(Ar){return{x:Ar.x,y:He("y",Ar.y-Ro)}});break}case je.down:{ft(function(Ar){return{x:Ar.x,y:He("y",Ar.y+Ro)}});break}case je.left:{ft(function(Ar){return{x:He("x",Ar.x-Ro),y:Ar.y}});break}case je.right:{ft(function(Ar){return{x:He("x",Ar.x+Ro),y:Ar.y}});break}default:qi=!1}qi&&(rt.preventDefault(),rt.stopPropagation())}};ge.lastSetCoordinates=lt,Qe(),ge.isInKeyboardMoveMode=!0,ge.events.on(Se,"keydown",Wt,!0),ge.disposeOnKeyDown=function(){ge.events.off(Se,"keydown",Wt,!0),ge.disposeOnKeyDown=void 0}},Nr=function(Wt){var rt,Zn;(rt=m==null?void 0:m.onBlur)===null||rt===void 0||rt.call(m,Wt),ge.lastSetCoordinates=bh,ge.isInKeyboardMoveMode=!1,(Zn=ge.disposeOnKeyDown)===null||Zn===void 0||Zn.call(ge)},Ki=function(){var Wt=function(rt){rt.altKey&&rt.ctrlKey&&rt.keyCode===je.space&&oi(ge.scrollableContent,rt.target)&&(De(),rt.preventDefault(),rt.stopPropagation())};ge.disposeOnKeyUp||(ge.events.on(Se,"keyup",Wt,!0),ge.disposeOnKeyUp=function(){ge.events.off(Se,"keyup",Wt,!0),ge.disposeOnKeyUp=void 0})};w.useEffect(function(){ot(ge.onModalCloseTimer),I&&(requestAnimationFrame(function(){return et($t,0)}),nt(!0),B&&Ki(),ge.hasBeenOpened=!0,Ge(!0)),!I&&at&&(ge.onModalCloseTimer=et(rs,parseFloat(m6)*1e3),Ge(!1))},[at,I]),L$(function(){ge.events.dispose()}),hte(a,ae);var _c=w.createElement(rd,U({},m,{id:_e,ref:le,componentRef:de,className:Fs(pt.main,m==null?void 0:m.className),elementToFocusOnDismiss:(n=m==null?void 0:m.elementToFocusOnDismiss)!==null&&n!==void 0?n:f,isClickableOutsideFocusTrap:(r=m==null?void 0:m.isClickableOutsideFocusTrap)!==null&&r!==void 0?r:P||T||!E,disableRestoreFocus:(s=m==null?void 0:m.disableRestoreFocus)!==null&&s!==void 0?s:v,forceFocusInsideTrap:((i=m==null?void 0:m.forceFocusInsideTrap)!==null&&i!==void 0?i:y)&&!P,firstFocusableSelector:(m==null?void 0:m.firstFocusableSelector)||p,focusPreviouslyFocusedInnerElement:(o=m==null?void 0:m.focusPreviouslyFocusedInnerElement)!==null&&o!==void 0?o:!0,onBlur:ge.isInKeyboardMoveMode?Nr:void 0}),B&&ge.isInKeyboardMoveMode&&w.createElement("div",{className:pt.keyboardMoveIconContainer},B.keyboardMoveIconProps?w.createElement(Ya,U({},B.keyboardMoveIconProps)):w.createElement(Ya,{iconName:"move",className:pt.keyboardMoveIcon})),w.createElement("div",{ref:xt,className:pt.scrollableContent,"data-is-scrollable":!0},B&&ne&&w.createElement(B.menu,{items:[{key:"move",text:B.moveMenuItemText,onClick:ul},{key:"close",text:B.closeMenuItemText,onClick:rs}],onDismiss:Qe,alignTargetEdge:!0,coverTarget:!0,directionalHint:Jn.topLeftEdge,directionalHintFixed:!0,shouldFocusOnMount:!0,target:ge.scrollableContent}),c));return at&&Ne>=(M||Cd.small)&&w.createElement(WP,U({ref:ve},Tt),w.createElement(yI,U({role:Qt?"alertdialog":"dialog",ariaLabelledBy:F,ariaDescribedBy:z,onDismiss:C,shouldRestoreFocus:!v,enableAriaHiddenSiblings:A,"aria-modal":!P},O),w.createElement("div",{className:pt.root,role:P?void 0:"document"},!P&&w.createElement(ote,U({"aria-hidden":!0,isDarkThemed:x,onClick:E?void 0:C,allowTouchBodyScroll:l},N)),B?w.createElement(lte,{handleSelector:B.dragHandleSelector||"#"+_e,preventDragSelector:"button",onStart:fh,onDragChange:Do,onStop:va,position:lt},_c):_c)))||null});g6.displayName="Modal";var y6=wr(g6,tte,void 0,{scope:"Modal",fields:["theme","styles","enableAriaHiddenSiblings"]});y6.displayName="Modal";var fte=Sr(),pte=function(t){un(e,t);function e(n){var r=t.call(this,n)||this;return Kl(r),r}return e.prototype.render=function(){var n=this.props,r=n.className,s=n.styles,i=n.theme;return this._classNames=fte(s,{theme:i,className:r}),w.createElement("div",{className:this._classNames.actions},w.createElement("div",{className:this._classNames.actionsRight},this._renderChildrenAsActions()))},e.prototype._renderChildrenAsActions=function(){var n=this;return w.Children.map(this.props.children,function(r){return r?w.createElement("span",{className:n._classNames.action},r):null})},e}(w.Component),mte={actions:"ms-Dialog-actions",action:"ms-Dialog-action",actionsRight:"ms-Dialog-actionsRight"},gte=function(t){var e=t.className,n=t.theme,r=es(mte,n);return{actions:[r.actions,{position:"relative",width:"100%",minHeight:"24px",lineHeight:"24px",margin:"16px 0 0",fontSize:"0",selectors:{".ms-Button":{lineHeight:"normal",verticalAlign:"middle"}}},e],action:[r.action,{margin:"0 4px"}],actionsRight:[r.actionsRight,{alignItems:"center",display:"flex",fontSize:"0",justifyContent:"flex-end",marginRight:"-4px"}]}},gN=wr(pte,gte,void 0,{scope:"DialogFooter"}),yte=Sr(),vte=w.createElement(gN,null).type,bte=function(t){un(e,t);function e(n){var r=t.call(this,n)||this;return Kl(r),r}return e.prototype.render=function(){var n=this.props,r=n.showCloseButton,s=n.className,i=n.closeButtonAriaLabel,o=n.onDismiss,a=n.subTextId,l=n.subText,u=n.titleProps,c=u===void 0?{}:u,d=n.titleId,h=n.title,f=n.type,p=n.styles,m=n.theme,y=n.draggableHeaderClassName,g=yte(p,{theme:m,className:s,isLargeHeader:f===La.largeHeader,isClose:f===La.close,draggableHeaderClassName:y}),v=this._groupChildren(),E;return l&&(E=w.createElement("p",{className:g.subText,id:a},l)),w.createElement("div",{className:g.content},w.createElement("div",{className:g.header},w.createElement("div",U({id:d,role:"heading","aria-level":1},c,{className:Fs(g.title,c.className)}),h),w.createElement("div",{className:g.topButton},this.props.topButtonsProps.map(function(b,T){return w.createElement(Nu,U({key:b.uniqueId||T},b))}),(f===La.close||r&&f!==La.largeHeader)&&w.createElement(Nu,{className:g.button,iconProps:{iconName:"Cancel"},ariaLabel:i,onClick:o}))),w.createElement("div",{className:g.inner},w.createElement("div",{className:g.innerContent},E,v.contents),v.footers))},e.prototype._groupChildren=function(){var n={footers:[],contents:[]};return w.Children.map(this.props.children,function(r){typeof r=="object"&&r!==null&&r.type===vte?n.footers.push(r):n.contents.push(r)}),n},e.defaultProps={showCloseButton:!1,className:"",topButtonsProps:[],closeButtonAriaLabel:"Close"},e=jf([JP],e),e}(w.Component),Ete={contentLgHeader:"ms-Dialog-lgHeader",close:"ms-Dialog--close",subText:"ms-Dialog-subText",header:"ms-Dialog-header",headerLg:"ms-Dialog--lgHeader",button:"ms-Dialog-button ms-Dialog-button--close",inner:"ms-Dialog-inner",content:"ms-Dialog-content",title:"ms-Dialog-title"},Tte=function(t){var e,n,r,s=t.className,i=t.theme,o=t.isLargeHeader,a=t.isClose,l=t.hidden,u=t.isMultiline,c=t.draggableHeaderClassName,d=i.palette,h=i.fonts,f=i.effects,p=i.semanticColors,m=es(Ete,i);return{content:[o&&[m.contentLgHeader,{borderTop:"4px solid "+d.themePrimary}],a&&m.close,{flexGrow:1,overflowY:"hidden"},s],subText:[m.subText,h.medium,{margin:"0 0 24px 0",color:p.bodySubtext,lineHeight:"1.5",wordWrap:"break-word",fontWeight:sn.regular}],header:[m.header,{position:"relative",width:"100%",boxSizing:"border-box"},a&&m.close,c&&[c,{cursor:"move"}]],button:[m.button,l&&{selectors:{".ms-Icon.ms-Icon--Cancel":{color:p.buttonText,fontSize:jo.medium}}}],inner:[m.inner,{padding:"0 24px 24px",selectors:(e={},e["@media (min-width: "+_2+"px) and (max-width: "+k2+"px)"]={padding:"0 16px 16px"},e)}],innerContent:[m.content,{position:"relative",width:"100%"}],title:[m.title,h.xLarge,{color:p.bodyText,margin:"0",minHeight:h.xLarge.fontSize,padding:"16px 46px 20px 24px",lineHeight:"normal",selectors:(n={},n["@media (min-width: "+_2+"px) and (max-width: "+k2+"px)"]={padding:"16px 46px 16px 16px"},n)},o&&{color:p.menuHeader},u&&{fontSize:h.xxLarge.fontSize}],topButton:[{display:"flex",flexDirection:"row",flexWrap:"nowrap",position:"absolute",top:"0",right:"0",padding:"15px 15px 0 0",selectors:(r={"> *":{flex:"0 0 auto"},".ms-Dialog-button":{color:p.buttonText},".ms-Dialog-button:hover":{color:p.buttonTextHovered,borderRadius:f.roundedCorner2}},r["@media (min-width: "+_2+"px) and (max-width: "+k2+"px)"]={padding:"15px 8px 0 0"},r)}]}},xte=wr(bte,Tte,void 0,{scope:"DialogContent"}),Cte=Sr(),Ste={isDarkOverlay:!1,isBlocking:!1,className:"",containerClassName:"",topOffsetFixed:!1,enableAriaHiddenSiblings:!0},wte={type:La.normal,className:"",topButtonsProps:[]},_te=function(t){un(e,t);function e(n){var r=t.call(this,n)||this;return r._getSubTextId=function(){var s=r.props,i=s.ariaDescribedById,o=s.modalProps,a=s.dialogContentProps,l=s.subText,u=o&&o.subtitleAriaId||i;return u||(u=(a&&a.subText||l)&&r._defaultSubTextId),u},r._getTitleTextId=function(){var s=r.props,i=s.ariaLabelledById,o=s.modalProps,a=s.dialogContentProps,l=s.title,u=o&&o.titleAriaId||i;return u||(u=(a&&a.title||l)&&r._defaultTitleTextId),u},r._id=Ds("Dialog"),r._defaultTitleTextId=r._id+"-title",r._defaultSubTextId=r._id+"-subText",r}return e.prototype.render=function(){var n,r,s,i=this.props,o=i.className,a=i.containerClassName,l=i.contentClassName,u=i.elementToFocusOnDismiss,c=i.firstFocusableSelector,d=i.forceFocusInsideTrap,h=i.styles,f=i.hidden,p=i.disableRestoreFocus,m=p===void 0?i.ignoreExternalFocusing:p,y=i.isBlocking,g=i.isClickableOutsideFocusTrap,v=i.isDarkOverlay,E=i.isOpen,b=E===void 0?!f:E,T=i.onDismiss,x=i.onDismissed,C=i.onLayerDidMount,S=i.responsiveMode,N=i.subText,I=i.theme,F=i.title,L=i.topButtonsProps,z=i.type,H=i.minWidth,$=i.maxWidth,M=i.modalProps,j=U({onLayerDidMount:C},M==null?void 0:M.layerProps),P,B;M!=null&&M.dragOptions&&!(!((n=M.dragOptions)===null||n===void 0)&&n.dragHandleSelector)&&(B=U({},M.dragOptions),P="ms-Dialog-draggable-header",B.dragHandleSelector="."+P);var K=U(U(U(U({},Ste),{elementToFocusOnDismiss:u,firstFocusableSelector:c,forceFocusInsideTrap:d,disableRestoreFocus:m,isClickableOutsideFocusTrap:g,responsiveMode:S,className:o,containerClassName:a,isBlocking:y,isDarkOverlay:v,onDismissed:x}),M),{dragOptions:B,layerProps:j,isOpen:b}),A=U(U(U({className:l,subText:N,title:F,topButtonsProps:L,type:z},wte),i.dialogContentProps),{draggableHeaderClassName:P,titleProps:U({id:((r=i.dialogContentProps)===null||r===void 0?void 0:r.titleId)||this._defaultTitleTextId},(s=i.dialogContentProps)===null||s===void 0?void 0:s.titleProps)}),O=Cte(h,{theme:I,className:K.className,containerClassName:K.containerClassName,hidden:f,dialogDefaultMinWidth:H,dialogDefaultMaxWidth:$});return w.createElement(y6,U({},K,{className:O.root,containerClassName:O.main,onDismiss:T||K.onDismiss,subtitleAriaId:this._getSubTextId(),titleAriaId:this._getTitleTextId()}),w.createElement(xte,U({subTextId:this._defaultSubTextId,showCloseButton:K.isBlocking,onDismiss:T},A),i.children))},e.defaultProps={hidden:!0},e=jf([JP],e),e}(w.Component),kte={root:"ms-Dialog"},Ite=function(t){var e,n=t.className,r=t.containerClassName,s=t.dialogDefaultMinWidth,i=s===void 0?"288px":s,o=t.dialogDefaultMaxWidth,a=o===void 0?"340px":o,l=t.hidden,u=t.theme,c=es(kte,u);return{root:[c.root,u.fonts.medium,n],main:[{width:i,outline:"3px solid transparent",selectors:(e={},e["@media (min-width: "+_$+"px)"]={width:"auto",maxWidth:a,minWidth:i},e)},!l&&{display:"flex"},r]}},Sd=wr(_te,Ite,void 0,{scope:"Dialog"});Sd.displayName="Dialog";function Nte(t,e){t===void 0&&(t="");var n={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons"',src:"url('"+t+"fabric-icons-a13498cf.woff') format('woff')"},icons:{GlobalNavButton:"",ChevronDown:"",ChevronUp:"",Edit:"",Add:"",Cancel:"",More:"",Settings:"",Mail:"",Filter:"",Search:"",Share:"",BlockedSite:"",FavoriteStar:"",FavoriteStarFill:"",CheckMark:"",Delete:"",ChevronLeft:"",ChevronRight:"",Calendar:"",Megaphone:"",Undo:"",Flag:"",Page:"",Pinned:"",View:"",Clear:"",Download:"",Upload:"",Folder:"",Sort:"",AlignRight:"",AlignLeft:"",Tag:"",AddFriend:"",Info:"",SortLines:"",List:"",CircleRing:"",Heart:"",HeartFill:"",Tiles:"",Embed:"",Glimmer:"",Ascending:"",Descending:"",SortUp:"",SortDown:"",SyncToPC:"",LargeGrid:"",SkypeCheck:"",SkypeClock:"",SkypeMinus:"",ClearFilter:"",Flow:"",StatusCircleCheckmark:"",MoreVertical:""}};_r(n,e)}function Ate(t,e){t===void 0&&(t="");var n={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-0"',src:"url('"+t+"fabric-icons-0-467ee27f.woff') format('woff')"},icons:{PageLink:"",CommentSolid:"",ChangeEntitlements:"",Installation:"",WebAppBuilderModule:"",WebAppBuilderFragment:"",WebAppBuilderSlot:"",BullseyeTargetEdit:"",WebAppBuilderFragmentCreate:"",PageData:"",PageHeaderEdit:"",ProductList:"",UnpublishContent:"",DependencyAdd:"",DependencyRemove:"",EntitlementPolicy:"",EntitlementRedemption:"",SchoolDataSyncLogo:"",PinSolid12:"",PinSolidOff12:"",AddLink:"",SharepointAppIcon16:"",DataflowsLink:"",TimePicker:"",UserWarning:"",ComplianceAudit:"",InternetSharing:"",Brightness:"",MapPin:"",Airplane:"",Tablet:"",QuickNote:"",Video:"",People:"",Phone:"",Pin:"",Shop:"",Stop:"",Link:"",AllApps:"",Zoom:"",ZoomOut:"",Microphone:"",Camera:"",Attach:"",Send:"",FavoriteList:"",PageSolid:"",Forward:"",Back:"",Refresh:"",Lock:"",ReportHacked:"",EMI:"",MiniLink:"",Blocked:"",ReadingMode:"",Favicon:"",Remove:"",Checkbox:"",CheckboxComposite:"",CheckboxFill:"",CheckboxIndeterminate:"",CheckboxCompositeReversed:"",BackToWindow:"",FullScreen:"",Print:"",Up:"",Down:"",OEM:"",Save:"",ReturnKey:"",Cloud:"",Flashlight:"",CommandPrompt:"",Sad:"",RealEstate:"",SIPMove:"",EraseTool:"",GripperTool:"",Dialpad:"",PageLeft:"",PageRight:"",MultiSelect:"",KeyboardClassic:"",Play:"",Pause:"",InkingTool:"",Emoji2:"",GripperBarHorizontal:"",System:"",Personalize:"",SearchAndApps:"",Globe:"",EaseOfAccess:"",ContactInfo:"",Unpin:"",Contact:"",Memo:"",IncomingCall:""}};_r(n,e)}function Dte(t,e){t===void 0&&(t="");var n={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-1"',src:"url('"+t+"fabric-icons-1-4d521695.woff') format('woff')"},icons:{Paste:"",WindowsLogo:"",Error:"",GripperBarVertical:"",Unlock:"",Slideshow:"",Trim:"",AutoEnhanceOn:"",AutoEnhanceOff:"",Color:"",SaveAs:"",Light:"",Filters:"",AspectRatio:"",Contrast:"",Redo:"",Crop:"",PhotoCollection:"",Album:"",Rotate:"",PanoIndicator:"",Translate:"",RedEye:"",ViewOriginal:"",ThumbnailView:"",Package:"",Telemarketer:"",Warning:"",Financial:"",Education:"",ShoppingCart:"",Train:"",Move:"",TouchPointer:"",Merge:"",TurnRight:"",Ferry:"",Highlight:"",PowerButton:"",Tab:"",Admin:"",TVMonitor:"",Speakers:"",Game:"",HorizontalTabKey:"",UnstackSelected:"",StackIndicator:"",Nav2DMapView:"",StreetsideSplitMinimize:"",Car:"",Bus:"",EatDrink:"",SeeDo:"",LocationCircle:"",Home:"",SwitcherStartEnd:"",ParkingLocation:"",IncidentTriangle:"",Touch:"",MapDirections:"",CaretHollow:"",CaretSolid:"",History:"",Location:"",MapLayers:"",SearchNearby:"",Work:"",Recent:"",Hotel:"",Bank:"",LocationDot:"",Dictionary:"",ChromeBack:"",FolderOpen:"",PinnedFill:"",RevToggleKey:"",USB:"",Previous:"",Next:"",Sync:"",Help:"",Emoji:"",MailForward:"",ClosePane:"",OpenPane:"",PreviewLink:"",ZoomIn:"",Bookmarks:"",Document:"",ProtectedDocument:"",OpenInNewWindow:"",MailFill:"",ViewAll:"",Switch:"",Rename:"",Go:"",Remote:"",SelectAll:"",Orientation:"",Import:""}};_r(n,e)}function Rte(t,e){t===void 0&&(t="");var n={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-2"',src:"url('"+t+"fabric-icons-2-63c99abf.woff') format('woff')"},icons:{Picture:"",ChromeClose:"",ShowResults:"",Message:"",CalendarDay:"",CalendarWeek:"",MailReplyAll:"",Read:"",Cut:"",PaymentCard:"",Copy:"",Important:"",MailReply:"",GotoToday:"",Font:"",FontColor:"",FolderFill:"",Permissions:"",DisableUpdates:"",Unfavorite:"",Italic:"",Underline:"",Bold:"",MoveToFolder:"",Dislike:"",Like:"",AlignCenter:"",OpenFile:"",ClearSelection:"",FontDecrease:"",FontIncrease:"",FontSize:"",CellPhone:"",RepeatOne:"",RepeatAll:"",Calculator:"",Library:"",PostUpdate:"",NewFolder:"",CalendarReply:"",UnsyncFolder:"",SyncFolder:"",BlockContact:"",Accept:"",BulletedList:"",Preview:"",News:"",Chat:"",Group:"",World:"",Comment:"",DockLeft:"",DockRight:"",Repair:"",Accounts:"",Street:"",RadioBullet:"",Stopwatch:"",Clock:"",WorldClock:"",AlarmClock:"",Photo:"",ActionCenter:"",Hospital:"",Timer:"",FullCircleMask:"",LocationFill:"",ChromeMinimize:"",ChromeRestore:"",Annotation:"",Fingerprint:"",Handwriting:"",ChromeFullScreen:"",Completed:"",Label:"",FlickDown:"",FlickUp:"",FlickLeft:"",FlickRight:"",MiniExpand:"",MiniContract:"",Streaming:"",MusicInCollection:"",OneDriveLogo:"",CompassNW:"",Code:"",LightningBolt:"",CalculatorMultiply:"",CalculatorAddition:"",CalculatorSubtract:"",CalculatorPercentage:"",CalculatorEqualTo:"",PrintfaxPrinterFile:"",StorageOptical:"",Communications:"",Headset:"",Health:"",Webcam2:"",FrontCamera:"",ChevronUpSmall:""}};_r(n,e)}function Fte(t,e){t===void 0&&(t="");var n={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-3"',src:"url('"+t+"fabric-icons-3-089e217a.woff') format('woff')"},icons:{ChevronDownSmall:"",ChevronLeftSmall:"",ChevronRightSmall:"",ChevronUpMed:"",ChevronDownMed:"",ChevronLeftMed:"",ChevronRightMed:"",Devices2:"",PC1:"",PresenceChickletVideo:"",Reply:"",HalfAlpha:"",ConstructionCone:"",DoubleChevronLeftMed:"",Volume0:"",Volume1:"",Volume2:"",Volume3:"",Chart:"",Robot:"",Manufacturing:"",LockSolid:"",FitPage:"",FitWidth:"",BidiLtr:"",BidiRtl:"",RightDoubleQuote:"",Sunny:"",CloudWeather:"",Cloudy:"",PartlyCloudyDay:"",PartlyCloudyNight:"",ClearNight:"",RainShowersDay:"",Rain:"",Thunderstorms:"",RainSnow:"",Snow:"",BlowingSnow:"",Frigid:"",Fog:"",Squalls:"",Duststorm:"",Unknown:"",Precipitation:"",Ribbon:"",AreaChart:"",Assign:"",FlowChart:"",CheckList:"",Diagnostic:"",Generate:"",LineChart:"",Equalizer:"",BarChartHorizontal:"",BarChartVertical:"",Freezing:"",FunnelChart:"",Processing:"",Quantity:"",ReportDocument:"",StackColumnChart:"",SnowShowerDay:"",HailDay:"",WorkFlow:"",HourGlass:"",StoreLogoMed20:"",TimeSheet:"",TriangleSolid:"",UpgradeAnalysis:"",VideoSolid:"",RainShowersNight:"",SnowShowerNight:"",Teamwork:"",HailNight:"",PeopleAdd:"",Glasses:"",DateTime2:"",Shield:"",Header1:"",PageAdd:"",NumberedList:"",PowerBILogo:"",Info2:"",MusicInCollectionFill:"",Asterisk:"",ErrorBadge:"",CircleFill:"",Record2:"",AllAppsMirrored:"",BookmarksMirrored:"",BulletedListMirrored:"",CaretHollowMirrored:"",CaretSolidMirrored:"",ChromeBackMirrored:"",ClearSelectionMirrored:"",ClosePaneMirrored:"",DockLeftMirrored:"",DoubleChevronLeftMedMirrored:"",GoMirrored:""}};_r(n,e)}function Ote(t,e){t===void 0&&(t="");var n={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-4"',src:"url('"+t+"fabric-icons-4-a656cc0a.woff') format('woff')"},icons:{HelpMirrored:"",ImportMirrored:"",ImportAllMirrored:"",ListMirrored:"",MailForwardMirrored:"",MailReplyMirrored:"",MailReplyAllMirrored:"",MiniContractMirrored:"",MiniExpandMirrored:"",OpenPaneMirrored:"",ParkingLocationMirrored:"",SendMirrored:"",ShowResultsMirrored:"",ThumbnailViewMirrored:"",Media:"",Devices3:"",Focus:"",VideoLightOff:"",Lightbulb:"",StatusTriangle:"",VolumeDisabled:"",Puzzle:"",EmojiNeutral:"",EmojiDisappointed:"",HomeSolid:"",Ringer:"",PDF:"",HeartBroken:"",StoreLogo16:"",MultiSelectMirrored:"",Broom:"",AddToShoppingList:"",Cocktails:"",Wines:"",Articles:"",Cycling:"",DietPlanNotebook:"",Pill:"",ExerciseTracker:"",HandsFree:"",Medical:"",Running:"",Weights:"",Trackers:"",AddNotes:"",AllCurrency:"",BarChart4:"",CirclePlus:"",Coffee:"",Cotton:"",Market:"",Money:"",PieDouble:"",PieSingle:"",RemoveFilter:"",Savings:"",Sell:"",StockDown:"",StockUp:"",Lamp:"",Source:"",MSNVideos:"",Cricket:"",Golf:"",Baseball:"",Soccer:"",MoreSports:"",AutoRacing:"",CollegeHoops:"",CollegeFootball:"",ProFootball:"",ProHockey:"",Rugby:"",SubstitutionsIn:"",Tennis:"",Arrivals:"",Design:"",Website:"",Drop:"",HistoricalWeather:"",SkiResorts:"",Snowflake:"",BusSolid:"",FerrySolid:"",AirplaneSolid:"",TrainSolid:"",Ticket:"",WifiWarning4:"",Devices4:"",AzureLogo:"",BingLogo:"",MSNLogo:"",OutlookLogoInverse:"",OfficeLogo:"",SkypeLogo:"",Door:"",EditMirrored:"",GiftCard:"",DoubleBookmark:"",StatusErrorFull:""}};_r(n,e)}function $te(t,e){t===void 0&&(t="");var n={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-5"',src:"url('"+t+"fabric-icons-5-f95ba260.woff') format('woff')"},icons:{Certificate:"",FastForward:"",Rewind:"",Photo2:"",OpenSource:"",Movers:"",CloudDownload:"",Family:"",WindDirection:"",Bug:"",SiteScan:"",BrowserScreenShot:"",F12DevTools:"",CSS:"",JS:"",DeliveryTruck:"",ReminderPerson:"",ReminderGroup:"",ReminderTime:"",TabletMode:"",Umbrella:"",NetworkTower:"",CityNext:"",CityNext2:"",Section:"",OneNoteLogoInverse:"",ToggleFilled:"",ToggleBorder:"",SliderThumb:"",ToggleThumb:"",Documentation:"",Badge:"",Giftbox:"",VisualStudioLogo:"",HomeGroup:"",ExcelLogoInverse:"",WordLogoInverse:"",PowerPointLogoInverse:"",Cafe:"",SpeedHigh:"",Commitments:"",ThisPC:"",MusicNote:"",MicOff:"",PlaybackRate1x:"",EdgeLogo:"",CompletedSolid:"",AlbumRemove:"",MessageFill:"",TabletSelected:"",MobileSelected:"",LaptopSelected:"",TVMonitorSelected:"",DeveloperTools:"",Shapes:"",InsertTextBox:"",LowerBrightness:"",WebComponents:"",OfflineStorage:"",DOM:"",CloudUpload:"",ScrollUpDown:"",DateTime:"",Event:"",Cake:"",Org:"",PartyLeader:"",DRM:"",CloudAdd:"",AppIconDefault:"",Photo2Add:"",Photo2Remove:"",Calories:"",POI:"",AddTo:"",RadioBtnOff:"",RadioBtnOn:"",ExploreContent:"",Product:"",ProgressLoopInner:"",ProgressLoopOuter:"",Blocked2:"",FangBody:"",Toolbox:"",PageHeader:"",ChatInviteFriend:"",Brush:"",Shirt:"",Crown:"",Diamond:"",ScaleUp:"",QRCode:"",Feedback:"",SharepointLogoInverse:"",YammerLogo:"",Hide:"",Uneditable:"",ReturnToSession:"",OpenFolderHorizontal:"",CalendarMirrored:""}};_r(n,e)}function Lte(t,e){t===void 0&&(t="");var n={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-6"',src:"url('"+t+"fabric-icons-6-ef6fd590.woff') format('woff')"},icons:{SwayLogoInverse:"",OutOfOffice:"",Trophy:"",ReopenPages:"",EmojiTabSymbols:"",AADLogo:"",AccessLogo:"",AdminALogoInverse32:"",AdminCLogoInverse32:"",AdminDLogoInverse32:"",AdminELogoInverse32:"",AdminLLogoInverse32:"",AdminMLogoInverse32:"",AdminOLogoInverse32:"",AdminPLogoInverse32:"",AdminSLogoInverse32:"",AdminYLogoInverse32:"",DelveLogoInverse:"",ExchangeLogoInverse:"",LyncLogo:"",OfficeVideoLogoInverse:"",SocialListeningLogo:"",VisioLogoInverse:"",Balloons:"",Cat:"",MailAlert:"",MailCheck:"",MailLowImportance:"",MailPause:"",MailRepeat:"",SecurityGroup:"",Table:"",VoicemailForward:"",VoicemailReply:"",Waffle:"",RemoveEvent:"",EventInfo:"",ForwardEvent:"",WipePhone:"",AddOnlineMeeting:"",JoinOnlineMeeting:"",RemoveLink:"",PeopleBlock:"",PeopleRepeat:"",PeopleAlert:"",PeoplePause:"",TransferCall:"",AddPhone:"",UnknownCall:"",NoteReply:"",NoteForward:"",NotePinned:"",RemoveOccurrence:"",Timeline:"",EditNote:"",CircleHalfFull:"",Room:"",Unsubscribe:"",Subscribe:"",HardDrive:"",RecurringTask:"",TaskManager:"",TaskManagerMirrored:"",Combine:"",Split:"",DoubleChevronUp:"",DoubleChevronLeft:"",DoubleChevronRight:"",TextBox:"",TextField:"",NumberField:"",Dropdown:"",PenWorkspace:"",BookingsLogo:"",ClassNotebookLogoInverse:"",DelveAnalyticsLogo:"",DocsLogoInverse:"",Dynamics365Logo:"",DynamicSMBLogo:"",OfficeAssistantLogo:"",OfficeStoreLogo:"",OneNoteEduLogoInverse:"",PlannerLogo:"",PowerApps:"",Suitcase:"",ProjectLogoInverse:"",CaretLeft8:"",CaretRight8:"",CaretUp8:"",CaretDown8:"",CaretLeftSolid8:"",CaretRightSolid8:"",CaretUpSolid8:"",CaretDownSolid8:"",ClearFormatting:"",Superscript:"",Subscript:"",Strikethrough:"",Export:"",ExportMirrored:""}};_r(n,e)}function Pte(t,e){t===void 0&&(t="");var n={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-7"',src:"url('"+t+"fabric-icons-7-2b97bb99.woff') format('woff')"},icons:{SingleBookmark:"",SingleBookmarkSolid:"",DoubleChevronDown:"",FollowUser:"",ReplyAll:"",WorkforceManagement:"",RecruitmentManagement:"",Questionnaire:"",ManagerSelfService:"",ProductionFloorManagement:"",ProductRelease:"",ProductVariant:"",ReplyMirrored:"",ReplyAllMirrored:"",Medal:"",AddGroup:"",QuestionnaireMirrored:"",CloudImportExport:"",TemporaryUser:"",CaretSolid16:"",GroupedDescending:"",GroupedAscending:"",AwayStatus:"",MyMoviesTV:"",GenericScan:"",AustralianRules:"",WifiEthernet:"",TrackersMirrored:"",DateTimeMirrored:"",StopSolid:"",DoubleChevronUp12:"",DoubleChevronDown12:"",DoubleChevronLeft12:"",DoubleChevronRight12:"",CalendarAgenda:"",ConnectVirtualMachine:"",AddEvent:"",AssetLibrary:"",DataConnectionLibrary:"",DocLibrary:"",FormLibrary:"",FormLibraryMirrored:"",ReportLibrary:"",ReportLibraryMirrored:"",ContactCard:"",CustomList:"",CustomListMirrored:"",IssueTracking:"",IssueTrackingMirrored:"",PictureLibrary:"",OfficeAddinsLogo:"",OfflineOneDriveParachute:"",OfflineOneDriveParachuteDisabled:"",TriangleSolidUp12:"",TriangleSolidDown12:"",TriangleSolidLeft12:"",TriangleSolidRight12:"",TriangleUp12:"",TriangleDown12:"",TriangleLeft12:"",TriangleRight12:"",ArrowUpRight8:"",ArrowDownRight8:"",DocumentSet:"",GoToDashboard:"",DelveAnalytics:"",ArrowUpRightMirrored8:"",ArrowDownRightMirrored8:"",CompanyDirectory:"",OpenEnrollment:"",CompanyDirectoryMirrored:"",OneDriveAdd:"",ProfileSearch:"",Header2:"",Header3:"",Header4:"",RingerSolid:"",Eyedropper:"",MarketDown:"",CalendarWorkWeek:"",SidePanel:"",GlobeFavorite:"",CaretTopLeftSolid8:"",CaretTopRightSolid8:"",ViewAll2:"",DocumentReply:"",PlayerSettings:"",ReceiptForward:"",ReceiptReply:"",ReceiptCheck:"",Fax:"",RecurringEvent:"",ReplyAlt:"",ReplyAllAlt:"",EditStyle:"",EditMail:"",Lifesaver:"",LifesaverLock:"",InboxCheck:"",FolderSearch:""}};_r(n,e)}function Mte(t,e){t===void 0&&(t="");var n={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-8"',src:"url('"+t+"fabric-icons-8-6fdf1528.woff') format('woff')"},icons:{CollapseMenu:"",ExpandMenu:"",Boards:"",SunAdd:"",SunQuestionMark:"",LandscapeOrientation:"",DocumentSearch:"",PublicCalendar:"",PublicContactCard:"",PublicEmail:"",PublicFolder:"",WordDocument:"",PowerPointDocument:"",ExcelDocument:"",GroupedList:"",ClassroomLogo:"",Sections:"",EditPhoto:"",Starburst:"",ShareiOS:"",AirTickets:"",PencilReply:"",Tiles2:"",SkypeCircleCheck:"",SkypeCircleClock:"",SkypeCircleMinus:"",SkypeMessage:"",ClosedCaption:"",ATPLogo:"",OfficeFormsLogoInverse:"",RecycleBin:"",EmptyRecycleBin:"",Hide2:"",Breadcrumb:"",BirthdayCake:"",TimeEntry:"",CRMProcesses:"",PageEdit:"",PageArrowRight:"",PageRemove:"",Database:"",DataManagementSettings:"",CRMServices:"",EditContact:"",ConnectContacts:"",AppIconDefaultAdd:"",AppIconDefaultList:"",ActivateOrders:"",DeactivateOrders:"",ProductCatalog:"",ScatterChart:"",AccountActivity:"",DocumentManagement:"",CRMReport:"",KnowledgeArticle:"",Relationship:"",HomeVerify:"",ZipFolder:"",SurveyQuestions:"",TextDocument:"",TextDocumentShared:"",PageCheckedOut:"",PageShared:"",SaveAndClose:"",Script:"",Archive:"",ActivityFeed:"",Compare:"",EventDate:"",ArrowUpRight:"",CaretRight:"",SetAction:"",ChatBot:"",CaretSolidLeft:"",CaretSolidDown:"",CaretSolidRight:"",CaretSolidUp:"",PowerAppsLogo:"",PowerApps2Logo:"",SearchIssue:"",SearchIssueMirrored:"",FabricAssetLibrary:"",FabricDataConnectionLibrary:"",FabricDocLibrary:"",FabricFormLibrary:"",FabricFormLibraryMirrored:"",FabricReportLibrary:"",FabricReportLibraryMirrored:"",FabricPublicFolder:"",FabricFolderSearch:"",FabricMovetoFolder:"",FabricUnsyncFolder:"",FabricSyncFolder:"",FabricOpenFolderHorizontal:"",FabricFolder:"",FabricFolderFill:"",FabricNewFolder:"",FabricPictureLibrary:"",PhotoVideoMedia:"",AddFavorite:""}};_r(n,e)}function Bte(t,e){t===void 0&&(t="");var n={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-9"',src:"url('"+t+"fabric-icons-9-c6162b42.woff') format('woff')"},icons:{AddFavoriteFill:"",BufferTimeBefore:"",BufferTimeAfter:"",BufferTimeBoth:"",PublishContent:"",ClipboardList:"",ClipboardListMirrored:"",CannedChat:"",SkypeForBusinessLogo:"",TabCenter:"",PageCheckedin:"",PageList:"",ReadOutLoud:"",CaretBottomLeftSolid8:"",CaretBottomRightSolid8:"",FolderHorizontal:"",MicrosoftStaffhubLogo:"",GiftboxOpen:"",StatusCircleOuter:"",StatusCircleInner:"",StatusCircleRing:"",StatusTriangleOuter:"",StatusTriangleInner:"",StatusTriangleExclamation:"",StatusCircleExclamation:"",StatusCircleErrorX:"",StatusCircleInfo:"",StatusCircleBlock:"",StatusCircleBlock2:"",StatusCircleQuestionMark:"",StatusCircleSync:"",Toll:"",ExploreContentSingle:"",CollapseContent:"",CollapseContentSingle:"",InfoSolid:"",GroupList:"",ProgressRingDots:"",CaloriesAdd:"",BranchFork:"",MuteChat:"",AddHome:"",AddWork:"",MobileReport:"",ScaleVolume:"",HardDriveGroup:"",FastMode:"",ToggleLeft:"",ToggleRight:"",TriangleShape:"",RectangleShape:"",CubeShape:"",Trophy2:"",BucketColor:"",BucketColorFill:"",Taskboard:"",SingleColumn:"",DoubleColumn:"",TripleColumn:"",ColumnLeftTwoThirds:"",ColumnRightTwoThirds:"",AccessLogoFill:"",AnalyticsLogo:"",AnalyticsQuery:"",NewAnalyticsQuery:"",AnalyticsReport:"",WordLogo:"",WordLogoFill:"",ExcelLogo:"",ExcelLogoFill:"",OneNoteLogo:"",OneNoteLogoFill:"",OutlookLogo:"",OutlookLogoFill:"",PowerPointLogo:"",PowerPointLogoFill:"",PublisherLogo:"",PublisherLogoFill:"",ScheduleEventAction:"",FlameSolid:"",ServerProcesses:"",Server:"",SaveAll:"",LinkedInLogo:"",Decimals:"",SidePanelMirrored:"",ProtectRestrict:"",Blog:"",UnknownMirrored:"",PublicContactCardMirrored:"",GridViewSmall:"",GridViewMedium:"",GridViewLarge:"",Step:"",StepInsert:"",StepShared:"",StepSharedAdd:"",StepSharedInsert:"",ViewDashboard:"",ViewList:""}};_r(n,e)}function zte(t,e){t===void 0&&(t="");var n={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-10"',src:"url('"+t+"fabric-icons-10-c4ded8e4.woff') format('woff')"},icons:{ViewListGroup:"",ViewListTree:"",TriggerAuto:"",TriggerUser:"",PivotChart:"",StackedBarChart:"",StackedLineChart:"",BuildQueue:"",BuildQueueNew:"",UserFollowed:"",ContactLink:"",Stack:"",Bullseye:"",VennDiagram:"",FiveTileGrid:"",FocalPoint:"",Insert:"",RingerRemove:"",TeamsLogoInverse:"",TeamsLogo:"",TeamsLogoFill:"",SkypeForBusinessLogoFill:"",SharepointLogo:"",SharepointLogoFill:"",DelveLogo:"",DelveLogoFill:"",OfficeVideoLogo:"",OfficeVideoLogoFill:"",ExchangeLogo:"",ExchangeLogoFill:"",Signin:"",DocumentApproval:"",CloneToDesktop:"",InstallToDrive:"",Blur:"",Build:"",ProcessMetaTask:"",BranchFork2:"",BranchLocked:"",BranchCommit:"",BranchCompare:"",BranchMerge:"",BranchPullRequest:"",BranchSearch:"",BranchShelveset:"",RawSource:"",MergeDuplicate:"",RowsGroup:"",RowsChild:"",Deploy:"",Redeploy:"",ServerEnviroment:"",VisioDiagram:"",HighlightMappedShapes:"",TextCallout:"",IconSetsFlag:"",VisioLogo:"",VisioLogoFill:"",VisioDocument:"",TimelineProgress:"",TimelineDelivery:"",Backlog:"",TeamFavorite:"",TaskGroup:"",TaskGroupMirrored:"",ScopeTemplate:"",AssessmentGroupTemplate:"",NewTeamProject:"",CommentAdd:"",CommentNext:"",CommentPrevious:"",ShopServer:"",LocaleLanguage:"",QueryList:"",UserSync:"",UserPause:"",StreamingOff:"",ArrowTallUpLeft:"",ArrowTallUpRight:"",ArrowTallDownLeft:"",ArrowTallDownRight:"",FieldEmpty:"",FieldFilled:"",FieldChanged:"",FieldNotChanged:"",RingerOff:"",PlayResume:"",BulletedList2:"",BulletedList2Mirrored:"",ImageCrosshair:"",GitGraph:"",Repo:"",RepoSolid:"",FolderQuery:"",FolderList:"",FolderListMirrored:"",LocationOutline:"",POISolid:"",CalculatorNotEqualTo:"",BoxSubtractSolid:""}};_r(n,e)}function Hte(t,e){t===void 0&&(t="");var n={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-11"',src:"url('"+t+"fabric-icons-11-2a8393d6.woff') format('woff')"},icons:{BoxAdditionSolid:"",BoxMultiplySolid:"",BoxPlaySolid:"",BoxCheckmarkSolid:"",CirclePauseSolid:"",CirclePause:"",MSNVideosSolid:"",CircleStopSolid:"",CircleStop:"",NavigateBack:"",NavigateBackMirrored:"",NavigateForward:"",NavigateForwardMirrored:"",UnknownSolid:"",UnknownMirroredSolid:"",CircleAddition:"",CircleAdditionSolid:"",FilePDB:"",FileTemplate:"",FileSQL:"",FileJAVA:"",FileASPX:"",FileCSS:"",FileSass:"",FileLess:"",FileHTML:"",JavaScriptLanguage:"",CSharpLanguage:"",CSharp:"",VisualBasicLanguage:"",VB:"",CPlusPlusLanguage:"",CPlusPlus:"",FSharpLanguage:"",FSharp:"",TypeScriptLanguage:"",PythonLanguage:"",PY:"",CoffeeScript:"",MarkDownLanguage:"",FullWidth:"",FullWidthEdit:"",Plug:"",PlugSolid:"",PlugConnected:"",PlugDisconnected:"",UnlockSolid:"",Variable:"",Parameter:"",CommentUrgent:"",Storyboard:"",DiffInline:"",DiffSideBySide:"",ImageDiff:"",ImagePixel:"",FileBug:"",FileCode:"",FileComment:"",BusinessHoursSign:"",FileImage:"",FileSymlink:"",AutoFillTemplate:"",WorkItem:"",WorkItemBug:"",LogRemove:"",ColumnOptions:"",Packages:"",BuildIssue:"",AssessmentGroup:"",VariableGroup:"",FullHistory:"",Wheelchair:"",SingleColumnEdit:"",DoubleColumnEdit:"",TripleColumnEdit:"",ColumnLeftTwoThirdsEdit:"",ColumnRightTwoThirdsEdit:"",StreamLogo:"",PassiveAuthentication:"",AlertSolid:"",MegaphoneSolid:"",TaskSolid:"",ConfigurationSolid:"",BugSolid:"",CrownSolid:"",Trophy2Solid:"",QuickNoteSolid:"",ConstructionConeSolid:"",PageListSolid:"",PageListMirroredSolid:"",StarburstSolid:"",ReadingModeSolid:"",SadSolid:"",HealthSolid:"",ShieldSolid:"",GiftBoxSolid:"",ShoppingCartSolid:"",MailSolid:"",ChatSolid:"",RibbonSolid:""}};_r(n,e)}function Ute(t,e){t===void 0&&(t="");var n={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-12"',src:"url('"+t+"fabric-icons-12-7e945a1e.woff') format('woff')"},icons:{FinancialSolid:"",FinancialMirroredSolid:"",HeadsetSolid:"",PermissionsSolid:"",ParkingSolid:"",ParkingMirroredSolid:"",DiamondSolid:"",AsteriskSolid:"",OfflineStorageSolid:"",BankSolid:"",DecisionSolid:"",Parachute:"",ParachuteSolid:"",FiltersSolid:"",ColorSolid:"",ReviewSolid:"",ReviewRequestSolid:"",ReviewRequestMirroredSolid:"",ReviewResponseSolid:"",FeedbackRequestSolid:"",FeedbackRequestMirroredSolid:"",FeedbackResponseSolid:"",WorkItemBar:"",WorkItemBarSolid:"",Separator:"",NavigateExternalInline:"",PlanView:"",TimelineMatrixView:"",EngineeringGroup:"",ProjectCollection:"",CaretBottomRightCenter8:"",CaretBottomLeftCenter8:"",CaretTopRightCenter8:"",CaretTopLeftCenter8:"",DonutChart:"",ChevronUnfold10:"",ChevronFold10:"",DoubleChevronDown8:"",DoubleChevronUp8:"",DoubleChevronLeft8:"",DoubleChevronRight8:"",ChevronDownEnd6:"",ChevronUpEnd6:"",ChevronLeftEnd6:"",ChevronRightEnd6:"",ContextMenu:"",AzureAPIManagement:"",AzureServiceEndpoint:"",VSTSLogo:"",VSTSAltLogo1:"",VSTSAltLogo2:"",FileTypeSolution:"",WordLogoInverse16:"",WordLogo16:"",WordLogoFill16:"",PowerPointLogoInverse16:"",PowerPointLogo16:"",PowerPointLogoFill16:"",ExcelLogoInverse16:"",ExcelLogo16:"",ExcelLogoFill16:"",OneNoteLogoInverse16:"",OneNoteLogo16:"",OneNoteLogoFill16:"",OutlookLogoInverse16:"",OutlookLogo16:"",OutlookLogoFill16:"",PublisherLogoInverse16:"",PublisherLogo16:"",PublisherLogoFill16:"",VisioLogoInverse16:"",VisioLogo16:"",VisioLogoFill16:"",TestBeaker:"",TestBeakerSolid:"",TestExploreSolid:"",TestAutoSolid:"",TestUserSolid:"",TestImpactSolid:"",TestPlan:"",TestStep:"",TestParameter:"",TestSuite:"",TestCase:"",Sprint:"",SignOut:"",TriggerApproval:"",Rocket:"",AzureKeyVault:"",Onboarding:"",Transition:"",LikeSolid:"",DislikeSolid:"",CRMCustomerInsightsApp:"",EditCreate:"",PlayReverseResume:"",PlayReverse:"",SearchData:"",UnSetColor:"",DeclineCall:""}};_r(n,e)}function Wte(t,e){t===void 0&&(t="");var n={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-13"',src:"url('"+t+"fabric-icons-13-c3989a02.woff') format('woff')"},icons:{RectangularClipping:"",TeamsLogo16:"",TeamsLogoFill16:"",Spacer:"",SkypeLogo16:"",SkypeForBusinessLogo16:"",SkypeForBusinessLogoFill16:"",FilterSolid:"",MailUndelivered:"",MailTentative:"",MailTentativeMirrored:"",MailReminder:"",ReceiptUndelivered:"",ReceiptTentative:"",ReceiptTentativeMirrored:"",Inbox:"",IRMReply:"",IRMReplyMirrored:"",IRMForward:"",IRMForwardMirrored:"",VoicemailIRM:"",EventAccepted:"",EventTentative:"",EventTentativeMirrored:"",EventDeclined:"",IDBadge:"",BackgroundColor:"",OfficeFormsLogoInverse16:"",OfficeFormsLogo:"",OfficeFormsLogoFill:"",OfficeFormsLogo16:"",OfficeFormsLogoFill16:"",OfficeFormsLogoInverse24:"",OfficeFormsLogo24:"",OfficeFormsLogoFill24:"",PageLock:"",NotExecuted:"",NotImpactedSolid:"",FieldReadOnly:"",FieldRequired:"",BacklogBoard:"",ExternalBuild:"",ExternalTFVC:"",ExternalXAML:"",IssueSolid:"",DefectSolid:"",LadybugSolid:"",NugetLogo:"",TFVCLogo:"",ProjectLogo32:"",ProjectLogoFill32:"",ProjectLogo16:"",ProjectLogoFill16:"",SwayLogo32:"",SwayLogoFill32:"",SwayLogo16:"",SwayLogoFill16:"",ClassNotebookLogo32:"",ClassNotebookLogoFill32:"",ClassNotebookLogo16:"",ClassNotebookLogoFill16:"",ClassNotebookLogoInverse32:"",ClassNotebookLogoInverse16:"",StaffNotebookLogo32:"",StaffNotebookLogoFill32:"",StaffNotebookLogo16:"",StaffNotebookLogoFill16:"",StaffNotebookLogoInverted32:"",StaffNotebookLogoInverted16:"",KaizalaLogo:"",TaskLogo:"",ProtectionCenterLogo32:"",GallatinLogo:"",Globe2:"",Guitar:"",Breakfast:"",Brunch:"",BeerMug:"",Vacation:"",Teeth:"",Taxi:"",Chopsticks:"",SyncOccurence:"",UnsyncOccurence:"",GIF:"",PrimaryCalendar:"",SearchCalendar:"",VideoOff:"",MicrosoftFlowLogo:"",BusinessCenterLogo:"",ToDoLogoBottom:"",ToDoLogoTop:"",EditSolid12:"",EditSolidMirrored12:"",UneditableSolid12:"",UneditableSolidMirrored12:"",UneditableMirrored:"",AdminALogo32:"",AdminALogoFill32:"",ToDoLogoInverse:""}};_r(n,e)}function Vte(t,e){t===void 0&&(t="");var n={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-14"',src:"url('"+t+"fabric-icons-14-5cf58db8.woff') format('woff')"},icons:{Snooze:"",WaffleOffice365:"",ImageSearch:"",NewsSearch:"",VideoSearch:"",R:"",FontColorA:"",FontColorSwatch:"",LightWeight:"",NormalWeight:"",SemiboldWeight:"",GroupObject:"",UngroupObject:"",AlignHorizontalLeft:"",AlignHorizontalCenter:"",AlignHorizontalRight:"",AlignVerticalTop:"",AlignVerticalCenter:"",AlignVerticalBottom:"",HorizontalDistributeCenter:"",VerticalDistributeCenter:"",Ellipse:"",Line:"",Octagon:"",Hexagon:"",Pentagon:"",RightTriangle:"",HalfCircle:"",QuarterCircle:"",ThreeQuarterCircle:"","6PointStar":"","12PointStar":"",ArrangeBringToFront:"",ArrangeSendToBack:"",ArrangeSendBackward:"",ArrangeBringForward:"",BorderDash:"",BorderDot:"",LineStyle:"",LineThickness:"",WindowEdit:"",HintText:"",MediaAdd:"",AnchorLock:"",AutoHeight:"",ChartSeries:"",ChartXAngle:"",ChartYAngle:"",Combobox:"",LineSpacing:"",Padding:"",PaddingTop:"",PaddingBottom:"",PaddingLeft:"",PaddingRight:"",NavigationFlipper:"",AlignJustify:"",TextOverflow:"",VisualsFolder:"",VisualsStore:"",PictureCenter:"",PictureFill:"",PicturePosition:"",PictureStretch:"",PictureTile:"",Slider:"",SliderHandleSize:"",DefaultRatio:"",NumberSequence:"",GUID:"",ReportAdd:"",DashboardAdd:"",MapPinSolid:"",WebPublish:"",PieSingleSolid:"",BlockedSolid:"",DrillDown:"",DrillDownSolid:"",DrillExpand:"",DrillShow:"",SpecialEvent:"",OneDriveFolder16:"",FunctionalManagerDashboard:"",BIDashboard:"",CodeEdit:"",RenewalCurrent:"",RenewalFuture:"",SplitObject:"",BulkUpload:"",DownloadDocument:"",GreetingCard:"",Flower:"",WaitlistConfirm:"",WaitlistConfirmMirrored:"",LaptopSecure:"",DragObject:"",EntryView:"",EntryDecline:"",ContactCardSettings:"",ContactCardSettingsMirrored:""}};_r(n,e)}function Gte(t,e){t===void 0&&(t="");var n={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-15"',src:"url('"+t+"fabric-icons-15-3807251b.woff') format('woff')"},icons:{CalendarSettings:"",CalendarSettingsMirrored:"",HardDriveLock:"",HardDriveUnlock:"",AccountManagement:"",ReportWarning:"",TransitionPop:"",TransitionPush:"",TransitionEffect:"",LookupEntities:"",ExploreData:"",AddBookmark:"",SearchBookmark:"",DrillThrough:"",MasterDatabase:"",CertifiedDatabase:"",MaximumValue:"",MinimumValue:"",VisualStudioIDELogo32:"",PasteAsText:"",PasteAsCode:"",BrowserTab:"",BrowserTabScreenshot:"",DesktopScreenshot:"",FileYML:"",ClipboardSolid:"",FabricUserFolder:"",FabricNetworkFolder:"",BullseyeTarget:"",AnalyticsView:"",Video360Generic:"",Untag:"",Leave:"",Trending12:"",Blocked12:"",Warning12:"",CheckedOutByOther12:"",CheckedOutByYou12:"",CircleShapeSolid:"",SquareShapeSolid:"",TriangleShapeSolid:"",DropShapeSolid:"",RectangleShapeSolid:"",ZoomToFit:"",InsertColumnsLeft:"",InsertColumnsRight:"",InsertRowsAbove:"",InsertRowsBelow:"",DeleteColumns:"",DeleteRows:"",DeleteRowsMirrored:"",DeleteTable:"",AccountBrowser:"",VersionControlPush:"",StackedColumnChart2:"",TripleColumnWide:"",QuadColumn:"",WhiteBoardApp16:"",WhiteBoardApp32:"",PinnedSolid:"",InsertSignatureLine:"",ArrangeByFrom:"",Phishing:"",CreateMailRule:"",PublishCourse:"",DictionaryRemove:"",UserRemove:"",UserEvent:"",Encryption:"",PasswordField:"",OpenInNewTab:"",Hide3:"",VerifiedBrandSolid:"",MarkAsProtected:"",AuthenticatorApp:"",WebTemplate:"",DefenderTVM:"",MedalSolid:"",D365TalentLearn:"",D365TalentInsight:"",D365TalentHRCore:"",BacklogList:"",ButtonControl:"",TableGroup:"",MountainClimbing:"",TagUnknown:"",TagUnknownMirror:"",TagUnknown12:"",TagUnknown12Mirror:"",Link12:"",Presentation:"",Presentation12:"",Lock12:"",BuildDefinition:"",ReleaseDefinition:"",SaveTemplate:"",UserGauge:"",BlockedSiteSolid12:"",TagSolid:"",OfficeChat:""}};_r(n,e)}function jte(t,e){t===void 0&&(t="");var n={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-16"',src:"url('"+t+"fabric-icons-16-9cf93f3b.woff') format('woff')"},icons:{OfficeChatSolid:"",MailSchedule:"",WarningSolid:"",Blocked2Solid:"",SkypeCircleArrow:"",SkypeArrow:"",SyncStatus:"",SyncStatusSolid:"",ProjectDocument:"",ToDoLogoOutline:"",VisioOnlineLogoFill32:"",VisioOnlineLogo32:"",VisioOnlineLogoCloud32:"",VisioDiagramSync:"",Event12:"",EventDateMissed12:"",UserOptional:"",ResponsesMenu:"",DoubleDownArrow:"",DistributeDown:"",BookmarkReport:"",FilterSettings:"",GripperDotsVertical:"",MailAttached:"",AddIn:"",LinkedDatabase:"",TableLink:"",PromotedDatabase:"",BarChartVerticalFilter:"",BarChartVerticalFilterSolid:"",MicOff2:"",MicrosoftTranslatorLogo:"",ShowTimeAs:"",FileRequest:"",WorkItemAlert:"",PowerBILogo16:"",PowerBILogoBackplate16:"",BulletedListText:"",BulletedListBullet:"",BulletedListTextMirrored:"",BulletedListBulletMirrored:"",NumberedListText:"",NumberedListNumber:"",NumberedListTextMirrored:"",NumberedListNumberMirrored:"",RemoveLinkChain:"",RemoveLinkX:"",FabricTextHighlight:"",ClearFormattingA:"",ClearFormattingEraser:"",Photo2Fill:"",IncreaseIndentText:"",IncreaseIndentArrow:"",DecreaseIndentText:"",DecreaseIndentArrow:"",IncreaseIndentTextMirrored:"",IncreaseIndentArrowMirrored:"",DecreaseIndentTextMirrored:"",DecreaseIndentArrowMirrored:"",CheckListText:"",CheckListCheck:"",CheckListTextMirrored:"",CheckListCheckMirrored:"",NumberSymbol:"",Coupon:"",VerifiedBrand:"",ReleaseGate:"",ReleaseGateCheck:"",ReleaseGateError:"",M365InvoicingLogo:"",RemoveFromShoppingList:"",ShieldAlert:"",FabricTextHighlightComposite:"",Dataflows:"",GenericScanFilled:"",DiagnosticDataBarTooltip:"",SaveToMobile:"",Orientation2:"",ScreenCast:"",ShowGrid:"",SnapToGrid:"",ContactList:"",NewMail:"",EyeShadow:"",FabricFolderConfirm:"",InformationBarriers:"",CommentActive:"",ColumnVerticalSectionEdit:"",WavingHand:"",ShakeDevice:"",SmartGlassRemote:"",Rotate90Clockwise:"",Rotate90CounterClockwise:"",CampaignTemplate:"",ChartTemplate:"",PageListFilter:"",SecondaryNav:"",ColumnVerticalSection:"",SkypeCircleSlash:"",SkypeSlash:""}};_r(n,e)}function Kte(t,e){t===void 0&&(t="");var n={style:{MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",fontStyle:"normal",fontWeight:"normal",speak:"none"},fontFace:{fontFamily:'"FabricMDL2Icons-17"',src:"url('"+t+"fabric-icons-17-0c4ed701.woff') format('woff')"},icons:{CustomizeToolbar:"",DuplicateRow:"",RemoveFromTrash:"",MailOptions:"",Childof:"",Footer:"",Header:"",BarChartVerticalFill:"",StackedColumnChart2Fill:"",PlainText:"",AccessibiltyChecker:"",DatabaseSync:"",ReservationOrders:"",TabOneColumn:"",TabTwoColumn:"",TabThreeColumn:"",BulletedTreeList:"",MicrosoftTranslatorLogoGreen:"",MicrosoftTranslatorLogoBlue:"",InternalInvestigation:"",AddReaction:"",ContactHeart:"",VisuallyImpaired:"",EventToDoLogo:"",Variable2:"",ModelingView:"",DisconnectVirtualMachine:"",ReportLock:"",Uneditable2:"",Uneditable2Mirrored:"",BarChartVerticalEdit:"",GlobalNavButtonActive:"",PollResults:"",Rerun:"",QandA:"",QandAMirror:"",BookAnswers:"",AlertSettings:"",TrimStart:"",TrimEnd:"",TableComputed:"",DecreaseIndentLegacy:"",IncreaseIndentLegacy:"",SizeLegacy:""}};_r(n,e)}var qte=function(){Ac("trash","delete"),Ac("onedrive","onedrivelogo"),Ac("alertsolid12","eventdatemissed12"),Ac("sixpointstar","6pointstar"),Ac("twelvepointstar","12pointstar"),Ac("toggleon","toggleleft"),Ac("toggleoff","toggleright")};rI("@fluentui/font-icons-mdl2","8.5.8");var Xte="https://spoppe-b.azureedge.net/files/fabric-cdn-prod_20210407.001/assets/icons/",Eh=Sn();function Yte(t,e){var n,r;t===void 0&&(t=((n=Eh==null?void 0:Eh.FabricConfig)===null||n===void 0?void 0:n.iconBaseUrl)||((r=Eh==null?void 0:Eh.FabricConfig)===null||r===void 0?void 0:r.fontBaseUrl)||Xte),[Nte,Ate,Dte,Rte,Fte,Ote,$te,Lte,Pte,Mte,Bte,zte,Hte,Ute,Wte,Vte,Gte,jte,Kte].forEach(function(s){return s(t,e)}),qte()}var Qte=Sr(),Zte=w.forwardRef(function(t,e){var n=t.styles,r=t.theme,s=t.className,i=t.vertical,o=t.alignContent,a=t.children,l=Qte(n,{theme:r,className:s,alignContent:o,vertical:i});return w.createElement("div",{className:l.root,ref:e},w.createElement("div",{className:l.content,role:"separator","aria-orientation":i?"vertical":"horizontal"},a))}),Jte=function(t){var e,n,r=t.theme,s=t.alignContent,i=t.vertical,o=t.className,a=s==="start",l=s==="center",u=s==="end";return{root:[r.fonts.medium,{position:"relative"},s&&{textAlign:s},!s&&{textAlign:"center"},i&&(l||!s)&&{verticalAlign:"middle"},i&&a&&{verticalAlign:"top"},i&&u&&{verticalAlign:"bottom"},i&&{padding:"0 4px",height:"inherit",display:"table-cell",zIndex:1,selectors:{":after":(e={backgroundColor:r.palette.neutralLighter,width:"1px",content:'""',position:"absolute",top:"0",bottom:"0",left:"50%",right:"0",zIndex:-1},e[we]={backgroundColor:"WindowText"},e)}},!i&&{padding:"4px 0",selectors:{":before":(n={backgroundColor:r.palette.neutralLighter,height:"1px",content:'""',display:"block",position:"absolute",top:"50%",bottom:"0",left:"0",right:"0"},n[we]={backgroundColor:"WindowText"},n)}},o],content:[{position:"relative",display:"inline-block",padding:"0 12px",color:r.semanticColors.bodyText,background:r.semanticColors.bodyBackground},i&&{padding:"12px 0"}]}},v6=wr(Zte,Jte,void 0,{scope:"Separator"});v6.displayName="Separator";var yN=U;function Tm(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var s=t;return s.isSlot?(n=w.Children.toArray(n),n.length===0?s(e):s(U(U({},e),{children:n}))):w.createElement.apply(Rb,sa([t,e],n))}function b6(t,e){e===void 0&&(e={});var n=e.defaultProp,r=n===void 0?"children":n,s=function(i,o,a,l,u){if(w.isValidElement(o))return o;var c=tne(r,o),d=nne(l,u,i,c);if(a){if(a.component){var h=a.component;return w.createElement(h,U({},d))}if(a.render)return a.render(d,t)}return w.createElement(t,U({},d))};return s}var ene=Un(function(t){return b6(t)});function vN(t,e){var n={},r=t,s=function(o){if(e.hasOwnProperty(o)){var a=function(l){for(var u=[],c=1;c<arguments.length;c++)u[c-1]=arguments[c];if(u.length>0)throw new Error("Any module using getSlots must use withSlots. Please see withSlots javadoc for more info.");return rne(e[o],l,r[o],r.slots&&r.slots[o],r._defaultStyles&&r._defaultStyles[o],r.theme)};a.isSlot=!0,n[o]=a}};for(var i in e)s(i);return n}function tne(t,e){var n,r;return typeof e=="string"||typeof e=="number"||typeof e=="boolean"?r=(n={},n[t]=e,n):r=e,r}function nne(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];for(var s={},i=[],o=0,a=n;o<a.length;o++){var l=a[o];i.push(l&&l.className),yN(s,l)}return s.className=Y8([t,i],{rtl:As(e)}),s}function rne(t,e,n,r,s,i){return t.create!==void 0?t.create(e,n,r,s):ene(t)(e,n,r,s,i)}function bN(t,e){e===void 0&&(e={});var n=e.factoryOptions,r=n===void 0?{}:n,s=r.defaultProp,i=function(o){var a=ine(e.displayName,w.useContext(Om),e.fields),l=e.state;l&&(o=U(U({},o),l(o)));var u=o.theme||a.theme,c=E6(o,u,e.tokens,a.tokens,o.tokens),d=sne(o,u,c,e.styles,a.styles,o.styles),h=U(U({},o),{styles:d,tokens:c,_defaultStyles:d,theme:u});return t(h)};return i.displayName=e.displayName||t.name,s&&(i.create=b6(i,{defaultProp:s})),yN(i,e.statics),i}function sne(t,e,n){for(var r=[],s=3;s<arguments.length;s++)r[s-3]=arguments[s];return sl.apply(void 0,r.map(function(i){return typeof i=="function"?i(t,e,n):i}))}function E6(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];for(var s={},i=0,o=n;i<o.length;i++){var a=o[i];a&&(a=typeof a=="function"?a(t,e):a,Array.isArray(a)&&(a=E6.apply(void 0,sa([t,e],a))),yN(s,a))}return s}function ine(t,e,n){var r=["theme","styles","tokens"];return mo.getSettings(n||r,t,e.customizations)}var T6={root:"ms-StackItem"},one={start:"flex-start",end:"flex-end"},ane=function(t,e,n){var r=t.grow,s=t.shrink,i=t.disableShrink,o=t.align,a=t.verticalFill,l=t.order,u=t.className,c=t.basis,d=c===void 0?"auto":c,h=es(T6,e);return{root:[e.fonts.medium,h.root,{flexBasis:d,margin:n.margin,padding:n.padding,height:a?"100%":"auto",width:"auto"},r&&{flexGrow:r===!0?1:r},(i||!r&&!s)&&{flexShrink:0},s&&!i&&{flexShrink:1},o&&{alignSelf:one[o]||o},l&&{order:l},u]}},lne=function(t){var e=t.children,n=yn(t,Wn);if(e==null)return null;var r=vN(t,{root:"div"});return Tm(r.root,U({},n),e)},_u=bN(lne,{displayName:"StackItem",styles:ane}),lf=function(t,e){return e.spacing.hasOwnProperty(t)?e.spacing[t]:t},uS=function(t){var e=parseFloat(t),n=isNaN(e)?0:e,r=isNaN(e)?"":e.toString(),s=t.substring(r.toString().length);return{value:n,unit:s||"px"}},une=function(t,e){if(t===void 0||t==="")return{rowGap:{value:0,unit:"px"},columnGap:{value:0,unit:"px"}};if(typeof t=="number")return{rowGap:{value:t,unit:"px"},columnGap:{value:t,unit:"px"}};var n=t.split(" ");if(n.length>2)return{rowGap:{value:0,unit:"px"},columnGap:{value:0,unit:"px"}};if(n.length===2)return{rowGap:uS(lf(n[0],e)),columnGap:uS(lf(n[1],e))};var r=uS(lf(t,e));return{rowGap:r,columnGap:r}},YD=function(t,e){if(t===void 0||typeof t=="number"||t==="")return t;var n=t.split(" ");return n.length<2?lf(t,e):n.reduce(function(r,s){return lf(r,e)+" "+lf(s,e)})},Th={start:"flex-start",end:"flex-end"},w_={root:"ms-Stack",inner:"ms-Stack-inner",child:"ms-Stack-child"},cne=function(t,e,n){var r,s,i,o,a,l,u,c,d,h,f,p,m,y=t.className,g=t.disableShrink,v=t.enableScopedSelectors,E=t.grow,b=t.horizontal,T=t.horizontalAlign,x=t.reversed,C=t.verticalAlign,S=t.verticalFill,N=t.wrap,I=es(w_,e),F=n&&n.childrenGap?n.childrenGap:t.gap,L=n&&n.maxHeight?n.maxHeight:t.maxHeight,z=n&&n.maxWidth?n.maxWidth:t.maxWidth,H=n&&n.padding?n.padding:t.padding,$=une(F,e),M=$.rowGap,j=$.columnGap,P=""+-.5*j.value+j.unit,B=""+-.5*M.value+M.unit,K={textOverflow:"ellipsis"},A="> "+(v?"."+w_.child:"*"),O=(r={},r[A+":not(."+T6.root+")"]={flexShrink:0},r);return N?{root:[I.root,{flexWrap:"wrap",maxWidth:z,maxHeight:L,width:"auto",overflow:"visible",height:"100%"},T&&(s={},s[b?"justifyContent":"alignItems"]=Th[T]||T,s),C&&(i={},i[b?"alignItems":"justifyContent"]=Th[C]||C,i),y,{display:"flex"},b&&{height:S?"100%":"auto"}],inner:[I.inner,(o={display:"flex",flexWrap:"wrap",marginLeft:P,marginRight:P,marginTop:B,marginBottom:B,overflow:"visible",boxSizing:"border-box",padding:YD(H,e),width:j.value===0?"100%":"calc(100% + "+j.value+j.unit+")",maxWidth:"100vw"},o[A]=U({margin:""+.5*M.value+M.unit+" "+.5*j.value+j.unit},K),o),g&&O,T&&(a={},a[b?"justifyContent":"alignItems"]=Th[T]||T,a),C&&(l={},l[b?"alignItems":"justifyContent"]=Th[C]||C,l),b&&(u={flexDirection:x?"row-reverse":"row",height:M.value===0?"100%":"calc(100% + "+M.value+M.unit+")"},u[A]={maxWidth:j.value===0?"100%":"calc(100% - "+j.value+j.unit+")"},u),!b&&(c={flexDirection:x?"column-reverse":"column",height:"calc(100% + "+M.value+M.unit+")"},c[A]={maxHeight:M.value===0?"100%":"calc(100% - "+M.value+M.unit+")"},c)]}:{root:[I.root,(d={display:"flex",flexDirection:b?x?"row-reverse":"row":x?"column-reverse":"column",flexWrap:"nowrap",width:"auto",height:S?"100%":"auto",maxWidth:z,maxHeight:L,padding:YD(H,e),boxSizing:"border-box"},d[A]=K,d),g&&O,E&&{flexGrow:E===!0?1:E},T&&(h={},h[b?"justifyContent":"alignItems"]=Th[T]||T,h),C&&(f={},f[b?"alignItems":"justifyContent"]=Th[C]||C,f),b&&j.value>0&&(p={},p[x?A+":not(:last-child)":A+":not(:first-child)"]={marginLeft:""+j.value+j.unit},p),!b&&M.value>0&&(m={},m[x?A+":not(:last-child)":A+":not(:first-child)"]={marginTop:""+M.value+M.unit},m),y]}},dne=function(t){var e=t.as,n=e===void 0?"div":e,r=t.disableShrink,s=r===void 0?!1:r,i=t.enableScopedSelectors,o=i===void 0?!1:i,a=t.wrap,l=rl(t,["as","disableShrink","enableScopedSelectors","wrap"]),u=x6(t.children,{disableShrink:s,enableScopedSelectors:o}),c=yn(l,Wn),d=vN(t,{root:n,inner:"div"});return a?Tm(d.root,U({},c),Tm(d.inner,null,u)):Tm(d.root,U({},c),u)};function x6(t,e){var n=e.disableShrink,r=e.enableScopedSelectors,s=w.Children.toArray(t);return s=w.Children.map(s,function(i){if(!i||!w.isValidElement(i))return i;if(i.type===w.Fragment)return i.props.children?x6(i.props.children,{disableShrink:n,enableScopedSelectors:r}):null;var o=i,a={};hne(i)&&(a={shrink:!n});var l=o.props.className;return w.cloneElement(o,U(U(U(U({},a),o.props),l&&{className:l}),r&&{className:Fs(w_.child,l)}))}),s}function hne(t){return!!t&&typeof t=="object"&&!!t.type&&t.type.displayName===_u.displayName}var fne={Item:_u},tt=bN(dne,{displayName:"Stack",styles:cne,statics:fne}),pne=function(t){if(t.children==null)return null;t.block,t.className;var e=t.as,n=e===void 0?"span":e;t.variant,t.nowrap;var r=rl(t,["block","className","as","variant","nowrap"]),s=vN(t,{root:n});return Tm(s.root,U({},yn(r,Wn)))},mne=function(t,e){var n=t.as,r=t.className,s=t.block,i=t.nowrap,o=t.variant,a=e.fonts,l=e.semanticColors,u=a[o||"medium"];return{root:[u,{color:u.color||l.bodyText,display:s?n==="td"?"table-cell":"block":"inline",mozOsxFontSmoothing:u.MozOsxFontSmoothing,webkitFontSmoothing:u.WebkitFontSmoothing},i&&{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},r]}},Dl=bN(pne,{displayName:"Text",styles:mne}),gne=Sr(),C6="Toggle",S6=w.forwardRef(function(t,e){var n=t.as,r=n===void 0?"div":n,s=t.ariaLabel,i=t.checked,o=t.className,a=t.defaultChecked,l=a===void 0?!1:a,u=t.disabled,c=t.inlineLabel,d=t.label,h=t.offAriaLabel,f=t.offText,p=t.onAriaLabel,m=t.onChange,y=t.onChanged,g=t.onClick,v=t.onText,E=t.role,b=t.styles,T=t.theme,x=Iw(i,l,w.useCallback(function(K,A){m==null||m(K,A),y==null||y(A)},[m,y])),C=x[0],S=x[1],N=gne(b,{theme:T,className:o,disabled:u,checked:C,inlineLabel:c,onOffMissing:!v&&!f}),I=C?p:h,F=Yf(C6,t.id),L=F+"-label",z=F+"-stateText",H=C?v:f,$=yn(t,p$,["defaultChecked"]),M=void 0;!s&&!I&&(d&&(M=L),H&&!M&&(M=z));var j=w.useRef(null);dI(j),yne(t,C,j);var P=function(K){u||(S(!C,K),g&&g(K))},B={root:{className:N.root,hidden:$.hidden},label:{children:d,className:N.label,htmlFor:F,id:L},container:{className:N.container},pill:U(U({},$),{"aria-disabled":u,"aria-checked":C,"aria-label":s||I,"aria-labelledby":M,className:N.pill,"data-is-focusable":!0,"data-ktp-target":!0,disabled:u,id:F,onClick:P,ref:j,role:E||"switch",type:"button"}),thumb:{className:N.thumb},stateText:{children:H,className:N.text,htmlFor:F,id:z}};return w.createElement(r,U({ref:e},B.root),d&&w.createElement(C_,U({},B.label)),w.createElement("div",U({},B.container),w.createElement("button",U({},B.pill),w.createElement("span",U({},B.thumb))),(C&&v||f)&&w.createElement(C_,U({},B.stateText))))});S6.displayName=C6+"Base";var yne=function(t,e,n){w.useImperativeHandle(t.componentRef,function(){return{get checked(){return!!e},focus:function(){n.current&&n.current.focus()}}},[e,n])},vne=40,QD=20,cS=12,bne=function(t){var e,n,r,s,i,o,a,l=t.theme,u=t.className,c=t.disabled,d=t.checked,h=t.inlineLabel,f=t.onOffMissing,p=l.semanticColors,m=l.palette,y=p.bodyBackground,g=p.inputBackgroundChecked,v=p.inputBackgroundCheckedHovered,E=m.neutralDark,b=p.disabledBodySubtext,T=p.smallInputBorder,x=p.inputForegroundChecked,C=p.disabledBodySubtext,S=p.disabledBackground,N=p.smallInputBorder,I=p.inputBorderHovered,F=p.disabledBodySubtext,L=p.disabledText;return{root:["ms-Toggle",d&&"is-checked",!c&&"is-enabled",c&&"is-disabled",l.fonts.medium,{marginBottom:"8px"},h&&{display:"flex",alignItems:"center"},u],label:["ms-Toggle-label",{display:"inline-block"},c&&{color:L,selectors:(e={},e[we]={color:"GrayText"},e)},h&&!f&&{marginRight:16},f&&h&&{order:1,marginLeft:16},h&&{wordBreak:"break-word"}],container:["ms-Toggle-innerContainer",{display:"flex",position:"relative"}],pill:["ms-Toggle-background",Ol(l,{inset:-3}),{fontSize:"20px",boxSizing:"border-box",width:vne,height:QD,borderRadius:QD/2,transition:"all 0.1s ease",border:"1px solid "+N,background:y,cursor:"pointer",display:"flex",alignItems:"center",padding:"0 3px",overflow:"visible"},!c&&[!d&&{selectors:{":hover":[{borderColor:I}],":hover .ms-Toggle-thumb":[{backgroundColor:E,selectors:(n={},n[we]={borderColor:"Highlight"},n)}]}},d&&[{background:g,borderColor:"transparent",justifyContent:"flex-end"},{selectors:(r={":hover":[{backgroundColor:v,borderColor:"transparent",selectors:(s={},s[we]={backgroundColor:"Highlight"},s)}]},r[we]=U({backgroundColor:"Highlight"},ar()),r)}]],c&&[{cursor:"default"},!d&&[{borderColor:F}],d&&[{backgroundColor:b,borderColor:"transparent",justifyContent:"flex-end"}]],!c&&{selectors:{"&:hover":{selectors:(i={},i[we]={borderColor:"Highlight"},i)}}}],thumb:["ms-Toggle-thumb",{display:"block",width:cS,height:cS,borderRadius:"50%",transition:"all 0.1s ease",backgroundColor:T,borderColor:"transparent",borderWidth:cS/2,borderStyle:"solid",boxSizing:"border-box"},!c&&d&&[{backgroundColor:x,selectors:(o={},o[we]={backgroundColor:"Window",borderColor:"Window"},o)}],c&&[!d&&[{backgroundColor:C}],d&&[{backgroundColor:S}]]],text:["ms-Toggle-stateText",{selectors:{"&&":{padding:"0",margin:"0 8px",userSelect:"none",fontWeight:sn.regular}}},c&&{selectors:{"&&":{color:L,selectors:(a={},a[we]={color:"GrayText"},a)}}}]}},Ene=wr(S6,bne,void 0,{scope:"Toggle"});/**
 * @remix-run/router v1.3.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function og(){return og=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},og.apply(this,arguments)}var Au;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Au||(Au={}));const ZD="popstate";function Tne(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=Vd(s.location.hash.substr(1));return __("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof i=="string"?i:mE(i))}function r(s,i){xne(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return Sne(e,n,r,t)}function Tr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function xne(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Cne(){return Math.random().toString(36).substr(2,8)}function JD(t,e){return{usr:t.state,key:t.key,idx:e}}function __(t,e,n,r){return n===void 0&&(n=null),og({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Vd(e):e,{state:n,key:e&&e.key||r||Cne()})}function mE(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Vd(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Sne(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Au.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(og({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function d(){a=Au.Pop;let y=c(),g=y==null?null:y-u;u=y,l&&l({action:a,location:m.location,delta:g})}function h(y,g){a=Au.Push;let v=__(m.location,y,g);n&&n(v,y),u=c()+1;let E=JD(v,u),b=m.createHref(v);try{o.pushState(E,"",b)}catch{s.location.assign(b)}i&&l&&l({action:a,location:m.location,delta:1})}function f(y,g){a=Au.Replace;let v=__(m.location,y,g);n&&n(v,y),u=c();let E=JD(v,u),b=m.createHref(v);o.replaceState(E,"",b),i&&l&&l({action:a,location:m.location,delta:0})}function p(y){let g=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof y=="string"?y:mE(y);return Tr(g,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,g)}let m={get action(){return a},get location(){return t(s,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(ZD,d),l=y,()=>{s.removeEventListener(ZD,d),l=null}},createHref(y){return e(s,y)},createURL:p,encodeLocation(y){let g=p(y);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:f,go(y){return o.go(y)}};return m}var e3;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(e3||(e3={}));function wne(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Vd(e):e,s=k6(r.pathname||"/",n);if(s==null)return null;let i=w6(t);_ne(i);let o=null;for(let a=0;o==null&&a<i.length;++a)o=$ne(i[a],Mne(s));return o}function w6(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Tr(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Wu([r,l.relativePath]),c=n.concat(l);i.children&&i.children.length>0&&(Tr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),w6(i.children,e,c,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:Fne(u,i.index),routesMeta:c})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of _6(i.path))s(i,o,l)}),e}function _6(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=_6(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function _ne(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:One(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const kne=/^:\w+$/,Ine=3,Nne=2,Ane=1,Dne=10,Rne=-2,t3=t=>t==="*";function Fne(t,e){let n=t.split("/"),r=n.length;return n.some(t3)&&(r+=Rne),e&&(r+=Nne),n.filter(s=>!t3(s)).reduce((s,i)=>s+(kne.test(i)?Ine:i===""?Ane:Dne),r)}function One(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function $ne(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,u=s==="/"?e:e.slice(s.length)||"/",c=Lne({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let d=a.route;i.push({params:r,pathname:Wu([s,c.pathname]),pathnameBase:Une(Wu([s,c.pathnameBase])),route:d}),c.pathnameBase!=="/"&&(s=Wu([s,c.pathnameBase]))}return i}function Lne(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Pne(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,c,d)=>{if(c==="*"){let h=a[d]||"";o=i.slice(0,i.length-h.length).replace(/(.)\/+$/,"$1")}return u[c]=Bne(a[d]||"",c),u},{}),pathname:i,pathnameBase:o,pattern:t}}function Pne(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),EN(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Mne(t){try{return decodeURI(t)}catch(e){return EN(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Bne(t,e){try{return decodeURIComponent(t)}catch(n){return EN(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function k6(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function EN(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function zne(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Vd(t):t;return{pathname:n?n.startsWith("/")?n:Hne(n,e):e,search:Wne(r),hash:Vne(s)}}function Hne(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function dS(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function I6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function N6(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Vd(t):(s=og({},t),Tr(!s.pathname||!s.pathname.includes("?"),dS("?","pathname","search",s)),Tr(!s.pathname||!s.pathname.includes("#"),dS("#","pathname","hash",s)),Tr(!s.search||!s.search.includes("#"),dS("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(r||o==null)a=n;else{let d=e.length-1;if(o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=zne(s,a),u=o&&o!=="/"&&o.endsWith("/"),c=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Wu=t=>t.join("/").replace(/\/\/+/g,"/"),Une=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Wne=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Vne=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Gne(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const jne=["post","put","patch","delete"];[...jne];/**
 * React Router v6.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function k_(){return k_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},k_.apply(this,arguments)}function Kne(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}const qne=typeof Object.is=="function"?Object.is:Kne,{useState:Xne,useEffect:Yne,useLayoutEffect:Qne,useDebugValue:Zne}=Rb;function Jne(t,e,n){const r=e(),[{inst:s},i]=Xne({inst:{value:r,getSnapshot:e}});return Qne(()=>{s.value=r,s.getSnapshot=e,hS(s)&&i({inst:s})},[t,r,e]),Yne(()=>(hS(s)&&i({inst:s}),t(()=>{hS(s)&&i({inst:s})})),[t]),Zne(r),r}function hS(t){const e=t.getSnapshot,n=t.value;try{const r=e();return!qne(n,r)}catch{return!0}}function ere(t,e,n){return e()}const tre=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nre=!tre,rre=nre?ere:Jne;"useSyncExternalStore"in Rb&&(t=>t.useSyncExternalStore)(Rb);const A6=w.createContext(null),D6=w.createContext(null),_T=w.createContext(null),kT=w.createContext(null),Gd=w.createContext({outlet:null,matches:[]}),R6=w.createContext(null);function sre(t,e){let{relative:n}=e===void 0?{}:e;Ug()||Tr(!1);let{basename:r,navigator:s}=w.useContext(_T),{hash:i,pathname:o,search:a}=F6(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Wu([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Ug(){return w.useContext(kT)!=null}function IT(){return Ug()||Tr(!1),w.useContext(kT).location}function ire(){Ug()||Tr(!1);let{basename:t,navigator:e}=w.useContext(_T),{matches:n}=w.useContext(Gd),{pathname:r}=IT(),s=JSON.stringify(I6(n).map(a=>a.pathnameBase)),i=w.useRef(!1);return w.useEffect(()=>{i.current=!0}),w.useCallback(function(a,l){if(l===void 0&&(l={}),!i.current)return;if(typeof a=="number"){e.go(a);return}let u=N6(a,JSON.parse(s),r,l.relative==="path");t!=="/"&&(u.pathname=u.pathname==="/"?t:Wu([t,u.pathname])),(l.replace?e.replace:e.push)(u,l.state,l)},[t,e,s,r])}const ore=w.createContext(null);function are(t){let e=w.useContext(Gd).outlet;return e&&w.createElement(ore.Provider,{value:t},e)}function F6(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=w.useContext(Gd),{pathname:s}=IT(),i=JSON.stringify(I6(r).map(o=>o.pathnameBase));return w.useMemo(()=>N6(t,JSON.parse(i),s,n==="path"),[t,i,s,n])}function lre(t,e){Ug()||Tr(!1);let{navigator:n}=w.useContext(_T),r=w.useContext(D6),{matches:s}=w.useContext(Gd),i=s[s.length-1],o=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let l=IT(),u;if(e){var c;let m=typeof e=="string"?Vd(e):e;a==="/"||(c=m.pathname)!=null&&c.startsWith(a)||Tr(!1),u=m}else u=l;let d=u.pathname||"/",h=a==="/"?d:d.slice(a.length)||"/",f=wne(t,{pathname:h}),p=hre(f&&f.map(m=>Object.assign({},m,{params:Object.assign({},o,m.params),pathname:Wu([a,n.encodeLocation?n.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?a:Wu([a,n.encodeLocation?n.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),s,r||void 0);return e&&p?w.createElement(kT.Provider,{value:{location:k_({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Au.Pop}},p):p}function ure(){let t=gre(),e=Gne(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:s},n):null,i)}class cre extends w.Component{constructor(e){super(e),this.state={location:e.location,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location?{error:e.error,location:e.location}:{error:e.error||n.error,location:n.location}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?w.createElement(Gd.Provider,{value:this.props.routeContext},w.createElement(R6.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function dre(t){let{routeContext:e,match:n,children:r}=t,s=w.useContext(A6);return s&&s.static&&s.staticContext&&n.route.errorElement&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(Gd.Provider,{value:e},r)}function hre(t,e,n){if(e===void 0&&(e=[]),t==null)if(n!=null&&n.errors)t=n.matches;else return null;let r=t,s=n==null?void 0:n.errors;if(s!=null){let i=r.findIndex(o=>o.route.id&&(s==null?void 0:s[o.route.id]));i>=0||Tr(!1),r=r.slice(0,Math.min(r.length,i+1))}return r.reduceRight((i,o,a)=>{let l=o.route.id?s==null?void 0:s[o.route.id]:null,u=n?o.route.errorElement||w.createElement(ure,null):null,c=e.concat(r.slice(0,a+1)),d=()=>w.createElement(dre,{match:o,routeContext:{outlet:i,matches:c}},l?u:o.route.element!==void 0?o.route.element:i);return n&&(o.route.errorElement||a===0)?w.createElement(cre,{location:n.location,component:u,error:l,children:d(),routeContext:{outlet:null,matches:c}}):d()},null)}var n3;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator"})(n3||(n3={}));var gE;(function(t){t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator"})(gE||(gE={}));function fre(t){let e=w.useContext(D6);return e||Tr(!1),e}function pre(t){let e=w.useContext(Gd);return e||Tr(!1),e}function mre(t){let e=pre(),n=e.matches[e.matches.length-1];return n.route.id||Tr(!1),n.route.id}function gre(){var t;let e=w.useContext(R6),n=fre(gE.UseRouteError),r=mre(gE.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}function yre(t){return are(t.context)}function yb(t){Tr(!1)}function vre(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Au.Pop,navigator:i,static:o=!1}=t;Ug()&&Tr(!1);let a=e.replace(/^\/*/,"/"),l=w.useMemo(()=>({basename:a,navigator:i,static:o}),[a,i,o]);typeof r=="string"&&(r=Vd(r));let{pathname:u="/",search:c="",hash:d="",state:h=null,key:f="default"}=r,p=w.useMemo(()=>{let m=k6(u,a);return m==null?null:{pathname:m,search:c,hash:d,state:h,key:f}},[a,u,c,d,h,f]);return p==null?null:w.createElement(_T.Provider,{value:l},w.createElement(kT.Provider,{children:n,value:{location:p,navigationType:s}}))}function bre(t){let{children:e,location:n}=t,r=w.useContext(A6),s=r&&!e?r.router.routes:I_(e);return lre(s,n)}var r3;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(r3||(r3={}));new Promise(()=>{});function I_(t,e){e===void 0&&(e=[]);let n=[];return w.Children.forEach(t,(r,s)=>{if(!w.isValidElement(r))return;if(r.type===w.Fragment){n.push.apply(n,I_(r.props.children,e));return}r.type!==yb&&Tr(!1),!r.props.index||!r.props.children||Tr(!1);let i=[...e,s],o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,hasErrorBoundary:r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle};r.props.children&&(o.children=I_(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function N_(){return N_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},N_.apply(this,arguments)}function Ere(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Tre(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function xre(t,e){return t.button===0&&(!e||e==="_self")&&!Tre(t)}const Cre=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function Sre(t){let{basename:e,children:n,window:r}=t,s=w.useRef();s.current==null&&(s.current=Tne({window:r,v5Compat:!0}));let i=s.current,[o,a]=w.useState({action:i.action,location:i.location});return w.useLayoutEffect(()=>i.listen(a),[i]),w.createElement(vre,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:i})}const wre=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_re=w.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:c}=e,d=Ere(e,Cre),h,f=!1;if(wre&&typeof u=="string"&&/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i.test(u)){h=u;let g=new URL(window.location.href),v=u.startsWith("//")?new URL(g.protocol+u):new URL(u);v.origin===g.origin?u=v.pathname+v.search+v.hash:f=!0}let p=sre(u,{relative:s}),m=kre(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:s});function y(g){r&&r(g),g.defaultPrevented||m(g)}return w.createElement("a",N_({},d,{href:h||p,onClick:f||i?r:y,ref:n,target:l}))});var s3;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmitImpl="useSubmitImpl",t.UseFetcher="useFetcher"})(s3||(s3={}));var i3;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(i3||(i3={}));function kre(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o}=e===void 0?{}:e,a=ire(),l=IT(),u=F6(t,{relative:o});return w.useCallback(c=>{if(xre(c,n)){c.preventDefault();let d=r!==void 0?r:mE(l)===mE(u);a(t,{replace:d,state:s,preventScrollReset:i,relative:o})}},[l,a,u,r,s,n,t,i,o])}const Ire="_layout_x5vn8_1",Nre="_header_x5vn8_7",Are="_headerContainer_x5vn8_11",Dre="_headerTitleContainer_x5vn8_17",Rre="_headerTitle_x5vn8_17",Fre="_headerIcon_x5vn8_34",Ore="_shareButtonContainer_x5vn8_40",$re="_shareButton_x5vn8_40",Lre="_shareButtonText_x5vn8_63",Pre="_urlTextBox_x5vn8_73",Mre="_copyButtonContainer_x5vn8_83",Bre="_copyButton_x5vn8_83",zre="_copyButtonText_x5vn8_105",hl={layout:Ire,header:Nre,headerContainer:Are,headerTitleContainer:Dre,headerTitle:Rre,headerIcon:Fre,shareButtonContainer:Ore,shareButton:$re,shareButtonText:Lre,urlTextBox:Pre,copyButtonContainer:Mre,copyButton:Bre,copyButtonText:zre},O6="/assets/Contoso-41807c84.svg",fS=typeof window>"u"?global:window,pS="@griffel/";function Hre(t,e){return fS[Symbol.for(pS+t)]||(fS[Symbol.for(pS+t)]=e),fS[Symbol.for(pS+t)]}const A_=Hre("DEFINITION_LOOKUP_TABLE",{}),vb="data-make-styles-bucket",D_=7,TN="___",Ure=TN.length+D_,Wre=0,Vre=1;function Gre(t){for(var e=0,n,r=0,s=t.length;s>=4;++r,s-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}function jre(t){const e=t.length;if(e===D_)return t;for(let n=e;n<D_;n++)t+="0";return t}function $6(t,e,n=[]){return TN+jre(Gre(t+e))}function L6(t,e){let n="";for(const r in t){const s=t[r];if(s){const i=Array.isArray(s);e==="rtl"?n+=(i?s[1]:s)+" ":n+=(i?s[0]:s)+" "}}return n.slice(0,-1)}function o3(t,e){const n={};for(const r in t){const s=L6(t[r],e);if(s===""){n[r]="";continue}const i=$6(s,e),o=i+" "+s;A_[i]=[t[r],e],n[r]=o}return n}const a3={};function Kre(){let t=null,e="",n="";const r=new Array(arguments.length);for(let u=0;u<arguments.length;u++){const c=arguments[u];if(typeof c=="string"&&c!==""){const d=c.indexOf(TN);if(d===-1)e+=c+" ";else{const h=c.substr(d,Ure);d>0&&(e+=c.slice(0,d)),n+=h,r[u]=h}}}if(n==="")return e.slice(0,-1);const s=a3[n];if(s!==void 0)return e+s;const i=[];for(let u=0;u<arguments.length;u++){const c=r[u];if(c){const d=A_[c];d&&(i.push(d[Wre]),t=d[Vre])}}const o=Object.assign.apply(Object,[{}].concat(i));let a=L6(o,t);const l=$6(a,t,r);return a=l+" "+a,a3[n]=a,A_[l]=[o,t],e+a}function qre(t){return Array.isArray(t)?t:[t]}function Xre(t,e,n){const r=[];if(n[vb]=e,t)for(const i in n)t.setAttribute(i,n[i]);function s(i){return t!=null&&t.sheet?t.sheet.insertRule(i,t.sheet.cssRules.length):r.push(i)}return{elementAttributes:n,insertRule:s,element:t,bucketName:e,cssRules(){return t!=null&&t.sheet?Array.from(t.sheet.cssRules).map(i=>i.cssText):r}}}const Yre=["r","d","l","v","w","f","i","h","a","k","t","m"],l3=Yre.reduce((t,e,n)=>(t[e]=n,t),{});function Qre(t,e,n,r,s={}){const i=t==="m",o=i?t+s.m:t;if(!r.stylesheets[o]){const a=e&&e.createElement("style"),l=Xre(a,t,{...r.styleElementAttributes,...i&&{media:s.m}});r.stylesheets[o]=l,e&&a&&e.head.insertBefore(a,Zre(e,n,t,r,s))}return r.stylesheets[o]}function Zre(t,e,n,r,s){const i=l3[n];let o=c=>i-l3[c.getAttribute(vb)],a=t.head.querySelectorAll(`[${vb}]`);if(n==="m"&&s){const c=t.head.querySelectorAll(`[${vb}="${n}"]`);c.length&&(a=c,o=d=>r.compareMediaQueries(s.m,d.media))}const l=a.length;let u=l-1;for(;u>=0;){const c=a.item(u);if(o(c)>0)return c.nextSibling;u--}return l>0?a.item(0):e?e.nextSibling:null}let Jre=0;const ese=(t,e)=>t<e?-1:t>e?1:0;function tse(t=typeof document>"u"?void 0:document,e={}){const{unstable_filterCSSRule:n,insertionPoint:r,styleElementAttributes:s,compareMediaQueries:i=ese}=e,o={insertionCache:{},stylesheets:{},styleElementAttributes:Object.freeze(s),compareMediaQueries:i,id:`d${Jre++}`,insertCSSRules(a){for(const l in a){const u=a[l];for(let c=0,d=u.length;c<d;c++){const[h,f]=qre(u[c]),p=Qre(l,t,r||null,o,f);if(!o.insertionCache[h]){o.insertionCache[h]=l;try{n?n(h)&&p.insertRule(h):p.insertRule(h)}catch{}}}}}};return o}function nse(t,e){const n={};let r=null,s=null;function i(o){const{dir:a,renderer:l}=o,u=a==="ltr",c=u?l.id:l.id+"r";return u?r===null&&(r=o3(t,a)):s===null&&(s=o3(t,a)),n[c]===void 0&&(l.insertCSSRules(e),n[c]=!0),u?r:s}return i}const rse=w.createContext(tse());function sse(){return w.useContext(rse)}const ise=w.createContext("ltr");function ose(){return w.useContext(ise)}function ase(t,e){const n=nse(t,e);return function(){const s=ose(),i=sse();return n({dir:s,renderer:i})}}const lse=ase({root:{mc9l5x:"f1w7gpdv",Bg96gwp:"fez10in",ycbfsm:"fg4l7m0"}},{d:[".f1w7gpdv{display:inline;}",".fez10in{line-height:0;}"],t:["@media (forced-colors: active){.fg4l7m0{forced-color-adjust:auto;}}"]}),use=t=>{const{title:e,primaryFill:n="currentColor"}=t,r=rl(t,["title","primaryFill"]),s=Object.assign(Object.assign({},r),{title:void 0,fill:n}),i=lse();return s.className=Kre(i.root,s.className),e&&(s["aria-label"]=e),!s["aria-label"]&&!s["aria-labelledby"]?s["aria-hidden"]=!0:s.role="img",s},cse=(t,e)=>{const n=r=>{const s=use(r);return w.createElement(t,Object.assign({},s))};return n.displayName=e,n},Jf=cse,dse=t=>{const{fill:e="currentColor",className:n}=t;return w.createElement("svg",Object.assign({},t,{width:"1em",height:"1em",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",className:n}),w.createElement("path",{d:"M8 2a2 2 0 0 0-2 2v10c0 1.1.9 2 2 2h6a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8ZM7 4a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1V4ZM4 6a2 2 0 0 1 1-1.73V14.5A2.5 2.5 0 0 0 7.5 17h6.23A2 2 0 0 1 12 18H7.5A3.5 3.5 0 0 1 4 14.5V6Z",fill:e}))},hse=Jf(dse,"CopyRegular"),fse=t=>{const{fill:e="currentColor",className:n}=t;return w.createElement("svg",Object.assign({},t,{width:"1em",height:"1em",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",className:n}),w.createElement("path",{d:"M10 2a8 8 0 1 1 0 16 8 8 0 0 1 0-16Zm0 1a7 7 0 1 0 0 14 7 7 0 0 0 0-14Zm0 9.5a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5ZM10 6a.5.5 0 0 1 .5.41V11a.5.5 0 0 1-1 .09V6.5c0-.28.22-.5.5-.5Z",fill:e}))},pse=Jf(fse,"ErrorCircleRegular"),mse=t=>{const{fill:e="currentColor",className:n}=t;return w.createElement("svg",Object.assign({},t,{width:"1em",height:"1em",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",className:n}),w.createElement("path",{d:"M2.18 2.11a.5.5 0 0 1 .54-.06l15 7.5a.5.5 0 0 1 0 .9l-15 7.5a.5.5 0 0 1-.7-.58L3.98 10 2.02 2.63a.5.5 0 0 1 .16-.52Zm2.7 8.39-1.61 6.06L16.38 10 3.27 3.44 4.88 9.5h6.62a.5.5 0 1 1 0 1H4.88Z",fill:e}))},gse=Jf(mse,"SendRegular"),yse=t=>{const{fill:e="currentColor",className:n}=t;return w.createElement("svg",Object.assign({},t,{width:"1em",height:"1em",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",className:n}),w.createElement("path",{d:"M3 6a3 3 0 0 1 3-3h8a3 3 0 0 1 3 3v8a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3V6Zm3-2a2 2 0 0 0-2 2v8c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Z",fill:e}))},vse=Jf(yse,"SquareRegular"),bse=t=>{const{fill:e="currentColor",className:n}=t;return w.createElement("svg",Object.assign({},t,{width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",className:n}),w.createElement("path",{d:"M12.48 18.3c-.8.83-2.09.38-2.43-.6-.28-.8-.64-1.77-1-2.48C8 13.1 7.38 11.9 5.67 10.37c-.23-.2-.52-.36-.84-.49-1.13-.44-2.2-1.61-1.91-3l.35-1.77a2.5 2.5 0 0 1 1.8-1.92l5.6-1.53a4.5 4.5 0 0 1 5.6 3.54l.69 3.76A3 3 0 0 1 14 12.5h-.89l.01.05c.08.41.18.97.24 1.58.07.62.1 1.29.05 1.92a3.68 3.68 0 0 1-.5 1.73c-.11.16-.27.35-.44.52Z",fill:e}))},Ese=Jf(bse,"ThumbDislike20Filled"),Tse=t=>{const{fill:e="currentColor",className:n}=t;return w.createElement("svg",Object.assign({},t,{width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",className:n}),w.createElement("path",{d:"M12.48 1.7c-.8-.83-2.09-.38-2.43.6-.28.8-.64 1.77-1 2.48C8 6.9 7.38 8.1 5.67 9.63c-.23.2-.52.36-.84.49-1.13.44-2.2 1.61-1.91 3l.35 1.77a2.5 2.5 0 0 0 1.8 1.92l5.6 1.52a4.5 4.5 0 0 0 5.6-3.53l.69-3.76A3 3 0 0 0 14 7.5h-.89l.01-.05c.08-.41.18-.97.24-1.59.07-.6.1-1.28.05-1.9a3.68 3.68 0 0 0-.5-1.74 4.16 4.16 0 0 0-.44-.52Z",fill:e}))},xse=Jf(Tse,"ThumbLike20Filled"),Cse="_shareButtonRoot_miks7_1",Sse="_historyButtonRoot_miks7_26",P6={shareButtonRoot:Cse,historyButtonRoot:Sse},wse=({onClick:t,text:e})=>te(ig,{className:P6.shareButtonRoot,iconProps:{iconName:"Share"},onClick:t,text:e}),_se=({onClick:t,text:e})=>te(Hg,{className:P6.historyButtonRoot,text:e,iconProps:{iconName:"History"},onClick:t}),kse=(t,e)=>{switch(e.type){case"TOGGLE_CHAT_HISTORY":return{...t,isChatHistoryOpen:!t.isChatHistoryOpen};case"UPDATE_CURRENT_CHAT":return{...t,currentChat:e.payload};case"UPDATE_CHAT_HISTORY_LOADING_STATE":return{...t,chatHistoryLoadingState:e.payload};case"UPDATE_CHAT_HISTORY":if(!t.chatHistory||!t.currentChat)return t;let n=t.chatHistory.findIndex(o=>o.id===e.payload.id);if(n!==-1){let o=[...t.chatHistory];return o[n]=t.currentChat,{...t,chatHistory:o}}else return{...t,chatHistory:[...t.chatHistory,e.payload]};case"UPDATE_CHAT_TITLE":if(!t.chatHistory)return{...t,chatHistory:[]};let r=t.chatHistory.map(o=>{var a;return o.id===e.payload.id?(((a=t.currentChat)==null?void 0:a.id)===e.payload.id&&(t.currentChat.title=e.payload.title),{...o,title:e.payload.title}):o});return{...t,chatHistory:r};case"DELETE_CHAT_ENTRY":if(!t.chatHistory)return{...t,chatHistory:[]};let s=t.chatHistory.filter(o=>o.id!==e.payload);return t.currentChat=null,{...t,chatHistory:s};case"DELETE_CHAT_HISTORY":return{...t,chatHistory:[],filteredChatHistory:[],currentChat:null};case"DELETE_CURRENT_CHAT_MESSAGES":if(!t.currentChat||!t.chatHistory)return t;const i={...t.currentChat,messages:[]};return{...t,currentChat:i};case"FETCH_CHAT_HISTORY":return{...t,chatHistory:e.payload};case"SET_COSMOSDB_STATUS":return{...t,isCosmosDBAvailable:e.payload};case"FETCH_FRONTEND_SETTINGS":return{...t,frontendSettings:e.payload};case"SET_FEEDBACK_STATE":return{...t,feedbackState:{...t.feedbackState,[e.payload.answerId]:e.payload.feedback}};default:return t}};var ds=(t=>(t.NotConfigured="CosmosDB is not configured",t.NotWorking="CosmosDB is not working",t.InvalidCredentials="CosmosDB has invalid credentials",t.InvalidDatabase="Invalid CosmosDB database name",t.InvalidContainer="Invalid CosmosDB container name",t.Working="CosmosDB is configured and working",t))(ds||{}),_s=(t=>(t.Loading="loading",t.Success="success",t.Fail="fail",t.NotStarted="notStarted",t))(_s||{}),kt=(t=>(t.Neutral="neutral",t.Positive="positive",t.Negative="negative",t.MissingCitation="missing_citation",t.WrongCitation="wrong_citation",t.OutOfScope="out_of_scope",t.InaccurateOrIrrelevant="inaccurate_or_irrelevant",t.OtherUnhelpful="other_unhelpful",t.HateSpeech="hate_speech",t.Violent="violent",t.Sexual="sexual",t.Manipulative="manipulative",t.OtherHarmful="other_harmlful",t))(kt||{});async function M6(t,e){return await fetch("/conversation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:t.messages}),signal:e})}async function Ise(){const t=await fetch("/.auth/me");return t.ok?await t.json():(console.log("No identity provider found. Access to chat will be blocked."),[])}const B6=async(t=0)=>await fetch(`/history/list?offset=${t}`,{method:"GET"}).then(async n=>{const r=await n.json();return Array.isArray(r)?await Promise.all(r.map(async i=>{let o=[];return o=await Nse(i.id).then(l=>l).catch(l=>(console.error("error fetching messages: ",l),[])),{id:i.id,title:i.title,date:i.createdAt,messages:o}})):(console.error("There was an issue fetching your data."),null)}).catch(n=>(console.error("There was an issue fetching your data."),null)),Nse=async t=>await fetch("/history/read",{method:"POST",body:JSON.stringify({conversation_id:t}),headers:{"Content-Type":"application/json"}}).then(async n=>{if(!n)return[];const r=await n.json();let s=[];return r!=null&&r.messages&&r.messages.forEach(i=>{const o={id:i.id,role:i.role,date:i.createdAt,content:i.content,feedback:i.feedback??void 0};s.push(o)}),s}).catch(n=>(console.error("There was an issue fetching your data."),[])),u3=async(t,e,n)=>{let r;return n?r=JSON.stringify({conversation_id:n,messages:t.messages}):r=JSON.stringify({messages:t.messages}),await fetch("/history/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:r,signal:e}).then(i=>i).catch(i=>(console.error("There was an issue fetching your data."),new Response))},Ase=async(t,e)=>await fetch("/history/update",{method:"POST",body:JSON.stringify({conversation_id:e,messages:t}),headers:{"Content-Type":"application/json"}}).then(async r=>r).catch(r=>(console.error("There was an issue fetching your data."),{...new Response,ok:!1,status:500})),Dse=async t=>await fetch("/history/delete",{method:"DELETE",body:JSON.stringify({conversation_id:t}),headers:{"Content-Type":"application/json"}}).then(n=>n).catch(n=>(console.error("There was an issue fetching your data."),{...new Response,ok:!1,status:500})),Rse=async()=>await fetch("/history/delete_all",{method:"DELETE",body:JSON.stringify({}),headers:{"Content-Type":"application/json"}}).then(e=>e).catch(e=>(console.error("There was an issue fetching your data."),{...new Response,ok:!1,status:500})),Fse=async t=>await fetch("/history/clear",{method:"POST",body:JSON.stringify({conversation_id:t}),headers:{"Content-Type":"application/json"}}).then(n=>n).catch(n=>(console.error("There was an issue fetching your data."),{...new Response,ok:!1,status:500})),Ose=async(t,e)=>await fetch("/history/rename",{method:"POST",body:JSON.stringify({conversation_id:t,title:e}),headers:{"Content-Type":"application/json"}}).then(r=>r).catch(r=>(console.error("There was an issue fetching your data."),{...new Response,ok:!1,status:500})),$se=async()=>await fetch("/history/ensure",{method:"GET"}).then(async e=>{let n=await e.json(),r;return n.message?r=ds.Working:e.status===500?r=ds.NotWorking:e.status===401?r=ds.InvalidCredentials:e.status===422?r=n.error:r=ds.NotConfigured,e.ok?{cosmosDB:!0,status:r}:{cosmosDB:!1,status:r}}).catch(e=>(console.error("There was an issue fetching your data."),{cosmosDB:!1,status:e})),Lse=async()=>await fetch("/frontend_settings",{method:"GET"}).then(e=>(console.log("successfully retrieved front end settings"),console.log(e),e.json())).catch(e=>(console.error("There was an issue fetching your data."),null)),mS=async(t,e)=>await fetch("/history/message_feedback",{method:"POST",body:JSON.stringify({message_id:t,message_feedback:e}),headers:{"Content-Type":"application/json"}}).then(r=>r).catch(r=>(console.error("There was an issue logging feedback."),{...new Response,ok:!1,status:500})),Pse={isChatHistoryOpen:!1,chatHistoryLoadingState:_s.Loading,chatHistory:null,filteredChatHistory:null,currentChat:null,isCosmosDBAvailable:{cosmosDB:!1,status:ds.NotConfigured},frontendSettings:null,feedbackState:{}},Xl=w.createContext(void 0),Mse=({children:t})=>{const[e,n]=w.useReducer(kse,Pse);return w.useEffect(()=>{const r=async(i=0)=>await B6(i).then(a=>(n(a?{type:"FETCH_CHAT_HISTORY",payload:a}:{type:"FETCH_CHAT_HISTORY",payload:null}),a)).catch(a=>(n({type:"UPDATE_CHAT_HISTORY_LOADING_STATE",payload:_s.Fail}),n({type:"FETCH_CHAT_HISTORY",payload:null}),console.error("There was an issue fetching your data."),null));(async()=>{n({type:"UPDATE_CHAT_HISTORY_LOADING_STATE",payload:_s.Loading}),$se().then(i=>{if(i!=null&&i.cosmosDB){const o=setTimeout(()=>{r().then(a=>{a?(n({type:"UPDATE_CHAT_HISTORY_LOADING_STATE",payload:_s.Success}),n({type:"SET_COSMOSDB_STATUS",payload:i})):(n({type:"UPDATE_CHAT_HISTORY_LOADING_STATE",payload:_s.Fail}),n({type:"SET_COSMOSDB_STATUS",payload:{cosmosDB:!1,status:ds.NotWorking}}))}).catch(a=>{n({type:"UPDATE_CHAT_HISTORY_LOADING_STATE",payload:_s.Fail}),n({type:"SET_COSMOSDB_STATUS",payload:{cosmosDB:!1,status:ds.NotWorking}})})},3e3);return()=>clearTimeout(o)}else n({type:"UPDATE_CHAT_HISTORY_LOADING_STATE",payload:_s.Fail}),n({type:"SET_COSMOSDB_STATUS",payload:i})}).catch(i=>{n({type:"UPDATE_CHAT_HISTORY_LOADING_STATE",payload:_s.Fail}),n({type:"SET_COSMOSDB_STATUS",payload:{cosmosDB:!1,status:ds.NotConfigured}})})})()},[]),w.useEffect(()=>{(async()=>{Lse().then(s=>{n({type:"FETCH_FRONTEND_SETTINGS",payload:s})}).catch(s=>{console.error("There was an issue fetching your data.")})})()},[]),te(Xl.Provider,{value:{state:e,dispatch:n},children:t})},Bse=({onModelChange:t})=>{const[e,n]=w.useState(!1);return te("div",{className:"model-switch spacing",children:te(Ene,{onText:"ChatGPT 4.0",offText:"ChatGPT 3.5",checked:e,onChange:(s,i)=>{n(i??!1),t(i?"chatgpt-4.0":"chatgpt-3.5")}})})},zse=()=>{var L,z,H;const[t,e]=w.useState(!1),[n,r]=w.useState(!1),[s,i]=w.useState("Copy URL"),[o,a]=w.useState("Share"),[l,u]=w.useState("Hide chat history"),[c,d]=w.useState("Show chat history"),h=w.useContext(Xl),f=(L=h==null?void 0:h.state.frontendSettings)==null?void 0:L.ui,[p,m]=w.useState(!1),[y,g]=w.useState(!1),[v,E]=w.useState(""),b=$=>{E($)},T=()=>{console.log("Settings button clicked"),m(!0)},x=()=>{m(!1)},C=async($,M)=>{g(M||!1),(await fetch("/api/set_prompt_template",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({promptType:M?"tutor":"default"})})).ok||console.error("Failed to set prompt type")},S=()=>{e(!0)},N=()=>{e(!1),r(!1),i("Copy URL")},I=()=>{navigator.clipboard.writeText(window.location.href),r(!0)},F=()=>{h==null||h.dispatch({type:"TOGGLE_CHAT_HISTORY"})};return w.useEffect(()=>{n&&i("Copied URL")},[n]),w.useEffect(()=>{},[h==null?void 0:h.state.isCosmosDBAvailable.status]),w.useEffect(()=>{const $=()=>{window.innerWidth<480?(a(void 0),u("Hide history"),d("Show history")):(a("Share"),u("Hide chat history"),d("Show chat history"))};return window.addEventListener("resize",$),$(),()=>window.removeEventListener("resize",$)},[]),Xe("div",{className:hl.layout,children:[te("header",{className:hl.header,role:"banner",children:Xe(tt,{horizontal:!0,verticalAlign:"center",horizontalAlign:"space-between",children:[Xe(tt,{horizontal:!0,verticalAlign:"center",children:[te("img",{src:f!=null&&f.logo?f.logo:O6,className:hl.headerIcon,"aria-hidden":"true"}),te(_re,{to:"/",className:hl.headerTitleContainer,children:te("h1",{className:hl.headerTitle,children:f==null?void 0:f.title})}),te(Nu,{iconProps:{iconName:"Settings"},title:"Settings",ariaLabel:"Settings",onClick:T}),te(Dl,{variant:"large",children:"Settings"}),te("div",{className:"main-screen",children:te(Bse,{onModelChange:b})})]}),(f==null?void 0:f.show_share_button)&&Xe(tt,{horizontal:!0,tokens:{childrenGap:4},children:[((z=h==null?void 0:h.state.isCosmosDBAvailable)==null?void 0:z.status)!==ds.NotConfigured&&te(_se,{onClick:F,text:(H=h==null?void 0:h.state)!=null&&H.isChatHistoryOpen?l:c}),te(wse,{onClick:S,text:o})]})]})}),te(yre,{}),te(Sd,{onDismiss:N,hidden:!t,styles:{main:[{selectors:{["@media (min-width: 480px)"]:{maxWidth:"600px",background:"#FFFFFF",boxShadow:"0px 14px 28.8px rgba(0, 0, 0, 0.24), 0px 0px 8px rgba(0, 0, 0, 0.2)",borderRadius:"8px",maxHeight:"200px",minHeight:"100px"}}}]},dialogContentProps:{title:"Share the web app",showCloseButton:!0},children:Xe(tt,{horizontal:!0,verticalAlign:"center",style:{gap:"8px"},children:[te(mN,{className:hl.urlTextBox,defaultValue:window.location.href,readOnly:!0}),Xe("div",{className:hl.copyButtonContainer,role:"button",tabIndex:0,"aria-label":"Copy",onClick:I,onKeyDown:$=>$.key==="Enter"||$.key===" "?I():null,children:[te(hse,{className:hl.copyButton}),te("span",{className:hl.copyButtonText,children:s})]})]})}),te(Sd,{onDismiss:x,hidden:!p,dialogContentProps:{title:"Chat Mode",showCloseButton:!0},children:te(Mo,{label:"Tutor Me",checked:y,onChange:C})})]})},Hse=()=>te("h1",{children:"404"}),c3=["http","https","mailto","tel"];function Use(t){const e=(t||"").trim(),n=e.charAt(0);if(n==="#"||n==="/")return e;const r=e.indexOf(":");if(r===-1)return e;let s=-1;for(;++s<c3.length;){const i=c3[s];if(r===i.length&&e.slice(0,i.length).toLowerCase()===i)return e}return s=e.indexOf("?"),s!==-1&&r>s||(s=e.indexOf("#"),s!==-1&&r>s)?e:"javascript:void(0)"}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var z6=function(e){return e!=null&&e.constructor!=null&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)};function xm(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?d3(t.position):"start"in t||"end"in t?d3(t):"line"in t||"column"in t?R_(t):""}function R_(t){return h3(t&&t.line)+":"+h3(t&&t.column)}function d3(t){return R_(t&&t.start)+"-"+R_(t&&t.end)}function h3(t){return t&&typeof t=="number"?t:1}class wo extends Error{constructor(e,n,r){const s=[null,null];let i={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const o=r.indexOf(":");o===-1?s[1]=r:(s[0]=r.slice(0,o),s[1]=r.slice(o+1))}n&&("type"in n||"position"in n?n.position&&(i=n.position):"start"in n||"end"in n?i=n:("line"in n||"column"in n)&&(i.start=n)),this.name=xm(n)||"1:1",this.message=typeof e=="object"?e.message:e,this.stack="",typeof e=="object"&&e.stack&&(this.stack=e.stack),this.reason=this.message,this.fatal,this.line=i.start.line,this.column=i.start.column,this.position=i,this.source=s[0],this.ruleId=s[1],this.file,this.actual,this.expected,this.url,this.note}}wo.prototype.file="";wo.prototype.name="";wo.prototype.reason="";wo.prototype.message="";wo.prototype.stack="";wo.prototype.fatal=null;wo.prototype.column=null;wo.prototype.line=null;wo.prototype.source=null;wo.prototype.ruleId=null;wo.prototype.position=null;const _a={basename:Wse,dirname:Vse,extname:Gse,join:jse,sep:"/"};function Wse(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Wg(t);let n=0,r=-1,s=t.length,i;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.charCodeAt(s)===47){if(i){n=s+1;break}}else r<0&&(i=!0,r=s+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;s--;)if(t.charCodeAt(s)===47){if(i){n=s+1;break}}else o<0&&(i=!0,o=s+1),a>-1&&(t.charCodeAt(s)===e.charCodeAt(a--)?a<0&&(r=s):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function Vse(t){if(Wg(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.charCodeAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.charCodeAt(0)===47?"/":".":e===1&&t.charCodeAt(0)===47?"//":t.slice(0,e)}function Gse(t){Wg(t);let e=t.length,n=-1,r=0,s=-1,i=0,o;for(;e--;){const a=t.charCodeAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?s<0?s=e:i!==1&&(i=1):s>-1&&(i=-1)}return s<0||n<0||i===0||i===1&&s===n-1&&s===r+1?"":t.slice(s,n)}function jse(...t){let e=-1,n;for(;++e<t.length;)Wg(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":Kse(n)}function Kse(t){Wg(t);const e=t.charCodeAt(0)===47;let n=qse(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.charCodeAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function qse(t,e){let n="",r=0,s=-1,i=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(s===o-1||i===1))if(s!==o-1&&i===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),s=o,i=0;continue}}else if(n.length>0){n="",r=0,s=o,i=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(s+1,o):n=t.slice(s+1,o),r=o-s-1;s=o,i=0}else a===46&&i>-1?i++:i=-1}return n}function Wg(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const Xse={cwd:Yse};function Yse(){return"/"}function F_(t){return t!==null&&typeof t=="object"&&t.href&&t.origin}function Qse(t){if(typeof t=="string")t=new URL(t);else if(!F_(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return Zse(t)}function Zse(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.charCodeAt(n)===37&&e.charCodeAt(n+1)===50){const r=e.charCodeAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const gS=["history","path","basename","stem","extname","dirname"];class H6{constructor(e){let n;e?typeof e=="string"||Jse(e)?n={value:e}:F_(e)?n={path:e}:n=e:n={},this.data={},this.messages=[],this.history=[],this.cwd=Xse.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<gS.length;){const i=gS[r];i in n&&n[i]!==void 0&&n[i]!==null&&(this[i]=i==="history"?[...n[i]]:n[i])}let s;for(s in n)gS.includes(s)||(this[s]=n[s])}get path(){return this.history[this.history.length-1]}set path(e){F_(e)&&(e=Qse(e)),vS(e,"path"),this.path!==e&&this.history.push(e)}get dirname(){return typeof this.path=="string"?_a.dirname(this.path):void 0}set dirname(e){f3(this.basename,"dirname"),this.path=_a.join(e||"",this.basename)}get basename(){return typeof this.path=="string"?_a.basename(this.path):void 0}set basename(e){vS(e,"basename"),yS(e,"basename"),this.path=_a.join(this.dirname||"",e)}get extname(){return typeof this.path=="string"?_a.extname(this.path):void 0}set extname(e){if(yS(e,"extname"),f3(this.dirname,"extname"),e){if(e.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=_a.join(this.dirname,this.stem+(e||""))}get stem(){return typeof this.path=="string"?_a.basename(this.path,this.extname):void 0}set stem(e){vS(e,"stem"),yS(e,"stem"),this.path=_a.join(this.dirname||"",e+(this.extname||""))}toString(e){return(this.value||"").toString(e||void 0)}message(e,n,r){const s=new wo(e,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}info(e,n,r){const s=this.message(e,n,r);return s.fatal=null,s}fail(e,n,r){const s=this.message(e,n,r);throw s.fatal=!0,s}}function yS(t,e){if(t&&t.includes(_a.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+_a.sep+"`")}function vS(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function f3(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function Jse(t){return z6(t)}function p3(t){if(t)throw t}var bb=Object.prototype.hasOwnProperty,U6=Object.prototype.toString,m3=Object.defineProperty,g3=Object.getOwnPropertyDescriptor,y3=function(e){return typeof Array.isArray=="function"?Array.isArray(e):U6.call(e)==="[object Array]"},v3=function(e){if(!e||U6.call(e)!=="[object Object]")return!1;var n=bb.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&bb.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var s;for(s in e);return typeof s>"u"||bb.call(e,s)},b3=function(e,n){m3&&n.name==="__proto__"?m3(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},E3=function(e,n){if(n==="__proto__")if(bb.call(e,n)){if(g3)return g3(e,n).value}else return;return e[n]},T3=function t(){var e,n,r,s,i,o,a=arguments[0],l=1,u=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<u;++l)if(e=arguments[l],e!=null)for(n in e)r=E3(a,n),s=E3(e,n),a!==s&&(c&&s&&(v3(s)||(i=y3(s)))?(i?(i=!1,o=r&&y3(r)?r:[]):o=r&&v3(r)?r:{},b3(a,{name:n,newValue:t(c,o,s)})):typeof s<"u"&&b3(a,{name:n,newValue:s}));return a};function O_(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function eie(){const t=[],e={run:n,use:r};return e;function n(...s){let i=-1;const o=s.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...s);function a(l,...u){const c=t[++i];let d=-1;if(l){o(l);return}for(;++d<s.length;)(u[d]===null||u[d]===void 0)&&(u[d]=s[d]);s=u,c?tie(c,a)(...u):o(null,...u)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),e}}function tie(t,e){let n;return r;function r(...o){const a=t.length>o.length;let l;a&&o.push(s);try{l=t.apply(this,o)}catch(u){const c=u;if(a&&n)throw c;return s(c)}a||(l instanceof Promise?l.then(i,s):l instanceof Error?s(l):i(l))}function s(o,...a){n||(n=!0,e(o,...a))}function i(o){s(null,o)}}const nie=V6().freeze(),W6={}.hasOwnProperty;function V6(){const t=eie(),e=[];let n={},r,s=-1;return i.data=o,i.Parser=void 0,i.Compiler=void 0,i.freeze=a,i.attachers=e,i.use=l,i.parse=u,i.stringify=c,i.run=d,i.runSync=h,i.process=f,i.processSync=p,i;function i(){const m=V6();let y=-1;for(;++y<e.length;)m.use(...e[y]);return m.data(T3(!0,{},n)),m}function o(m,y){return typeof m=="string"?arguments.length===2?(TS("data",r),n[m]=y,i):W6.call(n,m)&&n[m]||null:m?(TS("data",r),n=m,i):n}function a(){if(r)return i;for(;++s<e.length;){const[m,...y]=e[s];if(y[0]===!1)continue;y[0]===!0&&(y[0]=void 0);const g=m.call(i,...y);typeof g=="function"&&t.use(g)}return r=!0,s=Number.POSITIVE_INFINITY,i}function l(m,...y){let g;if(TS("use",r),m!=null)if(typeof m=="function")T(m,...y);else if(typeof m=="object")Array.isArray(m)?b(m):E(m);else throw new TypeError("Expected usable value, not `"+m+"`");return g&&(n.settings=Object.assign(n.settings||{},g)),i;function v(x){if(typeof x=="function")T(x);else if(typeof x=="object")if(Array.isArray(x)){const[C,...S]=x;T(C,...S)}else E(x);else throw new TypeError("Expected usable value, not `"+x+"`")}function E(x){b(x.plugins),x.settings&&(g=Object.assign(g||{},x.settings))}function b(x){let C=-1;if(x!=null)if(Array.isArray(x))for(;++C<x.length;){const S=x[C];v(S)}else throw new TypeError("Expected a list of plugins, not `"+x+"`")}function T(x,C){let S=-1,N;for(;++S<e.length;)if(e[S][0]===x){N=e[S];break}N?(O_(N[1])&&O_(C)&&(C=T3(!0,N[1],C)),N[1]=C):e.push([...arguments])}}function u(m){i.freeze();const y=O1(m),g=i.Parser;return bS("parse",g),x3(g,"parse")?new g(String(y),y).parse():g(String(y),y)}function c(m,y){i.freeze();const g=O1(y),v=i.Compiler;return ES("stringify",v),C3(m),x3(v,"compile")?new v(m,g).compile():v(m,g)}function d(m,y,g){if(C3(m),i.freeze(),!g&&typeof y=="function"&&(g=y,y=void 0),!g)return new Promise(v);v(null,g);function v(E,b){t.run(m,O1(y),T);function T(x,C,S){C=C||m,x?b(x):E?E(C):g(null,C,S)}}}function h(m,y){let g,v;return i.run(m,y,E),S3("runSync","run",v),g;function E(b,T){p3(b),g=T,v=!0}}function f(m,y){if(i.freeze(),bS("process",i.Parser),ES("process",i.Compiler),!y)return new Promise(g);g(null,y);function g(v,E){const b=O1(m);i.run(i.parse(b),b,(x,C,S)=>{if(x||!C||!S)T(x);else{const N=i.stringify(C,S);N==null||(iie(N)?S.value=N:S.result=N),T(x,S)}});function T(x,C){x||!C?E(x):v?v(C):y(null,C)}}}function p(m){let y;i.freeze(),bS("processSync",i.Parser),ES("processSync",i.Compiler);const g=O1(m);return i.process(g,v),S3("processSync","process",y),g;function v(E){y=!0,p3(E)}}}function x3(t,e){return typeof t=="function"&&t.prototype&&(rie(t.prototype)||e in t.prototype)}function rie(t){let e;for(e in t)if(W6.call(t,e))return!0;return!1}function bS(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `Parser`")}function ES(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `Compiler`")}function TS(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function C3(t){if(!O_(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function S3(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function O1(t){return sie(t)?t:new H6(t)}function sie(t){return Boolean(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function iie(t){return typeof t=="string"||z6(t)}const oie={};function aie(t,e){const n=e||oie,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return G6(t,r,s)}function G6(t,e,n){if(lie(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return w3(t.children,e,n)}return Array.isArray(t)?w3(t,e,n):""}function w3(t,e,n){const r=[];let s=-1;for(;++s<t.length;)r[s]=G6(t[s],e,n);return r.join("")}function lie(t){return Boolean(t&&typeof t=="object")}function Pi(t,e,n,r){const s=t.length;let i=0,o;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),[].splice.apply(t,o);else for(n&&[].splice.apply(t,[e,n]);i<r.length;)o=r.slice(i,i+1e4),o.unshift(e,0),[].splice.apply(t,o),i+=1e4,e+=1e4}function oo(t,e){return t.length>0?(Pi(t,t.length,0,e),t):e}const _3={}.hasOwnProperty;function j6(t){const e={};let n=-1;for(;++n<t.length;)uie(e,t[n]);return e}function uie(t,e){let n;for(n in e){const s=(_3.call(t,n)?t[n]:void 0)||(t[n]={}),i=e[n];let o;for(o in i){_3.call(s,o)||(s[o]=[]);const a=i[o];cie(s[o],Array.isArray(a)?a:a?[a]:[])}}}function cie(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);Pi(t,0,0,r)}const die=/[!-/:-@[-`{-~\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Rs=fc(/[A-Za-z]/),$_=fc(/\d/),hie=fc(/[\dA-Fa-f]/),ui=fc(/[\dA-Za-z]/),fie=fc(/[!-/:-@[-`{-~]/),k3=fc(/[#-'*+\--9=?A-Z^-~]/);function yE(t){return t!==null&&(t<32||t===127)}function kn(t){return t!==null&&(t<0||t===32)}function Ze(t){return t!==null&&t<-2}function fn(t){return t===-2||t===-1||t===32}const wd=fc(/\s/),NT=fc(die);function fc(t){return e;function e(n){return n!==null&&t.test(String.fromCharCode(n))}}function Ft(t,e,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let i=0;return o;function o(l){return fn(l)?(t.enter(n),a(l)):e(l)}function a(l){return fn(l)&&i++<s?(t.consume(l),a):(t.exit(n),e(l))}}const pie={tokenize:mie};function mie(t){const e=t.attempt(this.parser.constructs.contentInitial,r,s);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Ft(t,e,"linePrefix")}function s(a){return t.enter("paragraph"),i(a)}function i(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return Ze(a)?(t.consume(a),t.exit("chunkText"),i):(t.consume(a),o)}}const gie={tokenize:yie},I3={tokenize:vie};function yie(t){const e=this,n=[];let r=0,s,i,o;return a;function a(E){if(r<n.length){const b=n[r];return e.containerState=b[1],t.attempt(b[0].continuation,l,u)(E)}return u(E)}function l(E){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&v();const b=e.events.length;let T=b,x;for(;T--;)if(e.events[T][0]==="exit"&&e.events[T][1].type==="chunkFlow"){x=e.events[T][1].end;break}g(r);let C=b;for(;C<e.events.length;)e.events[C][1].end=Object.assign({},x),C++;return Pi(e.events,T+1,0,e.events.slice(b)),e.events.length=C,u(E)}return a(E)}function u(E){if(r===n.length){if(!s)return h(E);if(s.currentConstruct&&s.currentConstruct.concrete)return p(E);e.interrupt=Boolean(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(I3,c,d)(E)}function c(E){return s&&v(),g(r),h(E)}function d(E){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,p(E)}function h(E){return e.containerState={},t.attempt(I3,f,p)(E)}function f(E){return r++,n.push([e.currentConstruct,e.containerState]),h(E)}function p(E){if(E===null){s&&v(),g(0),t.consume(E);return}return s=s||e.parser.flow(e.now()),t.enter("chunkFlow",{contentType:"flow",previous:i,_tokenizer:s}),m(E)}function m(E){if(E===null){y(t.exit("chunkFlow"),!0),g(0),t.consume(E);return}return Ze(E)?(t.consume(E),y(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(E),m)}function y(E,b){const T=e.sliceStream(E);if(b&&T.push(null),E.previous=i,i&&(i.next=E),i=E,s.defineSkip(E.start),s.write(T),e.parser.lazy[E.start.line]){let x=s.events.length;for(;x--;)if(s.events[x][1].start.offset<o&&(!s.events[x][1].end||s.events[x][1].end.offset>o))return;const C=e.events.length;let S=C,N,I;for(;S--;)if(e.events[S][0]==="exit"&&e.events[S][1].type==="chunkFlow"){if(N){I=e.events[S][1].end;break}N=!0}for(g(r),x=C;x<e.events.length;)e.events[x][1].end=Object.assign({},I),x++;Pi(e.events,S+1,0,e.events.slice(C)),e.events.length=x}}function g(E){let b=n.length;for(;b-- >E;){const T=n[b];e.containerState=T[1],T[0].exit.call(e,t)}n.length=E}function v(){s.write([null]),i=void 0,s=void 0,e.containerState._closeFlow=void 0}}function vie(t,e,n){return Ft(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function vE(t){if(t===null||kn(t)||wd(t))return 1;if(NT(t))return 2}function AT(t,e,n){const r=[];let s=-1;for(;++s<t.length;){const i=t[s].resolveAll;i&&!r.includes(i)&&(e=i(e,n),r.push(i))}return e}const L_={name:"attention",tokenize:Eie,resolveAll:bie};function bie(t,e){let n=-1,r,s,i,o,a,l,u,c;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const d=Object.assign({},t[r][1].end),h=Object.assign({},t[n][1].start);N3(d,-l),N3(h,l),o={type:l>1?"strongSequence":"emphasisSequence",start:d,end:Object.assign({},t[r][1].end)},a={type:l>1?"strongSequence":"emphasisSequence",start:Object.assign({},t[n][1].start),end:h},i={type:l>1?"strongText":"emphasisText",start:Object.assign({},t[r][1].end),end:Object.assign({},t[n][1].start)},s={type:l>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},t[r][1].end=Object.assign({},o.start),t[n][1].start=Object.assign({},a.end),u=[],t[r][1].end.offset-t[r][1].start.offset&&(u=oo(u,[["enter",t[r][1],e],["exit",t[r][1],e]])),u=oo(u,[["enter",s,e],["enter",o,e],["exit",o,e],["enter",i,e]]),u=oo(u,AT(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),u=oo(u,[["exit",i,e],["enter",a,e],["exit",a,e],["exit",s,e]]),t[n][1].end.offset-t[n][1].start.offset?(c=2,u=oo(u,[["enter",t[n][1],e],["exit",t[n][1],e]])):c=0,Pi(t,r-1,n-r+3,u),n=r+u.length-c-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function Eie(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=vE(r);let i;return o;function o(l){return t.enter("attentionSequence"),i=l,a(l)}function a(l){if(l===i)return t.consume(l),a;const u=t.exit("attentionSequence"),c=vE(l),d=!c||c===2&&s||n.includes(l),h=!s||s===2&&c||n.includes(r);return u._open=Boolean(i===42?d:d&&(s||!h)),u._close=Boolean(i===42?h:h&&(c||!d)),e(l)}}function N3(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const Tie={name:"autolink",tokenize:xie};function xie(t,e,n){let r=1;return s;function s(p){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),i}function i(p){return Rs(p)?(t.consume(p),o):k3(p)?u(p):n(p)}function o(p){return p===43||p===45||p===46||ui(p)?a(p):u(p)}function a(p){return p===58?(t.consume(p),l):(p===43||p===45||p===46||ui(p))&&r++<32?(t.consume(p),a):u(p)}function l(p){return p===62?(t.exit("autolinkProtocol"),f(p)):p===null||p===32||p===60||yE(p)?n(p):(t.consume(p),l)}function u(p){return p===64?(t.consume(p),r=0,c):k3(p)?(t.consume(p),u):n(p)}function c(p){return ui(p)?d(p):n(p)}function d(p){return p===46?(t.consume(p),r=0,c):p===62?(t.exit("autolinkProtocol").type="autolinkEmail",f(p)):h(p)}function h(p){return(p===45||ui(p))&&r++<63?(t.consume(p),p===45?h:d):n(p)}function f(p){return t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),e}}const Vg={tokenize:Cie,partial:!0};function Cie(t,e,n){return Ft(t,r,"linePrefix");function r(s){return s===null||Ze(s)?e(s):n(s)}}const K6={name:"blockQuote",tokenize:Sie,continuation:{tokenize:wie},exit:_ie};function Sie(t,e,n){const r=this;return s;function s(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),i}return n(o)}function i(o){return fn(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function wie(t,e,n){return Ft(t,t.attempt(K6,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function _ie(t){t.exit("blockQuote")}const q6={name:"characterEscape",tokenize:kie};function kie(t,e,n){return r;function r(i){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(i),t.exit("escapeMarker"),s}function s(i){return fie(i)?(t.enter("characterEscapeValue"),t.consume(i),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(i)}}const A3=document.createElement("i");function xN(t){const e="&"+t+";";A3.innerHTML=e;const n=A3.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}const X6={name:"characterReference",tokenize:Iie};function Iie(t,e,n){const r=this;let s=0,i,o;return a;function a(d){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),l}function l(d){return d===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(d),t.exit("characterReferenceMarkerNumeric"),u):(t.enter("characterReferenceValue"),i=31,o=ui,c(d))}function u(d){return d===88||d===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(d),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),i=6,o=hie,c):(t.enter("characterReferenceValue"),i=7,o=$_,c(d))}function c(d){let h;return d===59&&s?(h=t.exit("characterReferenceValue"),o===ui&&!xN(r.sliceSerialize(h))?n(d):(t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)):o(d)&&s++<i?(t.consume(d),c):n(d)}}const D3={name:"codeFenced",tokenize:Nie,concrete:!0};function Nie(t,e,n){const r=this,s={tokenize:T,partial:!0},i={tokenize:b,partial:!0},o=this.events[this.events.length-1],a=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0;let l=0,u;return c;function c(x){return t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u=x,d(x)}function d(x){return x===u?(t.consume(x),l++,d):(t.exit("codeFencedFenceSequence"),l<3?n(x):Ft(t,h,"whitespace")(x))}function h(x){return x===null||Ze(x)?y(x):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),f(x))}function f(x){return x===null||kn(x)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Ft(t,p,"whitespace")(x)):x===96&&x===u?n(x):(t.consume(x),f)}function p(x){return x===null||Ze(x)?y(x):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),m(x))}function m(x){return x===null||Ze(x)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),y(x)):x===96&&x===u?n(x):(t.consume(x),m)}function y(x){return t.exit("codeFencedFence"),r.interrupt?e(x):g(x)}function g(x){return x===null?E(x):Ze(x)?t.attempt(i,t.attempt(s,E,a?Ft(t,g,"linePrefix",a+1):g),E)(x):(t.enter("codeFlowValue"),v(x))}function v(x){return x===null||Ze(x)?(t.exit("codeFlowValue"),g(x)):(t.consume(x),v)}function E(x){return t.exit("codeFenced"),e(x)}function b(x,C,S){const N=this;return I;function I(L){return x.enter("lineEnding"),x.consume(L),x.exit("lineEnding"),F}function F(L){return N.parser.lazy[N.now().line]?S(L):C(L)}}function T(x,C,S){let N=0;return Ft(x,I,"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function I(z){return x.enter("codeFencedFence"),x.enter("codeFencedFenceSequence"),F(z)}function F(z){return z===u?(x.consume(z),N++,F):N<l?S(z):(x.exit("codeFencedFenceSequence"),Ft(x,L,"whitespace")(z))}function L(z){return z===null||Ze(z)?(x.exit("codeFencedFence"),C(z)):S(z)}}}const xS={name:"codeIndented",tokenize:Die},Aie={tokenize:Rie,partial:!0};function Die(t,e,n){const r=this;return s;function s(u){return t.enter("codeIndented"),Ft(t,i,"linePrefix",4+1)(u)}function i(u){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?l(u):Ze(u)?t.attempt(Aie,o,l)(u):(t.enter("codeFlowValue"),a(u))}function a(u){return u===null||Ze(u)?(t.exit("codeFlowValue"),o(u)):(t.consume(u),a)}function l(u){return t.exit("codeIndented"),e(u)}}function Rie(t,e,n){const r=this;return s;function s(o){return r.parser.lazy[r.now().line]?n(o):Ze(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):Ft(t,i,"linePrefix",4+1)(o)}function i(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):Ze(o)?s(o):n(o)}}const Fie={name:"codeText",tokenize:Lie,resolve:Oie,previous:$ie};function Oie(t){let e=t.length-4,n=3,r,s;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)s===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(s=r):(r===e||t[r][1].type==="lineEnding")&&(t[s][1].type="codeTextData",r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),e-=r-s-2,r=s+2),s=void 0);return t}function $ie(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Lie(t,e,n){let r=0,s,i;return o;function o(d){return t.enter("codeText"),t.enter("codeTextSequence"),a(d)}function a(d){return d===96?(t.consume(d),r++,a):(t.exit("codeTextSequence"),l(d))}function l(d){return d===null?n(d):d===96?(i=t.enter("codeTextSequence"),s=0,c(d)):d===32?(t.enter("space"),t.consume(d),t.exit("space"),l):Ze(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),l):(t.enter("codeTextData"),u(d))}function u(d){return d===null||d===32||d===96||Ze(d)?(t.exit("codeTextData"),l(d)):(t.consume(d),u)}function c(d){return d===96?(t.consume(d),s++,c):s===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(d)):(i.type="codeTextData",u(d))}}function Y6(t){const e={};let n=-1,r,s,i,o,a,l,u;for(;++n<t.length;){for(;n in e;)n=e[n];if(r=t[n],n&&r[1].type==="chunkFlow"&&t[n-1][1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,i=0,i<l.length&&l[i][1].type==="lineEndingBlank"&&(i+=2),i<l.length&&l[i][1].type==="content"))for(;++i<l.length&&l[i][1].type!=="content";)l[i][1].type==="chunkText"&&(l[i][1]._isInFirstContentOfListItem=!0,i++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,Pie(t,n)),n=e[n],u=!0);else if(r[1]._container){for(i=n,s=void 0;i--&&(o=t[i],o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(s&&(t[s][1].type="lineEndingBlank"),o[1].type="lineEnding",s=i);s&&(r[1].end=Object.assign({},t[s][1].start),a=t.slice(s,n),a.unshift(r),Pi(t,s,n-s+1,a))}}return!u}function Pie(t,e){const n=t[e][1],r=t[e][2];let s=e-1;const i=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,l=[],u={};let c,d,h=-1,f=n,p=0,m=0;const y=[m];for(;f;){for(;t[++s][1]!==f;);i.push(s),f._tokenizer||(c=r.sliceStream(f),f.next||c.push(null),d&&o.defineSkip(f.start),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=f,f=f.next}for(f=n;++h<a.length;)a[h][0]==="exit"&&a[h-1][0]==="enter"&&a[h][1].type===a[h-1][1].type&&a[h][1].start.line!==a[h][1].end.line&&(m=h+1,y.push(m),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(o.events=[],f?(f._tokenizer=void 0,f.previous=void 0):y.pop(),h=y.length;h--;){const g=a.slice(y[h],y[h+1]),v=i.pop();l.unshift([v,v+g.length-1]),Pi(t,v,2,g)}for(h=-1;++h<l.length;)u[p+l[h][0]]=p+l[h][1],p+=l[h][1]-l[h][0]-1;return u}const Mie={tokenize:Hie,resolve:zie},Bie={tokenize:Uie,partial:!0};function zie(t){return Y6(t),t}function Hie(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),s(a)}function s(a){return a===null?i(a):Ze(a)?t.check(Bie,o,i)(a):(t.consume(a),s)}function i(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function Uie(t,e,n){const r=this;return s;function s(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Ft(t,i,"linePrefix")}function i(o){if(o===null||Ze(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function Q6(t,e,n,r,s,i,o,a,l){const u=l||Number.POSITIVE_INFINITY;let c=0;return d;function d(g){return g===60?(t.enter(r),t.enter(s),t.enter(i),t.consume(g),t.exit(i),h):g===null||g===41||yE(g)?n(g):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),m(g))}function h(g){return g===62?(t.enter(i),t.consume(g),t.exit(i),t.exit(s),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===62?(t.exit("chunkString"),t.exit(a),h(g)):g===null||g===60||Ze(g)?n(g):(t.consume(g),g===92?p:f)}function p(g){return g===60||g===62||g===92?(t.consume(g),f):f(g)}function m(g){return g===40?++c>u?n(g):(t.consume(g),m):g===41?c--?(t.consume(g),m):(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(g)):g===null||kn(g)?c?n(g):(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(g)):yE(g)?n(g):(t.consume(g),g===92?y:m)}function y(g){return g===40||g===41||g===92?(t.consume(g),m):m(g)}}function Z6(t,e,n,r,s,i){const o=this;let a=0,l;return u;function u(f){return t.enter(r),t.enter(s),t.consume(f),t.exit(s),t.enter(i),c}function c(f){return f===null||f===91||f===93&&!l||f===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs||a>999?n(f):f===93?(t.exit(i),t.enter(s),t.consume(f),t.exit(s),t.exit(r),e):Ze(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),c):(t.enter("chunkString",{contentType:"string"}),d(f))}function d(f){return f===null||f===91||f===93||Ze(f)||a++>999?(t.exit("chunkString"),c(f)):(t.consume(f),l=l||!fn(f),f===92?h:d)}function h(f){return f===91||f===92||f===93?(t.consume(f),a++,d):d(f)}}function J6(t,e,n,r,s,i){let o;return a;function a(h){return t.enter(r),t.enter(s),t.consume(h),t.exit(s),o=h===40?41:h,l}function l(h){return h===o?(t.enter(s),t.consume(h),t.exit(s),t.exit(r),e):(t.enter(i),u(h))}function u(h){return h===o?(t.exit(i),l(o)):h===null?n(h):Ze(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),Ft(t,u,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),c(h))}function c(h){return h===o||h===null||Ze(h)?(t.exit("chunkString"),u(h)):(t.consume(h),h===92?d:c)}function d(h){return h===o||h===92?(t.consume(h),c):c(h)}}function Cm(t,e){let n;return r;function r(s){return Ze(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),n=!0,r):fn(s)?Ft(t,r,n?"linePrefix":"lineSuffix")(s):e(s)}}function ea(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Wie={name:"definition",tokenize:Gie},Vie={tokenize:jie,partial:!0};function Gie(t,e,n){const r=this;let s;return i;function i(l){return t.enter("definition"),Z6.call(r,t,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(l)}function o(l){return s=ea(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),l===58?(t.enter("definitionMarker"),t.consume(l),t.exit("definitionMarker"),Cm(t,Q6(t,t.attempt(Vie,Ft(t,a,"whitespace"),Ft(t,a,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(l)}function a(l){return l===null||Ze(l)?(t.exit("definition"),r.parser.defined.includes(s)||r.parser.defined.push(s),e(l)):n(l)}}function jie(t,e,n){return r;function r(o){return kn(o)?Cm(t,s)(o):n(o)}function s(o){return o===34||o===39||o===40?J6(t,Ft(t,i,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o):n(o)}function i(o){return o===null||Ze(o)?e(o):n(o)}}const Kie={name:"hardBreakEscape",tokenize:qie};function qie(t,e,n){return r;function r(i){return t.enter("hardBreakEscape"),t.enter("escapeMarker"),t.consume(i),s}function s(i){return Ze(i)?(t.exit("escapeMarker"),t.exit("hardBreakEscape"),e(i)):n(i)}}const Xie={name:"headingAtx",tokenize:Qie,resolve:Yie};function Yie(t,e){let n=t.length-2,r=3,s,i;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},i={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},Pi(t,r,n-r+1,[["enter",s,e],["enter",i,e],["exit",i,e],["exit",s,e]])),t}function Qie(t,e,n){const r=this;let s=0;return i;function i(c){return t.enter("atxHeading"),t.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&s++<6?(t.consume(c),o):c===null||kn(c)?(t.exit("atxHeadingSequence"),r.interrupt?e(c):a(c)):n(c)}function a(c){return c===35?(t.enter("atxHeadingSequence"),l(c)):c===null||Ze(c)?(t.exit("atxHeading"),e(c)):fn(c)?Ft(t,a,"whitespace")(c):(t.enter("atxHeadingText"),u(c))}function l(c){return c===35?(t.consume(c),l):(t.exit("atxHeadingSequence"),a(c))}function u(c){return c===null||c===35||kn(c)?(t.exit("atxHeadingText"),a(c)):(t.consume(c),u)}}const Zie=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],R3=["pre","script","style","textarea"],Jie={name:"htmlFlow",tokenize:noe,resolveTo:toe,concrete:!0},eoe={tokenize:roe,partial:!0};function toe(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function noe(t,e,n){const r=this;let s,i,o,a,l;return u;function u(O){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(O),c}function c(O){return O===33?(t.consume(O),d):O===47?(t.consume(O),p):O===63?(t.consume(O),s=3,r.interrupt?e:B):Rs(O)?(t.consume(O),o=String.fromCharCode(O),i=!0,m):n(O)}function d(O){return O===45?(t.consume(O),s=2,h):O===91?(t.consume(O),s=5,o="CDATA[",a=0,f):Rs(O)?(t.consume(O),s=4,r.interrupt?e:B):n(O)}function h(O){return O===45?(t.consume(O),r.interrupt?e:B):n(O)}function f(O){return O===o.charCodeAt(a++)?(t.consume(O),a===o.length?r.interrupt?e:F:f):n(O)}function p(O){return Rs(O)?(t.consume(O),o=String.fromCharCode(O),m):n(O)}function m(O){return O===null||O===47||O===62||kn(O)?O!==47&&i&&R3.includes(o.toLowerCase())?(s=1,r.interrupt?e(O):F(O)):Zie.includes(o.toLowerCase())?(s=6,O===47?(t.consume(O),y):r.interrupt?e(O):F(O)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(O):i?v(O):g(O)):O===45||ui(O)?(t.consume(O),o+=String.fromCharCode(O),m):n(O)}function y(O){return O===62?(t.consume(O),r.interrupt?e:F):n(O)}function g(O){return fn(O)?(t.consume(O),g):N(O)}function v(O){return O===47?(t.consume(O),N):O===58||O===95||Rs(O)?(t.consume(O),E):fn(O)?(t.consume(O),v):N(O)}function E(O){return O===45||O===46||O===58||O===95||ui(O)?(t.consume(O),E):b(O)}function b(O){return O===61?(t.consume(O),T):fn(O)?(t.consume(O),b):v(O)}function T(O){return O===null||O===60||O===61||O===62||O===96?n(O):O===34||O===39?(t.consume(O),l=O,x):fn(O)?(t.consume(O),T):(l=null,C(O))}function x(O){return O===null||Ze(O)?n(O):O===l?(t.consume(O),S):(t.consume(O),x)}function C(O){return O===null||O===34||O===39||O===60||O===61||O===62||O===96||kn(O)?b(O):(t.consume(O),C)}function S(O){return O===47||O===62||fn(O)?v(O):n(O)}function N(O){return O===62?(t.consume(O),I):n(O)}function I(O){return fn(O)?(t.consume(O),I):O===null||Ze(O)?F(O):n(O)}function F(O){return O===45&&s===2?(t.consume(O),$):O===60&&s===1?(t.consume(O),M):O===62&&s===4?(t.consume(O),K):O===63&&s===3?(t.consume(O),B):O===93&&s===5?(t.consume(O),P):Ze(O)&&(s===6||s===7)?t.check(eoe,K,L)(O):O===null||Ze(O)?L(O):(t.consume(O),F)}function L(O){return t.exit("htmlFlowData"),z(O)}function z(O){return O===null?A(O):Ze(O)?t.attempt({tokenize:H,partial:!0},z,A)(O):(t.enter("htmlFlowData"),F(O))}function H(O,se,ae){return de;function de(ve){return O.enter("lineEnding"),O.consume(ve),O.exit("lineEnding"),le}function le(ve){return r.parser.lazy[r.now().line]?ae(ve):se(ve)}}function $(O){return O===45?(t.consume(O),B):F(O)}function M(O){return O===47?(t.consume(O),o="",j):F(O)}function j(O){return O===62&&R3.includes(o.toLowerCase())?(t.consume(O),K):Rs(O)&&o.length<8?(t.consume(O),o+=String.fromCharCode(O),j):F(O)}function P(O){return O===93?(t.consume(O),B):F(O)}function B(O){return O===62?(t.consume(O),K):O===45&&s===2?(t.consume(O),B):F(O)}function K(O){return O===null||Ze(O)?(t.exit("htmlFlowData"),A(O)):(t.consume(O),K)}function A(O){return t.exit("htmlFlow"),e(O)}}function roe(t,e,n){return r;function r(s){return t.exit("htmlFlowData"),t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),t.attempt(Vg,e,n)}}const soe={name:"htmlText",tokenize:ioe};function ioe(t,e,n){const r=this;let s,i,o,a;return l;function l(A){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(A),u}function u(A){return A===33?(t.consume(A),c):A===47?(t.consume(A),C):A===63?(t.consume(A),T):Rs(A)?(t.consume(A),I):n(A)}function c(A){return A===45?(t.consume(A),d):A===91?(t.consume(A),i="CDATA[",o=0,y):Rs(A)?(t.consume(A),b):n(A)}function d(A){return A===45?(t.consume(A),h):n(A)}function h(A){return A===null||A===62?n(A):A===45?(t.consume(A),f):p(A)}function f(A){return A===null||A===62?n(A):p(A)}function p(A){return A===null?n(A):A===45?(t.consume(A),m):Ze(A)?(a=p,P(A)):(t.consume(A),p)}function m(A){return A===45?(t.consume(A),K):p(A)}function y(A){return A===i.charCodeAt(o++)?(t.consume(A),o===i.length?g:y):n(A)}function g(A){return A===null?n(A):A===93?(t.consume(A),v):Ze(A)?(a=g,P(A)):(t.consume(A),g)}function v(A){return A===93?(t.consume(A),E):g(A)}function E(A){return A===62?K(A):A===93?(t.consume(A),E):g(A)}function b(A){return A===null||A===62?K(A):Ze(A)?(a=b,P(A)):(t.consume(A),b)}function T(A){return A===null?n(A):A===63?(t.consume(A),x):Ze(A)?(a=T,P(A)):(t.consume(A),T)}function x(A){return A===62?K(A):T(A)}function C(A){return Rs(A)?(t.consume(A),S):n(A)}function S(A){return A===45||ui(A)?(t.consume(A),S):N(A)}function N(A){return Ze(A)?(a=N,P(A)):fn(A)?(t.consume(A),N):K(A)}function I(A){return A===45||ui(A)?(t.consume(A),I):A===47||A===62||kn(A)?F(A):n(A)}function F(A){return A===47?(t.consume(A),K):A===58||A===95||Rs(A)?(t.consume(A),L):Ze(A)?(a=F,P(A)):fn(A)?(t.consume(A),F):K(A)}function L(A){return A===45||A===46||A===58||A===95||ui(A)?(t.consume(A),L):z(A)}function z(A){return A===61?(t.consume(A),H):Ze(A)?(a=z,P(A)):fn(A)?(t.consume(A),z):F(A)}function H(A){return A===null||A===60||A===61||A===62||A===96?n(A):A===34||A===39?(t.consume(A),s=A,$):Ze(A)?(a=H,P(A)):fn(A)?(t.consume(A),H):(t.consume(A),s=void 0,j)}function $(A){return A===s?(t.consume(A),M):A===null?n(A):Ze(A)?(a=$,P(A)):(t.consume(A),$)}function M(A){return A===62||A===47||kn(A)?F(A):n(A)}function j(A){return A===null||A===34||A===39||A===60||A===61||A===96?n(A):A===62||kn(A)?F(A):(t.consume(A),j)}function P(A){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(A),t.exit("lineEnding"),Ft(t,B,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function B(A){return t.enter("htmlTextData"),a(A)}function K(A){return A===62?(t.consume(A),t.exit("htmlTextData"),t.exit("htmlText"),e):n(A)}}const CN={name:"labelEnd",tokenize:doe,resolveTo:coe,resolveAll:uoe},ooe={tokenize:hoe},aoe={tokenize:foe},loe={tokenize:poe};function uoe(t){let e=-1,n;for(;++e<t.length;)n=t[e][1],(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(t.splice(e+1,n.type==="labelImage"?4:2),n.type="data",e++);return t}function coe(t,e){let n=t.length,r=0,s,i,o,a;for(;n--;)if(s=t[n][1],i){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(i=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(o=n);const l={type:t[i][1].type==="labelLink"?"link":"image",start:Object.assign({},t[i][1].start),end:Object.assign({},t[t.length-1][1].end)},u={type:"label",start:Object.assign({},t[i][1].start),end:Object.assign({},t[o][1].end)},c={type:"labelText",start:Object.assign({},t[i+r+2][1].end),end:Object.assign({},t[o-2][1].start)};return a=[["enter",l,e],["enter",u,e]],a=oo(a,t.slice(i+1,i+r+3)),a=oo(a,[["enter",c,e]]),a=oo(a,AT(e.parser.constructs.insideSpan.null,t.slice(i+r+4,o-3),e)),a=oo(a,[["exit",c,e],t[o-2],t[o-1],["exit",u,e]]),a=oo(a,t.slice(o+1)),a=oo(a,[["exit",l,e]]),Pi(t,i,t.length,a),t}function doe(t,e,n){const r=this;let s=r.events.length,i,o;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){i=r.events[s][1];break}return a;function a(c){return i?i._inactive?u(c):(o=r.parser.defined.includes(ea(r.sliceSerialize({start:i.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(c),t.exit("labelMarker"),t.exit("labelEnd"),l):n(c)}function l(c){return c===40?t.attempt(ooe,e,o?e:u)(c):c===91?t.attempt(aoe,e,o?t.attempt(loe,e,u):u)(c):o?e(c):u(c)}function u(c){return i._balanced=!0,n(c)}}function hoe(t,e,n){return r;function r(l){return t.enter("resource"),t.enter("resourceMarker"),t.consume(l),t.exit("resourceMarker"),Cm(t,s)}function s(l){return l===41?a(l):Q6(t,i,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(l)}function i(l){return kn(l)?Cm(t,o)(l):a(l)}function o(l){return l===34||l===39||l===40?J6(t,Cm(t,a),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(l):a(l)}function a(l){return l===41?(t.enter("resourceMarker"),t.consume(l),t.exit("resourceMarker"),t.exit("resource"),e):n(l)}}function foe(t,e,n){const r=this;return s;function s(o){return Z6.call(r,t,i,n,"reference","referenceMarker","referenceString")(o)}function i(o){return r.parser.defined.includes(ea(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(o):n(o)}}function poe(t,e,n){return r;function r(i){return t.enter("reference"),t.enter("referenceMarker"),t.consume(i),t.exit("referenceMarker"),s}function s(i){return i===93?(t.enter("referenceMarker"),t.consume(i),t.exit("referenceMarker"),t.exit("reference"),e):n(i)}}const moe={name:"labelStartImage",tokenize:goe,resolveAll:CN.resolveAll};function goe(t,e,n){const r=this;return s;function s(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),i}function i(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const yoe={name:"labelStartLink",tokenize:voe,resolveAll:CN.resolveAll};function voe(t,e,n){const r=this;return s;function s(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),i}function i(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const CS={name:"lineEnding",tokenize:boe};function boe(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),Ft(t,e,"linePrefix")}}const Eb={name:"thematicBreak",tokenize:Eoe};function Eoe(t,e,n){let r=0,s;return i;function i(l){return t.enter("thematicBreak"),s=l,o(l)}function o(l){return l===s?(t.enter("thematicBreakSequence"),a(l)):fn(l)?Ft(t,o,"whitespace")(l):r<3||l!==null&&!Ze(l)?n(l):(t.exit("thematicBreak"),e(l))}function a(l){return l===s?(t.consume(l),r++,a):(t.exit("thematicBreakSequence"),o(l))}}const Qs={name:"list",tokenize:Coe,continuation:{tokenize:Soe},exit:_oe},Toe={tokenize:koe,partial:!0},xoe={tokenize:woe,partial:!0};function Coe(t,e,n){const r=this,s=r.events[r.events.length-1];let i=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,o=0;return a;function a(f){const p=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:$_(f)){if(r.containerState.type||(r.containerState.type=p,t.enter(p,{_container:!0})),p==="listUnordered")return t.enter("listItemPrefix"),f===42||f===45?t.check(Eb,n,u)(f):u(f);if(!r.interrupt||f===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(f)}return n(f)}function l(f){return $_(f)&&++o<10?(t.consume(f),l):(!r.interrupt||o<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(t.exit("listItemValue"),u(f)):n(f)}function u(f){return t.enter("listItemMarker"),t.consume(f),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,t.check(Vg,r.interrupt?n:c,t.attempt(Toe,h,d))}function c(f){return r.containerState.initialBlankLine=!0,i++,h(f)}function d(f){return fn(f)?(t.enter("listItemPrefixWhitespace"),t.consume(f),t.exit("listItemPrefixWhitespace"),h):n(f)}function h(f){return r.containerState.size=i+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(f)}}function Soe(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(Vg,s,i);function s(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ft(t,e,"listItemIndent",r.containerState.size+1)(a)}function i(a){return r.containerState.furtherBlankLines||!fn(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(xoe,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Ft(t,t.attempt(Qs,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function woe(t,e,n){const r=this;return Ft(t,s,"listItemIndent",r.containerState.size+1);function s(i){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(i):n(i)}}function _oe(t){t.exit(this.containerState.type)}function koe(t,e,n){const r=this;return Ft(t,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4+1);function s(i){const o=r.events[r.events.length-1];return!fn(i)&&o&&o[1].type==="listItemPrefixWhitespace"?e(i):n(i)}}const F3={name:"setextUnderline",tokenize:Noe,resolveTo:Ioe};function Ioe(t,e){let n=t.length,r,s,i;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(s=n)}else t[n][1].type==="content"&&t.splice(n,1),!i&&t[n][1].type==="definition"&&(i=n);const o={type:"setextHeading",start:Object.assign({},t[s][1].start),end:Object.assign({},t[t.length-1][1].end)};return t[s][1].type="setextHeadingText",i?(t.splice(s,0,["enter",o,e]),t.splice(i+1,0,["exit",t[r][1],e]),t[r][1].end=Object.assign({},t[i][1].end)):t[r][1]=o,t.push(["exit",o,e]),t}function Noe(t,e,n){const r=this;let s=r.events.length,i,o;for(;s--;)if(r.events[s][1].type!=="lineEnding"&&r.events[s][1].type!=="linePrefix"&&r.events[s][1].type!=="content"){o=r.events[s][1].type==="paragraph";break}return a;function a(c){return!r.parser.lazy[r.now().line]&&(r.interrupt||o)?(t.enter("setextHeadingLine"),t.enter("setextHeadingLineSequence"),i=c,l(c)):n(c)}function l(c){return c===i?(t.consume(c),l):(t.exit("setextHeadingLineSequence"),Ft(t,u,"lineSuffix")(c))}function u(c){return c===null||Ze(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const Aoe={tokenize:Doe};function Doe(t){const e=this,n=t.attempt(Vg,r,t.attempt(this.parser.constructs.flowInitial,s,Ft(t,t.attempt(this.parser.constructs.flow,s,t.attempt(Mie,s)),"linePrefix")));return n;function r(i){if(i===null){t.consume(i);return}return t.enter("lineEndingBlank"),t.consume(i),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function s(i){if(i===null){t.consume(i);return}return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const Roe={resolveAll:tM()},Foe=eM("string"),Ooe=eM("text");function eM(t){return{tokenize:e,resolveAll:tM(t==="text"?$oe:void 0)};function e(n){const r=this,s=this.parser.constructs[t],i=n.attempt(s,o,a);return o;function o(c){return u(c)?i(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),l}function l(c){return u(c)?(n.exit("data"),i(c)):(n.consume(c),l)}function u(c){if(c===null)return!0;const d=s[c];let h=-1;if(d)for(;++h<d.length;){const f=d[h];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function tM(t){return e;function e(n,r){let s=-1,i;for(;++s<=n.length;)i===void 0?n[s]&&n[s][1].type==="data"&&(i=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==i+2&&(n[i][1].end=n[s-1][1].end,n.splice(i+2,s-i-2),s=i+2),i=void 0);return t?t(n,r):n}}function $oe(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],s=e.sliceStream(r);let i=s.length,o=-1,a=0,l;for(;i--;){const u=s[i];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(u===-2)l=!0,a++;else if(u!==-1){i++;break}}if(a){const u={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+i,_bufferIndex:i?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},u.start),r.start.offset===r.end.offset?Object.assign(r,u):(t.splice(n,0,["enter",u,e],["exit",u,e]),n+=2)}n++}return t}function Loe(t,e,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const s={},i=[];let o=[],a=[];const l={consume:v,enter:E,exit:b,attempt:C(T),check:C(x),interrupt:C(x,{interrupt:!0})},u={previous:null,code:null,containerState:{},events:[],parser:t,sliceStream:f,sliceSerialize:h,now:p,defineSkip:m,write:d};let c=e.tokenize.call(u,l);return e.resolveAll&&i.push(e),u;function d(F){return o=oo(o,F),y(),o[o.length-1]!==null?[]:(S(e,0),u.events=AT(i,u.events,u),u.events)}function h(F,L){return Moe(f(F),L)}function f(F){return Poe(o,F)}function p(){return Object.assign({},r)}function m(F){s[F.line]=F.column,I()}function y(){let F;for(;r._index<o.length;){const L=o[r._index];if(typeof L=="string")for(F=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===F&&r._bufferIndex<L.length;)g(L.charCodeAt(r._bufferIndex));else g(L)}}function g(F){c=c(F)}function v(F){Ze(F)?(r.line++,r.column=1,r.offset+=F===-3?2:1,I()):F!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=F}function E(F,L){const z=L||{};return z.type=F,z.start=p(),u.events.push(["enter",z,u]),a.push(z),z}function b(F){const L=a.pop();return L.end=p(),u.events.push(["exit",L,u]),L}function T(F,L){S(F,L.from)}function x(F,L){L.restore()}function C(F,L){return z;function z(H,$,M){let j,P,B,K;return Array.isArray(H)?O(H):"tokenize"in H?O([H]):A(H);function A(le){return ve;function ve(Ne){const _e=Ne!==null&&le[Ne],Se=Ne!==null&&le.null,Fe=[...Array.isArray(_e)?_e:_e?[_e]:[],...Array.isArray(Se)?Se:Se?[Se]:[]];return O(Fe)(Ne)}}function O(le){return j=le,P=0,le.length===0?M:se(le[P])}function se(le){return ve;function ve(Ne){return K=N(),B=le,le.partial||(u.currentConstruct=le),le.name&&u.parser.constructs.disable.null.includes(le.name)?de():le.tokenize.call(L?Object.assign(Object.create(u),L):u,l,ae,de)(Ne)}}function ae(le){return F(B,K),$}function de(le){return K.restore(),++P<j.length?se(j[P]):M}}}function S(F,L){F.resolveAll&&!i.includes(F)&&i.push(F),F.resolve&&Pi(u.events,L,u.events.length-L,F.resolve(u.events.slice(L),u)),F.resolveTo&&(u.events=F.resolveTo(u.events,u))}function N(){const F=p(),L=u.previous,z=u.currentConstruct,H=u.events.length,$=Array.from(a);return{restore:M,from:H};function M(){r=F,u.previous=L,u.currentConstruct=z,u.events.length=H,a=$,I()}}function I(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function Poe(t,e){const n=e.start._index,r=e.start._bufferIndex,s=e.end._index,i=e.end._bufferIndex;let o;return n===s?o=[t[n].slice(r,i)]:(o=t.slice(n,s),r>-1&&(o[0]=o[0].slice(r)),i>0&&o.push(t[s].slice(0,i))),o}function Moe(t,e){let n=-1;const r=[];let s;for(;++n<t.length;){const i=t[n];let o;if(typeof i=="string")o=i;else switch(i){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&s)continue;o=" ";break}default:o=String.fromCharCode(i)}s=i===-2,r.push(o)}return r.join("")}const Boe={[42]:Qs,[43]:Qs,[45]:Qs,[48]:Qs,[49]:Qs,[50]:Qs,[51]:Qs,[52]:Qs,[53]:Qs,[54]:Qs,[55]:Qs,[56]:Qs,[57]:Qs,[62]:K6},zoe={[91]:Wie},Hoe={[-2]:xS,[-1]:xS,[32]:xS},Uoe={[35]:Xie,[42]:Eb,[45]:[F3,Eb],[60]:Jie,[61]:F3,[95]:Eb,[96]:D3,[126]:D3},Woe={[38]:X6,[92]:q6},Voe={[-5]:CS,[-4]:CS,[-3]:CS,[33]:moe,[38]:X6,[42]:L_,[60]:[Tie,soe],[91]:yoe,[92]:[Kie,q6],[93]:CN,[95]:L_,[96]:Fie},Goe={null:[L_,Roe]},joe={null:[42,95]},Koe={null:[]},qoe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:joe,contentInitial:zoe,disable:Koe,document:Boe,flow:Uoe,flowInitial:Hoe,insideSpan:Goe,string:Woe,text:Voe},Symbol.toStringTag,{value:"Module"}));function Xoe(t={}){const e=j6([qoe].concat(t.extensions||[])),n={defined:[],lazy:{},constructs:e,content:r(pie),document:r(gie),flow:r(Aoe),string:r(Foe),text:r(Ooe)};return n;function r(s){return i;function i(o){return Loe(n,s,o)}}}const O3=/[\0\t\n\r]/g;function Yoe(){let t=1,e="",n=!0,r;return s;function s(i,o,a){const l=[];let u,c,d,h,f;for(i=e+i.toString(o),d=0,e="",n&&(i.charCodeAt(0)===65279&&d++,n=void 0);d<i.length;){if(O3.lastIndex=d,u=O3.exec(i),h=u&&u.index!==void 0?u.index:i.length,f=i.charCodeAt(h),!u){e=i.slice(d);break}if(f===10&&d===h&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),d<h&&(l.push(i.slice(d,h)),t+=h-d),f){case 0:{l.push(65533),t++;break}case 9:{for(c=Math.ceil(t/4)*4,l.push(-2);t++<c;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}d=h+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}function Qoe(t){for(;!Y6(t););return t}function nM(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCharCode(n)}const Zoe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function rM(t){return t.replace(Zoe,Joe)}function Joe(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),i=s===120||s===88;return nM(n.slice(i?2:1),i?16:10)}return xN(n)||t}const sM={}.hasOwnProperty,eae=function(t,e,n){return typeof e!="string"&&(n=e,e=void 0),tae(n)(Qoe(Xoe(n).document().write(Yoe()(t,e,!0))))};function tae(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(Ye),autolinkProtocol:F,autolinkEmail:F,atxHeading:a(nt),blockQuote:a(Fe),characterEscape:F,characterReference:F,codeFenced:a(et),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:a(et,l),codeText:a(ot,l),codeTextData:F,data:F,codeFlowValue:F,definition:a(dt),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:a(at),hardBreakEscape:a(me),hardBreakTrailing:a(me),htmlFlow:a(Oe,l),htmlFlowData:F,htmlText:a(Oe,l),htmlTextData:F,image:a(Ge),label:l,link:a(Ye),listItem:a(ft),listItemValue:p,listOrdered:a(lt,f),listUnordered:a(lt),paragraph:a(Ve),reference:de,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:a(nt),strong:a(dn),thematicBreak:a(Nn)},exit:{atxHeading:c(),atxHeadingSequence:C,autolink:c(),autolinkEmail:Se,autolinkProtocol:_e,blockQuote:c(),characterEscapeValue:L,characterReferenceMarkerHexadecimal:ve,characterReferenceMarkerNumeric:ve,characterReferenceValue:Ne,codeFenced:c(v),codeFencedFence:g,codeFencedFenceInfo:m,codeFencedFenceMeta:y,codeFlowValue:L,codeIndented:c(E),codeText:c(j),codeTextData:L,data:L,definition:c(),definitionDestinationString:x,definitionLabelString:b,definitionTitleString:T,emphasis:c(),hardBreakEscape:c(H),hardBreakTrailing:c(H),htmlFlow:c($),htmlFlowData:L,htmlText:c(M),htmlTextData:L,image:c(B),label:A,labelText:K,lineEnding:z,link:c(P),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:le,resourceDestinationString:O,resourceTitleString:se,resource:ae,setextHeading:c(I),setextHeadingLineSequence:N,setextHeadingText:S,strong:c(),thematicBreak:c()}};iM(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(ne){let fe={type:"root",children:[]};const De={stack:[fe],tokenStack:[],config:e,enter:u,exit:d,buffer:l,resume:h,setData:i,getData:o},Qe=[];let ge=-1;for(;++ge<ne.length;)if(ne[ge][1].type==="listOrdered"||ne[ge][1].type==="listUnordered")if(ne[ge][0]==="enter")Qe.push(ge);else{const Bt=Qe.pop();ge=s(ne,Bt,ge)}for(ge=-1;++ge<ne.length;){const Bt=e[ne[ge][0]];sM.call(Bt,ne[ge][1].type)&&Bt[ne[ge][1].type].call(Object.assign({sliceSerialize:ne[ge][2].sliceSerialize},De),ne[ge][1])}if(De.tokenStack.length>0){const Bt=De.tokenStack[De.tokenStack.length-1];(Bt[1]||$3).call(De,void 0,Bt[0])}for(fe.position={start:cu(ne.length>0?ne[0][1].start:{line:1,column:1,offset:0}),end:cu(ne.length>0?ne[ne.length-2][1].end:{line:1,column:1,offset:0})},ge=-1;++ge<e.transforms.length;)fe=e.transforms[ge](fe)||fe;return fe}function s(ne,fe,De){let Qe=fe-1,ge=-1,Bt=!1,Qt,vn,pt,Tt;for(;++Qe<=De;){const xt=ne[Qe];if(xt[1].type==="listUnordered"||xt[1].type==="listOrdered"||xt[1].type==="blockQuote"?(xt[0]==="enter"?ge++:ge--,Tt=void 0):xt[1].type==="lineEndingBlank"?xt[0]==="enter"&&(Qt&&!Tt&&!ge&&!pt&&(pt=Qe),Tt=void 0):xt[1].type==="linePrefix"||xt[1].type==="listItemValue"||xt[1].type==="listItemMarker"||xt[1].type==="listItemPrefix"||xt[1].type==="listItemPrefixWhitespace"||(Tt=void 0),!ge&&xt[0]==="enter"&&xt[1].type==="listItemPrefix"||ge===-1&&xt[0]==="exit"&&(xt[1].type==="listUnordered"||xt[1].type==="listOrdered")){if(Qt){let $t=Qe;for(vn=void 0;$t--;){const He=ne[$t];if(He[1].type==="lineEnding"||He[1].type==="lineEndingBlank"){if(He[0]==="exit")continue;vn&&(ne[vn][1].type="lineEndingBlank",Bt=!0),He[1].type="lineEnding",vn=$t}else if(!(He[1].type==="linePrefix"||He[1].type==="blockQuotePrefix"||He[1].type==="blockQuotePrefixWhitespace"||He[1].type==="blockQuoteMarker"||He[1].type==="listItemIndent"))break}pt&&(!vn||pt<vn)&&(Qt._spread=!0),Qt.end=Object.assign({},vn?ne[vn][1].start:xt[1].end),ne.splice(vn||Qe,0,["exit",Qt,xt[2]]),Qe++,De++}xt[1].type==="listItemPrefix"&&(Qt={type:"listItem",_spread:!1,start:Object.assign({},xt[1].start)},ne.splice(Qe,0,["enter",Qt,xt[2]]),Qe++,De++,pt=void 0,Tt=!0)}}return ne[fe][1]._spread=Bt,De}function i(ne,fe){n[ne]=fe}function o(ne){return n[ne]}function a(ne,fe){return De;function De(Qe){u.call(this,ne(Qe),Qe),fe&&fe.call(this,Qe)}}function l(){this.stack.push({type:"fragment",children:[]})}function u(ne,fe,De){return this.stack[this.stack.length-1].children.push(ne),this.stack.push(ne),this.tokenStack.push([fe,De]),ne.position={start:cu(fe.start)},ne}function c(ne){return fe;function fe(De){ne&&ne.call(this,De),d.call(this,De)}}function d(ne,fe){const De=this.stack.pop(),Qe=this.tokenStack.pop();if(Qe)Qe[0].type!==ne.type&&(fe?fe.call(this,ne,Qe[0]):(Qe[1]||$3).call(this,ne,Qe[0]));else throw new Error("Cannot close `"+ne.type+"` ("+xm({start:ne.start,end:ne.end})+"): it’s not open");return De.position.end=cu(ne.end),De}function h(){return aie(this.stack.pop())}function f(){i("expectingFirstListItemValue",!0)}function p(ne){if(o("expectingFirstListItemValue")){const fe=this.stack[this.stack.length-2];fe.start=Number.parseInt(this.sliceSerialize(ne),10),i("expectingFirstListItemValue")}}function m(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.lang=ne}function y(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.meta=ne}function g(){o("flowCodeInside")||(this.buffer(),i("flowCodeInside",!0))}function v(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.value=ne.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),i("flowCodeInside")}function E(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.value=ne.replace(/(\r?\n|\r)$/g,"")}function b(ne){const fe=this.resume(),De=this.stack[this.stack.length-1];De.label=fe,De.identifier=ea(this.sliceSerialize(ne)).toLowerCase()}function T(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.title=ne}function x(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.url=ne}function C(ne){const fe=this.stack[this.stack.length-1];if(!fe.depth){const De=this.sliceSerialize(ne).length;fe.depth=De}}function S(){i("setextHeadingSlurpLineEnding",!0)}function N(ne){const fe=this.stack[this.stack.length-1];fe.depth=this.sliceSerialize(ne).charCodeAt(0)===61?1:2}function I(){i("setextHeadingSlurpLineEnding")}function F(ne){const fe=this.stack[this.stack.length-1];let De=fe.children[fe.children.length-1];(!De||De.type!=="text")&&(De=Ln(),De.position={start:cu(ne.start)},fe.children.push(De)),this.stack.push(De)}function L(ne){const fe=this.stack.pop();fe.value+=this.sliceSerialize(ne),fe.position.end=cu(ne.end)}function z(ne){const fe=this.stack[this.stack.length-1];if(o("atHardBreak")){const De=fe.children[fe.children.length-1];De.position.end=cu(ne.end),i("atHardBreak");return}!o("setextHeadingSlurpLineEnding")&&e.canContainEols.includes(fe.type)&&(F.call(this,ne),L.call(this,ne))}function H(){i("atHardBreak",!0)}function $(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.value=ne}function M(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.value=ne}function j(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.value=ne}function P(){const ne=this.stack[this.stack.length-1];if(o("inReference")){const fe=o("referenceType")||"shortcut";ne.type+="Reference",ne.referenceType=fe,delete ne.url,delete ne.title}else delete ne.identifier,delete ne.label;i("referenceType")}function B(){const ne=this.stack[this.stack.length-1];if(o("inReference")){const fe=o("referenceType")||"shortcut";ne.type+="Reference",ne.referenceType=fe,delete ne.url,delete ne.title}else delete ne.identifier,delete ne.label;i("referenceType")}function K(ne){const fe=this.sliceSerialize(ne),De=this.stack[this.stack.length-2];De.label=rM(fe),De.identifier=ea(fe).toLowerCase()}function A(){const ne=this.stack[this.stack.length-1],fe=this.resume(),De=this.stack[this.stack.length-1];if(i("inReference",!0),De.type==="link"){const Qe=ne.children;De.children=Qe}else De.alt=fe}function O(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.url=ne}function se(){const ne=this.resume(),fe=this.stack[this.stack.length-1];fe.title=ne}function ae(){i("inReference")}function de(){i("referenceType","collapsed")}function le(ne){const fe=this.resume(),De=this.stack[this.stack.length-1];De.label=fe,De.identifier=ea(this.sliceSerialize(ne)).toLowerCase(),i("referenceType","full")}function ve(ne){i("characterReferenceType",ne.type)}function Ne(ne){const fe=this.sliceSerialize(ne),De=o("characterReferenceType");let Qe;De?(Qe=nM(fe,De==="characterReferenceMarkerNumeric"?10:16),i("characterReferenceType")):Qe=xN(fe);const ge=this.stack.pop();ge.value+=Qe,ge.position.end=cu(ne.end)}function _e(ne){L.call(this,ne);const fe=this.stack[this.stack.length-1];fe.url=this.sliceSerialize(ne)}function Se(ne){L.call(this,ne);const fe=this.stack[this.stack.length-1];fe.url="mailto:"+this.sliceSerialize(ne)}function Fe(){return{type:"blockquote",children:[]}}function et(){return{type:"code",lang:null,meta:null,value:""}}function ot(){return{type:"inlineCode",value:""}}function dt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function at(){return{type:"emphasis",children:[]}}function nt(){return{type:"heading",depth:void 0,children:[]}}function me(){return{type:"break"}}function Oe(){return{type:"html",value:""}}function Ge(){return{type:"image",title:null,url:"",alt:null}}function Ye(){return{type:"link",title:null,url:"",children:[]}}function lt(ne){return{type:"list",ordered:ne.type==="listOrdered",start:null,spread:ne._spread,children:[]}}function ft(ne){return{type:"listItem",spread:ne._spread,checked:null,children:[]}}function Ve(){return{type:"paragraph",children:[]}}function dn(){return{type:"strong",children:[]}}function Ln(){return{type:"text",value:""}}function Nn(){return{type:"thematicBreak"}}}function cu(t){return{line:t.line,column:t.column,offset:t.offset}}function iM(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?iM(t,r):nae(t,r)}}function nae(t,e){let n;for(n in e)if(sM.call(e,n)){if(n==="canContainEols"){const r=e[n];r&&t[n].push(...r)}else if(n==="transforms"){const r=e[n];r&&t[n].push(...r)}else if(n==="enter"||n==="exit"){const r=e[n];r&&Object.assign(t[n],r)}}}function $3(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+xm({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+xm({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+xm({start:e.start,end:e.end})+") is still open")}function rae(t){Object.assign(this,{Parser:n=>{const r=this.data("settings");return eae(n,Object.assign({},r,t,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}const Mr=function(t,e,n){const r={type:String(t)};return n==null&&(typeof e=="string"||Array.isArray(e))?n=e:Object.assign(r,e),Array.isArray(n)?r.children=n:n!=null&&(r.value=String(n)),r},Tb={}.hasOwnProperty;function sae(t,e){const n=e.data||{};return"value"in e&&!(Tb.call(n,"hName")||Tb.call(n,"hProperties")||Tb.call(n,"hChildren"))?t.augment(e,Mr("text",e.value)):t(e,"div",Ks(t,e))}function oM(t,e,n){const r=e&&e.type;let s;if(!r)throw new Error("Expected node, got `"+e+"`");return Tb.call(t.handlers,r)?s=t.handlers[r]:t.passThrough&&t.passThrough.includes(r)?s=iae:s=t.unknownHandler,(typeof s=="function"?s:sae)(t,e,n)}function iae(t,e){return"children"in e?{...e,children:Ks(t,e)}:e}function Ks(t,e){const n=[];if("children"in e){const r=e.children;let s=-1;for(;++s<r.length;){const i=oM(t,r[s],e);if(i){if(s&&r[s-1].type==="break"&&(!Array.isArray(i)&&i.type==="text"&&(i.value=i.value.replace(/^\s+/,"")),!Array.isArray(i)&&i.type==="element")){const o=i.children[0];o&&o.type==="text"&&(o.value=o.value.replace(/^\s+/,""))}Array.isArray(i)?n.push(...i):n.push(i)}}}return n}const SN=function(t){if(t==null)return uae;if(typeof t=="string")return lae(t);if(typeof t=="object")return Array.isArray(t)?oae(t):aae(t);if(typeof t=="function")return DT(t);throw new Error("Expected function, string, or object as test")};function oae(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=SN(t[n]);return DT(r);function r(...s){let i=-1;for(;++i<e.length;)if(e[i].call(this,...s))return!0;return!1}}function aae(t){return DT(e);function e(n){let r;for(r in t)if(n[r]!==t[r])return!1;return!0}}function lae(t){return DT(e);function e(n){return n&&n.type===t}}function DT(t){return e;function e(n,...r){return Boolean(n&&typeof n=="object"&&"type"in n&&Boolean(t.call(this,n,...r)))}}function uae(){return!0}const cae=!0,L3=!1,dae="skip",aM=function(t,e,n,r){typeof e=="function"&&typeof n!="function"&&(r=n,n=e,e=null);const s=SN(e),i=r?-1:1;o(t,void 0,[])();function o(a,l,u){const c=a&&typeof a=="object"?a:{};if(typeof c.type=="string"){const h=typeof c.tagName=="string"?c.tagName:typeof c.name=="string"?c.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(a.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=[],f,p,m;if((!e||s(a,l,u[u.length-1]||null))&&(h=hae(n(a,u)),h[0]===L3))return h;if(a.children&&h[0]!==dae)for(p=(r?a.children.length:-1)+i,m=u.concat(a);p>-1&&p<a.children.length;){if(f=o(a.children[p],p,m)(),f[0]===L3)return f;p=typeof f[1]=="number"?f[1]:p+i}return h}}};function hae(t){return Array.isArray(t)?t:typeof t=="number"?[cae,t]:[t]}const kf=function(t,e,n,r){typeof e=="function"&&typeof n!="function"&&(r=n,n=e,e=null),aM(t,e,s,r);function s(i,o){const a=o[o.length-1];return n(i,a?a.children.indexOf(i):null,a)}},RT=lM("start"),wN=lM("end");function lM(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};return{line:r.line||null,column:r.column||null,offset:r.offset>-1?r.offset:null}}}function fae(t){return!t||!t.position||!t.position.start||!t.position.start.line||!t.position.start.column||!t.position.end||!t.position.end.line||!t.position.end.column}const P3={}.hasOwnProperty;function pae(t){const e=Object.create(null);if(!t||!t.type)throw new Error("mdast-util-definitions expected node");return kf(t,"definition",r=>{const s=M3(r.identifier);s&&!P3.call(e,s)&&(e[s]=r)}),n;function n(r){const s=M3(r);return s&&P3.call(e,s)?e[s]:null}}function M3(t){return String(t||"").toUpperCase()}function uM(t,e){return t(e,"hr")}function Du(t,e){const n=[];let r=-1;for(e&&n.push(Mr("text",`
`));++r<t.length;)r&&n.push(Mr("text",`
`)),n.push(t[r]);return e&&t.length>0&&n.push(Mr("text",`
`)),n}function cM(t,e){const n={},r=e.ordered?"ol":"ul",s=Ks(t,e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<s.length;){const o=s[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}return t(e,r,n,Du(s,!0))}function mae(t){const e=t.footnoteById,n=t.footnoteOrder;let r=-1;const s=[];for(;++r<n.length;){const i=e[n[r].toUpperCase()];if(!i)continue;const o=String(r+1),a=[...i.children],l={type:"link",url:"#fnref"+o,data:{hProperties:{className:["footnote-back"],role:"doc-backlink"}},children:[{type:"text",value:"↩"}]},u=a[a.length-1];u&&u.type==="paragraph"?u.children.push(l):a.push(l),s.push({type:"listItem",data:{hProperties:{id:"fn"+o,role:"doc-endnote"}},children:a,position:i.position})}return s.length===0?null:t(null,"section",{className:["footnotes"],role:"doc-endnotes"},Du([uM(t),cM(t,{type:"list",ordered:!0,children:s})],!0))}function gae(t,e){return t(e,"blockquote",Du(Ks(t,e),!0))}function yae(t,e){return[t(e,"br"),Mr("text",`
`)]}function vae(t,e){const n=e.value?e.value+`
`:"",r=e.lang&&e.lang.match(/^[^ \t]+(?=[ \t]|$)/),s={};r&&(s.className=["language-"+r]);const i=t(e,"code",s,[Mr("text",n)]);return e.meta&&(i.data={meta:e.meta}),t(e.position,"pre",[i])}function bae(t,e){return t(e,"del",Ks(t,e))}function Eae(t,e){return t(e,"em",Ks(t,e))}function dM(t,e){const n=t.footnoteOrder,r=String(e.identifier),s=n.indexOf(r),i=String(s===-1?n.push(r):s+1);return t(e,"a",{href:"#fn"+i,className:["footnote-ref"],id:"fnref"+i,role:"doc-noteref"},[t(e.position,"sup",[Mr("text",i)])])}function Tae(t,e){const n=t.footnoteById,r=t.footnoteOrder;let s=1;for(;s in n;)s++;const i=String(s);return r.push(i),n[i]={type:"footnoteDefinition",identifier:i,children:[{type:"paragraph",children:e.children}],position:e.position},dM(t,{type:"footnoteReference",identifier:i,position:e.position})}function xae(t,e){return t(e,"h"+e.depth,Ks(t,e))}function Cae(t,e){return t.dangerous?t.augment(e,Mr("raw",e.value)):null}var B3={};function Sae(t){var e,n,r=B3[t];if(r)return r;for(r=B3[t]=[],e=0;e<128;e++)n=String.fromCharCode(e),/^[0-9a-z]$/i.test(n)?r.push(n):r.push("%"+("0"+e.toString(16).toUpperCase()).slice(-2));for(e=0;e<t.length;e++)r[t.charCodeAt(e)]=t[e];return r}function FT(t,e,n){var r,s,i,o,a,l="";for(typeof e!="string"&&(n=e,e=FT.defaultChars),typeof n>"u"&&(n=!0),a=Sae(e),r=0,s=t.length;r<s;r++){if(i=t.charCodeAt(r),n&&i===37&&r+2<s&&/^[0-9a-f]{2}$/i.test(t.slice(r+1,r+3))){l+=t.slice(r,r+3),r+=2;continue}if(i<128){l+=a[i];continue}if(i>=55296&&i<=57343){if(i>=55296&&i<=56319&&r+1<s&&(o=t.charCodeAt(r+1),o>=56320&&o<=57343)){l+=encodeURIComponent(t[r]+t[r+1]),r++;continue}l+="%EF%BF%BD";continue}l+=encodeURIComponent(t[r])}return l}FT.defaultChars=";/?:@&=+$,-_.!~*'()#";FT.componentChars="-_.!~*'()";var OT=FT;function hM(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return Mr("text","!["+e.alt+r);const s=Ks(t,e),i=s[0];i&&i.type==="text"?i.value="["+i.value:s.unshift(Mr("text","["));const o=s[s.length-1];return o&&o.type==="text"?o.value+=r:s.push(Mr("text",r)),s}function wae(t,e){const n=t.definition(e.identifier);if(!n)return hM(t,e);const r={src:OT(n.url||""),alt:e.alt};return n.title!==null&&n.title!==void 0&&(r.title=n.title),t(e,"img",r)}function _ae(t,e){const n={src:OT(e.url),alt:e.alt};return e.title!==null&&e.title!==void 0&&(n.title=e.title),t(e,"img",n)}function kae(t,e){return t(e,"code",[Mr("text",e.value.replace(/\r?\n|\r/g," "))])}function Iae(t,e){const n=t.definition(e.identifier);if(!n)return hM(t,e);const r={href:OT(n.url||"")};return n.title!==null&&n.title!==void 0&&(r.title=n.title),t(e,"a",r,Ks(t,e))}function Nae(t,e){const n={href:OT(e.url)};return e.title!==null&&e.title!==void 0&&(n.title=e.title),t(e,"a",n,Ks(t,e))}function Aae(t,e,n){const r=Ks(t,e),s=n?Dae(n):fM(e),i={},o=[];if(typeof e.checked=="boolean"){let u;r[0]&&r[0].type==="element"&&r[0].tagName==="p"?u=r[0]:(u=t(null,"p",[]),r.unshift(u)),u.children.length>0&&u.children.unshift(Mr("text"," ")),u.children.unshift(t(null,"input",{type:"checkbox",checked:e.checked,disabled:!0})),i.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const u=r[a];(s||a!==0||u.type!=="element"||u.tagName!=="p")&&o.push(Mr("text",`
`)),u.type==="element"&&u.tagName==="p"&&!s?o.push(...u.children):o.push(u)}const l=r[r.length-1];return l&&(s||!("tagName"in l)||l.tagName!=="p")&&o.push(Mr("text",`
`)),t(e,"li",i,o)}function Dae(t){let e=t.spread;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=fM(n[r]);return Boolean(e)}function fM(t){const e=t.spread;return e??t.children.length>1}function Rae(t,e){return t(e,"p",Ks(t,e))}function Fae(t,e){return t.augment(e,Mr("root",Du(Ks(t,e))))}function Oae(t,e){return t(e,"strong",Ks(t,e))}function $ae(t,e){const n=e.children;let r=-1;const s=e.align||[],i=[];for(;++r<n.length;){const o=n[r].children,a=r===0?"th":"td";let l=e.align?s.length:o.length;const u=[];for(;l--;){const c=o[l];u[l]=t(c,a,{align:s[l]},c?Ks(t,c):[])}i[r]=t(n[r],"tr",Du(u,!0))}return t(e,"table",Du([t(i[0].position,"thead",Du([i[0]],!0))].concat(i[1]?t({start:RT(i[1]),end:wN(i[i.length-1])},"tbody",Du(i.slice(1),!0)):[]),!0))}function Lae(t,e){return t.augment(e,Mr("text",String(e.value).replace(/[ \t]*(\r?\n|\r)[ \t]*/g,"$1")))}const Pae={blockquote:gae,break:yae,code:vae,delete:bae,emphasis:Eae,footnoteReference:dM,footnote:Tae,heading:xae,html:Cae,imageReference:wae,image:_ae,inlineCode:kae,linkReference:Iae,link:Nae,listItem:Aae,list:cM,paragraph:Rae,root:Fae,strong:Oae,table:$ae,text:Lae,thematicBreak:uM,toml:Ev,yaml:Ev,definition:Ev,footnoteDefinition:Ev};function Ev(){return null}const Mae={}.hasOwnProperty;function Bae(t,e){const n=e||{},r=n.allowDangerousHtml||!1,s={};return o.dangerous=r,o.definition=pae(t),o.footnoteById=s,o.footnoteOrder=[],o.augment=i,o.handlers={...Pae,...n.handlers},o.unknownHandler=n.unknownHandler,o.passThrough=n.passThrough,kf(t,"footnoteDefinition",a=>{const l=String(a.identifier).toUpperCase();Mae.call(s,l)||(s[l]=a)}),o;function i(a,l){if(a&&"data"in a&&a.data){const u=a.data;u.hName&&(l.type!=="element"&&(l={type:"element",tagName:"",properties:{},children:[]}),l.tagName=u.hName),l.type==="element"&&u.hProperties&&(l.properties={...l.properties,...u.hProperties}),"children"in l&&l.children&&u.hChildren&&(l.children=u.hChildren)}if(a){const u="type"in a?a:{position:a};fae(u)||(l.position={start:RT(u),end:wN(u)})}return l}function o(a,l,u,c){return Array.isArray(u)&&(c=u,u={}),i(a,{type:"element",tagName:l,properties:u||{},children:c||[]})}}function pM(t,e){const n=Bae(t,e),r=oM(n,t,null),s=mae(n);return s&&r.children.push(Mr("text",`
`),s),Array.isArray(r)?{type:"root",children:r}:r}const zae=function(t,e){return t&&"run"in t?Uae(t,e):Wae(t)},Hae=zae;function Uae(t,e){return(n,r,s)=>{t.run(pM(n,e),r,i=>{s(i)})}}function Wae(t){return e=>pM(e,t)}var St={},Vae={get exports(){return St},set exports(t){St=t}},Gae="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",jae=Gae,Kae=jae;function mM(){}function gM(){}gM.resetWarningCache=mM;var qae=function(){function t(r,s,i,o,a,l){if(l!==Kae){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:gM,resetWarningCache:mM};return n.PropTypes=n,n};Vae.exports=qae();class Gg{constructor(e,n,r){this.property=e,this.normal=n,r&&(this.space=r)}}Gg.prototype.property={};Gg.prototype.normal={};Gg.prototype.space=null;function yM(t,e){const n={},r={};let s=-1;for(;++s<t.length;)Object.assign(n,t[s].property),Object.assign(r,t[s].normal);return new Gg(n,r,e)}function ag(t){return t.toLowerCase()}class _o{constructor(e,n){this.property=e,this.attribute=n}}_o.prototype.space=null;_o.prototype.boolean=!1;_o.prototype.booleanish=!1;_o.prototype.overloadedBoolean=!1;_o.prototype.number=!1;_o.prototype.commaSeparated=!1;_o.prototype.spaceSeparated=!1;_o.prototype.commaOrSpaceSeparated=!1;_o.prototype.mustUseProperty=!1;_o.prototype.defined=!1;let Xae=0;const vt=jd(),ir=jd(),vM=jd(),be=jd(),xn=jd(),uf=jd(),Si=jd();function jd(){return 2**++Xae}const P_=Object.freeze(Object.defineProperty({__proto__:null,boolean:vt,booleanish:ir,commaOrSpaceSeparated:Si,commaSeparated:uf,number:be,overloadedBoolean:vM,spaceSeparated:xn},Symbol.toStringTag,{value:"Module"})),SS=Object.keys(P_);class _N extends _o{constructor(e,n,r,s){let i=-1;if(super(e,n),z3(this,"space",s),typeof r=="number")for(;++i<SS.length;){const o=SS[i];z3(this,SS[i],(r&P_[o])===P_[o])}}}_N.prototype.defined=!0;function z3(t,e,n){n&&(t[e]=n)}const Yae={}.hasOwnProperty;function ep(t){const e={},n={};let r;for(r in t.properties)if(Yae.call(t.properties,r)){const s=t.properties[r],i=new _N(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),e[r]=i,n[ag(r)]=r,n[ag(i.attribute)]=r}return new Gg(e,n,t.space)}const bM=ep({space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),EM=ep({space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function TM(t,e){return e in t?t[e]:e}function xM(t,e){return TM(t,e.toLowerCase())}const CM=ep({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:xM,properties:{xmlns:null,xmlnsXLink:null}}),SM=ep({transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:ir,ariaAutoComplete:null,ariaBusy:ir,ariaChecked:ir,ariaColCount:be,ariaColIndex:be,ariaColSpan:be,ariaControls:xn,ariaCurrent:null,ariaDescribedBy:xn,ariaDetails:null,ariaDisabled:ir,ariaDropEffect:xn,ariaErrorMessage:null,ariaExpanded:ir,ariaFlowTo:xn,ariaGrabbed:ir,ariaHasPopup:null,ariaHidden:ir,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:xn,ariaLevel:be,ariaLive:null,ariaModal:ir,ariaMultiLine:ir,ariaMultiSelectable:ir,ariaOrientation:null,ariaOwns:xn,ariaPlaceholder:null,ariaPosInSet:be,ariaPressed:ir,ariaReadOnly:ir,ariaRelevant:null,ariaRequired:ir,ariaRoleDescription:xn,ariaRowCount:be,ariaRowIndex:be,ariaRowSpan:be,ariaSelected:ir,ariaSetSize:be,ariaSort:null,ariaValueMax:be,ariaValueMin:be,ariaValueNow:be,ariaValueText:null,role:null}}),Qae=ep({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:xM,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:uf,acceptCharset:xn,accessKey:xn,action:null,allow:null,allowFullScreen:vt,allowPaymentRequest:vt,allowUserMedia:vt,alt:null,as:null,async:vt,autoCapitalize:null,autoComplete:xn,autoFocus:vt,autoPlay:vt,capture:vt,charSet:null,checked:vt,cite:null,className:xn,cols:be,colSpan:null,content:null,contentEditable:ir,controls:vt,controlsList:xn,coords:be|uf,crossOrigin:null,data:null,dateTime:null,decoding:null,default:vt,defer:vt,dir:null,dirName:null,disabled:vt,download:vM,draggable:ir,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:vt,formTarget:null,headers:xn,height:be,hidden:vt,high:be,href:null,hrefLang:null,htmlFor:xn,httpEquiv:xn,id:null,imageSizes:null,imageSrcSet:null,inputMode:null,integrity:null,is:null,isMap:vt,itemId:null,itemProp:xn,itemRef:xn,itemScope:vt,itemType:xn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:vt,low:be,manifest:null,max:null,maxLength:be,media:null,method:null,min:null,minLength:be,multiple:vt,muted:vt,name:null,nonce:null,noModule:vt,noValidate:vt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:vt,optimum:be,pattern:null,ping:xn,placeholder:null,playsInline:vt,poster:null,preload:null,readOnly:vt,referrerPolicy:null,rel:xn,required:vt,reversed:vt,rows:be,rowSpan:be,sandbox:xn,scope:null,scoped:vt,seamless:vt,selected:vt,shape:null,size:be,sizes:null,slot:null,span:be,spellCheck:ir,src:null,srcDoc:null,srcLang:null,srcSet:null,start:be,step:null,style:null,tabIndex:be,target:null,title:null,translate:null,type:null,typeMustMatch:vt,useMap:null,value:ir,width:be,wrap:null,align:null,aLink:null,archive:xn,axis:null,background:null,bgColor:null,border:be,borderColor:null,bottomMargin:be,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:vt,declare:vt,event:null,face:null,frame:null,frameBorder:null,hSpace:be,leftMargin:be,link:null,longDesc:null,lowSrc:null,marginHeight:be,marginWidth:be,noResize:vt,noHref:vt,noShade:vt,noWrap:vt,object:null,profile:null,prompt:null,rev:null,rightMargin:be,rules:null,scheme:null,scrolling:ir,standby:null,summary:null,text:null,topMargin:be,valueType:null,version:null,vAlign:null,vLink:null,vSpace:be,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:vt,disableRemotePlayback:vt,prefix:null,property:null,results:be,security:null,unselectable:null}}),Zae=ep({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:TM,properties:{about:Si,accentHeight:be,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:be,amplitude:be,arabicForm:null,ascent:be,attributeName:null,attributeType:null,azimuth:be,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:be,by:null,calcMode:null,capHeight:be,className:xn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:be,diffuseConstant:be,direction:null,display:null,dur:null,divisor:be,dominantBaseline:null,download:vt,dx:null,dy:null,edgeMode:null,editable:null,elevation:be,enableBackground:null,end:null,event:null,exponent:be,externalResourcesRequired:null,fill:null,fillOpacity:be,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:uf,g2:uf,glyphName:uf,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:be,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:be,horizOriginX:be,horizOriginY:be,id:null,ideographic:be,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:be,k:be,k1:be,k2:be,k3:be,k4:be,kernelMatrix:Si,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:be,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:be,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:be,overlineThickness:be,paintOrder:null,panose1:null,path:null,pathLength:be,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:xn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:be,pointsAtY:be,pointsAtZ:be,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Si,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Si,rev:Si,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Si,requiredFeatures:Si,requiredFonts:Si,requiredFormats:Si,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:be,specularExponent:be,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:be,strikethroughThickness:be,string:null,stroke:null,strokeDashArray:Si,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:be,strokeOpacity:be,strokeWidth:null,style:null,surfaceScale:be,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Si,tabIndex:be,tableValues:null,target:null,targetX:be,targetY:be,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Si,to:null,transform:null,u1:null,u2:null,underlinePosition:be,underlineThickness:be,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:be,values:null,vAlphabetic:be,vMathematical:be,vectorEffect:null,vHanging:be,vIdeographic:be,version:null,vertAdvY:be,vertOriginX:be,vertOriginY:be,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:be,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Jae=/^data[-\w.:]+$/i,H3=/-[a-z]/g,ele=/[A-Z]/g;function $T(t,e){const n=ag(e);let r=e,s=_o;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Jae.test(e)){if(e.charAt(4)==="-"){const i=e.slice(5).replace(H3,nle);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=e.slice(4);if(!H3.test(i)){let o=i.replace(ele,tle);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}s=_N}return new s(r,e)}function tle(t){return"-"+t.toLowerCase()}function nle(t){return t.charAt(1).toUpperCase()}const U3={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},jg=yM([EM,bM,CM,SM,Qae],"html"),tp=yM([EM,bM,CM,SM,Zae],"svg");function rle(t){if(t.allowedElements&&t.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(t.allowedElements||t.disallowedElements||t.allowElement)return e=>{kf(e,"element",(n,r,s)=>{const i=s;let o;if(t.allowedElements?o=!t.allowedElements.includes(n.tagName):t.disallowedElements&&(o=t.disallowedElements.includes(n.tagName)),!o&&t.allowElement&&typeof r=="number"&&(o=!t.allowElement(n,r,i)),o&&typeof r=="number")return t.unwrapDisallowed&&n.children?i.children.splice(r,1,...n.children):i.children.splice(r,1),r})}}var M_={},sle={get exports(){return M_},set exports(t){M_=t}},cn={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LT=60103,PT=60106,Kg=60107,qg=60108,Xg=60114,Yg=60109,Qg=60110,Zg=60112,Jg=60113,kN=60120,e0=60115,t0=60116,wM=60121,_M=60122,kM=60117,IM=60129,NM=60131;if(typeof Symbol=="function"&&Symbol.for){var jr=Symbol.for;LT=jr("react.element"),PT=jr("react.portal"),Kg=jr("react.fragment"),qg=jr("react.strict_mode"),Xg=jr("react.profiler"),Yg=jr("react.provider"),Qg=jr("react.context"),Zg=jr("react.forward_ref"),Jg=jr("react.suspense"),kN=jr("react.suspense_list"),e0=jr("react.memo"),t0=jr("react.lazy"),wM=jr("react.block"),_M=jr("react.server.block"),kM=jr("react.fundamental"),IM=jr("react.debug_trace_mode"),NM=jr("react.legacy_hidden")}function da(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case LT:switch(t=t.type,t){case Kg:case Xg:case qg:case Jg:case kN:return t;default:switch(t=t&&t.$$typeof,t){case Qg:case Zg:case t0:case e0:case Yg:return t;default:return e}}case PT:return e}}}var ile=Yg,ole=LT,ale=Zg,lle=Kg,ule=t0,cle=e0,dle=PT,hle=Xg,fle=qg,ple=Jg;cn.ContextConsumer=Qg;cn.ContextProvider=ile;cn.Element=ole;cn.ForwardRef=ale;cn.Fragment=lle;cn.Lazy=ule;cn.Memo=cle;cn.Portal=dle;cn.Profiler=hle;cn.StrictMode=fle;cn.Suspense=ple;cn.isAsyncMode=function(){return!1};cn.isConcurrentMode=function(){return!1};cn.isContextConsumer=function(t){return da(t)===Qg};cn.isContextProvider=function(t){return da(t)===Yg};cn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===LT};cn.isForwardRef=function(t){return da(t)===Zg};cn.isFragment=function(t){return da(t)===Kg};cn.isLazy=function(t){return da(t)===t0};cn.isMemo=function(t){return da(t)===e0};cn.isPortal=function(t){return da(t)===PT};cn.isProfiler=function(t){return da(t)===Xg};cn.isStrictMode=function(t){return da(t)===qg};cn.isSuspense=function(t){return da(t)===Jg};cn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Kg||t===Xg||t===IM||t===qg||t===Jg||t===kN||t===NM||typeof t=="object"&&t!==null&&(t.$$typeof===t0||t.$$typeof===e0||t.$$typeof===Yg||t.$$typeof===Qg||t.$$typeof===Zg||t.$$typeof===kM||t.$$typeof===wM||t[0]===_M)};cn.typeOf=da;(function(t){t.exports=cn})(sle);const mle=Qk(M_);function gle(t){const e=t&&typeof t=="object"&&t.type==="text"?t.value||"":t;return typeof e=="string"&&e.replace(/[ \t\n\f\r]/g,"")===""}function W3(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function AM(t){return t.join(" ").trim()}function V3(t){const e=[],n=String(t||"");let r=n.indexOf(","),s=0,i=!1;for(;!i;){r===-1&&(r=n.length,i=!0);const o=n.slice(s,r).trim();(o||!i)&&e.push(o),s=r+1,r=n.indexOf(",",s)}return e}function DM(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}var G3=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,yle=/\n/g,vle=/^\s*/,ble=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Ele=/^:\s*/,Tle=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,xle=/^[;\s]*/,Cle=/^\s+|\s+$/g,Sle=`
`,j3="/",K3="*",qc="",wle="comment",_le="declaration",kle=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function s(p){var m=p.match(yle);m&&(n+=m.length);var y=p.lastIndexOf(Sle);r=~y?p.length-y:r+p.length}function i(){var p={line:n,column:r};return function(m){return m.position=new o(p),u(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=e.source}o.prototype.content=t;function a(p){var m=new Error(e.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=e.source,m.line=n,m.column=r,m.source=t,!e.silent)throw m}function l(p){var m=p.exec(t);if(m){var y=m[0];return s(y),t=t.slice(y.length),m}}function u(){l(vle)}function c(p){var m;for(p=p||[];m=d();)m!==!1&&p.push(m);return p}function d(){var p=i();if(!(j3!=t.charAt(0)||K3!=t.charAt(1))){for(var m=2;qc!=t.charAt(m)&&(K3!=t.charAt(m)||j3!=t.charAt(m+1));)++m;if(m+=2,qc===t.charAt(m-1))return a("End of comment missing");var y=t.slice(2,m-2);return r+=2,s(y),t=t.slice(m),r+=2,p({type:wle,comment:y})}}function h(){var p=i(),m=l(ble);if(m){if(d(),!l(Ele))return a("property missing ':'");var y=l(Tle),g=p({type:_le,property:q3(m[0].replace(G3,qc)),value:y?q3(y[0].replace(G3,qc)):qc});return l(xle),g}}function f(){var p=[];c(p);for(var m;m=h();)m!==!1&&(p.push(m),c(p));return p}return u(),f()};function q3(t){return t?t.replace(Cle,qc):qc}var Ile=kle;function Nle(t,e){var n=null;if(!t||typeof t!="string")return n;for(var r,s=Ile(t),i=typeof e=="function",o,a,l=0,u=s.length;l<u;l++)r=s[l],o=r.property,a=r.value,i?e(o,a,r):a&&(n||(n={}),n[o]=a);return n}var Ale=Nle;const B_={}.hasOwnProperty,Dle=new Set(["table","thead","tbody","tfoot","tr"]);function RM(t,e){const n=[];let r=-1,s;for(;++r<e.children.length;)s=e.children[r],s.type==="element"?n.push(Rle(t,s,r,e)):s.type==="text"?(e.type!=="element"||!Dle.has(e.tagName)||!gle(s))&&n.push(s.value):s.type==="raw"&&!t.options.skipHtml&&n.push(s.value);return n}function Rle(t,e,n,r){const s=t.options,i=t.schema,o=e.tagName,a={};let l=i,u;if(i.space==="html"&&o==="svg"&&(l=tp,t.schema=l),e.properties)for(u in e.properties)B_.call(e.properties,u)&&Ole(a,u,e.properties[u],t);(o==="ol"||o==="ul")&&t.listDepth++;const c=RM(t,e);(o==="ol"||o==="ul")&&t.listDepth--,t.schema=i;const d=e.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},h=s.components&&B_.call(s.components,o)?s.components[o]:o,f=typeof h=="string"||h===ks.Fragment;if(!mle.isValidElementType(h))throw new TypeError(`Component for name \`${o}\` not defined or is not renderable`);if(a.key=[o,d.start.line,d.start.column,n].join("-"),o==="a"&&s.linkTarget&&(a.target=typeof s.linkTarget=="function"?s.linkTarget(String(a.href||""),e.children,typeof a.title=="string"?a.title:null):s.linkTarget),o==="a"&&s.transformLinkUri&&(a.href=s.transformLinkUri(String(a.href||""),e.children,typeof a.title=="string"?a.title:null)),!f&&o==="code"&&r.type==="element"&&r.tagName!=="pre"&&(a.inline=!0),!f&&(o==="h1"||o==="h2"||o==="h3"||o==="h4"||o==="h5"||o==="h6")&&(a.level=Number.parseInt(o.charAt(1),10)),o==="img"&&s.transformImageUri&&(a.src=s.transformImageUri(String(a.src||""),String(a.alt||""),typeof a.title=="string"?a.title:null)),!f&&o==="li"&&r.type==="element"){const p=Fle(e);a.checked=p&&p.properties?Boolean(p.properties.checked):null,a.index=wS(r,e),a.ordered=r.tagName==="ol"}return!f&&(o==="ol"||o==="ul")&&(a.ordered=o==="ol",a.depth=t.listDepth),(o==="td"||o==="th")&&(a.align&&(a.style||(a.style={}),a.style.textAlign=a.align,delete a.align),f||(a.isHeader=o==="th")),!f&&o==="tr"&&r.type==="element"&&(a.isHeader=Boolean(r.tagName==="thead")),s.sourcePos&&(a["data-sourcepos"]=Ple(d)),!f&&s.rawSourcePos&&(a.sourcePosition=e.position),!f&&s.includeElementIndex&&(a.index=wS(r,e),a.siblingCount=wS(r)),f||(a.node=e),c.length>0?ks.createElement(h,a,c):ks.createElement(h,a)}function Fle(t){let e=-1;for(;++e<t.children.length;){const n=t.children[e];if(n.type==="element"&&n.tagName==="input")return n}return null}function wS(t,e){let n=-1,r=0;for(;++n<t.children.length&&t.children[n]!==e;)t.children[n].type==="element"&&r++;return r}function Ole(t,e,n,r){const s=$T(r.schema,e);let i=n;i==null||i!==i||(Array.isArray(i)&&(i=s.commaSeparated?DM(i):AM(i)),s.property==="style"&&typeof i=="string"&&(i=$le(i)),s.space&&s.property?t[B_.call(U3,s.property)?U3[s.property]:s.property]=i:s.attribute&&(t[s.attribute]=i))}function $le(t){const e={};try{Ale(t,n)}catch{}return e;function n(r,s){const i=r.slice(0,4)==="-ms-"?`ms-${r.slice(4)}`:r;e[i.replace(/-([a-z])/g,Lle)]=s}}function Lle(t,e){return e.toUpperCase()}function Ple(t){return[t.start.line,":",t.start.column,"-",t.end.line,":",t.end.column].map(e=>String(e)).join("")}const X3={}.hasOwnProperty,Mle="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Tv={renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function MT(t){for(const i in Tv)if(X3.call(Tv,i)&&X3.call(t,i)){const o=Tv[i];console.warn(`[react-markdown] Warning: please ${o.to?`use \`${o.to}\` instead of`:"remove"} \`${i}\` (see <${Mle}#${o.id}> for more info)`),delete Tv[i]}const e=nie().use(rae).use(t.remarkPlugins||t.plugins||[]).use(Hae,{allowDangerousHtml:!0}).use(t.rehypePlugins||[]).use(rle,t),n=new H6;typeof t.children=="string"?n.value=t.children:t.children!==void 0&&t.children!==null&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${t.children}\`)`);const r=e.runSync(e.parse(n),n);if(r.type!=="root")throw new TypeError("Expected a `root` node");let s=ks.createElement(ks.Fragment,{},RM({options:t,schema:jg,listDepth:0},r));return t.className&&(s=ks.createElement("div",{className:t.className},s)),s}MT.defaultProps={transformLinkUri:Use};MT.propTypes={children:St.string,className:St.string,allowElement:St.func,allowedElements:St.arrayOf(St.string),disallowedElements:St.arrayOf(St.string),unwrapDisallowed:St.bool,remarkPlugins:St.arrayOf(St.oneOfType([St.object,St.func,St.arrayOf(St.oneOfType([St.object,St.func]))])),rehypePlugins:St.arrayOf(St.oneOfType([St.object,St.func,St.arrayOf(St.oneOfType([St.object,St.func]))])),sourcePos:St.bool,rawSourcePos:St.bool,skipHtml:St.bool,includeElementIndex:St.bool,transformLinkUri:St.oneOfType([St.func,St.bool]),linkTarget:St.oneOfType([St.func,St.string]),transformImageUri:St.func,components:St.object};const Ble={tokenize:Gle,partial:!0},FM={tokenize:jle,partial:!0},OM={tokenize:Kle,partial:!0},$M={tokenize:qle,partial:!0},zle={tokenize:Xle,partial:!0},LM={tokenize:Wle,previous:MM},PM={tokenize:Vle,previous:BM},Yl={tokenize:Ule,previous:zM},il={},Hle={text:il};let Rc=48;for(;Rc<123;)il[Rc]=Yl,Rc++,Rc===58?Rc=65:Rc===91&&(Rc=97);il[43]=Yl;il[45]=Yl;il[46]=Yl;il[95]=Yl;il[72]=[Yl,PM];il[104]=[Yl,PM];il[87]=[Yl,LM];il[119]=[Yl,LM];function Ule(t,e,n){const r=this;let s,i;return o;function o(d){return!z_(d)||!zM.call(r,r.previous)||IN(r.events)?n(d):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),a(d))}function a(d){return z_(d)?(t.consume(d),a):d===64?(t.consume(d),l):n(d)}function l(d){return d===46?t.check(zle,c,u)(d):d===45||d===95||ui(d)?(i=!0,t.consume(d),l):c(d)}function u(d){return t.consume(d),s=!0,l}function c(d){return i&&s&&Rs(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(d)):n(d)}}function Wle(t,e,n){const r=this;return s;function s(o){return o!==87&&o!==119||!MM.call(r,r.previous)||IN(r.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(Ble,t.attempt(FM,t.attempt(OM,i),n),n)(o))}function i(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function Vle(t,e,n){const r=this;let s="",i=!1;return o;function o(d){return(d===72||d===104)&&BM.call(r,r.previous)&&!IN(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),s+=String.fromCodePoint(d),t.consume(d),a):n(d)}function a(d){if(Rs(d)&&s.length<5)return s+=String.fromCodePoint(d),t.consume(d),a;if(d===58){const h=s.toLowerCase();if(h==="http"||h==="https")return t.consume(d),l}return n(d)}function l(d){return d===47?(t.consume(d),i?u:(i=!0,l)):n(d)}function u(d){return d===null||yE(d)||kn(d)||wd(d)||NT(d)?n(d):t.attempt(FM,t.attempt(OM,c),n)(d)}function c(d){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(d)}}function Gle(t,e,n){let r=0;return s;function s(o){return(o===87||o===119)&&r<3?(r++,t.consume(o),s):o===46&&r===3?(t.consume(o),i):n(o)}function i(o){return o===null?n(o):e(o)}}function jle(t,e,n){let r,s,i;return o;function o(u){return u===46||u===95?t.check($M,l,a)(u):u===null||kn(u)||wd(u)||u!==45&&NT(u)?l(u):(i=!0,t.consume(u),o)}function a(u){return u===95?r=!0:(s=r,r=void 0),t.consume(u),o}function l(u){return s||r||!i?n(u):e(u)}}function Kle(t,e){let n=0,r=0;return s;function s(o){return o===40?(n++,t.consume(o),s):o===41&&r<n?i(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check($M,e,i)(o):o===null||kn(o)||wd(o)?e(o):(t.consume(o),s)}function i(o){return o===41&&r++,t.consume(o),s}}function qle(t,e,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(t.consume(a),r):a===38?(t.consume(a),i):a===93?(t.consume(a),s):a===60||a===null||kn(a)||wd(a)?e(a):n(a)}function s(a){return a===null||a===40||a===91||kn(a)||wd(a)?e(a):r(a)}function i(a){return Rs(a)?o(a):n(a)}function o(a){return a===59?(t.consume(a),r):Rs(a)?(t.consume(a),o):n(a)}}function Xle(t,e,n){return r;function r(i){return t.consume(i),s}function s(i){return ui(i)?n(i):e(i)}}function MM(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||kn(t)}function BM(t){return!Rs(t)}function zM(t){return!(t===47||z_(t))}function z_(t){return t===43||t===45||t===46||t===95||ui(t)}function IN(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const Yle={tokenize:sue,partial:!0};function Qle(){return{document:{[91]:{tokenize:tue,continuation:{tokenize:nue},exit:rue}},text:{[91]:{tokenize:eue},[93]:{add:"after",tokenize:Zle,resolveTo:Jle}}}}function Zle(t,e,n){const r=this;let s=r.events.length;const i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;s--;){const l=r.events[s][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!o||!o._balanced)return n(l);const u=ea(r.sliceSerialize({start:o.end,end:r.now()}));return u.codePointAt(0)!==94||!i.includes(u.slice(1))?n(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function Jle(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},a=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",s,e],["exit",s,e],["enter",i,e],["enter",o,e],["exit",o,e],["exit",i,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...a),t}function eue(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i=0,o;return a;function a(d){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),l}function l(d){return d!==94?n(d):(t.enter("gfmFootnoteCallMarker"),t.consume(d),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",u)}function u(d){if(i>999||d===93&&!o||d===null||d===91||kn(d))return n(d);if(d===93){t.exit("chunkString");const h=t.exit("gfmFootnoteCallString");return s.includes(ea(r.sliceSerialize(h)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(d)}return kn(d)||(o=!0),i++,t.consume(d),d===92?c:u}function c(d){return d===91||d===92||d===93?(t.consume(d),i++,u):u(d)}}function tue(t,e,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let i,o=0,a;return l;function l(p){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(p),t.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(p){return p===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(p),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",c):n(p)}function c(p){if(o>999||p===93&&!a||p===null||p===91||kn(p))return n(p);if(p===93){t.exit("chunkString");const m=t.exit("gfmFootnoteDefinitionLabelString");return i=ea(r.sliceSerialize(m)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(p),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),h}return kn(p)||(a=!0),o++,t.consume(p),p===92?d:c}function d(p){return p===91||p===92||p===93?(t.consume(p),o++,c):c(p)}function h(p){return p===58?(t.enter("definitionMarker"),t.consume(p),t.exit("definitionMarker"),s.includes(i)||s.push(i),Ft(t,f,"gfmFootnoteDefinitionWhitespace")):n(p)}function f(p){return e(p)}}function nue(t,e,n){return t.check(Vg,e,t.attempt(Yle,e,n))}function rue(t){t.exit("gfmFootnoteDefinition")}function sue(t,e,n){const r=this;return Ft(t,s,"gfmFootnoteDefinitionIndent",4+1);function s(i){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(i):n(i)}}function iue(t){let n=(t||{}).singleTilde;const r={tokenize:i,resolveAll:s};return n==null&&(n=!0),{text:{[126]:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function s(o,a){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let u=l;for(;u--;)if(o[u][0]==="exit"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[u][1].end.offset-o[u][1].start.offset){o[l][1].type="strikethroughSequence",o[u][1].type="strikethroughSequence";const c={type:"strikethrough",start:Object.assign({},o[u][1].start),end:Object.assign({},o[l][1].end)},d={type:"strikethroughText",start:Object.assign({},o[u][1].end),end:Object.assign({},o[l][1].start)},h=[["enter",c,a],["enter",o[u][1],a],["exit",o[u][1],a],["enter",d,a]],f=a.parser.constructs.insideSpan.null;f&&Pi(h,h.length,0,AT(f,o.slice(u+1,l),a)),Pi(h,h.length,0,[["exit",d,a],["enter",o[l][1],a],["exit",o[l][1],a],["exit",c,a]]),Pi(o,u-1,l-u+3,h),l=u+h.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function i(o,a,l){const u=this.previous,c=this.events;let d=0;return h;function h(p){return u===126&&c[c.length-1][1].type!=="characterEscape"?l(p):(o.enter("strikethroughSequenceTemporary"),f(p))}function f(p){const m=vE(u);if(p===126)return d>1?l(p):(o.consume(p),d++,f);if(d<2&&!n)return l(p);const y=o.exit("strikethroughSequenceTemporary"),g=vE(p);return y._open=!g||g===2&&Boolean(m),y._close=!m||m===2&&Boolean(g),a(p)}}}class oue{constructor(){this.map=[]}add(e,n,r){aue(this,e,n,r)}consume(e){if(this.map.sort((i,o)=>i[0]-o[0]),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1])),r.push(this.map[n][2]),e.length=this.map[n][0];r.push([...e]),e.length=0;let s=r.pop();for(;s;)e.push(...s),s=r.pop();this.map.length=0}}function aue(t,e,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<t.map.length;){if(t.map[s][0]===e){t.map[s][1]+=n,t.map[s][2].push(...r);return}s+=1}t.map.push([e,n,r])}}function lue(t,e){let n=!1;const r=[];for(;e<t.length;){const s=t[e];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const i=r.length-1;r[i]=r[i]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}const uue={flow:{null:{tokenize:cue,resolveAll:due}}};function cue(t,e,n){const r=this;let s=0,i=0,o;return a;function a(I){let F=r.events.length-1;for(;F>-1;){const H=r.events[F][1].type;if(H==="lineEnding"||H==="linePrefix")F--;else break}const L=F>-1?r.events[F][1].type:null,z=L==="tableHead"||L==="tableRow"?x:l;return z===x&&r.parser.lazy[r.now().line]?n(I):z(I)}function l(I){return t.enter("tableHead"),t.enter("tableRow"),u(I)}function u(I){return I===124||(o=!0,i+=1),c(I)}function c(I){return I===null?n(I):Ze(I)?i>1?(i=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(I),t.exit("lineEnding"),f):n(I):fn(I)?Ft(t,c,"whitespace")(I):(i+=1,o&&(o=!1,s+=1),I===124?(t.enter("tableCellDivider"),t.consume(I),t.exit("tableCellDivider"),o=!0,c):(t.enter("data"),d(I)))}function d(I){return I===null||I===124||kn(I)?(t.exit("data"),c(I)):(t.consume(I),I===92?h:d)}function h(I){return I===92||I===124?(t.consume(I),d):d(I)}function f(I){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(I):(t.enter("tableDelimiterRow"),o=!1,fn(I)?Ft(t,p,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):p(I))}function p(I){return I===45||I===58?y(I):I===124?(o=!0,t.enter("tableCellDivider"),t.consume(I),t.exit("tableCellDivider"),m):T(I)}function m(I){return fn(I)?Ft(t,y,"whitespace")(I):y(I)}function y(I){return I===58?(i+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(I),t.exit("tableDelimiterMarker"),g):I===45?(i+=1,g(I)):I===null||Ze(I)?b(I):T(I)}function g(I){return I===45?(t.enter("tableDelimiterFiller"),v(I)):T(I)}function v(I){return I===45?(t.consume(I),v):I===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(I),t.exit("tableDelimiterMarker"),E):(t.exit("tableDelimiterFiller"),E(I))}function E(I){return fn(I)?Ft(t,b,"whitespace")(I):b(I)}function b(I){return I===124?p(I):I===null||Ze(I)?!o||s!==i?T(I):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(I)):T(I)}function T(I){return n(I)}function x(I){return t.enter("tableRow"),C(I)}function C(I){return I===124?(t.enter("tableCellDivider"),t.consume(I),t.exit("tableCellDivider"),C):I===null||Ze(I)?(t.exit("tableRow"),e(I)):fn(I)?Ft(t,C,"whitespace")(I):(t.enter("data"),S(I))}function S(I){return I===null||I===124||kn(I)?(t.exit("data"),C(I)):(t.consume(I),I===92?N:S)}function N(I){return I===92||I===124?(t.consume(I),S):S(I)}}function due(t,e){let n=-1,r=!0,s=0,i=[0,0,0,0],o=[0,0,0,0],a=!1,l=0,u,c,d;const h=new oue;for(;++n<t.length;){const f=t[n],p=f[1];f[0]==="enter"?p.type==="tableHead"?(a=!1,l!==0&&(Y3(h,e,l,u,c),c=void 0,l=0),u={type:"table",start:Object.assign({},p.start),end:Object.assign({},p.end)},h.add(n,0,[["enter",u,e]])):p.type==="tableRow"||p.type==="tableDelimiterRow"?(r=!0,d=void 0,i=[0,0,0,0],o=[0,n+1,0,0],a&&(a=!1,c={type:"tableBody",start:Object.assign({},p.start),end:Object.assign({},p.end)},h.add(n,0,[["enter",c,e]])),s=p.type==="tableDelimiterRow"?2:c?3:1):s&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(i[1]!==0&&(o[0]=o[1],d=xv(h,e,i,s,void 0,d),i=[0,0,0,0]),o[2]=n)):p.type==="tableCellDivider"&&(r?r=!1:(i[1]!==0&&(o[0]=o[1],d=xv(h,e,i,s,void 0,d)),i=o,o=[i[1],n,0,0])):p.type==="tableHead"?(a=!0,l=n):p.type==="tableRow"||p.type==="tableDelimiterRow"?(l=n,i[1]!==0?(o[0]=o[1],d=xv(h,e,i,s,n,d)):o[1]!==0&&(d=xv(h,e,o,s,n,d)),s=0):s&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")&&(o[3]=n)}for(l!==0&&Y3(h,e,l,u,c),h.consume(e.events),n=-1;++n<e.events.length;){const f=e.events[n];f[0]==="enter"&&f[1].type==="table"&&(f[1]._align=lue(e.events,n))}return t}function xv(t,e,n,r,s,i){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(i.end=Object.assign({},Nh(e.events,n[0])),t.add(n[0],0,[["exit",i,e]]));const l=Nh(e.events,n[1]);if(i={type:o,start:Object.assign({},l),end:Object.assign({},l)},t.add(n[1],0,[["enter",i,e]]),n[2]!==0){const u=Nh(e.events,n[2]),c=Nh(e.events,n[3]),d={type:a,start:Object.assign({},u),end:Object.assign({},c)};if(t.add(n[2],0,[["enter",d,e]]),r!==2){const h=e.events[n[2]],f=e.events[n[3]];if(h[1].end=Object.assign({},f[1].end),h[1].type="chunkText",h[1].contentType="text",n[3]>n[2]+1){const p=n[2]+1,m=n[3]-n[2]-1;t.add(p,m,[])}}t.add(n[3]+1,0,[["exit",d,e]])}return s!==void 0&&(i.end=Object.assign({},Nh(e.events,s)),t.add(s,0,[["exit",i,e]]),i=void 0),i}function Y3(t,e,n,r,s){const i=[],o=Nh(e.events,n);s&&(s.end=Object.assign({},o),i.push(["exit",s,e])),r.end=Object.assign({},o),i.push(["exit",r,e]),t.add(n+1,0,i)}function Nh(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const hue={tokenize:pue},fue={text:{[91]:hue}};function pue(t,e,n){const r=this;return s;function s(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),i)}function i(l){return kn(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),o):n(l)}function o(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),a):n(l)}function a(l){return Ze(l)?e(l):fn(l)?t.check({tokenize:mue},e,n)(l):n(l)}}function mue(t,e,n){return Ft(t,r,"whitespace");function r(s){return s===null?n(s):e(s)}}function gue(t){return j6([Hle,Qle(),iue(t),uue,fue])}function Q3(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(e);for(;s!==-1;)r++,s=n.indexOf(e,s+e.length);return r}function yue(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const vue={}.hasOwnProperty,bue=function(t,e,n,r){let s,i;typeof e=="string"||e instanceof RegExp?(i=[[e,n]],s=r):(i=e,s=n),s||(s={});const o=SN(s.ignore||[]),a=Eue(i);let l=-1;for(;++l<a.length;)aM(t,"text",u);return t;function u(d,h){let f=-1,p;for(;++f<h.length;){const m=h[f];if(o(m,p?p.children.indexOf(m):void 0,p))return;p=m}if(p)return c(d,h)}function c(d,h){const f=h[h.length-1],p=a[l][0],m=a[l][1];let y=0;const g=f.children.indexOf(d);let v=!1,E=[];p.lastIndex=0;let b=p.exec(d.value);for(;b;){const T=b.index,x={index:b.index,input:b.input,stack:[...h,d]};let C=m(...b,x);if(typeof C=="string"&&(C=C.length>0?{type:"text",value:C}:void 0),C!==!1&&(y!==T&&E.push({type:"text",value:d.value.slice(y,T)}),Array.isArray(C)?E.push(...C):C&&E.push(C),y=T+b[0].length,v=!0),!p.global)break;b=p.exec(d.value)}return v?(y<d.value.length&&E.push({type:"text",value:d.value.slice(y)}),f.children.splice(g,1,...E)):E=[d],g+E.length}};function Eue(t){const e=[];if(typeof t!="object")throw new TypeError("Expected array or object as schema");if(Array.isArray(t)){let n=-1;for(;++n<t.length;)e.push([Z3(t[n][0]),J3(t[n][1])])}else{let n;for(n in t)vue.call(t,n)&&e.push([Z3(n),J3(t[n])])}return e}function Z3(t){return typeof t=="string"?new RegExp(yue(t),"g"):t}function J3(t){return typeof t=="function"?t:()=>t}const _S="phrasing",kS=["autolink","link","image","label"],Tue={transforms:[Iue],enter:{literalAutolink:Cue,literalAutolinkEmail:IS,literalAutolinkHttp:IS,literalAutolinkWww:IS},exit:{literalAutolink:kue,literalAutolinkEmail:_ue,literalAutolinkHttp:Sue,literalAutolinkWww:wue}},xue={unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:_S,notInConstruct:kS},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:_S,notInConstruct:kS},{character:":",before:"[ps]",after:"\\/",inConstruct:_S,notInConstruct:kS}]};function Cue(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function IS(t){this.config.enter.autolinkProtocol.call(this,t)}function Sue(t){this.config.exit.autolinkProtocol.call(this,t)}function wue(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.url="http://"+this.sliceSerialize(t)}function _ue(t){this.config.exit.autolinkEmail.call(this,t)}function kue(t){this.exit(t)}function Iue(t){bue(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Nue],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/g,Aue]],{ignore:["link","linkReference"]})}function Nue(t,e,n,r,s){let i="";if(!HM(s)||(/^w/i.test(e)&&(n=e+n,e="",i="http://"),!Due(n)))return!1;const o=Rue(n+r);if(!o[0])return!1;const a={type:"link",title:null,url:i+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function Aue(t,e,n,r){return!HM(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function Due(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function Rue(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const s=Q3(t,"(");let i=Q3(t,")");for(;r!==-1&&s>i;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),i++;return[t,n]}function HM(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||wd(n)||NT(n))&&(!e||n!==47)}function UM(t){return t.label||!t.identifier?t.label||"":rM(t.identifier)}function Fue(t,e,n){const r=e.indexStack,s=t.children||[],i=e.createTracker(n),o=[];let a=-1;for(r.push(-1);++a<s.length;){const l=s[a];r[r.length-1]=a,o.push(i.move(e.handle(l,t,e,{before:`
`,after:`
`,...i.current()}))),l.type!=="list"&&(e.bulletLastUsed=void 0),a<s.length-1&&o.push(i.move(Oue(l,s[a+1],t,e)))}return r.pop(),o.join("")}function Oue(t,e,n,r){let s=r.join.length;for(;s--;){const i=r.join[s](t,e,n,r);if(i===!0||i===1)break;if(typeof i=="number")return`
`.repeat(1+i);if(i===!1)return`

<!---->

`}return`

`}const $ue=/\r?\n|\r/g;function Lue(t,e){const n=[];let r=0,s=0,i;for(;i=$ue.exec(t);)o(t.slice(r,i.index)),n.push(i[0]),r=i.index+i[0].length,s++;return o(t.slice(r)),n.join("");function o(a){n.push(e(a,s,!a))}}function WM(t){if(!t._compiled){const e=(t.atBreak?"[\\r\\n][\\t ]*":"")+(t.before?"(?:"+t.before+")":"");t._compiled=new RegExp((e?"("+e+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(t.character)?"\\":"")+t.character+(t.after?"(?:"+t.after+")":""),"g")}return t._compiled}function Pue(t,e){return eR(t,e.inConstruct,!0)&&!eR(t,e.notInConstruct,!1)}function eR(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function VM(t,e,n){const r=(n.before||"")+(e||"")+(n.after||""),s=[],i=[],o={};let a=-1;for(;++a<t.unsafe.length;){const c=t.unsafe[a];if(!Pue(t.stack,c))continue;const d=WM(c);let h;for(;h=d.exec(r);){const f="before"in c||Boolean(c.atBreak),p="after"in c,m=h.index+(f?h[1].length:0);s.includes(m)?(o[m].before&&!f&&(o[m].before=!1),o[m].after&&!p&&(o[m].after=!1)):(s.push(m),o[m]={before:f,after:p})}}s.sort(Mue);let l=n.before?n.before.length:0;const u=r.length-(n.after?n.after.length:0);for(a=-1;++a<s.length;){const c=s[a];c<l||c>=u||c+1<u&&s[a+1]===c+1&&o[c].after&&!o[c+1].before&&!o[c+1].after||s[a-1]===c-1&&o[c].before&&!o[c-1].before&&!o[c-1].after||(l!==c&&i.push(tR(r.slice(l,c),"\\")),l=c,/[!-/:-@[-`{-~]/.test(r.charAt(c))&&(!n.encode||!n.encode.includes(r.charAt(c)))?i.push("\\"):(i.push("&#x"+r.charCodeAt(c).toString(16).toUpperCase()+";"),l++))}return i.push(tR(r.slice(l,u),n.after)),i.join("")}function Mue(t,e){return t-e}function tR(t,e){const n=/\\(?=[!-/:-@[-`{-~])/g,r=[],s=[],i=t+e;let o=-1,a=0,l;for(;l=n.exec(i);)r.push(l.index);for(;++o<r.length;)a!==r[o]&&s.push(t.slice(a,r[o])),s.push("\\"),a=r[o];return s.push(t.slice(a)),s.join("")}function BT(t){const e=t||{},n=e.now||{};let r=e.lineShift||0,s=n.line||1,i=n.column||1;return{move:l,current:o,shift:a};function o(){return{now:{line:s,column:i},lineShift:r}}function a(u){r+=u}function l(u){const c=u||"",d=c.split(/\r?\n|\r/g),h=d[d.length-1];return s+=d.length-1,i=d.length===1?i+h.length:1+h.length+r,c}}GM.peek=Xue;function Bue(){return{enter:{gfmFootnoteDefinition:Hue,gfmFootnoteDefinitionLabelString:Uue,gfmFootnoteCall:Gue,gfmFootnoteCallString:jue},exit:{gfmFootnoteDefinition:Vue,gfmFootnoteDefinitionLabelString:Wue,gfmFootnoteCall:que,gfmFootnoteCallString:Kue}}}function zue(){return{unsafe:[{character:"[",inConstruct:["phrasing","label","reference"]}],handlers:{footnoteDefinition:Yue,footnoteReference:GM}}}function Hue(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function Uue(){this.buffer()}function Wue(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.label=e,n.identifier=ea(this.sliceSerialize(t)).toLowerCase()}function Vue(t){this.exit(t)}function Gue(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function jue(){this.buffer()}function Kue(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.label=e,n.identifier=ea(this.sliceSerialize(t)).toLowerCase()}function que(t){this.exit(t)}function GM(t,e,n,r){const s=BT(r);let i=s.move("[^");const o=n.enter("footnoteReference"),a=n.enter("reference");return i+=s.move(VM(n,UM(t),{...s.current(),before:i,after:"]"})),a(),o(),i+=s.move("]"),i}function Xue(){return"["}function Yue(t,e,n,r){const s=BT(r);let i=s.move("[^");const o=n.enter("footnoteDefinition"),a=n.enter("label");return i+=s.move(VM(n,UM(t),{...s.current(),before:i,after:"]"})),a(),i+=s.move("]:"+(t.children&&t.children.length>0?" ":"")),s.shift(4),i+=s.move(Lue(Fue(t,n,s.current()),Que)),o(),i}function Que(t,e,n){return e===0?t:(n?"":"    ")+t}function jM(t,e,n){const r=e.indexStack,s=t.children||[],i=[];let o=-1,a=n.before;r.push(-1);let l=e.createTracker(n);for(;++o<s.length;){const u=s[o];let c;if(r[r.length-1]=o,o+1<s.length){let d=e.handle.handlers[s[o+1].type];d&&d.peek&&(d=d.peek),c=d?d(s[o+1],t,e,{before:"",after:"",...l.current()}).charAt(0):""}else c=n.after;i.length>0&&(a==="\r"||a===`
`)&&u.type==="html"&&(i[i.length-1]=i[i.length-1].replace(/(\r?\n|\r)$/," "),a=" ",l=e.createTracker(n),l.move(i.join(""))),i.push(l.move(e.handle(u,t,e,{...l.current(),before:a,after:c}))),a=i[i.length-1].slice(-1)}return r.pop(),i.join("")}const Zue=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];KM.peek=rce;const Jue={canContainEols:["delete"],enter:{strikethrough:tce},exit:{strikethrough:nce}},ece={unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:Zue}],handlers:{delete:KM}};function tce(t){this.enter({type:"delete",children:[]},t)}function nce(t){this.exit(t)}function KM(t,e,n,r){const s=BT(r),i=n.enter("strikethrough");let o=s.move("~~");return o+=jM(t,n,{...s.current(),before:o,after:"~"}),o+=s.move("~~"),i(),o}function rce(){return"~"}qM.peek=sce;function qM(t,e,n){let r=t.value||"",s="`",i=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++i<n.unsafe.length;){const o=n.unsafe[i],a=WM(o);let l;if(o.atBreak)for(;l=a.exec(r);){let u=l.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(l.index+1)}}return s+r+s}function sce(){return"`"}function ice(t,e={}){const n=(e.align||[]).concat(),r=e.stringLength||ace,s=[],i=[],o=[],a=[];let l=0,u=-1;for(;++u<t.length;){const p=[],m=[];let y=-1;for(t[u].length>l&&(l=t[u].length);++y<t[u].length;){const g=oce(t[u][y]);if(e.alignDelimiters!==!1){const v=r(g);m[y]=v,(a[y]===void 0||v>a[y])&&(a[y]=v)}p.push(g)}i[u]=p,o[u]=m}let c=-1;if(typeof n=="object"&&"length"in n)for(;++c<l;)s[c]=nR(n[c]);else{const p=nR(n);for(;++c<l;)s[c]=p}c=-1;const d=[],h=[];for(;++c<l;){const p=s[c];let m="",y="";p===99?(m=":",y=":"):p===108?m=":":p===114&&(y=":");let g=e.alignDelimiters===!1?1:Math.max(1,a[c]-m.length-y.length);const v=m+"-".repeat(g)+y;e.alignDelimiters!==!1&&(g=m.length+g+y.length,g>a[c]&&(a[c]=g),h[c]=g),d[c]=v}i.splice(1,0,d),o.splice(1,0,h),u=-1;const f=[];for(;++u<i.length;){const p=i[u],m=o[u];c=-1;const y=[];for(;++c<l;){const g=p[c]||"";let v="",E="";if(e.alignDelimiters!==!1){const b=a[c]-(m[c]||0),T=s[c];T===114?v=" ".repeat(b):T===99?b%2?(v=" ".repeat(b/2+.5),E=" ".repeat(b/2-.5)):(v=" ".repeat(b/2),E=v):E=" ".repeat(b)}e.delimiterStart!==!1&&!c&&y.push("|"),e.padding!==!1&&!(e.alignDelimiters===!1&&g==="")&&(e.delimiterStart!==!1||c)&&y.push(" "),e.alignDelimiters!==!1&&y.push(v),y.push(g),e.alignDelimiters!==!1&&y.push(E),e.padding!==!1&&y.push(" "),(e.delimiterEnd!==!1||c!==l-1)&&y.push("|")}f.push(e.delimiterEnd===!1?y.join("").replace(/ +$/,""):y.join(""))}return f.join(`
`)}function oce(t){return t==null?"":String(t)}function ace(t){return t.length}function nR(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}const lce={enter:{table:uce,tableData:rR,tableHeader:rR,tableRow:dce},exit:{codeText:hce,table:cce,tableData:NS,tableHeader:NS,tableRow:NS}};function uce(t){const e=t._align;this.enter({type:"table",align:e.map(n=>n==="none"?null:n),children:[]},t),this.setData("inTable",!0)}function cce(t){this.exit(t),this.setData("inTable")}function dce(t){this.enter({type:"tableRow",children:[]},t)}function NS(t){this.exit(t)}function rR(t){this.enter({type:"tableCell",children:[]},t)}function hce(t){let e=this.resume();this.getData("inTable")&&(e=e.replace(/\\([\\|])/g,fce));const n=this.stack[this.stack.length-1];n.value=e,this.exit(t)}function fce(t,e){return e==="|"?e:t}function pce(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,s=e.stringLength,i=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{table:o,tableRow:a,tableCell:l,inlineCode:h}};function o(f,p,m,y){return u(c(f,m,y),f.align)}function a(f,p,m,y){const g=d(f,m,y),v=u([g]);return v.slice(0,v.indexOf(`
`))}function l(f,p,m,y){const g=m.enter("tableCell"),v=m.enter("phrasing"),E=jM(f,m,{...y,before:i,after:i});return v(),g(),E}function u(f,p){return ice(f,{align:p,alignDelimiters:r,padding:n,stringLength:s})}function c(f,p,m){const y=f.children;let g=-1;const v=[],E=p.enter("table");for(;++g<y.length;)v[g]=d(y[g],p,m);return E(),v}function d(f,p,m){const y=f.children;let g=-1;const v=[],E=p.enter("tableRow");for(;++g<y.length;)v[g]=l(y[g],f,p,m);return E(),v}function h(f,p,m){let y=qM(f,p,m);return m.stack.includes("tableCell")&&(y=y.replace(/\|/g,"\\$&")),y}}function mce(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function gce(t){const e=t.options.listItemIndent||"tab";if(e===1||e==="1")return"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function yce(t,e,n,r){const s=gce(n);let i=n.bulletCurrent||mce(n);e&&e.type==="list"&&e.ordered&&(i=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+i);let o=i.length+1;(s==="tab"||s==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const a=n.createTracker(r);a.move(i+" ".repeat(o-i.length)),a.shift(o);const l=n.enter("listItem"),u=n.indentLines(n.containerFlow(t,a.current()),c);return l(),u;function c(d,h,f){return h?(f?"":" ".repeat(o))+d:(f?i:i+" ".repeat(o-i.length))+d}}const vce={exit:{taskListCheckValueChecked:sR,taskListCheckValueUnchecked:sR,paragraph:Ece}},bce={unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Tce}};function sR(t){const e=this.stack[this.stack.length-2];e.checked=t.type==="taskListCheckValueChecked"}function Ece(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1],r=n.children[0];if(r&&r.type==="text"){const s=e.children;let i=-1,o;for(;++i<s.length;){const a=s[i];if(a.type==="paragraph"){o=a;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function Tce(t,e,n,r){const s=t.children[0],i=typeof t.checked=="boolean"&&s&&s.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",a=BT(r);i&&a.move(o);let l=yce(t,e,n,{...r,...a.current()});return i&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),l;function u(c){return c+o}}function xce(){return[Tue,Bue(),Jue,lce,vce]}function Cce(t){return{extensions:[xue,zue(),ece,pce(t),bce]}}function XM(t={}){const e=this.data();n("micromarkExtensions",gue(t)),n("fromMarkdownExtensions",xce()),n("toMarkdownExtensions",Cce(t));function n(r,s){(e[r]?e[r]:e[r]=[]).push(s)}}var ha={};const Sce=[65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111];ha.REPLACEMENT_CHARACTER="�";ha.CODE_POINTS={EOF:-1,NULL:0,TABULATION:9,CARRIAGE_RETURN:13,LINE_FEED:10,FORM_FEED:12,SPACE:32,EXCLAMATION_MARK:33,QUOTATION_MARK:34,NUMBER_SIGN:35,AMPERSAND:38,APOSTROPHE:39,HYPHEN_MINUS:45,SOLIDUS:47,DIGIT_0:48,DIGIT_9:57,SEMICOLON:59,LESS_THAN_SIGN:60,EQUALS_SIGN:61,GREATER_THAN_SIGN:62,QUESTION_MARK:63,LATIN_CAPITAL_A:65,LATIN_CAPITAL_F:70,LATIN_CAPITAL_X:88,LATIN_CAPITAL_Z:90,RIGHT_SQUARE_BRACKET:93,GRAVE_ACCENT:96,LATIN_SMALL_A:97,LATIN_SMALL_F:102,LATIN_SMALL_X:120,LATIN_SMALL_Z:122,REPLACEMENT_CHARACTER:65533};ha.CODE_POINT_SEQUENCES={DASH_DASH_STRING:[45,45],DOCTYPE_STRING:[68,79,67,84,89,80,69],CDATA_START_STRING:[91,67,68,65,84,65,91],SCRIPT_STRING:[115,99,114,105,112,116],PUBLIC_STRING:[80,85,66,76,73,67],SYSTEM_STRING:[83,89,83,84,69,77]};ha.isSurrogate=function(t){return t>=55296&&t<=57343};ha.isSurrogatePair=function(t){return t>=56320&&t<=57343};ha.getSurrogatePairCodePoint=function(t,e){return(t-55296)*1024+9216+e};ha.isControlCodePoint=function(t){return t!==32&&t!==10&&t!==13&&t!==9&&t!==12&&t>=1&&t<=31||t>=127&&t<=159};ha.isUndefinedCodePoint=function(t){return t>=64976&&t<=65007||Sce.indexOf(t)>-1};var NN={controlCharacterInInputStream:"control-character-in-input-stream",noncharacterInInputStream:"noncharacter-in-input-stream",surrogateInInputStream:"surrogate-in-input-stream",nonVoidHtmlElementStartTagWithTrailingSolidus:"non-void-html-element-start-tag-with-trailing-solidus",endTagWithAttributes:"end-tag-with-attributes",endTagWithTrailingSolidus:"end-tag-with-trailing-solidus",unexpectedSolidusInTag:"unexpected-solidus-in-tag",unexpectedNullCharacter:"unexpected-null-character",unexpectedQuestionMarkInsteadOfTagName:"unexpected-question-mark-instead-of-tag-name",invalidFirstCharacterOfTagName:"invalid-first-character-of-tag-name",unexpectedEqualsSignBeforeAttributeName:"unexpected-equals-sign-before-attribute-name",missingEndTagName:"missing-end-tag-name",unexpectedCharacterInAttributeName:"unexpected-character-in-attribute-name",unknownNamedCharacterReference:"unknown-named-character-reference",missingSemicolonAfterCharacterReference:"missing-semicolon-after-character-reference",unexpectedCharacterAfterDoctypeSystemIdentifier:"unexpected-character-after-doctype-system-identifier",unexpectedCharacterInUnquotedAttributeValue:"unexpected-character-in-unquoted-attribute-value",eofBeforeTagName:"eof-before-tag-name",eofInTag:"eof-in-tag",missingAttributeValue:"missing-attribute-value",missingWhitespaceBetweenAttributes:"missing-whitespace-between-attributes",missingWhitespaceAfterDoctypePublicKeyword:"missing-whitespace-after-doctype-public-keyword",missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers:"missing-whitespace-between-doctype-public-and-system-identifiers",missingWhitespaceAfterDoctypeSystemKeyword:"missing-whitespace-after-doctype-system-keyword",missingQuoteBeforeDoctypePublicIdentifier:"missing-quote-before-doctype-public-identifier",missingQuoteBeforeDoctypeSystemIdentifier:"missing-quote-before-doctype-system-identifier",missingDoctypePublicIdentifier:"missing-doctype-public-identifier",missingDoctypeSystemIdentifier:"missing-doctype-system-identifier",abruptDoctypePublicIdentifier:"abrupt-doctype-public-identifier",abruptDoctypeSystemIdentifier:"abrupt-doctype-system-identifier",cdataInHtmlContent:"cdata-in-html-content",incorrectlyOpenedComment:"incorrectly-opened-comment",eofInScriptHtmlCommentLikeText:"eof-in-script-html-comment-like-text",eofInDoctype:"eof-in-doctype",nestedComment:"nested-comment",abruptClosingOfEmptyComment:"abrupt-closing-of-empty-comment",eofInComment:"eof-in-comment",incorrectlyClosedComment:"incorrectly-closed-comment",eofInCdata:"eof-in-cdata",absenceOfDigitsInNumericCharacterReference:"absence-of-digits-in-numeric-character-reference",nullCharacterReference:"null-character-reference",surrogateCharacterReference:"surrogate-character-reference",characterReferenceOutsideUnicodeRange:"character-reference-outside-unicode-range",controlCharacterReference:"control-character-reference",noncharacterCharacterReference:"noncharacter-character-reference",missingWhitespaceBeforeDoctypeName:"missing-whitespace-before-doctype-name",missingDoctypeName:"missing-doctype-name",invalidCharacterSequenceAfterDoctypeName:"invalid-character-sequence-after-doctype-name",duplicateAttribute:"duplicate-attribute",nonConformingDoctype:"non-conforming-doctype",missingDoctype:"missing-doctype",misplacedDoctype:"misplaced-doctype",endTagWithoutMatchingOpenElement:"end-tag-without-matching-open-element",closingOfElementWithOpenChildElements:"closing-of-element-with-open-child-elements",disallowedContentInNoscriptInHead:"disallowed-content-in-noscript-in-head",openElementsLeftAfterEof:"open-elements-left-after-eof",abandonedHeadElementChild:"abandoned-head-element-child",misplacedStartTagForHeadElement:"misplaced-start-tag-for-head-element",nestedNoscriptInHead:"nested-noscript-in-head",eofInElementThatCanContainOnlyText:"eof-in-element-that-can-contain-only-text"};const Ah=ha,AS=NN,Fc=Ah.CODE_POINTS,wce=1<<16;let _ce=class{constructor(){this.html=null,this.pos=-1,this.lastGapPos=-1,this.lastCharPos=-1,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=wce}_err(){}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.lastCharPos){const n=this.html.charCodeAt(this.pos+1);if(Ah.isSurrogatePair(n))return this.pos++,this._addGap(),Ah.getSurrogatePairCodePoint(e,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,Fc.EOF;return this._err(AS.surrogateInInputStream),e}dropParsedChunk(){this.pos>this.bufferWaterline&&(this.lastCharPos-=this.pos,this.html=this.html.substring(this.pos),this.pos=0,this.lastGapPos=-1,this.gapStack=[])}write(e,n){this.html?this.html+=e:this.html=e,this.lastCharPos=this.html.length-1,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1,this.html.length),this.lastCharPos=this.html.length-1,this.endOfChunkHit=!1}advance(){if(this.pos++,this.pos>this.lastCharPos)return this.endOfChunkHit=!this.lastChunkWritten,Fc.EOF;let e=this.html.charCodeAt(this.pos);return this.skipNextNewLine&&e===Fc.LINE_FEED?(this.skipNextNewLine=!1,this._addGap(),this.advance()):e===Fc.CARRIAGE_RETURN?(this.skipNextNewLine=!0,Fc.LINE_FEED):(this.skipNextNewLine=!1,Ah.isSurrogate(e)&&(e=this._processSurrogate(e)),e>31&&e<127||e===Fc.LINE_FEED||e===Fc.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){Ah.isControlCodePoint(e)?this._err(AS.controlCharacterInInputStream):Ah.isUndefinedCodePoint(e)&&this._err(AS.noncharacterInInputStream)}retreat(){this.pos===this.lastGapPos&&(this.lastGapPos=this.gapStack.pop(),this.pos--),this.pos--}};var kce=_ce,Ice=new Uint16Array([4,52,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,106,303,412,810,1432,1701,1796,1987,2114,2360,2420,2484,3170,3251,4140,4393,4575,4610,5106,5512,5728,6117,6274,6315,6345,6427,6516,7002,7910,8733,9323,9870,10170,10631,10893,11318,11386,11467,12773,13092,14474,14922,15448,15542,16419,17666,18166,18611,19004,19095,19298,19397,4,16,69,77,97,98,99,102,103,108,109,110,111,112,114,115,116,117,140,150,158,169,176,194,199,210,216,222,226,242,256,266,283,294,108,105,103,5,198,1,59,148,1,198,80,5,38,1,59,156,1,38,99,117,116,101,5,193,1,59,167,1,193,114,101,118,101,59,1,258,4,2,105,121,182,191,114,99,5,194,1,59,189,1,194,59,1,1040,114,59,3,55349,56580,114,97,118,101,5,192,1,59,208,1,192,112,104,97,59,1,913,97,99,114,59,1,256,100,59,1,10835,4,2,103,112,232,237,111,110,59,1,260,102,59,3,55349,56632,112,108,121,70,117,110,99,116,105,111,110,59,1,8289,105,110,103,5,197,1,59,264,1,197,4,2,99,115,272,277,114,59,3,55349,56476,105,103,110,59,1,8788,105,108,100,101,5,195,1,59,292,1,195,109,108,5,196,1,59,301,1,196,4,8,97,99,101,102,111,114,115,117,321,350,354,383,388,394,400,405,4,2,99,114,327,336,107,115,108,97,115,104,59,1,8726,4,2,118,119,342,345,59,1,10983,101,100,59,1,8966,121,59,1,1041,4,3,99,114,116,362,369,379,97,117,115,101,59,1,8757,110,111,117,108,108,105,115,59,1,8492,97,59,1,914,114,59,3,55349,56581,112,102,59,3,55349,56633,101,118,101,59,1,728,99,114,59,1,8492,109,112,101,113,59,1,8782,4,14,72,79,97,99,100,101,102,104,105,108,111,114,115,117,442,447,456,504,542,547,569,573,577,616,678,784,790,796,99,121,59,1,1063,80,89,5,169,1,59,454,1,169,4,3,99,112,121,464,470,497,117,116,101,59,1,262,4,2,59,105,476,478,1,8914,116,97,108,68,105,102,102,101,114,101,110,116,105,97,108,68,59,1,8517,108,101,121,115,59,1,8493,4,4,97,101,105,111,514,520,530,535,114,111,110,59,1,268,100,105,108,5,199,1,59,528,1,199,114,99,59,1,264,110,105,110,116,59,1,8752,111,116,59,1,266,4,2,100,110,553,560,105,108,108,97,59,1,184,116,101,114,68,111,116,59,1,183,114,59,1,8493,105,59,1,935,114,99,108,101,4,4,68,77,80,84,591,596,603,609,111,116,59,1,8857,105,110,117,115,59,1,8854,108,117,115,59,1,8853,105,109,101,115,59,1,8855,111,4,2,99,115,623,646,107,119,105,115,101,67,111,110,116,111,117,114,73,110,116,101,103,114,97,108,59,1,8754,101,67,117,114,108,121,4,2,68,81,658,671,111,117,98,108,101,81,117,111,116,101,59,1,8221,117,111,116,101,59,1,8217,4,4,108,110,112,117,688,701,736,753,111,110,4,2,59,101,696,698,1,8759,59,1,10868,4,3,103,105,116,709,717,722,114,117,101,110,116,59,1,8801,110,116,59,1,8751,111,117,114,73,110,116,101,103,114,97,108,59,1,8750,4,2,102,114,742,745,59,1,8450,111,100,117,99,116,59,1,8720,110,116,101,114,67,108,111,99,107,119,105,115,101,67,111,110,116,111,117,114,73,110,116,101,103,114,97,108,59,1,8755,111,115,115,59,1,10799,99,114,59,3,55349,56478,112,4,2,59,67,803,805,1,8915,97,112,59,1,8781,4,11,68,74,83,90,97,99,101,102,105,111,115,834,850,855,860,865,888,903,916,921,1011,1415,4,2,59,111,840,842,1,8517,116,114,97,104,100,59,1,10513,99,121,59,1,1026,99,121,59,1,1029,99,121,59,1,1039,4,3,103,114,115,873,879,883,103,101,114,59,1,8225,114,59,1,8609,104,118,59,1,10980,4,2,97,121,894,900,114,111,110,59,1,270,59,1,1044,108,4,2,59,116,910,912,1,8711,97,59,1,916,114,59,3,55349,56583,4,2,97,102,927,998,4,2,99,109,933,992,114,105,116,105,99,97,108,4,4,65,68,71,84,950,957,978,985,99,117,116,101,59,1,180,111,4,2,116,117,964,967,59,1,729,98,108,101,65,99,117,116,101,59,1,733,114,97,118,101,59,1,96,105,108,100,101,59,1,732,111,110,100,59,1,8900,102,101,114,101,110,116,105,97,108,68,59,1,8518,4,4,112,116,117,119,1021,1026,1048,1249,102,59,3,55349,56635,4,3,59,68,69,1034,1036,1041,1,168,111,116,59,1,8412,113,117,97,108,59,1,8784,98,108,101,4,6,67,68,76,82,85,86,1065,1082,1101,1189,1211,1236,111,110,116,111,117,114,73,110,116,101,103,114,97,108,59,1,8751,111,4,2,116,119,1089,1092,59,1,168,110,65,114,114,111,119,59,1,8659,4,2,101,111,1107,1141,102,116,4,3,65,82,84,1117,1124,1136,114,114,111,119,59,1,8656,105,103,104,116,65,114,114,111,119,59,1,8660,101,101,59,1,10980,110,103,4,2,76,82,1149,1177,101,102,116,4,2,65,82,1158,1165,114,114,111,119,59,1,10232,105,103,104,116,65,114,114,111,119,59,1,10234,105,103,104,116,65,114,114,111,119,59,1,10233,105,103,104,116,4,2,65,84,1199,1206,114,114,111,119,59,1,8658,101,101,59,1,8872,112,4,2,65,68,1218,1225,114,114,111,119,59,1,8657,111,119,110,65,114,114,111,119,59,1,8661,101,114,116,105,99,97,108,66,97,114,59,1,8741,110,4,6,65,66,76,82,84,97,1264,1292,1299,1352,1391,1408,114,114,111,119,4,3,59,66,85,1276,1278,1283,1,8595,97,114,59,1,10515,112,65,114,114,111,119,59,1,8693,114,101,118,101,59,1,785,101,102,116,4,3,82,84,86,1310,1323,1334,105,103,104,116,86,101,99,116,111,114,59,1,10576,101,101,86,101,99,116,111,114,59,1,10590,101,99,116,111,114,4,2,59,66,1345,1347,1,8637,97,114,59,1,10582,105,103,104,116,4,2,84,86,1362,1373,101,101,86,101,99,116,111,114,59,1,10591,101,99,116,111,114,4,2,59,66,1384,1386,1,8641,97,114,59,1,10583,101,101,4,2,59,65,1399,1401,1,8868,114,114,111,119,59,1,8615,114,114,111,119,59,1,8659,4,2,99,116,1421,1426,114,59,3,55349,56479,114,111,107,59,1,272,4,16,78,84,97,99,100,102,103,108,109,111,112,113,115,116,117,120,1466,1470,1478,1489,1515,1520,1525,1536,1544,1593,1609,1617,1650,1664,1668,1677,71,59,1,330,72,5,208,1,59,1476,1,208,99,117,116,101,5,201,1,59,1487,1,201,4,3,97,105,121,1497,1503,1512,114,111,110,59,1,282,114,99,5,202,1,59,1510,1,202,59,1,1069,111,116,59,1,278,114,59,3,55349,56584,114,97,118,101,5,200,1,59,1534,1,200,101,109,101,110,116,59,1,8712,4,2,97,112,1550,1555,99,114,59,1,274,116,121,4,2,83,86,1563,1576,109,97,108,108,83,113,117,97,114,101,59,1,9723,101,114,121,83,109,97,108,108,83,113,117,97,114,101,59,1,9643,4,2,103,112,1599,1604,111,110,59,1,280,102,59,3,55349,56636,115,105,108,111,110,59,1,917,117,4,2,97,105,1624,1640,108,4,2,59,84,1631,1633,1,10869,105,108,100,101,59,1,8770,108,105,98,114,105,117,109,59,1,8652,4,2,99,105,1656,1660,114,59,1,8496,109,59,1,10867,97,59,1,919,109,108,5,203,1,59,1675,1,203,4,2,105,112,1683,1689,115,116,115,59,1,8707,111,110,101,110,116,105,97,108,69,59,1,8519,4,5,99,102,105,111,115,1713,1717,1722,1762,1791,121,59,1,1060,114,59,3,55349,56585,108,108,101,100,4,2,83,86,1732,1745,109,97,108,108,83,113,117,97,114,101,59,1,9724,101,114,121,83,109,97,108,108,83,113,117,97,114,101,59,1,9642,4,3,112,114,117,1770,1775,1781,102,59,3,55349,56637,65,108,108,59,1,8704,114,105,101,114,116,114,102,59,1,8497,99,114,59,1,8497,4,12,74,84,97,98,99,100,102,103,111,114,115,116,1822,1827,1834,1848,1855,1877,1882,1887,1890,1896,1978,1984,99,121,59,1,1027,5,62,1,59,1832,1,62,109,109,97,4,2,59,100,1843,1845,1,915,59,1,988,114,101,118,101,59,1,286,4,3,101,105,121,1863,1869,1874,100,105,108,59,1,290,114,99,59,1,284,59,1,1043,111,116,59,1,288,114,59,3,55349,56586,59,1,8921,112,102,59,3,55349,56638,101,97,116,101,114,4,6,69,70,71,76,83,84,1915,1933,1944,1953,1959,1971,113,117,97,108,4,2,59,76,1925,1927,1,8805,101,115,115,59,1,8923,117,108,108,69,113,117,97,108,59,1,8807,114,101,97,116,101,114,59,1,10914,101,115,115,59,1,8823,108,97,110,116,69,113,117,97,108,59,1,10878,105,108,100,101,59,1,8819,99,114,59,3,55349,56482,59,1,8811,4,8,65,97,99,102,105,111,115,117,2005,2012,2026,2032,2036,2049,2073,2089,82,68,99,121,59,1,1066,4,2,99,116,2018,2023,101,107,59,1,711,59,1,94,105,114,99,59,1,292,114,59,1,8460,108,98,101,114,116,83,112,97,99,101,59,1,8459,4,2,112,114,2055,2059,102,59,1,8461,105,122,111,110,116,97,108,76,105,110,101,59,1,9472,4,2,99,116,2079,2083,114,59,1,8459,114,111,107,59,1,294,109,112,4,2,68,69,2097,2107,111,119,110,72,117,109,112,59,1,8782,113,117,97,108,59,1,8783,4,14,69,74,79,97,99,100,102,103,109,110,111,115,116,117,2144,2149,2155,2160,2171,2189,2194,2198,2209,2245,2307,2329,2334,2341,99,121,59,1,1045,108,105,103,59,1,306,99,121,59,1,1025,99,117,116,101,5,205,1,59,2169,1,205,4,2,105,121,2177,2186,114,99,5,206,1,59,2184,1,206,59,1,1048,111,116,59,1,304,114,59,1,8465,114,97,118,101,5,204,1,59,2207,1,204,4,3,59,97,112,2217,2219,2238,1,8465,4,2,99,103,2225,2229,114,59,1,298,105,110,97,114,121,73,59,1,8520,108,105,101,115,59,1,8658,4,2,116,118,2251,2281,4,2,59,101,2257,2259,1,8748,4,2,103,114,2265,2271,114,97,108,59,1,8747,115,101,99,116,105,111,110,59,1,8898,105,115,105,98,108,101,4,2,67,84,2293,2300,111,109,109,97,59,1,8291,105,109,101,115,59,1,8290,4,3,103,112,116,2315,2320,2325,111,110,59,1,302,102,59,3,55349,56640,97,59,1,921,99,114,59,1,8464,105,108,100,101,59,1,296,4,2,107,109,2347,2352,99,121,59,1,1030,108,5,207,1,59,2358,1,207,4,5,99,102,111,115,117,2372,2386,2391,2397,2414,4,2,105,121,2378,2383,114,99,59,1,308,59,1,1049,114,59,3,55349,56589,112,102,59,3,55349,56641,4,2,99,101,2403,2408,114,59,3,55349,56485,114,99,121,59,1,1032,107,99,121,59,1,1028,4,7,72,74,97,99,102,111,115,2436,2441,2446,2452,2467,2472,2478,99,121,59,1,1061,99,121,59,1,1036,112,112,97,59,1,922,4,2,101,121,2458,2464,100,105,108,59,1,310,59,1,1050,114,59,3,55349,56590,112,102,59,3,55349,56642,99,114,59,3,55349,56486,4,11,74,84,97,99,101,102,108,109,111,115,116,2508,2513,2520,2562,2585,2981,2986,3004,3011,3146,3167,99,121,59,1,1033,5,60,1,59,2518,1,60,4,5,99,109,110,112,114,2532,2538,2544,2548,2558,117,116,101,59,1,313,98,100,97,59,1,923,103,59,1,10218,108,97,99,101,116,114,102,59,1,8466,114,59,1,8606,4,3,97,101,121,2570,2576,2582,114,111,110,59,1,317,100,105,108,59,1,315,59,1,1051,4,2,102,115,2591,2907,116,4,10,65,67,68,70,82,84,85,86,97,114,2614,2663,2672,2728,2735,2760,2820,2870,2888,2895,4,2,110,114,2620,2633,103,108,101,66,114,97,99,107,101,116,59,1,10216,114,111,119,4,3,59,66,82,2644,2646,2651,1,8592,97,114,59,1,8676,105,103,104,116,65,114,114,111,119,59,1,8646,101,105,108,105,110,103,59,1,8968,111,4,2,117,119,2679,2692,98,108,101,66,114,97,99,107,101,116,59,1,10214,110,4,2,84,86,2699,2710,101,101,86,101,99,116,111,114,59,1,10593,101,99,116,111,114,4,2,59,66,2721,2723,1,8643,97,114,59,1,10585,108,111,111,114,59,1,8970,105,103,104,116,4,2,65,86,2745,2752,114,114,111,119,59,1,8596,101,99,116,111,114,59,1,10574,4,2,101,114,2766,2792,101,4,3,59,65,86,2775,2777,2784,1,8867,114,114,111,119,59,1,8612,101,99,116,111,114,59,1,10586,105,97,110,103,108,101,4,3,59,66,69,2806,2808,2813,1,8882,97,114,59,1,10703,113,117,97,108,59,1,8884,112,4,3,68,84,86,2829,2841,2852,111,119,110,86,101,99,116,111,114,59,1,10577,101,101,86,101,99,116,111,114,59,1,10592,101,99,116,111,114,4,2,59,66,2863,2865,1,8639,97,114,59,1,10584,101,99,116,111,114,4,2,59,66,2881,2883,1,8636,97,114,59,1,10578,114,114,111,119,59,1,8656,105,103,104,116,97,114,114,111,119,59,1,8660,115,4,6,69,70,71,76,83,84,2922,2936,2947,2956,2962,2974,113,117,97,108,71,114,101,97,116,101,114,59,1,8922,117,108,108,69,113,117,97,108,59,1,8806,114,101,97,116,101,114,59,1,8822,101,115,115,59,1,10913,108,97,110,116,69,113,117,97,108,59,1,10877,105,108,100,101,59,1,8818,114,59,3,55349,56591,4,2,59,101,2992,2994,1,8920,102,116,97,114,114,111,119,59,1,8666,105,100,111,116,59,1,319,4,3,110,112,119,3019,3110,3115,103,4,4,76,82,108,114,3030,3058,3070,3098,101,102,116,4,2,65,82,3039,3046,114,114,111,119,59,1,10229,105,103,104,116,65,114,114,111,119,59,1,10231,105,103,104,116,65,114,114,111,119,59,1,10230,101,102,116,4,2,97,114,3079,3086,114,114,111,119,59,1,10232,105,103,104,116,97,114,114,111,119,59,1,10234,105,103,104,116,97,114,114,111,119,59,1,10233,102,59,3,55349,56643,101,114,4,2,76,82,3123,3134,101,102,116,65,114,114,111,119,59,1,8601,105,103,104,116,65,114,114,111,119,59,1,8600,4,3,99,104,116,3154,3158,3161,114,59,1,8466,59,1,8624,114,111,107,59,1,321,59,1,8810,4,8,97,99,101,102,105,111,115,117,3188,3192,3196,3222,3227,3237,3243,3248,112,59,1,10501,121,59,1,1052,4,2,100,108,3202,3213,105,117,109,83,112,97,99,101,59,1,8287,108,105,110,116,114,102,59,1,8499,114,59,3,55349,56592,110,117,115,80,108,117,115,59,1,8723,112,102,59,3,55349,56644,99,114,59,1,8499,59,1,924,4,9,74,97,99,101,102,111,115,116,117,3271,3276,3283,3306,3422,3427,4120,4126,4137,99,121,59,1,1034,99,117,116,101,59,1,323,4,3,97,101,121,3291,3297,3303,114,111,110,59,1,327,100,105,108,59,1,325,59,1,1053,4,3,103,115,119,3314,3380,3415,97,116,105,118,101,4,3,77,84,86,3327,3340,3365,101,100,105,117,109,83,112,97,99,101,59,1,8203,104,105,4,2,99,110,3348,3357,107,83,112,97,99,101,59,1,8203,83,112,97,99,101,59,1,8203,101,114,121,84,104,105,110,83,112,97,99,101,59,1,8203,116,101,100,4,2,71,76,3389,3405,114,101,97,116,101,114,71,114,101,97,116,101,114,59,1,8811,101,115,115,76,101,115,115,59,1,8810,76,105,110,101,59,1,10,114,59,3,55349,56593,4,4,66,110,112,116,3437,3444,3460,3464,114,101,97,107,59,1,8288,66,114,101,97,107,105,110,103,83,112,97,99,101,59,1,160,102,59,1,8469,4,13,59,67,68,69,71,72,76,78,80,82,83,84,86,3492,3494,3517,3536,3578,3657,3685,3784,3823,3860,3915,4066,4107,1,10988,4,2,111,117,3500,3510,110,103,114,117,101,110,116,59,1,8802,112,67,97,112,59,1,8813,111,117,98,108,101,86,101,114,116,105,99,97,108,66,97,114,59,1,8742,4,3,108,113,120,3544,3552,3571,101,109,101,110,116,59,1,8713,117,97,108,4,2,59,84,3561,3563,1,8800,105,108,100,101,59,3,8770,824,105,115,116,115,59,1,8708,114,101,97,116,101,114,4,7,59,69,70,71,76,83,84,3600,3602,3609,3621,3631,3637,3650,1,8815,113,117,97,108,59,1,8817,117,108,108,69,113,117,97,108,59,3,8807,824,114,101,97,116,101,114,59,3,8811,824,101,115,115,59,1,8825,108,97,110,116,69,113,117,97,108,59,3,10878,824,105,108,100,101,59,1,8821,117,109,112,4,2,68,69,3666,3677,111,119,110,72,117,109,112,59,3,8782,824,113,117,97,108,59,3,8783,824,101,4,2,102,115,3692,3724,116,84,114,105,97,110,103,108,101,4,3,59,66,69,3709,3711,3717,1,8938,97,114,59,3,10703,824,113,117,97,108,59,1,8940,115,4,6,59,69,71,76,83,84,3739,3741,3748,3757,3764,3777,1,8814,113,117,97,108,59,1,8816,114,101,97,116,101,114,59,1,8824,101,115,115,59,3,8810,824,108,97,110,116,69,113,117,97,108,59,3,10877,824,105,108,100,101,59,1,8820,101,115,116,101,100,4,2,71,76,3795,3812,114,101,97,116,101,114,71,114,101,97,116,101,114,59,3,10914,824,101,115,115,76,101,115,115,59,3,10913,824,114,101,99,101,100,101,115,4,3,59,69,83,3838,3840,3848,1,8832,113,117,97,108,59,3,10927,824,108,97,110,116,69,113,117,97,108,59,1,8928,4,2,101,105,3866,3881,118,101,114,115,101,69,108,101,109,101,110,116,59,1,8716,103,104,116,84,114,105,97,110,103,108,101,4,3,59,66,69,3900,3902,3908,1,8939,97,114,59,3,10704,824,113,117,97,108,59,1,8941,4,2,113,117,3921,3973,117,97,114,101,83,117,4,2,98,112,3933,3952,115,101,116,4,2,59,69,3942,3945,3,8847,824,113,117,97,108,59,1,8930,101,114,115,101,116,4,2,59,69,3963,3966,3,8848,824,113,117,97,108,59,1,8931,4,3,98,99,112,3981,4e3,4045,115,101,116,4,2,59,69,3990,3993,3,8834,8402,113,117,97,108,59,1,8840,99,101,101,100,115,4,4,59,69,83,84,4015,4017,4025,4037,1,8833,113,117,97,108,59,3,10928,824,108,97,110,116,69,113,117,97,108,59,1,8929,105,108,100,101,59,3,8831,824,101,114,115,101,116,4,2,59,69,4056,4059,3,8835,8402,113,117,97,108,59,1,8841,105,108,100,101,4,4,59,69,70,84,4080,4082,4089,4100,1,8769,113,117,97,108,59,1,8772,117,108,108,69,113,117,97,108,59,1,8775,105,108,100,101,59,1,8777,101,114,116,105,99,97,108,66,97,114,59,1,8740,99,114,59,3,55349,56489,105,108,100,101,5,209,1,59,4135,1,209,59,1,925,4,14,69,97,99,100,102,103,109,111,112,114,115,116,117,118,4170,4176,4187,4205,4212,4217,4228,4253,4259,4292,4295,4316,4337,4346,108,105,103,59,1,338,99,117,116,101,5,211,1,59,4185,1,211,4,2,105,121,4193,4202,114,99,5,212,1,59,4200,1,212,59,1,1054,98,108,97,99,59,1,336,114,59,3,55349,56594,114,97,118,101,5,210,1,59,4226,1,210,4,3,97,101,105,4236,4241,4246,99,114,59,1,332,103,97,59,1,937,99,114,111,110,59,1,927,112,102,59,3,55349,56646,101,110,67,117,114,108,121,4,2,68,81,4272,4285,111,117,98,108,101,81,117,111,116,101,59,1,8220,117,111,116,101,59,1,8216,59,1,10836,4,2,99,108,4301,4306,114,59,3,55349,56490,97,115,104,5,216,1,59,4314,1,216,105,4,2,108,109,4323,4332,100,101,5,213,1,59,4330,1,213,101,115,59,1,10807,109,108,5,214,1,59,4344,1,214,101,114,4,2,66,80,4354,4380,4,2,97,114,4360,4364,114,59,1,8254,97,99,4,2,101,107,4372,4375,59,1,9182,101,116,59,1,9140,97,114,101,110,116,104,101,115,105,115,59,1,9180,4,9,97,99,102,104,105,108,111,114,115,4413,4422,4426,4431,4435,4438,4448,4471,4561,114,116,105,97,108,68,59,1,8706,121,59,1,1055,114,59,3,55349,56595,105,59,1,934,59,1,928,117,115,77,105,110,117,115,59,1,177,4,2,105,112,4454,4467,110,99,97,114,101,112,108,97,110,101,59,1,8460,102,59,1,8473,4,4,59,101,105,111,4481,4483,4526,4531,1,10939,99,101,100,101,115,4,4,59,69,83,84,4498,4500,4507,4519,1,8826,113,117,97,108,59,1,10927,108,97,110,116,69,113,117,97,108,59,1,8828,105,108,100,101,59,1,8830,109,101,59,1,8243,4,2,100,112,4537,4543,117,99,116,59,1,8719,111,114,116,105,111,110,4,2,59,97,4555,4557,1,8759,108,59,1,8733,4,2,99,105,4567,4572,114,59,3,55349,56491,59,1,936,4,4,85,102,111,115,4585,4594,4599,4604,79,84,5,34,1,59,4592,1,34,114,59,3,55349,56596,112,102,59,1,8474,99,114,59,3,55349,56492,4,12,66,69,97,99,101,102,104,105,111,114,115,117,4636,4642,4650,4681,4704,4763,4767,4771,5047,5069,5081,5094,97,114,114,59,1,10512,71,5,174,1,59,4648,1,174,4,3,99,110,114,4658,4664,4668,117,116,101,59,1,340,103,59,1,10219,114,4,2,59,116,4675,4677,1,8608,108,59,1,10518,4,3,97,101,121,4689,4695,4701,114,111,110,59,1,344,100,105,108,59,1,342,59,1,1056,4,2,59,118,4710,4712,1,8476,101,114,115,101,4,2,69,85,4722,4748,4,2,108,113,4728,4736,101,109,101,110,116,59,1,8715,117,105,108,105,98,114,105,117,109,59,1,8651,112,69,113,117,105,108,105,98,114,105,117,109,59,1,10607,114,59,1,8476,111,59,1,929,103,104,116,4,8,65,67,68,70,84,85,86,97,4792,4840,4849,4905,4912,4972,5022,5040,4,2,110,114,4798,4811,103,108,101,66,114,97,99,107,101,116,59,1,10217,114,111,119,4,3,59,66,76,4822,4824,4829,1,8594,97,114,59,1,8677,101,102,116,65,114,114,111,119,59,1,8644,101,105,108,105,110,103,59,1,8969,111,4,2,117,119,4856,4869,98,108,101,66,114,97,99,107,101,116,59,1,10215,110,4,2,84,86,4876,4887,101,101,86,101,99,116,111,114,59,1,10589,101,99,116,111,114,4,2,59,66,4898,4900,1,8642,97,114,59,1,10581,108,111,111,114,59,1,8971,4,2,101,114,4918,4944,101,4,3,59,65,86,4927,4929,4936,1,8866,114,114,111,119,59,1,8614,101,99,116,111,114,59,1,10587,105,97,110,103,108,101,4,3,59,66,69,4958,4960,4965,1,8883,97,114,59,1,10704,113,117,97,108,59,1,8885,112,4,3,68,84,86,4981,4993,5004,111,119,110,86,101,99,116,111,114,59,1,10575,101,101,86,101,99,116,111,114,59,1,10588,101,99,116,111,114,4,2,59,66,5015,5017,1,8638,97,114,59,1,10580,101,99,116,111,114,4,2,59,66,5033,5035,1,8640,97,114,59,1,10579,114,114,111,119,59,1,8658,4,2,112,117,5053,5057,102,59,1,8477,110,100,73,109,112,108,105,101,115,59,1,10608,105,103,104,116,97,114,114,111,119,59,1,8667,4,2,99,104,5087,5091,114,59,1,8475,59,1,8625,108,101,68,101,108,97,121,101,100,59,1,10740,4,13,72,79,97,99,102,104,105,109,111,113,115,116,117,5134,5150,5157,5164,5198,5203,5259,5265,5277,5283,5374,5380,5385,4,2,67,99,5140,5146,72,99,121,59,1,1065,121,59,1,1064,70,84,99,121,59,1,1068,99,117,116,101,59,1,346,4,5,59,97,101,105,121,5176,5178,5184,5190,5195,1,10940,114,111,110,59,1,352,100,105,108,59,1,350,114,99,59,1,348,59,1,1057,114,59,3,55349,56598,111,114,116,4,4,68,76,82,85,5216,5227,5238,5250,111,119,110,65,114,114,111,119,59,1,8595,101,102,116,65,114,114,111,119,59,1,8592,105,103,104,116,65,114,114,111,119,59,1,8594,112,65,114,114,111,119,59,1,8593,103,109,97,59,1,931,97,108,108,67,105,114,99,108,101,59,1,8728,112,102,59,3,55349,56650,4,2,114,117,5289,5293,116,59,1,8730,97,114,101,4,4,59,73,83,85,5306,5308,5322,5367,1,9633,110,116,101,114,115,101,99,116,105,111,110,59,1,8851,117,4,2,98,112,5329,5347,115,101,116,4,2,59,69,5338,5340,1,8847,113,117,97,108,59,1,8849,101,114,115,101,116,4,2,59,69,5358,5360,1,8848,113,117,97,108,59,1,8850,110,105,111,110,59,1,8852,99,114,59,3,55349,56494,97,114,59,1,8902,4,4,98,99,109,112,5395,5420,5475,5478,4,2,59,115,5401,5403,1,8912,101,116,4,2,59,69,5411,5413,1,8912,113,117,97,108,59,1,8838,4,2,99,104,5426,5468,101,101,100,115,4,4,59,69,83,84,5440,5442,5449,5461,1,8827,113,117,97,108,59,1,10928,108,97,110,116,69,113,117,97,108,59,1,8829,105,108,100,101,59,1,8831,84,104,97,116,59,1,8715,59,1,8721,4,3,59,101,115,5486,5488,5507,1,8913,114,115,101,116,4,2,59,69,5498,5500,1,8835,113,117,97,108,59,1,8839,101,116,59,1,8913,4,11,72,82,83,97,99,102,104,105,111,114,115,5536,5546,5552,5567,5579,5602,5607,5655,5695,5701,5711,79,82,78,5,222,1,59,5544,1,222,65,68,69,59,1,8482,4,2,72,99,5558,5563,99,121,59,1,1035,121,59,1,1062,4,2,98,117,5573,5576,59,1,9,59,1,932,4,3,97,101,121,5587,5593,5599,114,111,110,59,1,356,100,105,108,59,1,354,59,1,1058,114,59,3,55349,56599,4,2,101,105,5613,5631,4,2,114,116,5619,5627,101,102,111,114,101,59,1,8756,97,59,1,920,4,2,99,110,5637,5647,107,83,112,97,99,101,59,3,8287,8202,83,112,97,99,101,59,1,8201,108,100,101,4,4,59,69,70,84,5668,5670,5677,5688,1,8764,113,117,97,108,59,1,8771,117,108,108,69,113,117,97,108,59,1,8773,105,108,100,101,59,1,8776,112,102,59,3,55349,56651,105,112,108,101,68,111,116,59,1,8411,4,2,99,116,5717,5722,114,59,3,55349,56495,114,111,107,59,1,358,4,14,97,98,99,100,102,103,109,110,111,112,114,115,116,117,5758,5789,5805,5823,5830,5835,5846,5852,5921,5937,6089,6095,6101,6108,4,2,99,114,5764,5774,117,116,101,5,218,1,59,5772,1,218,114,4,2,59,111,5781,5783,1,8607,99,105,114,59,1,10569,114,4,2,99,101,5796,5800,121,59,1,1038,118,101,59,1,364,4,2,105,121,5811,5820,114,99,5,219,1,59,5818,1,219,59,1,1059,98,108,97,99,59,1,368,114,59,3,55349,56600,114,97,118,101,5,217,1,59,5844,1,217,97,99,114,59,1,362,4,2,100,105,5858,5905,101,114,4,2,66,80,5866,5892,4,2,97,114,5872,5876,114,59,1,95,97,99,4,2,101,107,5884,5887,59,1,9183,101,116,59,1,9141,97,114,101,110,116,104,101,115,105,115,59,1,9181,111,110,4,2,59,80,5913,5915,1,8899,108,117,115,59,1,8846,4,2,103,112,5927,5932,111,110,59,1,370,102,59,3,55349,56652,4,8,65,68,69,84,97,100,112,115,5955,5985,5996,6009,6026,6033,6044,6075,114,114,111,119,4,3,59,66,68,5967,5969,5974,1,8593,97,114,59,1,10514,111,119,110,65,114,114,111,119,59,1,8645,111,119,110,65,114,114,111,119,59,1,8597,113,117,105,108,105,98,114,105,117,109,59,1,10606,101,101,4,2,59,65,6017,6019,1,8869,114,114,111,119,59,1,8613,114,114,111,119,59,1,8657,111,119,110,97,114,114,111,119,59,1,8661,101,114,4,2,76,82,6052,6063,101,102,116,65,114,114,111,119,59,1,8598,105,103,104,116,65,114,114,111,119,59,1,8599,105,4,2,59,108,6082,6084,1,978,111,110,59,1,933,105,110,103,59,1,366,99,114,59,3,55349,56496,105,108,100,101,59,1,360,109,108,5,220,1,59,6115,1,220,4,9,68,98,99,100,101,102,111,115,118,6137,6143,6148,6152,6166,6250,6255,6261,6267,97,115,104,59,1,8875,97,114,59,1,10987,121,59,1,1042,97,115,104,4,2,59,108,6161,6163,1,8873,59,1,10982,4,2,101,114,6172,6175,59,1,8897,4,3,98,116,121,6183,6188,6238,97,114,59,1,8214,4,2,59,105,6194,6196,1,8214,99,97,108,4,4,66,76,83,84,6209,6214,6220,6231,97,114,59,1,8739,105,110,101,59,1,124,101,112,97,114,97,116,111,114,59,1,10072,105,108,100,101,59,1,8768,84,104,105,110,83,112,97,99,101,59,1,8202,114,59,3,55349,56601,112,102,59,3,55349,56653,99,114,59,3,55349,56497,100,97,115,104,59,1,8874,4,5,99,101,102,111,115,6286,6292,6298,6303,6309,105,114,99,59,1,372,100,103,101,59,1,8896,114,59,3,55349,56602,112,102,59,3,55349,56654,99,114,59,3,55349,56498,4,4,102,105,111,115,6325,6330,6333,6339,114,59,3,55349,56603,59,1,926,112,102,59,3,55349,56655,99,114,59,3,55349,56499,4,9,65,73,85,97,99,102,111,115,117,6365,6370,6375,6380,6391,6405,6410,6416,6422,99,121,59,1,1071,99,121,59,1,1031,99,121,59,1,1070,99,117,116,101,5,221,1,59,6389,1,221,4,2,105,121,6397,6402,114,99,59,1,374,59,1,1067,114,59,3,55349,56604,112,102,59,3,55349,56656,99,114,59,3,55349,56500,109,108,59,1,376,4,8,72,97,99,100,101,102,111,115,6445,6450,6457,6472,6477,6501,6505,6510,99,121,59,1,1046,99,117,116,101,59,1,377,4,2,97,121,6463,6469,114,111,110,59,1,381,59,1,1047,111,116,59,1,379,4,2,114,116,6483,6497,111,87,105,100,116,104,83,112,97,99,101,59,1,8203,97,59,1,918,114,59,1,8488,112,102,59,1,8484,99,114,59,3,55349,56501,4,16,97,98,99,101,102,103,108,109,110,111,112,114,115,116,117,119,6550,6561,6568,6612,6622,6634,6645,6672,6699,6854,6870,6923,6933,6963,6974,6983,99,117,116,101,5,225,1,59,6559,1,225,114,101,118,101,59,1,259,4,6,59,69,100,105,117,121,6582,6584,6588,6591,6600,6609,1,8766,59,3,8766,819,59,1,8767,114,99,5,226,1,59,6598,1,226,116,101,5,180,1,59,6607,1,180,59,1,1072,108,105,103,5,230,1,59,6620,1,230,4,2,59,114,6628,6630,1,8289,59,3,55349,56606,114,97,118,101,5,224,1,59,6643,1,224,4,2,101,112,6651,6667,4,2,102,112,6657,6663,115,121,109,59,1,8501,104,59,1,8501,104,97,59,1,945,4,2,97,112,6678,6692,4,2,99,108,6684,6688,114,59,1,257,103,59,1,10815,5,38,1,59,6697,1,38,4,2,100,103,6705,6737,4,5,59,97,100,115,118,6717,6719,6724,6727,6734,1,8743,110,100,59,1,10837,59,1,10844,108,111,112,101,59,1,10840,59,1,10842,4,7,59,101,108,109,114,115,122,6753,6755,6758,6762,6814,6835,6848,1,8736,59,1,10660,101,59,1,8736,115,100,4,2,59,97,6770,6772,1,8737,4,8,97,98,99,100,101,102,103,104,6790,6793,6796,6799,6802,6805,6808,6811,59,1,10664,59,1,10665,59,1,10666,59,1,10667,59,1,10668,59,1,10669,59,1,10670,59,1,10671,116,4,2,59,118,6821,6823,1,8735,98,4,2,59,100,6830,6832,1,8894,59,1,10653,4,2,112,116,6841,6845,104,59,1,8738,59,1,197,97,114,114,59,1,9084,4,2,103,112,6860,6865,111,110,59,1,261,102,59,3,55349,56658,4,7,59,69,97,101,105,111,112,6886,6888,6891,6897,6900,6904,6908,1,8776,59,1,10864,99,105,114,59,1,10863,59,1,8778,100,59,1,8779,115,59,1,39,114,111,120,4,2,59,101,6917,6919,1,8776,113,59,1,8778,105,110,103,5,229,1,59,6931,1,229,4,3,99,116,121,6941,6946,6949,114,59,3,55349,56502,59,1,42,109,112,4,2,59,101,6957,6959,1,8776,113,59,1,8781,105,108,100,101,5,227,1,59,6972,1,227,109,108,5,228,1,59,6981,1,228,4,2,99,105,6989,6997,111,110,105,110,116,59,1,8755,110,116,59,1,10769,4,16,78,97,98,99,100,101,102,105,107,108,110,111,112,114,115,117,7036,7041,7119,7135,7149,7155,7219,7224,7347,7354,7463,7489,7786,7793,7814,7866,111,116,59,1,10989,4,2,99,114,7047,7094,107,4,4,99,101,112,115,7058,7064,7073,7080,111,110,103,59,1,8780,112,115,105,108,111,110,59,1,1014,114,105,109,101,59,1,8245,105,109,4,2,59,101,7088,7090,1,8765,113,59,1,8909,4,2,118,119,7100,7105,101,101,59,1,8893,101,100,4,2,59,103,7113,7115,1,8965,101,59,1,8965,114,107,4,2,59,116,7127,7129,1,9141,98,114,107,59,1,9142,4,2,111,121,7141,7146,110,103,59,1,8780,59,1,1073,113,117,111,59,1,8222,4,5,99,109,112,114,116,7167,7181,7188,7193,7199,97,117,115,4,2,59,101,7176,7178,1,8757,59,1,8757,112,116,121,118,59,1,10672,115,105,59,1,1014,110,111,117,59,1,8492,4,3,97,104,119,7207,7210,7213,59,1,946,59,1,8502,101,101,110,59,1,8812,114,59,3,55349,56607,103,4,7,99,111,115,116,117,118,119,7241,7262,7288,7305,7328,7335,7340,4,3,97,105,117,7249,7253,7258,112,59,1,8898,114,99,59,1,9711,112,59,1,8899,4,3,100,112,116,7270,7275,7281,111,116,59,1,10752,108,117,115,59,1,10753,105,109,101,115,59,1,10754,4,2,113,116,7294,7300,99,117,112,59,1,10758,97,114,59,1,9733,114,105,97,110,103,108,101,4,2,100,117,7318,7324,111,119,110,59,1,9661,112,59,1,9651,112,108,117,115,59,1,10756,101,101,59,1,8897,101,100,103,101,59,1,8896,97,114,111,119,59,1,10509,4,3,97,107,111,7362,7436,7458,4,2,99,110,7368,7432,107,4,3,108,115,116,7377,7386,7394,111,122,101,110,103,101,59,1,10731,113,117,97,114,101,59,1,9642,114,105,97,110,103,108,101,4,4,59,100,108,114,7411,7413,7419,7425,1,9652,111,119,110,59,1,9662,101,102,116,59,1,9666,105,103,104,116,59,1,9656,107,59,1,9251,4,2,49,51,7442,7454,4,2,50,52,7448,7451,59,1,9618,59,1,9617,52,59,1,9619,99,107,59,1,9608,4,2,101,111,7469,7485,4,2,59,113,7475,7478,3,61,8421,117,105,118,59,3,8801,8421,116,59,1,8976,4,4,112,116,119,120,7499,7504,7517,7523,102,59,3,55349,56659,4,2,59,116,7510,7512,1,8869,111,109,59,1,8869,116,105,101,59,1,8904,4,12,68,72,85,86,98,100,104,109,112,116,117,118,7549,7571,7597,7619,7655,7660,7682,7708,7715,7721,7728,7750,4,4,76,82,108,114,7559,7562,7565,7568,59,1,9559,59,1,9556,59,1,9558,59,1,9555,4,5,59,68,85,100,117,7583,7585,7588,7591,7594,1,9552,59,1,9574,59,1,9577,59,1,9572,59,1,9575,4,4,76,82,108,114,7607,7610,7613,7616,59,1,9565,59,1,9562,59,1,9564,59,1,9561,4,7,59,72,76,82,104,108,114,7635,7637,7640,7643,7646,7649,7652,1,9553,59,1,9580,59,1,9571,59,1,9568,59,1,9579,59,1,9570,59,1,9567,111,120,59,1,10697,4,4,76,82,108,114,7670,7673,7676,7679,59,1,9557,59,1,9554,59,1,9488,59,1,9484,4,5,59,68,85,100,117,7694,7696,7699,7702,7705,1,9472,59,1,9573,59,1,9576,59,1,9516,59,1,9524,105,110,117,115,59,1,8863,108,117,115,59,1,8862,105,109,101,115,59,1,8864,4,4,76,82,108,114,7738,7741,7744,7747,59,1,9563,59,1,9560,59,1,9496,59,1,9492,4,7,59,72,76,82,104,108,114,7766,7768,7771,7774,7777,7780,7783,1,9474,59,1,9578,59,1,9569,59,1,9566,59,1,9532,59,1,9508,59,1,9500,114,105,109,101,59,1,8245,4,2,101,118,7799,7804,118,101,59,1,728,98,97,114,5,166,1,59,7812,1,166,4,4,99,101,105,111,7824,7829,7834,7846,114,59,3,55349,56503,109,105,59,1,8271,109,4,2,59,101,7841,7843,1,8765,59,1,8909,108,4,3,59,98,104,7855,7857,7860,1,92,59,1,10693,115,117,98,59,1,10184,4,2,108,109,7872,7885,108,4,2,59,101,7879,7881,1,8226,116,59,1,8226,112,4,3,59,69,101,7894,7896,7899,1,8782,59,1,10926,4,2,59,113,7905,7907,1,8783,59,1,8783,4,15,97,99,100,101,102,104,105,108,111,114,115,116,117,119,121,7942,8021,8075,8080,8121,8126,8157,8279,8295,8430,8446,8485,8491,8707,8726,4,3,99,112,114,7950,7956,8007,117,116,101,59,1,263,4,6,59,97,98,99,100,115,7970,7972,7977,7984,7998,8003,1,8745,110,100,59,1,10820,114,99,117,112,59,1,10825,4,2,97,117,7990,7994,112,59,1,10827,112,59,1,10823,111,116,59,1,10816,59,3,8745,65024,4,2,101,111,8013,8017,116,59,1,8257,110,59,1,711,4,4,97,101,105,117,8031,8046,8056,8061,4,2,112,114,8037,8041,115,59,1,10829,111,110,59,1,269,100,105,108,5,231,1,59,8054,1,231,114,99,59,1,265,112,115,4,2,59,115,8069,8071,1,10828,109,59,1,10832,111,116,59,1,267,4,3,100,109,110,8088,8097,8104,105,108,5,184,1,59,8095,1,184,112,116,121,118,59,1,10674,116,5,162,2,59,101,8112,8114,1,162,114,100,111,116,59,1,183,114,59,3,55349,56608,4,3,99,101,105,8134,8138,8154,121,59,1,1095,99,107,4,2,59,109,8146,8148,1,10003,97,114,107,59,1,10003,59,1,967,114,4,7,59,69,99,101,102,109,115,8174,8176,8179,8258,8261,8268,8273,1,9675,59,1,10691,4,3,59,101,108,8187,8189,8193,1,710,113,59,1,8791,101,4,2,97,100,8200,8223,114,114,111,119,4,2,108,114,8210,8216,101,102,116,59,1,8634,105,103,104,116,59,1,8635,4,5,82,83,97,99,100,8235,8238,8241,8246,8252,59,1,174,59,1,9416,115,116,59,1,8859,105,114,99,59,1,8858,97,115,104,59,1,8861,59,1,8791,110,105,110,116,59,1,10768,105,100,59,1,10991,99,105,114,59,1,10690,117,98,115,4,2,59,117,8288,8290,1,9827,105,116,59,1,9827,4,4,108,109,110,112,8305,8326,8376,8400,111,110,4,2,59,101,8313,8315,1,58,4,2,59,113,8321,8323,1,8788,59,1,8788,4,2,109,112,8332,8344,97,4,2,59,116,8339,8341,1,44,59,1,64,4,3,59,102,108,8352,8354,8358,1,8705,110,59,1,8728,101,4,2,109,120,8365,8371,101,110,116,59,1,8705,101,115,59,1,8450,4,2,103,105,8382,8395,4,2,59,100,8388,8390,1,8773,111,116,59,1,10861,110,116,59,1,8750,4,3,102,114,121,8408,8412,8417,59,3,55349,56660,111,100,59,1,8720,5,169,2,59,115,8424,8426,1,169,114,59,1,8471,4,2,97,111,8436,8441,114,114,59,1,8629,115,115,59,1,10007,4,2,99,117,8452,8457,114,59,3,55349,56504,4,2,98,112,8463,8474,4,2,59,101,8469,8471,1,10959,59,1,10961,4,2,59,101,8480,8482,1,10960,59,1,10962,100,111,116,59,1,8943,4,7,100,101,108,112,114,118,119,8507,8522,8536,8550,8600,8697,8702,97,114,114,4,2,108,114,8516,8519,59,1,10552,59,1,10549,4,2,112,115,8528,8532,114,59,1,8926,99,59,1,8927,97,114,114,4,2,59,112,8545,8547,1,8630,59,1,10557,4,6,59,98,99,100,111,115,8564,8566,8573,8587,8592,8596,1,8746,114,99,97,112,59,1,10824,4,2,97,117,8579,8583,112,59,1,10822,112,59,1,10826,111,116,59,1,8845,114,59,1,10821,59,3,8746,65024,4,4,97,108,114,118,8610,8623,8663,8672,114,114,4,2,59,109,8618,8620,1,8631,59,1,10556,121,4,3,101,118,119,8632,8651,8656,113,4,2,112,115,8639,8645,114,101,99,59,1,8926,117,99,99,59,1,8927,101,101,59,1,8910,101,100,103,101,59,1,8911,101,110,5,164,1,59,8670,1,164,101,97,114,114,111,119,4,2,108,114,8684,8690,101,102,116,59,1,8630,105,103,104,116,59,1,8631,101,101,59,1,8910,101,100,59,1,8911,4,2,99,105,8713,8721,111,110,105,110,116,59,1,8754,110,116,59,1,8753,108,99,116,121,59,1,9005,4,19,65,72,97,98,99,100,101,102,104,105,106,108,111,114,115,116,117,119,122,8773,8778,8783,8821,8839,8854,8887,8914,8930,8944,9036,9041,9058,9197,9227,9258,9281,9297,9305,114,114,59,1,8659,97,114,59,1,10597,4,4,103,108,114,115,8793,8799,8805,8809,103,101,114,59,1,8224,101,116,104,59,1,8504,114,59,1,8595,104,4,2,59,118,8816,8818,1,8208,59,1,8867,4,2,107,108,8827,8834,97,114,111,119,59,1,10511,97,99,59,1,733,4,2,97,121,8845,8851,114,111,110,59,1,271,59,1,1076,4,3,59,97,111,8862,8864,8880,1,8518,4,2,103,114,8870,8876,103,101,114,59,1,8225,114,59,1,8650,116,115,101,113,59,1,10871,4,3,103,108,109,8895,8902,8907,5,176,1,59,8900,1,176,116,97,59,1,948,112,116,121,118,59,1,10673,4,2,105,114,8920,8926,115,104,116,59,1,10623,59,3,55349,56609,97,114,4,2,108,114,8938,8941,59,1,8643,59,1,8642,4,5,97,101,103,115,118,8956,8986,8989,8996,9001,109,4,3,59,111,115,8965,8967,8983,1,8900,110,100,4,2,59,115,8975,8977,1,8900,117,105,116,59,1,9830,59,1,9830,59,1,168,97,109,109,97,59,1,989,105,110,59,1,8946,4,3,59,105,111,9009,9011,9031,1,247,100,101,5,247,2,59,111,9020,9022,1,247,110,116,105,109,101,115,59,1,8903,110,120,59,1,8903,99,121,59,1,1106,99,4,2,111,114,9048,9053,114,110,59,1,8990,111,112,59,1,8973,4,5,108,112,116,117,119,9070,9076,9081,9130,9144,108,97,114,59,1,36,102,59,3,55349,56661,4,5,59,101,109,112,115,9093,9095,9109,9116,9122,1,729,113,4,2,59,100,9102,9104,1,8784,111,116,59,1,8785,105,110,117,115,59,1,8760,108,117,115,59,1,8724,113,117,97,114,101,59,1,8865,98,108,101,98,97,114,119,101,100,103,101,59,1,8966,110,4,3,97,100,104,9153,9160,9172,114,114,111,119,59,1,8595,111,119,110,97,114,114,111,119,115,59,1,8650,97,114,112,111,111,110,4,2,108,114,9184,9190,101,102,116,59,1,8643,105,103,104,116,59,1,8642,4,2,98,99,9203,9211,107,97,114,111,119,59,1,10512,4,2,111,114,9217,9222,114,110,59,1,8991,111,112,59,1,8972,4,3,99,111,116,9235,9248,9252,4,2,114,121,9241,9245,59,3,55349,56505,59,1,1109,108,59,1,10742,114,111,107,59,1,273,4,2,100,114,9264,9269,111,116,59,1,8945,105,4,2,59,102,9276,9278,1,9663,59,1,9662,4,2,97,104,9287,9292,114,114,59,1,8693,97,114,59,1,10607,97,110,103,108,101,59,1,10662,4,2,99,105,9311,9315,121,59,1,1119,103,114,97,114,114,59,1,10239,4,18,68,97,99,100,101,102,103,108,109,110,111,112,113,114,115,116,117,120,9361,9376,9398,9439,9444,9447,9462,9495,9531,9585,9598,9614,9659,9755,9771,9792,9808,9826,4,2,68,111,9367,9372,111,116,59,1,10871,116,59,1,8785,4,2,99,115,9382,9392,117,116,101,5,233,1,59,9390,1,233,116,101,114,59,1,10862,4,4,97,105,111,121,9408,9414,9430,9436,114,111,110,59,1,283,114,4,2,59,99,9421,9423,1,8790,5,234,1,59,9428,1,234,108,111,110,59,1,8789,59,1,1101,111,116,59,1,279,59,1,8519,4,2,68,114,9453,9458,111,116,59,1,8786,59,3,55349,56610,4,3,59,114,115,9470,9472,9482,1,10906,97,118,101,5,232,1,59,9480,1,232,4,2,59,100,9488,9490,1,10902,111,116,59,1,10904,4,4,59,105,108,115,9505,9507,9515,9518,1,10905,110,116,101,114,115,59,1,9191,59,1,8467,4,2,59,100,9524,9526,1,10901,111,116,59,1,10903,4,3,97,112,115,9539,9544,9564,99,114,59,1,275,116,121,4,3,59,115,118,9554,9556,9561,1,8709,101,116,59,1,8709,59,1,8709,112,4,2,49,59,9571,9583,4,2,51,52,9577,9580,59,1,8196,59,1,8197,1,8195,4,2,103,115,9591,9594,59,1,331,112,59,1,8194,4,2,103,112,9604,9609,111,110,59,1,281,102,59,3,55349,56662,4,3,97,108,115,9622,9635,9640,114,4,2,59,115,9629,9631,1,8917,108,59,1,10723,117,115,59,1,10865,105,4,3,59,108,118,9649,9651,9656,1,949,111,110,59,1,949,59,1,1013,4,4,99,115,117,118,9669,9686,9716,9747,4,2,105,111,9675,9680,114,99,59,1,8790,108,111,110,59,1,8789,4,2,105,108,9692,9696,109,59,1,8770,97,110,116,4,2,103,108,9705,9710,116,114,59,1,10902,101,115,115,59,1,10901,4,3,97,101,105,9724,9729,9734,108,115,59,1,61,115,116,59,1,8799,118,4,2,59,68,9741,9743,1,8801,68,59,1,10872,112,97,114,115,108,59,1,10725,4,2,68,97,9761,9766,111,116,59,1,8787,114,114,59,1,10609,4,3,99,100,105,9779,9783,9788,114,59,1,8495,111,116,59,1,8784,109,59,1,8770,4,2,97,104,9798,9801,59,1,951,5,240,1,59,9806,1,240,4,2,109,114,9814,9822,108,5,235,1,59,9820,1,235,111,59,1,8364,4,3,99,105,112,9834,9838,9843,108,59,1,33,115,116,59,1,8707,4,2,101,111,9849,9859,99,116,97,116,105,111,110,59,1,8496,110,101,110,116,105,97,108,101,59,1,8519,4,12,97,99,101,102,105,106,108,110,111,112,114,115,9896,9910,9914,9921,9954,9960,9967,9989,9994,10027,10036,10164,108,108,105,110,103,100,111,116,115,101,113,59,1,8786,121,59,1,1092,109,97,108,101,59,1,9792,4,3,105,108,114,9929,9935,9950,108,105,103,59,1,64259,4,2,105,108,9941,9945,103,59,1,64256,105,103,59,1,64260,59,3,55349,56611,108,105,103,59,1,64257,108,105,103,59,3,102,106,4,3,97,108,116,9975,9979,9984,116,59,1,9837,105,103,59,1,64258,110,115,59,1,9649,111,102,59,1,402,4,2,112,114,1e4,10005,102,59,3,55349,56663,4,2,97,107,10011,10016,108,108,59,1,8704,4,2,59,118,10022,10024,1,8916,59,1,10969,97,114,116,105,110,116,59,1,10765,4,2,97,111,10042,10159,4,2,99,115,10048,10155,4,6,49,50,51,52,53,55,10062,10102,10114,10135,10139,10151,4,6,50,51,52,53,54,56,10076,10083,10086,10093,10096,10099,5,189,1,59,10081,1,189,59,1,8531,5,188,1,59,10091,1,188,59,1,8533,59,1,8537,59,1,8539,4,2,51,53,10108,10111,59,1,8532,59,1,8534,4,3,52,53,56,10122,10129,10132,5,190,1,59,10127,1,190,59,1,8535,59,1,8540,53,59,1,8536,4,2,54,56,10145,10148,59,1,8538,59,1,8541,56,59,1,8542,108,59,1,8260,119,110,59,1,8994,99,114,59,3,55349,56507,4,17,69,97,98,99,100,101,102,103,105,106,108,110,111,114,115,116,118,10206,10217,10247,10254,10268,10273,10358,10363,10374,10380,10385,10406,10458,10464,10470,10497,10610,4,2,59,108,10212,10214,1,8807,59,1,10892,4,3,99,109,112,10225,10231,10244,117,116,101,59,1,501,109,97,4,2,59,100,10239,10241,1,947,59,1,989,59,1,10886,114,101,118,101,59,1,287,4,2,105,121,10260,10265,114,99,59,1,285,59,1,1075,111,116,59,1,289,4,4,59,108,113,115,10283,10285,10288,10308,1,8805,59,1,8923,4,3,59,113,115,10296,10298,10301,1,8805,59,1,8807,108,97,110,116,59,1,10878,4,4,59,99,100,108,10318,10320,10324,10345,1,10878,99,59,1,10921,111,116,4,2,59,111,10332,10334,1,10880,4,2,59,108,10340,10342,1,10882,59,1,10884,4,2,59,101,10351,10354,3,8923,65024,115,59,1,10900,114,59,3,55349,56612,4,2,59,103,10369,10371,1,8811,59,1,8921,109,101,108,59,1,8503,99,121,59,1,1107,4,4,59,69,97,106,10395,10397,10400,10403,1,8823,59,1,10898,59,1,10917,59,1,10916,4,4,69,97,101,115,10416,10419,10434,10453,59,1,8809,112,4,2,59,112,10426,10428,1,10890,114,111,120,59,1,10890,4,2,59,113,10440,10442,1,10888,4,2,59,113,10448,10450,1,10888,59,1,8809,105,109,59,1,8935,112,102,59,3,55349,56664,97,118,101,59,1,96,4,2,99,105,10476,10480,114,59,1,8458,109,4,3,59,101,108,10489,10491,10494,1,8819,59,1,10894,59,1,10896,5,62,6,59,99,100,108,113,114,10512,10514,10527,10532,10538,10545,1,62,4,2,99,105,10520,10523,59,1,10919,114,59,1,10874,111,116,59,1,8919,80,97,114,59,1,10645,117,101,115,116,59,1,10876,4,5,97,100,101,108,115,10557,10574,10579,10599,10605,4,2,112,114,10563,10570,112,114,111,120,59,1,10886,114,59,1,10616,111,116,59,1,8919,113,4,2,108,113,10586,10592,101,115,115,59,1,8923,108,101,115,115,59,1,10892,101,115,115,59,1,8823,105,109,59,1,8819,4,2,101,110,10616,10626,114,116,110,101,113,113,59,3,8809,65024,69,59,3,8809,65024,4,10,65,97,98,99,101,102,107,111,115,121,10653,10658,10713,10718,10724,10760,10765,10786,10850,10875,114,114,59,1,8660,4,4,105,108,109,114,10668,10674,10678,10684,114,115,112,59,1,8202,102,59,1,189,105,108,116,59,1,8459,4,2,100,114,10690,10695,99,121,59,1,1098,4,3,59,99,119,10703,10705,10710,1,8596,105,114,59,1,10568,59,1,8621,97,114,59,1,8463,105,114,99,59,1,293,4,3,97,108,114,10732,10748,10754,114,116,115,4,2,59,117,10741,10743,1,9829,105,116,59,1,9829,108,105,112,59,1,8230,99,111,110,59,1,8889,114,59,3,55349,56613,115,4,2,101,119,10772,10779,97,114,111,119,59,1,10533,97,114,111,119,59,1,10534,4,5,97,109,111,112,114,10798,10803,10809,10839,10844,114,114,59,1,8703,116,104,116,59,1,8763,107,4,2,108,114,10816,10827,101,102,116,97,114,114,111,119,59,1,8617,105,103,104,116,97,114,114,111,119,59,1,8618,102,59,3,55349,56665,98,97,114,59,1,8213,4,3,99,108,116,10858,10863,10869,114,59,3,55349,56509,97,115,104,59,1,8463,114,111,107,59,1,295,4,2,98,112,10881,10887,117,108,108,59,1,8259,104,101,110,59,1,8208,4,15,97,99,101,102,103,105,106,109,110,111,112,113,115,116,117,10925,10936,10958,10977,10990,11001,11039,11045,11101,11192,11220,11226,11237,11285,11299,99,117,116,101,5,237,1,59,10934,1,237,4,3,59,105,121,10944,10946,10955,1,8291,114,99,5,238,1,59,10953,1,238,59,1,1080,4,2,99,120,10964,10968,121,59,1,1077,99,108,5,161,1,59,10975,1,161,4,2,102,114,10983,10986,59,1,8660,59,3,55349,56614,114,97,118,101,5,236,1,59,10999,1,236,4,4,59,105,110,111,11011,11013,11028,11034,1,8520,4,2,105,110,11019,11024,110,116,59,1,10764,116,59,1,8749,102,105,110,59,1,10716,116,97,59,1,8489,108,105,103,59,1,307,4,3,97,111,112,11053,11092,11096,4,3,99,103,116,11061,11065,11088,114,59,1,299,4,3,101,108,112,11073,11076,11082,59,1,8465,105,110,101,59,1,8464,97,114,116,59,1,8465,104,59,1,305,102,59,1,8887,101,100,59,1,437,4,5,59,99,102,111,116,11113,11115,11121,11136,11142,1,8712,97,114,101,59,1,8453,105,110,4,2,59,116,11129,11131,1,8734,105,101,59,1,10717,100,111,116,59,1,305,4,5,59,99,101,108,112,11154,11156,11161,11179,11186,1,8747,97,108,59,1,8890,4,2,103,114,11167,11173,101,114,115,59,1,8484,99,97,108,59,1,8890,97,114,104,107,59,1,10775,114,111,100,59,1,10812,4,4,99,103,112,116,11202,11206,11211,11216,121,59,1,1105,111,110,59,1,303,102,59,3,55349,56666,97,59,1,953,114,111,100,59,1,10812,117,101,115,116,5,191,1,59,11235,1,191,4,2,99,105,11243,11248,114,59,3,55349,56510,110,4,5,59,69,100,115,118,11261,11263,11266,11271,11282,1,8712,59,1,8953,111,116,59,1,8949,4,2,59,118,11277,11279,1,8948,59,1,8947,59,1,8712,4,2,59,105,11291,11293,1,8290,108,100,101,59,1,297,4,2,107,109,11305,11310,99,121,59,1,1110,108,5,239,1,59,11316,1,239,4,6,99,102,109,111,115,117,11332,11346,11351,11357,11363,11380,4,2,105,121,11338,11343,114,99,59,1,309,59,1,1081,114,59,3,55349,56615,97,116,104,59,1,567,112,102,59,3,55349,56667,4,2,99,101,11369,11374,114,59,3,55349,56511,114,99,121,59,1,1112,107,99,121,59,1,1108,4,8,97,99,102,103,104,106,111,115,11404,11418,11433,11438,11445,11450,11455,11461,112,112,97,4,2,59,118,11413,11415,1,954,59,1,1008,4,2,101,121,11424,11430,100,105,108,59,1,311,59,1,1082,114,59,3,55349,56616,114,101,101,110,59,1,312,99,121,59,1,1093,99,121,59,1,1116,112,102,59,3,55349,56668,99,114,59,3,55349,56512,4,23,65,66,69,72,97,98,99,100,101,102,103,104,106,108,109,110,111,112,114,115,116,117,118,11515,11538,11544,11555,11560,11721,11780,11818,11868,12136,12160,12171,12203,12208,12246,12275,12327,12509,12523,12569,12641,12732,12752,4,3,97,114,116,11523,11528,11532,114,114,59,1,8666,114,59,1,8656,97,105,108,59,1,10523,97,114,114,59,1,10510,4,2,59,103,11550,11552,1,8806,59,1,10891,97,114,59,1,10594,4,9,99,101,103,109,110,112,113,114,116,11580,11586,11594,11600,11606,11624,11627,11636,11694,117,116,101,59,1,314,109,112,116,121,118,59,1,10676,114,97,110,59,1,8466,98,100,97,59,1,955,103,4,3,59,100,108,11615,11617,11620,1,10216,59,1,10641,101,59,1,10216,59,1,10885,117,111,5,171,1,59,11634,1,171,114,4,8,59,98,102,104,108,112,115,116,11655,11657,11669,11673,11677,11681,11685,11690,1,8592,4,2,59,102,11663,11665,1,8676,115,59,1,10527,115,59,1,10525,107,59,1,8617,112,59,1,8619,108,59,1,10553,105,109,59,1,10611,108,59,1,8610,4,3,59,97,101,11702,11704,11709,1,10923,105,108,59,1,10521,4,2,59,115,11715,11717,1,10925,59,3,10925,65024,4,3,97,98,114,11729,11734,11739,114,114,59,1,10508,114,107,59,1,10098,4,2,97,107,11745,11758,99,4,2,101,107,11752,11755,59,1,123,59,1,91,4,2,101,115,11764,11767,59,1,10635,108,4,2,100,117,11774,11777,59,1,10639,59,1,10637,4,4,97,101,117,121,11790,11796,11811,11815,114,111,110,59,1,318,4,2,100,105,11802,11807,105,108,59,1,316,108,59,1,8968,98,59,1,123,59,1,1083,4,4,99,113,114,115,11828,11832,11845,11864,97,59,1,10550,117,111,4,2,59,114,11840,11842,1,8220,59,1,8222,4,2,100,117,11851,11857,104,97,114,59,1,10599,115,104,97,114,59,1,10571,104,59,1,8626,4,5,59,102,103,113,115,11880,11882,12008,12011,12031,1,8804,116,4,5,97,104,108,114,116,11895,11913,11935,11947,11996,114,114,111,119,4,2,59,116,11905,11907,1,8592,97,105,108,59,1,8610,97,114,112,111,111,110,4,2,100,117,11925,11931,111,119,110,59,1,8637,112,59,1,8636,101,102,116,97,114,114,111,119,115,59,1,8647,105,103,104,116,4,3,97,104,115,11959,11974,11984,114,114,111,119,4,2,59,115,11969,11971,1,8596,59,1,8646,97,114,112,111,111,110,115,59,1,8651,113,117,105,103,97,114,114,111,119,59,1,8621,104,114,101,101,116,105,109,101,115,59,1,8907,59,1,8922,4,3,59,113,115,12019,12021,12024,1,8804,59,1,8806,108,97,110,116,59,1,10877,4,5,59,99,100,103,115,12043,12045,12049,12070,12083,1,10877,99,59,1,10920,111,116,4,2,59,111,12057,12059,1,10879,4,2,59,114,12065,12067,1,10881,59,1,10883,4,2,59,101,12076,12079,3,8922,65024,115,59,1,10899,4,5,97,100,101,103,115,12095,12103,12108,12126,12131,112,112,114,111,120,59,1,10885,111,116,59,1,8918,113,4,2,103,113,12115,12120,116,114,59,1,8922,103,116,114,59,1,10891,116,114,59,1,8822,105,109,59,1,8818,4,3,105,108,114,12144,12150,12156,115,104,116,59,1,10620,111,111,114,59,1,8970,59,3,55349,56617,4,2,59,69,12166,12168,1,8822,59,1,10897,4,2,97,98,12177,12198,114,4,2,100,117,12184,12187,59,1,8637,4,2,59,108,12193,12195,1,8636,59,1,10602,108,107,59,1,9604,99,121,59,1,1113,4,5,59,97,99,104,116,12220,12222,12227,12235,12241,1,8810,114,114,59,1,8647,111,114,110,101,114,59,1,8990,97,114,100,59,1,10603,114,105,59,1,9722,4,2,105,111,12252,12258,100,111,116,59,1,320,117,115,116,4,2,59,97,12267,12269,1,9136,99,104,101,59,1,9136,4,4,69,97,101,115,12285,12288,12303,12322,59,1,8808,112,4,2,59,112,12295,12297,1,10889,114,111,120,59,1,10889,4,2,59,113,12309,12311,1,10887,4,2,59,113,12317,12319,1,10887,59,1,8808,105,109,59,1,8934,4,8,97,98,110,111,112,116,119,122,12345,12359,12364,12421,12446,12467,12474,12490,4,2,110,114,12351,12355,103,59,1,10220,114,59,1,8701,114,107,59,1,10214,103,4,3,108,109,114,12373,12401,12409,101,102,116,4,2,97,114,12382,12389,114,114,111,119,59,1,10229,105,103,104,116,97,114,114,111,119,59,1,10231,97,112,115,116,111,59,1,10236,105,103,104,116,97,114,114,111,119,59,1,10230,112,97,114,114,111,119,4,2,108,114,12433,12439,101,102,116,59,1,8619,105,103,104,116,59,1,8620,4,3,97,102,108,12454,12458,12462,114,59,1,10629,59,3,55349,56669,117,115,59,1,10797,105,109,101,115,59,1,10804,4,2,97,98,12480,12485,115,116,59,1,8727,97,114,59,1,95,4,3,59,101,102,12498,12500,12506,1,9674,110,103,101,59,1,9674,59,1,10731,97,114,4,2,59,108,12517,12519,1,40,116,59,1,10643,4,5,97,99,104,109,116,12535,12540,12548,12561,12564,114,114,59,1,8646,111,114,110,101,114,59,1,8991,97,114,4,2,59,100,12556,12558,1,8651,59,1,10605,59,1,8206,114,105,59,1,8895,4,6,97,99,104,105,113,116,12583,12589,12594,12597,12614,12635,113,117,111,59,1,8249,114,59,3,55349,56513,59,1,8624,109,4,3,59,101,103,12606,12608,12611,1,8818,59,1,10893,59,1,10895,4,2,98,117,12620,12623,59,1,91,111,4,2,59,114,12630,12632,1,8216,59,1,8218,114,111,107,59,1,322,5,60,8,59,99,100,104,105,108,113,114,12660,12662,12675,12680,12686,12692,12698,12705,1,60,4,2,99,105,12668,12671,59,1,10918,114,59,1,10873,111,116,59,1,8918,114,101,101,59,1,8907,109,101,115,59,1,8905,97,114,114,59,1,10614,117,101,115,116,59,1,10875,4,2,80,105,12711,12716,97,114,59,1,10646,4,3,59,101,102,12724,12726,12729,1,9667,59,1,8884,59,1,9666,114,4,2,100,117,12739,12746,115,104,97,114,59,1,10570,104,97,114,59,1,10598,4,2,101,110,12758,12768,114,116,110,101,113,113,59,3,8808,65024,69,59,3,8808,65024,4,14,68,97,99,100,101,102,104,105,108,110,111,112,115,117,12803,12809,12893,12908,12914,12928,12933,12937,13011,13025,13032,13049,13052,13069,68,111,116,59,1,8762,4,4,99,108,112,114,12819,12827,12849,12887,114,5,175,1,59,12825,1,175,4,2,101,116,12833,12836,59,1,9794,4,2,59,101,12842,12844,1,10016,115,101,59,1,10016,4,2,59,115,12855,12857,1,8614,116,111,4,4,59,100,108,117,12869,12871,12877,12883,1,8614,111,119,110,59,1,8615,101,102,116,59,1,8612,112,59,1,8613,107,101,114,59,1,9646,4,2,111,121,12899,12905,109,109,97,59,1,10793,59,1,1084,97,115,104,59,1,8212,97,115,117,114,101,100,97,110,103,108,101,59,1,8737,114,59,3,55349,56618,111,59,1,8487,4,3,99,100,110,12945,12954,12985,114,111,5,181,1,59,12952,1,181,4,4,59,97,99,100,12964,12966,12971,12976,1,8739,115,116,59,1,42,105,114,59,1,10992,111,116,5,183,1,59,12983,1,183,117,115,4,3,59,98,100,12995,12997,13e3,1,8722,59,1,8863,4,2,59,117,13006,13008,1,8760,59,1,10794,4,2,99,100,13017,13021,112,59,1,10971,114,59,1,8230,112,108,117,115,59,1,8723,4,2,100,112,13038,13044,101,108,115,59,1,8871,102,59,3,55349,56670,59,1,8723,4,2,99,116,13058,13063,114,59,3,55349,56514,112,111,115,59,1,8766,4,3,59,108,109,13077,13079,13087,1,956,116,105,109,97,112,59,1,8888,97,112,59,1,8888,4,24,71,76,82,86,97,98,99,100,101,102,103,104,105,106,108,109,111,112,114,115,116,117,118,119,13142,13165,13217,13229,13247,13330,13359,13414,13420,13508,13513,13579,13602,13626,13631,13762,13767,13855,13936,13995,14214,14285,14312,14432,4,2,103,116,13148,13152,59,3,8921,824,4,2,59,118,13158,13161,3,8811,8402,59,3,8811,824,4,3,101,108,116,13173,13200,13204,102,116,4,2,97,114,13181,13188,114,114,111,119,59,1,8653,105,103,104,116,97,114,114,111,119,59,1,8654,59,3,8920,824,4,2,59,118,13210,13213,3,8810,8402,59,3,8810,824,105,103,104,116,97,114,114,111,119,59,1,8655,4,2,68,100,13235,13241,97,115,104,59,1,8879,97,115,104,59,1,8878,4,5,98,99,110,112,116,13259,13264,13270,13275,13308,108,97,59,1,8711,117,116,101,59,1,324,103,59,3,8736,8402,4,5,59,69,105,111,112,13287,13289,13293,13298,13302,1,8777,59,3,10864,824,100,59,3,8779,824,115,59,1,329,114,111,120,59,1,8777,117,114,4,2,59,97,13316,13318,1,9838,108,4,2,59,115,13325,13327,1,9838,59,1,8469,4,2,115,117,13336,13344,112,5,160,1,59,13342,1,160,109,112,4,2,59,101,13352,13355,3,8782,824,59,3,8783,824,4,5,97,101,111,117,121,13371,13385,13391,13407,13411,4,2,112,114,13377,13380,59,1,10819,111,110,59,1,328,100,105,108,59,1,326,110,103,4,2,59,100,13399,13401,1,8775,111,116,59,3,10861,824,112,59,1,10818,59,1,1085,97,115,104,59,1,8211,4,7,59,65,97,100,113,115,120,13436,13438,13443,13466,13472,13478,13494,1,8800,114,114,59,1,8663,114,4,2,104,114,13450,13454,107,59,1,10532,4,2,59,111,13460,13462,1,8599,119,59,1,8599,111,116,59,3,8784,824,117,105,118,59,1,8802,4,2,101,105,13484,13489,97,114,59,1,10536,109,59,3,8770,824,105,115,116,4,2,59,115,13503,13505,1,8708,59,1,8708,114,59,3,55349,56619,4,4,69,101,115,116,13523,13527,13563,13568,59,3,8807,824,4,3,59,113,115,13535,13537,13559,1,8817,4,3,59,113,115,13545,13547,13551,1,8817,59,3,8807,824,108,97,110,116,59,3,10878,824,59,3,10878,824,105,109,59,1,8821,4,2,59,114,13574,13576,1,8815,59,1,8815,4,3,65,97,112,13587,13592,13597,114,114,59,1,8654,114,114,59,1,8622,97,114,59,1,10994,4,3,59,115,118,13610,13612,13623,1,8715,4,2,59,100,13618,13620,1,8956,59,1,8954,59,1,8715,99,121,59,1,1114,4,7,65,69,97,100,101,115,116,13647,13652,13656,13661,13665,13737,13742,114,114,59,1,8653,59,3,8806,824,114,114,59,1,8602,114,59,1,8229,4,4,59,102,113,115,13675,13677,13703,13725,1,8816,116,4,2,97,114,13684,13691,114,114,111,119,59,1,8602,105,103,104,116,97,114,114,111,119,59,1,8622,4,3,59,113,115,13711,13713,13717,1,8816,59,3,8806,824,108,97,110,116,59,3,10877,824,4,2,59,115,13731,13734,3,10877,824,59,1,8814,105,109,59,1,8820,4,2,59,114,13748,13750,1,8814,105,4,2,59,101,13757,13759,1,8938,59,1,8940,105,100,59,1,8740,4,2,112,116,13773,13778,102,59,3,55349,56671,5,172,3,59,105,110,13787,13789,13829,1,172,110,4,4,59,69,100,118,13800,13802,13806,13812,1,8713,59,3,8953,824,111,116,59,3,8949,824,4,3,97,98,99,13820,13823,13826,59,1,8713,59,1,8951,59,1,8950,105,4,2,59,118,13836,13838,1,8716,4,3,97,98,99,13846,13849,13852,59,1,8716,59,1,8958,59,1,8957,4,3,97,111,114,13863,13892,13899,114,4,4,59,97,115,116,13874,13876,13883,13888,1,8742,108,108,101,108,59,1,8742,108,59,3,11005,8421,59,3,8706,824,108,105,110,116,59,1,10772,4,3,59,99,101,13907,13909,13914,1,8832,117,101,59,1,8928,4,2,59,99,13920,13923,3,10927,824,4,2,59,101,13929,13931,1,8832,113,59,3,10927,824,4,4,65,97,105,116,13946,13951,13971,13982,114,114,59,1,8655,114,114,4,3,59,99,119,13961,13963,13967,1,8603,59,3,10547,824,59,3,8605,824,103,104,116,97,114,114,111,119,59,1,8603,114,105,4,2,59,101,13990,13992,1,8939,59,1,8941,4,7,99,104,105,109,112,113,117,14011,14036,14060,14080,14085,14090,14106,4,4,59,99,101,114,14021,14023,14028,14032,1,8833,117,101,59,1,8929,59,3,10928,824,59,3,55349,56515,111,114,116,4,2,109,112,14045,14050,105,100,59,1,8740,97,114,97,108,108,101,108,59,1,8742,109,4,2,59,101,14067,14069,1,8769,4,2,59,113,14075,14077,1,8772,59,1,8772,105,100,59,1,8740,97,114,59,1,8742,115,117,4,2,98,112,14098,14102,101,59,1,8930,101,59,1,8931,4,3,98,99,112,14114,14157,14171,4,4,59,69,101,115,14124,14126,14130,14133,1,8836,59,3,10949,824,59,1,8840,101,116,4,2,59,101,14141,14144,3,8834,8402,113,4,2,59,113,14151,14153,1,8840,59,3,10949,824,99,4,2,59,101,14164,14166,1,8833,113,59,3,10928,824,4,4,59,69,101,115,14181,14183,14187,14190,1,8837,59,3,10950,824,59,1,8841,101,116,4,2,59,101,14198,14201,3,8835,8402,113,4,2,59,113,14208,14210,1,8841,59,3,10950,824,4,4,103,105,108,114,14224,14228,14238,14242,108,59,1,8825,108,100,101,5,241,1,59,14236,1,241,103,59,1,8824,105,97,110,103,108,101,4,2,108,114,14254,14269,101,102,116,4,2,59,101,14263,14265,1,8938,113,59,1,8940,105,103,104,116,4,2,59,101,14279,14281,1,8939,113,59,1,8941,4,2,59,109,14291,14293,1,957,4,3,59,101,115,14301,14303,14308,1,35,114,111,59,1,8470,112,59,1,8199,4,9,68,72,97,100,103,105,108,114,115,14332,14338,14344,14349,14355,14369,14376,14408,14426,97,115,104,59,1,8877,97,114,114,59,1,10500,112,59,3,8781,8402,97,115,104,59,1,8876,4,2,101,116,14361,14365,59,3,8805,8402,59,3,62,8402,110,102,105,110,59,1,10718,4,3,65,101,116,14384,14389,14393,114,114,59,1,10498,59,3,8804,8402,4,2,59,114,14399,14402,3,60,8402,105,101,59,3,8884,8402,4,2,65,116,14414,14419,114,114,59,1,10499,114,105,101,59,3,8885,8402,105,109,59,3,8764,8402,4,3,65,97,110,14440,14445,14468,114,114,59,1,8662,114,4,2,104,114,14452,14456,107,59,1,10531,4,2,59,111,14462,14464,1,8598,119,59,1,8598,101,97,114,59,1,10535,4,18,83,97,99,100,101,102,103,104,105,108,109,111,112,114,115,116,117,118,14512,14515,14535,14560,14597,14603,14618,14643,14657,14662,14701,14741,14747,14769,14851,14877,14907,14916,59,1,9416,4,2,99,115,14521,14531,117,116,101,5,243,1,59,14529,1,243,116,59,1,8859,4,2,105,121,14541,14557,114,4,2,59,99,14548,14550,1,8858,5,244,1,59,14555,1,244,59,1,1086,4,5,97,98,105,111,115,14572,14577,14583,14587,14591,115,104,59,1,8861,108,97,99,59,1,337,118,59,1,10808,116,59,1,8857,111,108,100,59,1,10684,108,105,103,59,1,339,4,2,99,114,14609,14614,105,114,59,1,10687,59,3,55349,56620,4,3,111,114,116,14626,14630,14640,110,59,1,731,97,118,101,5,242,1,59,14638,1,242,59,1,10689,4,2,98,109,14649,14654,97,114,59,1,10677,59,1,937,110,116,59,1,8750,4,4,97,99,105,116,14672,14677,14693,14698,114,114,59,1,8634,4,2,105,114,14683,14687,114,59,1,10686,111,115,115,59,1,10683,110,101,59,1,8254,59,1,10688,4,3,97,101,105,14709,14714,14719,99,114,59,1,333,103,97,59,1,969,4,3,99,100,110,14727,14733,14736,114,111,110,59,1,959,59,1,10678,117,115,59,1,8854,112,102,59,3,55349,56672,4,3,97,101,108,14755,14759,14764,114,59,1,10679,114,112,59,1,10681,117,115,59,1,8853,4,7,59,97,100,105,111,115,118,14785,14787,14792,14831,14837,14841,14848,1,8744,114,114,59,1,8635,4,4,59,101,102,109,14802,14804,14817,14824,1,10845,114,4,2,59,111,14811,14813,1,8500,102,59,1,8500,5,170,1,59,14822,1,170,5,186,1,59,14829,1,186,103,111,102,59,1,8886,114,59,1,10838,108,111,112,101,59,1,10839,59,1,10843,4,3,99,108,111,14859,14863,14873,114,59,1,8500,97,115,104,5,248,1,59,14871,1,248,108,59,1,8856,105,4,2,108,109,14884,14893,100,101,5,245,1,59,14891,1,245,101,115,4,2,59,97,14901,14903,1,8855,115,59,1,10806,109,108,5,246,1,59,14914,1,246,98,97,114,59,1,9021,4,12,97,99,101,102,104,105,108,109,111,114,115,117,14948,14992,14996,15033,15038,15068,15090,15189,15192,15222,15427,15441,114,4,4,59,97,115,116,14959,14961,14976,14989,1,8741,5,182,2,59,108,14968,14970,1,182,108,101,108,59,1,8741,4,2,105,108,14982,14986,109,59,1,10995,59,1,11005,59,1,8706,121,59,1,1087,114,4,5,99,105,109,112,116,15009,15014,15019,15024,15027,110,116,59,1,37,111,100,59,1,46,105,108,59,1,8240,59,1,8869,101,110,107,59,1,8241,114,59,3,55349,56621,4,3,105,109,111,15046,15057,15063,4,2,59,118,15052,15054,1,966,59,1,981,109,97,116,59,1,8499,110,101,59,1,9742,4,3,59,116,118,15076,15078,15087,1,960,99,104,102,111,114,107,59,1,8916,59,1,982,4,2,97,117,15096,15119,110,4,2,99,107,15103,15115,107,4,2,59,104,15110,15112,1,8463,59,1,8462,118,59,1,8463,115,4,9,59,97,98,99,100,101,109,115,116,15140,15142,15148,15151,15156,15168,15171,15179,15184,1,43,99,105,114,59,1,10787,59,1,8862,105,114,59,1,10786,4,2,111,117,15162,15165,59,1,8724,59,1,10789,59,1,10866,110,5,177,1,59,15177,1,177,105,109,59,1,10790,119,111,59,1,10791,59,1,177,4,3,105,112,117,15200,15208,15213,110,116,105,110,116,59,1,10773,102,59,3,55349,56673,110,100,5,163,1,59,15220,1,163,4,10,59,69,97,99,101,105,110,111,115,117,15244,15246,15249,15253,15258,15334,15347,15367,15416,15421,1,8826,59,1,10931,112,59,1,10935,117,101,59,1,8828,4,2,59,99,15264,15266,1,10927,4,6,59,97,99,101,110,115,15280,15282,15290,15299,15303,15329,1,8826,112,112,114,111,120,59,1,10935,117,114,108,121,101,113,59,1,8828,113,59,1,10927,4,3,97,101,115,15311,15319,15324,112,112,114,111,120,59,1,10937,113,113,59,1,10933,105,109,59,1,8936,105,109,59,1,8830,109,101,4,2,59,115,15342,15344,1,8242,59,1,8473,4,3,69,97,115,15355,15358,15362,59,1,10933,112,59,1,10937,105,109,59,1,8936,4,3,100,102,112,15375,15378,15404,59,1,8719,4,3,97,108,115,15386,15392,15398,108,97,114,59,1,9006,105,110,101,59,1,8978,117,114,102,59,1,8979,4,2,59,116,15410,15412,1,8733,111,59,1,8733,105,109,59,1,8830,114,101,108,59,1,8880,4,2,99,105,15433,15438,114,59,3,55349,56517,59,1,968,110,99,115,112,59,1,8200,4,6,102,105,111,112,115,117,15462,15467,15472,15478,15485,15491,114,59,3,55349,56622,110,116,59,1,10764,112,102,59,3,55349,56674,114,105,109,101,59,1,8279,99,114,59,3,55349,56518,4,3,97,101,111,15499,15520,15534,116,4,2,101,105,15506,15515,114,110,105,111,110,115,59,1,8461,110,116,59,1,10774,115,116,4,2,59,101,15528,15530,1,63,113,59,1,8799,116,5,34,1,59,15540,1,34,4,21,65,66,72,97,98,99,100,101,102,104,105,108,109,110,111,112,114,115,116,117,120,15586,15609,15615,15620,15796,15855,15893,15931,15977,16001,16039,16183,16204,16222,16228,16285,16312,16318,16363,16408,16416,4,3,97,114,116,15594,15599,15603,114,114,59,1,8667,114,59,1,8658,97,105,108,59,1,10524,97,114,114,59,1,10511,97,114,59,1,10596,4,7,99,100,101,110,113,114,116,15636,15651,15656,15664,15687,15696,15770,4,2,101,117,15642,15646,59,3,8765,817,116,101,59,1,341,105,99,59,1,8730,109,112,116,121,118,59,1,10675,103,4,4,59,100,101,108,15675,15677,15680,15683,1,10217,59,1,10642,59,1,10661,101,59,1,10217,117,111,5,187,1,59,15694,1,187,114,4,11,59,97,98,99,102,104,108,112,115,116,119,15721,15723,15727,15739,15742,15746,15750,15754,15758,15763,15767,1,8594,112,59,1,10613,4,2,59,102,15733,15735,1,8677,115,59,1,10528,59,1,10547,115,59,1,10526,107,59,1,8618,112,59,1,8620,108,59,1,10565,105,109,59,1,10612,108,59,1,8611,59,1,8605,4,2,97,105,15776,15781,105,108,59,1,10522,111,4,2,59,110,15788,15790,1,8758,97,108,115,59,1,8474,4,3,97,98,114,15804,15809,15814,114,114,59,1,10509,114,107,59,1,10099,4,2,97,107,15820,15833,99,4,2,101,107,15827,15830,59,1,125,59,1,93,4,2,101,115,15839,15842,59,1,10636,108,4,2,100,117,15849,15852,59,1,10638,59,1,10640,4,4,97,101,117,121,15865,15871,15886,15890,114,111,110,59,1,345,4,2,100,105,15877,15882,105,108,59,1,343,108,59,1,8969,98,59,1,125,59,1,1088,4,4,99,108,113,115,15903,15907,15914,15927,97,59,1,10551,100,104,97,114,59,1,10601,117,111,4,2,59,114,15922,15924,1,8221,59,1,8221,104,59,1,8627,4,3,97,99,103,15939,15966,15970,108,4,4,59,105,112,115,15950,15952,15957,15963,1,8476,110,101,59,1,8475,97,114,116,59,1,8476,59,1,8477,116,59,1,9645,5,174,1,59,15975,1,174,4,3,105,108,114,15985,15991,15997,115,104,116,59,1,10621,111,111,114,59,1,8971,59,3,55349,56623,4,2,97,111,16007,16028,114,4,2,100,117,16014,16017,59,1,8641,4,2,59,108,16023,16025,1,8640,59,1,10604,4,2,59,118,16034,16036,1,961,59,1,1009,4,3,103,110,115,16047,16167,16171,104,116,4,6,97,104,108,114,115,116,16063,16081,16103,16130,16143,16155,114,114,111,119,4,2,59,116,16073,16075,1,8594,97,105,108,59,1,8611,97,114,112,111,111,110,4,2,100,117,16093,16099,111,119,110,59,1,8641,112,59,1,8640,101,102,116,4,2,97,104,16112,16120,114,114,111,119,115,59,1,8644,97,114,112,111,111,110,115,59,1,8652,105,103,104,116,97,114,114,111,119,115,59,1,8649,113,117,105,103,97,114,114,111,119,59,1,8605,104,114,101,101,116,105,109,101,115,59,1,8908,103,59,1,730,105,110,103,100,111,116,115,101,113,59,1,8787,4,3,97,104,109,16191,16196,16201,114,114,59,1,8644,97,114,59,1,8652,59,1,8207,111,117,115,116,4,2,59,97,16214,16216,1,9137,99,104,101,59,1,9137,109,105,100,59,1,10990,4,4,97,98,112,116,16238,16252,16257,16278,4,2,110,114,16244,16248,103,59,1,10221,114,59,1,8702,114,107,59,1,10215,4,3,97,102,108,16265,16269,16273,114,59,1,10630,59,3,55349,56675,117,115,59,1,10798,105,109,101,115,59,1,10805,4,2,97,112,16291,16304,114,4,2,59,103,16298,16300,1,41,116,59,1,10644,111,108,105,110,116,59,1,10770,97,114,114,59,1,8649,4,4,97,99,104,113,16328,16334,16339,16342,113,117,111,59,1,8250,114,59,3,55349,56519,59,1,8625,4,2,98,117,16348,16351,59,1,93,111,4,2,59,114,16358,16360,1,8217,59,1,8217,4,3,104,105,114,16371,16377,16383,114,101,101,59,1,8908,109,101,115,59,1,8906,105,4,4,59,101,102,108,16394,16396,16399,16402,1,9657,59,1,8885,59,1,9656,116,114,105,59,1,10702,108,117,104,97,114,59,1,10600,59,1,8478,4,19,97,98,99,100,101,102,104,105,108,109,111,112,113,114,115,116,117,119,122,16459,16466,16472,16572,16590,16672,16687,16746,16844,16850,16924,16963,16988,17115,17121,17154,17206,17614,17656,99,117,116,101,59,1,347,113,117,111,59,1,8218,4,10,59,69,97,99,101,105,110,112,115,121,16494,16496,16499,16513,16518,16531,16536,16556,16564,16569,1,8827,59,1,10932,4,2,112,114,16505,16508,59,1,10936,111,110,59,1,353,117,101,59,1,8829,4,2,59,100,16524,16526,1,10928,105,108,59,1,351,114,99,59,1,349,4,3,69,97,115,16544,16547,16551,59,1,10934,112,59,1,10938,105,109,59,1,8937,111,108,105,110,116,59,1,10771,105,109,59,1,8831,59,1,1089,111,116,4,3,59,98,101,16582,16584,16587,1,8901,59,1,8865,59,1,10854,4,7,65,97,99,109,115,116,120,16606,16611,16634,16642,16646,16652,16668,114,114,59,1,8664,114,4,2,104,114,16618,16622,107,59,1,10533,4,2,59,111,16628,16630,1,8600,119,59,1,8600,116,5,167,1,59,16640,1,167,105,59,1,59,119,97,114,59,1,10537,109,4,2,105,110,16659,16665,110,117,115,59,1,8726,59,1,8726,116,59,1,10038,114,4,2,59,111,16679,16682,3,55349,56624,119,110,59,1,8994,4,4,97,99,111,121,16697,16702,16716,16739,114,112,59,1,9839,4,2,104,121,16708,16713,99,121,59,1,1097,59,1,1096,114,116,4,2,109,112,16724,16729,105,100,59,1,8739,97,114,97,108,108,101,108,59,1,8741,5,173,1,59,16744,1,173,4,2,103,109,16752,16770,109,97,4,3,59,102,118,16762,16764,16767,1,963,59,1,962,59,1,962,4,8,59,100,101,103,108,110,112,114,16788,16790,16795,16806,16817,16828,16832,16838,1,8764,111,116,59,1,10858,4,2,59,113,16801,16803,1,8771,59,1,8771,4,2,59,69,16812,16814,1,10910,59,1,10912,4,2,59,69,16823,16825,1,10909,59,1,10911,101,59,1,8774,108,117,115,59,1,10788,97,114,114,59,1,10610,97,114,114,59,1,8592,4,4,97,101,105,116,16860,16883,16891,16904,4,2,108,115,16866,16878,108,115,101,116,109,105,110,117,115,59,1,8726,104,112,59,1,10803,112,97,114,115,108,59,1,10724,4,2,100,108,16897,16900,59,1,8739,101,59,1,8995,4,2,59,101,16910,16912,1,10922,4,2,59,115,16918,16920,1,10924,59,3,10924,65024,4,3,102,108,112,16932,16938,16958,116,99,121,59,1,1100,4,2,59,98,16944,16946,1,47,4,2,59,97,16952,16954,1,10692,114,59,1,9023,102,59,3,55349,56676,97,4,2,100,114,16970,16985,101,115,4,2,59,117,16978,16980,1,9824,105,116,59,1,9824,59,1,8741,4,3,99,115,117,16996,17028,17089,4,2,97,117,17002,17015,112,4,2,59,115,17009,17011,1,8851,59,3,8851,65024,112,4,2,59,115,17022,17024,1,8852,59,3,8852,65024,117,4,2,98,112,17035,17062,4,3,59,101,115,17043,17045,17048,1,8847,59,1,8849,101,116,4,2,59,101,17056,17058,1,8847,113,59,1,8849,4,3,59,101,115,17070,17072,17075,1,8848,59,1,8850,101,116,4,2,59,101,17083,17085,1,8848,113,59,1,8850,4,3,59,97,102,17097,17099,17112,1,9633,114,4,2,101,102,17106,17109,59,1,9633,59,1,9642,59,1,9642,97,114,114,59,1,8594,4,4,99,101,109,116,17131,17136,17142,17148,114,59,3,55349,56520,116,109,110,59,1,8726,105,108,101,59,1,8995,97,114,102,59,1,8902,4,2,97,114,17160,17172,114,4,2,59,102,17167,17169,1,9734,59,1,9733,4,2,97,110,17178,17202,105,103,104,116,4,2,101,112,17188,17197,112,115,105,108,111,110,59,1,1013,104,105,59,1,981,115,59,1,175,4,5,98,99,109,110,112,17218,17351,17420,17423,17427,4,9,59,69,100,101,109,110,112,114,115,17238,17240,17243,17248,17261,17267,17279,17285,17291,1,8834,59,1,10949,111,116,59,1,10941,4,2,59,100,17254,17256,1,8838,111,116,59,1,10947,117,108,116,59,1,10945,4,2,69,101,17273,17276,59,1,10955,59,1,8842,108,117,115,59,1,10943,97,114,114,59,1,10617,4,3,101,105,117,17299,17335,17339,116,4,3,59,101,110,17308,17310,17322,1,8834,113,4,2,59,113,17317,17319,1,8838,59,1,10949,101,113,4,2,59,113,17330,17332,1,8842,59,1,10955,109,59,1,10951,4,2,98,112,17345,17348,59,1,10965,59,1,10963,99,4,6,59,97,99,101,110,115,17366,17368,17376,17385,17389,17415,1,8827,112,112,114,111,120,59,1,10936,117,114,108,121,101,113,59,1,8829,113,59,1,10928,4,3,97,101,115,17397,17405,17410,112,112,114,111,120,59,1,10938,113,113,59,1,10934,105,109,59,1,8937,105,109,59,1,8831,59,1,8721,103,59,1,9834,4,13,49,50,51,59,69,100,101,104,108,109,110,112,115,17455,17462,17469,17476,17478,17481,17496,17509,17524,17530,17536,17548,17554,5,185,1,59,17460,1,185,5,178,1,59,17467,1,178,5,179,1,59,17474,1,179,1,8835,59,1,10950,4,2,111,115,17487,17491,116,59,1,10942,117,98,59,1,10968,4,2,59,100,17502,17504,1,8839,111,116,59,1,10948,115,4,2,111,117,17516,17520,108,59,1,10185,98,59,1,10967,97,114,114,59,1,10619,117,108,116,59,1,10946,4,2,69,101,17542,17545,59,1,10956,59,1,8843,108,117,115,59,1,10944,4,3,101,105,117,17562,17598,17602,116,4,3,59,101,110,17571,17573,17585,1,8835,113,4,2,59,113,17580,17582,1,8839,59,1,10950,101,113,4,2,59,113,17593,17595,1,8843,59,1,10956,109,59,1,10952,4,2,98,112,17608,17611,59,1,10964,59,1,10966,4,3,65,97,110,17622,17627,17650,114,114,59,1,8665,114,4,2,104,114,17634,17638,107,59,1,10534,4,2,59,111,17644,17646,1,8601,119,59,1,8601,119,97,114,59,1,10538,108,105,103,5,223,1,59,17664,1,223,4,13,97,98,99,100,101,102,104,105,111,112,114,115,119,17694,17709,17714,17737,17742,17749,17754,17860,17905,17957,17964,18090,18122,4,2,114,117,17700,17706,103,101,116,59,1,8982,59,1,964,114,107,59,1,9140,4,3,97,101,121,17722,17728,17734,114,111,110,59,1,357,100,105,108,59,1,355,59,1,1090,111,116,59,1,8411,108,114,101,99,59,1,8981,114,59,3,55349,56625,4,4,101,105,107,111,17764,17805,17836,17851,4,2,114,116,17770,17786,101,4,2,52,102,17777,17780,59,1,8756,111,114,101,59,1,8756,97,4,3,59,115,118,17795,17797,17802,1,952,121,109,59,1,977,59,1,977,4,2,99,110,17811,17831,107,4,2,97,115,17818,17826,112,112,114,111,120,59,1,8776,105,109,59,1,8764,115,112,59,1,8201,4,2,97,115,17842,17846,112,59,1,8776,105,109,59,1,8764,114,110,5,254,1,59,17858,1,254,4,3,108,109,110,17868,17873,17901,100,101,59,1,732,101,115,5,215,3,59,98,100,17884,17886,17898,1,215,4,2,59,97,17892,17894,1,8864,114,59,1,10801,59,1,10800,116,59,1,8749,4,3,101,112,115,17913,17917,17953,97,59,1,10536,4,4,59,98,99,102,17927,17929,17934,17939,1,8868,111,116,59,1,9014,105,114,59,1,10993,4,2,59,111,17945,17948,3,55349,56677,114,107,59,1,10970,97,59,1,10537,114,105,109,101,59,1,8244,4,3,97,105,112,17972,17977,18082,100,101,59,1,8482,4,7,97,100,101,109,112,115,116,17993,18051,18056,18059,18066,18072,18076,110,103,108,101,4,5,59,100,108,113,114,18009,18011,18017,18032,18035,1,9653,111,119,110,59,1,9663,101,102,116,4,2,59,101,18026,18028,1,9667,113,59,1,8884,59,1,8796,105,103,104,116,4,2,59,101,18045,18047,1,9657,113,59,1,8885,111,116,59,1,9708,59,1,8796,105,110,117,115,59,1,10810,108,117,115,59,1,10809,98,59,1,10701,105,109,101,59,1,10811,101,122,105,117,109,59,1,9186,4,3,99,104,116,18098,18111,18116,4,2,114,121,18104,18108,59,3,55349,56521,59,1,1094,99,121,59,1,1115,114,111,107,59,1,359,4,2,105,111,18128,18133,120,116,59,1,8812,104,101,97,100,4,2,108,114,18143,18154,101,102,116,97,114,114,111,119,59,1,8606,105,103,104,116,97,114,114,111,119,59,1,8608,4,18,65,72,97,98,99,100,102,103,104,108,109,111,112,114,115,116,117,119,18204,18209,18214,18234,18250,18268,18292,18308,18319,18343,18379,18397,18413,18504,18547,18553,18584,18603,114,114,59,1,8657,97,114,59,1,10595,4,2,99,114,18220,18230,117,116,101,5,250,1,59,18228,1,250,114,59,1,8593,114,4,2,99,101,18241,18245,121,59,1,1118,118,101,59,1,365,4,2,105,121,18256,18265,114,99,5,251,1,59,18263,1,251,59,1,1091,4,3,97,98,104,18276,18281,18287,114,114,59,1,8645,108,97,99,59,1,369,97,114,59,1,10606,4,2,105,114,18298,18304,115,104,116,59,1,10622,59,3,55349,56626,114,97,118,101,5,249,1,59,18317,1,249,4,2,97,98,18325,18338,114,4,2,108,114,18332,18335,59,1,8639,59,1,8638,108,107,59,1,9600,4,2,99,116,18349,18374,4,2,111,114,18355,18369,114,110,4,2,59,101,18363,18365,1,8988,114,59,1,8988,111,112,59,1,8975,114,105,59,1,9720,4,2,97,108,18385,18390,99,114,59,1,363,5,168,1,59,18395,1,168,4,2,103,112,18403,18408,111,110,59,1,371,102,59,3,55349,56678,4,6,97,100,104,108,115,117,18427,18434,18445,18470,18475,18494,114,114,111,119,59,1,8593,111,119,110,97,114,114,111,119,59,1,8597,97,114,112,111,111,110,4,2,108,114,18457,18463,101,102,116,59,1,8639,105,103,104,116,59,1,8638,117,115,59,1,8846,105,4,3,59,104,108,18484,18486,18489,1,965,59,1,978,111,110,59,1,965,112,97,114,114,111,119,115,59,1,8648,4,3,99,105,116,18512,18537,18542,4,2,111,114,18518,18532,114,110,4,2,59,101,18526,18528,1,8989,114,59,1,8989,111,112,59,1,8974,110,103,59,1,367,114,105,59,1,9721,99,114,59,3,55349,56522,4,3,100,105,114,18561,18566,18572,111,116,59,1,8944,108,100,101,59,1,361,105,4,2,59,102,18579,18581,1,9653,59,1,9652,4,2,97,109,18590,18595,114,114,59,1,8648,108,5,252,1,59,18601,1,252,97,110,103,108,101,59,1,10663,4,15,65,66,68,97,99,100,101,102,108,110,111,112,114,115,122,18643,18648,18661,18667,18847,18851,18857,18904,18909,18915,18931,18937,18943,18949,18996,114,114,59,1,8661,97,114,4,2,59,118,18656,18658,1,10984,59,1,10985,97,115,104,59,1,8872,4,2,110,114,18673,18679,103,114,116,59,1,10652,4,7,101,107,110,112,114,115,116,18695,18704,18711,18720,18742,18754,18810,112,115,105,108,111,110,59,1,1013,97,112,112,97,59,1,1008,111,116,104,105,110,103,59,1,8709,4,3,104,105,114,18728,18732,18735,105,59,1,981,59,1,982,111,112,116,111,59,1,8733,4,2,59,104,18748,18750,1,8597,111,59,1,1009,4,2,105,117,18760,18766,103,109,97,59,1,962,4,2,98,112,18772,18791,115,101,116,110,101,113,4,2,59,113,18784,18787,3,8842,65024,59,3,10955,65024,115,101,116,110,101,113,4,2,59,113,18803,18806,3,8843,65024,59,3,10956,65024,4,2,104,114,18816,18822,101,116,97,59,1,977,105,97,110,103,108,101,4,2,108,114,18834,18840,101,102,116,59,1,8882,105,103,104,116,59,1,8883,121,59,1,1074,97,115,104,59,1,8866,4,3,101,108,114,18865,18884,18890,4,3,59,98,101,18873,18875,18880,1,8744,97,114,59,1,8891,113,59,1,8794,108,105,112,59,1,8942,4,2,98,116,18896,18901,97,114,59,1,124,59,1,124,114,59,3,55349,56627,116,114,105,59,1,8882,115,117,4,2,98,112,18923,18927,59,3,8834,8402,59,3,8835,8402,112,102,59,3,55349,56679,114,111,112,59,1,8733,116,114,105,59,1,8883,4,2,99,117,18955,18960,114,59,3,55349,56523,4,2,98,112,18966,18981,110,4,2,69,101,18973,18977,59,3,10955,65024,59,3,8842,65024,110,4,2,69,101,18988,18992,59,3,10956,65024,59,3,8843,65024,105,103,122,97,103,59,1,10650,4,7,99,101,102,111,112,114,115,19020,19026,19061,19066,19072,19075,19089,105,114,99,59,1,373,4,2,100,105,19032,19055,4,2,98,103,19038,19043,97,114,59,1,10847,101,4,2,59,113,19050,19052,1,8743,59,1,8793,101,114,112,59,1,8472,114,59,3,55349,56628,112,102,59,3,55349,56680,59,1,8472,4,2,59,101,19081,19083,1,8768,97,116,104,59,1,8768,99,114,59,3,55349,56524,4,14,99,100,102,104,105,108,109,110,111,114,115,117,118,119,19125,19146,19152,19157,19173,19176,19192,19197,19202,19236,19252,19269,19286,19291,4,3,97,105,117,19133,19137,19142,112,59,1,8898,114,99,59,1,9711,112,59,1,8899,116,114,105,59,1,9661,114,59,3,55349,56629,4,2,65,97,19163,19168,114,114,59,1,10234,114,114,59,1,10231,59,1,958,4,2,65,97,19182,19187,114,114,59,1,10232,114,114,59,1,10229,97,112,59,1,10236,105,115,59,1,8955,4,3,100,112,116,19210,19215,19230,111,116,59,1,10752,4,2,102,108,19221,19225,59,3,55349,56681,117,115,59,1,10753,105,109,101,59,1,10754,4,2,65,97,19242,19247,114,114,59,1,10233,114,114,59,1,10230,4,2,99,113,19258,19263,114,59,3,55349,56525,99,117,112,59,1,10758,4,2,112,116,19275,19281,108,117,115,59,1,10756,114,105,59,1,9651,101,101,59,1,8897,101,100,103,101,59,1,8896,4,8,97,99,101,102,105,111,115,117,19316,19335,19349,19357,19362,19367,19373,19379,99,4,2,117,121,19323,19332,116,101,5,253,1,59,19330,1,253,59,1,1103,4,2,105,121,19341,19346,114,99,59,1,375,59,1,1099,110,5,165,1,59,19355,1,165,114,59,3,55349,56630,99,121,59,1,1111,112,102,59,3,55349,56682,99,114,59,3,55349,56526,4,2,99,109,19385,19389,121,59,1,1102,108,5,255,1,59,19395,1,255,4,10,97,99,100,101,102,104,105,111,115,119,19419,19426,19441,19446,19462,19467,19472,19480,19486,19492,99,117,116,101,59,1,378,4,2,97,121,19432,19438,114,111,110,59,1,382,59,1,1079,111,116,59,1,380,4,2,101,116,19452,19458,116,114,102,59,1,8488,97,59,1,950,114,59,3,55349,56631,99,121,59,1,1078,103,114,97,114,114,59,1,8669,112,102,59,3,55349,56683,99,114,59,3,55349,56527,4,2,106,110,19498,19501,59,1,8205,106,59,1,8204]);const Nce=kce,en=ha,sd=Ice,ce=NN,G=en.CODE_POINTS,Oc=en.CODE_POINT_SEQUENCES,Ace={128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},YM=1<<0,QM=1<<1,ZM=1<<2,Dce=YM|QM|ZM,It="DATA_STATE",Dh="RCDATA_STATE",nm="RAWTEXT_STATE",vl="SCRIPT_DATA_STATE",JM="PLAINTEXT_STATE",iR="TAG_OPEN_STATE",oR="END_TAG_OPEN_STATE",DS="TAG_NAME_STATE",aR="RCDATA_LESS_THAN_SIGN_STATE",lR="RCDATA_END_TAG_OPEN_STATE",uR="RCDATA_END_TAG_NAME_STATE",cR="RAWTEXT_LESS_THAN_SIGN_STATE",dR="RAWTEXT_END_TAG_OPEN_STATE",hR="RAWTEXT_END_TAG_NAME_STATE",fR="SCRIPT_DATA_LESS_THAN_SIGN_STATE",pR="SCRIPT_DATA_END_TAG_OPEN_STATE",mR="SCRIPT_DATA_END_TAG_NAME_STATE",gR="SCRIPT_DATA_ESCAPE_START_STATE",yR="SCRIPT_DATA_ESCAPE_START_DASH_STATE",Lo="SCRIPT_DATA_ESCAPED_STATE",vR="SCRIPT_DATA_ESCAPED_DASH_STATE",RS="SCRIPT_DATA_ESCAPED_DASH_DASH_STATE",Cv="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN_STATE",bR="SCRIPT_DATA_ESCAPED_END_TAG_OPEN_STATE",ER="SCRIPT_DATA_ESCAPED_END_TAG_NAME_STATE",TR="SCRIPT_DATA_DOUBLE_ESCAPE_START_STATE",fl="SCRIPT_DATA_DOUBLE_ESCAPED_STATE",xR="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_STATE",CR="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH_STATE",Sv="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN_STATE",SR="SCRIPT_DATA_DOUBLE_ESCAPE_END_STATE",xa="BEFORE_ATTRIBUTE_NAME_STATE",wv="ATTRIBUTE_NAME_STATE",FS="AFTER_ATTRIBUTE_NAME_STATE",OS="BEFORE_ATTRIBUTE_VALUE_STATE",_v="ATTRIBUTE_VALUE_DOUBLE_QUOTED_STATE",kv="ATTRIBUTE_VALUE_SINGLE_QUOTED_STATE",Iv="ATTRIBUTE_VALUE_UNQUOTED_STATE",$S="AFTER_ATTRIBUTE_VALUE_QUOTED_STATE",du="SELF_CLOSING_START_TAG_STATE",$1="BOGUS_COMMENT_STATE",wR="MARKUP_DECLARATION_OPEN_STATE",_R="COMMENT_START_STATE",kR="COMMENT_START_DASH_STATE",hu="COMMENT_STATE",IR="COMMENT_LESS_THAN_SIGN_STATE",NR="COMMENT_LESS_THAN_SIGN_BANG_STATE",AR="COMMENT_LESS_THAN_SIGN_BANG_DASH_STATE",DR="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH_STATE",Nv="COMMENT_END_DASH_STATE",Av="COMMENT_END_STATE",RR="COMMENT_END_BANG_STATE",FR="DOCTYPE_STATE",Dv="BEFORE_DOCTYPE_NAME_STATE",Rv="DOCTYPE_NAME_STATE",OR="AFTER_DOCTYPE_NAME_STATE",$R="AFTER_DOCTYPE_PUBLIC_KEYWORD_STATE",LR="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER_STATE",LS="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED_STATE",PS="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED_STATE",MS="AFTER_DOCTYPE_PUBLIC_IDENTIFIER_STATE",PR="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS_STATE",MR="AFTER_DOCTYPE_SYSTEM_KEYWORD_STATE",BR="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER_STATE",L1="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED_STATE",P1="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED_STATE",BS="AFTER_DOCTYPE_SYSTEM_IDENTIFIER_STATE",pl="BOGUS_DOCTYPE_STATE",Fv="CDATA_SECTION_STATE",zR="CDATA_SECTION_BRACKET_STATE",HR="CDATA_SECTION_END_STATE",xh="CHARACTER_REFERENCE_STATE",UR="NAMED_CHARACTER_REFERENCE_STATE",WR="AMBIGUOS_AMPERSAND_STATE",VR="NUMERIC_CHARACTER_REFERENCE_STATE",GR="HEXADEMICAL_CHARACTER_REFERENCE_START_STATE",jR="DECIMAL_CHARACTER_REFERENCE_START_STATE",KR="HEXADEMICAL_CHARACTER_REFERENCE_STATE",qR="DECIMAL_CHARACTER_REFERENCE_STATE",M1="NUMERIC_CHARACTER_REFERENCE_END_STATE";function En(t){return t===G.SPACE||t===G.LINE_FEED||t===G.TABULATION||t===G.FORM_FEED}function Sm(t){return t>=G.DIGIT_0&&t<=G.DIGIT_9}function Bo(t){return t>=G.LATIN_CAPITAL_A&&t<=G.LATIN_CAPITAL_Z}function Hc(t){return t>=G.LATIN_SMALL_A&&t<=G.LATIN_SMALL_Z}function mu(t){return Hc(t)||Bo(t)}function zS(t){return mu(t)||Sm(t)}function e7(t){return t>=G.LATIN_CAPITAL_A&&t<=G.LATIN_CAPITAL_F}function t7(t){return t>=G.LATIN_SMALL_A&&t<=G.LATIN_SMALL_F}function Rce(t){return Sm(t)||e7(t)||t7(t)}function xb(t){return t+32}function Vn(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(t>>>10&1023|55296)+String.fromCharCode(56320|t&1023))}function fu(t){return String.fromCharCode(xb(t))}function XR(t,e){const n=sd[++t];let r=++t,s=r+n-1;for(;r<=s;){const i=r+s>>>1,o=sd[i];if(o<e)r=i+1;else if(o>e)s=i-1;else return sd[i+n]}return-1}let ko=class Zs{constructor(){this.preprocessor=new Nce,this.tokenQueue=[],this.allowCDATA=!1,this.state=It,this.returnState="",this.charRefCode=-1,this.tempBuff=[],this.lastStartTagName="",this.consumedAfterSnapshot=-1,this.active=!1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr=null}_err(){}_errOnNextCodePoint(e){this._consume(),this._err(e),this._unconsume()}getNextToken(){for(;!this.tokenQueue.length&&this.active;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this[this.state](e)}return this.tokenQueue.shift()}write(e,n){this.active=!0,this.preprocessor.write(e,n)}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e)}_ensureHibernation(){if(this.preprocessor.endOfChunkHit){for(;this.consumedAfterSnapshot>0;this.consumedAfterSnapshot--)this.preprocessor.retreat();return this.active=!1,this.tokenQueue.push({type:Zs.HIBERNATION_TOKEN}),!0}return!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(){this.consumedAfterSnapshot--,this.preprocessor.retreat()}_reconsumeInState(e){this.state=e,this._unconsume()}_consumeSequenceIfMatch(e,n,r){let s=0,i=!0;const o=e.length;let a=0,l=n,u;for(;a<o;a++){if(a>0&&(l=this._consume(),s++),l===G.EOF){i=!1;break}if(u=e[a],l!==u&&(r||l!==xb(u))){i=!1;break}}if(!i)for(;s--;)this._unconsume();return i}_isTempBufferEqualToScriptString(){if(this.tempBuff.length!==Oc.SCRIPT_STRING.length)return!1;for(let e=0;e<this.tempBuff.length;e++)if(this.tempBuff[e]!==Oc.SCRIPT_STRING[e])return!1;return!0}_createStartTagToken(){this.currentToken={type:Zs.START_TAG_TOKEN,tagName:"",selfClosing:!1,ackSelfClosing:!1,attrs:[]}}_createEndTagToken(){this.currentToken={type:Zs.END_TAG_TOKEN,tagName:"",selfClosing:!1,attrs:[]}}_createCommentToken(){this.currentToken={type:Zs.COMMENT_TOKEN,data:""}}_createDoctypeToken(e){this.currentToken={type:Zs.DOCTYPE_TOKEN,name:e,forceQuirks:!1,publicId:null,systemId:null}}_createCharacterToken(e,n){this.currentCharacterToken={type:e,chars:n}}_createEOFToken(){this.currentToken={type:Zs.EOF_TOKEN}}_createAttr(e){this.currentAttr={name:e,value:""}}_leaveAttrName(e){Zs.getTokenAttr(this.currentToken,this.currentAttr.name)===null?this.currentToken.attrs.push(this.currentAttr):this._err(ce.duplicateAttribute),this.state=e}_leaveAttrValue(e){this.state=e}_emitCurrentToken(){this._emitCurrentCharacterToken();const e=this.currentToken;this.currentToken=null,e.type===Zs.START_TAG_TOKEN?this.lastStartTagName=e.tagName:e.type===Zs.END_TAG_TOKEN&&(e.attrs.length>0&&this._err(ce.endTagWithAttributes),e.selfClosing&&this._err(ce.endTagWithTrailingSolidus)),this.tokenQueue.push(e)}_emitCurrentCharacterToken(){this.currentCharacterToken&&(this.tokenQueue.push(this.currentCharacterToken),this.currentCharacterToken=null)}_emitEOFToken(){this._createEOFToken(),this._emitCurrentToken()}_appendCharToCurrentCharacterToken(e,n){this.currentCharacterToken&&this.currentCharacterToken.type!==e&&this._emitCurrentCharacterToken(),this.currentCharacterToken?this.currentCharacterToken.chars+=n:this._createCharacterToken(e,n)}_emitCodePoint(e){let n=Zs.CHARACTER_TOKEN;En(e)?n=Zs.WHITESPACE_CHARACTER_TOKEN:e===G.NULL&&(n=Zs.NULL_CHARACTER_TOKEN),this._appendCharToCurrentCharacterToken(n,Vn(e))}_emitSeveralCodePoints(e){for(let n=0;n<e.length;n++)this._emitCodePoint(e[n])}_emitChars(e){this._appendCharToCurrentCharacterToken(Zs.CHARACTER_TOKEN,e)}_matchNamedCharacterReference(e){let n=null,r=1,s=XR(0,e);for(this.tempBuff.push(e);s>-1;){const i=sd[s],o=i<Dce;o&&i&YM&&(n=i&QM?[sd[++s],sd[++s]]:[sd[++s]],r=0);const l=this._consume();if(this.tempBuff.push(l),r++,l===G.EOF)break;o?s=i&ZM?XR(s,l):-1:s=l===i?++s:-1}for(;r--;)this.tempBuff.pop(),this._unconsume();return n}_isCharacterReferenceInAttribute(){return this.returnState===_v||this.returnState===kv||this.returnState===Iv}_isCharacterReferenceAttributeQuirk(e){if(!e&&this._isCharacterReferenceInAttribute()){const n=this._consume();return this._unconsume(),n===G.EQUALS_SIGN||zS(n)}return!1}_flushCodePointsConsumedAsCharacterReference(){if(this._isCharacterReferenceInAttribute())for(let e=0;e<this.tempBuff.length;e++)this.currentAttr.value+=Vn(this.tempBuff[e]);else this._emitSeveralCodePoints(this.tempBuff);this.tempBuff=[]}[It](e){this.preprocessor.dropParsedChunk(),e===G.LESS_THAN_SIGN?this.state=iR:e===G.AMPERSAND?(this.returnState=It,this.state=xh):e===G.NULL?(this._err(ce.unexpectedNullCharacter),this._emitCodePoint(e)):e===G.EOF?this._emitEOFToken():this._emitCodePoint(e)}[Dh](e){this.preprocessor.dropParsedChunk(),e===G.AMPERSAND?(this.returnState=Dh,this.state=xh):e===G.LESS_THAN_SIGN?this.state=aR:e===G.NULL?(this._err(ce.unexpectedNullCharacter),this._emitChars(en.REPLACEMENT_CHARACTER)):e===G.EOF?this._emitEOFToken():this._emitCodePoint(e)}[nm](e){this.preprocessor.dropParsedChunk(),e===G.LESS_THAN_SIGN?this.state=cR:e===G.NULL?(this._err(ce.unexpectedNullCharacter),this._emitChars(en.REPLACEMENT_CHARACTER)):e===G.EOF?this._emitEOFToken():this._emitCodePoint(e)}[vl](e){this.preprocessor.dropParsedChunk(),e===G.LESS_THAN_SIGN?this.state=fR:e===G.NULL?(this._err(ce.unexpectedNullCharacter),this._emitChars(en.REPLACEMENT_CHARACTER)):e===G.EOF?this._emitEOFToken():this._emitCodePoint(e)}[JM](e){this.preprocessor.dropParsedChunk(),e===G.NULL?(this._err(ce.unexpectedNullCharacter),this._emitChars(en.REPLACEMENT_CHARACTER)):e===G.EOF?this._emitEOFToken():this._emitCodePoint(e)}[iR](e){e===G.EXCLAMATION_MARK?this.state=wR:e===G.SOLIDUS?this.state=oR:mu(e)?(this._createStartTagToken(),this._reconsumeInState(DS)):e===G.QUESTION_MARK?(this._err(ce.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(),this._reconsumeInState($1)):e===G.EOF?(this._err(ce.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken()):(this._err(ce.invalidFirstCharacterOfTagName),this._emitChars("<"),this._reconsumeInState(It))}[oR](e){mu(e)?(this._createEndTagToken(),this._reconsumeInState(DS)):e===G.GREATER_THAN_SIGN?(this._err(ce.missingEndTagName),this.state=It):e===G.EOF?(this._err(ce.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken()):(this._err(ce.invalidFirstCharacterOfTagName),this._createCommentToken(),this._reconsumeInState($1))}[DS](e){En(e)?this.state=xa:e===G.SOLIDUS?this.state=du:e===G.GREATER_THAN_SIGN?(this.state=It,this._emitCurrentToken()):Bo(e)?this.currentToken.tagName+=fu(e):e===G.NULL?(this._err(ce.unexpectedNullCharacter),this.currentToken.tagName+=en.REPLACEMENT_CHARACTER):e===G.EOF?(this._err(ce.eofInTag),this._emitEOFToken()):this.currentToken.tagName+=Vn(e)}[aR](e){e===G.SOLIDUS?(this.tempBuff=[],this.state=lR):(this._emitChars("<"),this._reconsumeInState(Dh))}[lR](e){mu(e)?(this._createEndTagToken(),this._reconsumeInState(uR)):(this._emitChars("</"),this._reconsumeInState(Dh))}[uR](e){if(Bo(e))this.currentToken.tagName+=fu(e),this.tempBuff.push(e);else if(Hc(e))this.currentToken.tagName+=Vn(e),this.tempBuff.push(e);else{if(this.lastStartTagName===this.currentToken.tagName){if(En(e)){this.state=xa;return}if(e===G.SOLIDUS){this.state=du;return}if(e===G.GREATER_THAN_SIGN){this.state=It,this._emitCurrentToken();return}}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState(Dh)}}[cR](e){e===G.SOLIDUS?(this.tempBuff=[],this.state=dR):(this._emitChars("<"),this._reconsumeInState(nm))}[dR](e){mu(e)?(this._createEndTagToken(),this._reconsumeInState(hR)):(this._emitChars("</"),this._reconsumeInState(nm))}[hR](e){if(Bo(e))this.currentToken.tagName+=fu(e),this.tempBuff.push(e);else if(Hc(e))this.currentToken.tagName+=Vn(e),this.tempBuff.push(e);else{if(this.lastStartTagName===this.currentToken.tagName){if(En(e)){this.state=xa;return}if(e===G.SOLIDUS){this.state=du;return}if(e===G.GREATER_THAN_SIGN){this._emitCurrentToken(),this.state=It;return}}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState(nm)}}[fR](e){e===G.SOLIDUS?(this.tempBuff=[],this.state=pR):e===G.EXCLAMATION_MARK?(this.state=gR,this._emitChars("<!")):(this._emitChars("<"),this._reconsumeInState(vl))}[pR](e){mu(e)?(this._createEndTagToken(),this._reconsumeInState(mR)):(this._emitChars("</"),this._reconsumeInState(vl))}[mR](e){if(Bo(e))this.currentToken.tagName+=fu(e),this.tempBuff.push(e);else if(Hc(e))this.currentToken.tagName+=Vn(e),this.tempBuff.push(e);else{if(this.lastStartTagName===this.currentToken.tagName){if(En(e)){this.state=xa;return}else if(e===G.SOLIDUS){this.state=du;return}else if(e===G.GREATER_THAN_SIGN){this._emitCurrentToken(),this.state=It;return}}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState(vl)}}[gR](e){e===G.HYPHEN_MINUS?(this.state=yR,this._emitChars("-")):this._reconsumeInState(vl)}[yR](e){e===G.HYPHEN_MINUS?(this.state=RS,this._emitChars("-")):this._reconsumeInState(vl)}[Lo](e){e===G.HYPHEN_MINUS?(this.state=vR,this._emitChars("-")):e===G.LESS_THAN_SIGN?this.state=Cv:e===G.NULL?(this._err(ce.unexpectedNullCharacter),this._emitChars(en.REPLACEMENT_CHARACTER)):e===G.EOF?(this._err(ce.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):this._emitCodePoint(e)}[vR](e){e===G.HYPHEN_MINUS?(this.state=RS,this._emitChars("-")):e===G.LESS_THAN_SIGN?this.state=Cv:e===G.NULL?(this._err(ce.unexpectedNullCharacter),this.state=Lo,this._emitChars(en.REPLACEMENT_CHARACTER)):e===G.EOF?(this._err(ce.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state=Lo,this._emitCodePoint(e))}[RS](e){e===G.HYPHEN_MINUS?this._emitChars("-"):e===G.LESS_THAN_SIGN?this.state=Cv:e===G.GREATER_THAN_SIGN?(this.state=vl,this._emitChars(">")):e===G.NULL?(this._err(ce.unexpectedNullCharacter),this.state=Lo,this._emitChars(en.REPLACEMENT_CHARACTER)):e===G.EOF?(this._err(ce.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state=Lo,this._emitCodePoint(e))}[Cv](e){e===G.SOLIDUS?(this.tempBuff=[],this.state=bR):mu(e)?(this.tempBuff=[],this._emitChars("<"),this._reconsumeInState(TR)):(this._emitChars("<"),this._reconsumeInState(Lo))}[bR](e){mu(e)?(this._createEndTagToken(),this._reconsumeInState(ER)):(this._emitChars("</"),this._reconsumeInState(Lo))}[ER](e){if(Bo(e))this.currentToken.tagName+=fu(e),this.tempBuff.push(e);else if(Hc(e))this.currentToken.tagName+=Vn(e),this.tempBuff.push(e);else{if(this.lastStartTagName===this.currentToken.tagName){if(En(e)){this.state=xa;return}if(e===G.SOLIDUS){this.state=du;return}if(e===G.GREATER_THAN_SIGN){this._emitCurrentToken(),this.state=It;return}}this._emitChars("</"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState(Lo)}}[TR](e){En(e)||e===G.SOLIDUS||e===G.GREATER_THAN_SIGN?(this.state=this._isTempBufferEqualToScriptString()?fl:Lo,this._emitCodePoint(e)):Bo(e)?(this.tempBuff.push(xb(e)),this._emitCodePoint(e)):Hc(e)?(this.tempBuff.push(e),this._emitCodePoint(e)):this._reconsumeInState(Lo)}[fl](e){e===G.HYPHEN_MINUS?(this.state=xR,this._emitChars("-")):e===G.LESS_THAN_SIGN?(this.state=Sv,this._emitChars("<")):e===G.NULL?(this._err(ce.unexpectedNullCharacter),this._emitChars(en.REPLACEMENT_CHARACTER)):e===G.EOF?(this._err(ce.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):this._emitCodePoint(e)}[xR](e){e===G.HYPHEN_MINUS?(this.state=CR,this._emitChars("-")):e===G.LESS_THAN_SIGN?(this.state=Sv,this._emitChars("<")):e===G.NULL?(this._err(ce.unexpectedNullCharacter),this.state=fl,this._emitChars(en.REPLACEMENT_CHARACTER)):e===G.EOF?(this._err(ce.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state=fl,this._emitCodePoint(e))}[CR](e){e===G.HYPHEN_MINUS?this._emitChars("-"):e===G.LESS_THAN_SIGN?(this.state=Sv,this._emitChars("<")):e===G.GREATER_THAN_SIGN?(this.state=vl,this._emitChars(">")):e===G.NULL?(this._err(ce.unexpectedNullCharacter),this.state=fl,this._emitChars(en.REPLACEMENT_CHARACTER)):e===G.EOF?(this._err(ce.eofInScriptHtmlCommentLikeText),this._emitEOFToken()):(this.state=fl,this._emitCodePoint(e))}[Sv](e){e===G.SOLIDUS?(this.tempBuff=[],this.state=SR,this._emitChars("/")):this._reconsumeInState(fl)}[SR](e){En(e)||e===G.SOLIDUS||e===G.GREATER_THAN_SIGN?(this.state=this._isTempBufferEqualToScriptString()?Lo:fl,this._emitCodePoint(e)):Bo(e)?(this.tempBuff.push(xb(e)),this._emitCodePoint(e)):Hc(e)?(this.tempBuff.push(e),this._emitCodePoint(e)):this._reconsumeInState(fl)}[xa](e){En(e)||(e===G.SOLIDUS||e===G.GREATER_THAN_SIGN||e===G.EOF?this._reconsumeInState(FS):e===G.EQUALS_SIGN?(this._err(ce.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=wv):(this._createAttr(""),this._reconsumeInState(wv)))}[wv](e){En(e)||e===G.SOLIDUS||e===G.GREATER_THAN_SIGN||e===G.EOF?(this._leaveAttrName(FS),this._unconsume()):e===G.EQUALS_SIGN?this._leaveAttrName(OS):Bo(e)?this.currentAttr.name+=fu(e):e===G.QUOTATION_MARK||e===G.APOSTROPHE||e===G.LESS_THAN_SIGN?(this._err(ce.unexpectedCharacterInAttributeName),this.currentAttr.name+=Vn(e)):e===G.NULL?(this._err(ce.unexpectedNullCharacter),this.currentAttr.name+=en.REPLACEMENT_CHARACTER):this.currentAttr.name+=Vn(e)}[FS](e){En(e)||(e===G.SOLIDUS?this.state=du:e===G.EQUALS_SIGN?this.state=OS:e===G.GREATER_THAN_SIGN?(this.state=It,this._emitCurrentToken()):e===G.EOF?(this._err(ce.eofInTag),this._emitEOFToken()):(this._createAttr(""),this._reconsumeInState(wv)))}[OS](e){En(e)||(e===G.QUOTATION_MARK?this.state=_v:e===G.APOSTROPHE?this.state=kv:e===G.GREATER_THAN_SIGN?(this._err(ce.missingAttributeValue),this.state=It,this._emitCurrentToken()):this._reconsumeInState(Iv))}[_v](e){e===G.QUOTATION_MARK?this.state=$S:e===G.AMPERSAND?(this.returnState=_v,this.state=xh):e===G.NULL?(this._err(ce.unexpectedNullCharacter),this.currentAttr.value+=en.REPLACEMENT_CHARACTER):e===G.EOF?(this._err(ce.eofInTag),this._emitEOFToken()):this.currentAttr.value+=Vn(e)}[kv](e){e===G.APOSTROPHE?this.state=$S:e===G.AMPERSAND?(this.returnState=kv,this.state=xh):e===G.NULL?(this._err(ce.unexpectedNullCharacter),this.currentAttr.value+=en.REPLACEMENT_CHARACTER):e===G.EOF?(this._err(ce.eofInTag),this._emitEOFToken()):this.currentAttr.value+=Vn(e)}[Iv](e){En(e)?this._leaveAttrValue(xa):e===G.AMPERSAND?(this.returnState=Iv,this.state=xh):e===G.GREATER_THAN_SIGN?(this._leaveAttrValue(It),this._emitCurrentToken()):e===G.NULL?(this._err(ce.unexpectedNullCharacter),this.currentAttr.value+=en.REPLACEMENT_CHARACTER):e===G.QUOTATION_MARK||e===G.APOSTROPHE||e===G.LESS_THAN_SIGN||e===G.EQUALS_SIGN||e===G.GRAVE_ACCENT?(this._err(ce.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=Vn(e)):e===G.EOF?(this._err(ce.eofInTag),this._emitEOFToken()):this.currentAttr.value+=Vn(e)}[$S](e){En(e)?this._leaveAttrValue(xa):e===G.SOLIDUS?this._leaveAttrValue(du):e===G.GREATER_THAN_SIGN?(this._leaveAttrValue(It),this._emitCurrentToken()):e===G.EOF?(this._err(ce.eofInTag),this._emitEOFToken()):(this._err(ce.missingWhitespaceBetweenAttributes),this._reconsumeInState(xa))}[du](e){e===G.GREATER_THAN_SIGN?(this.currentToken.selfClosing=!0,this.state=It,this._emitCurrentToken()):e===G.EOF?(this._err(ce.eofInTag),this._emitEOFToken()):(this._err(ce.unexpectedSolidusInTag),this._reconsumeInState(xa))}[$1](e){e===G.GREATER_THAN_SIGN?(this.state=It,this._emitCurrentToken()):e===G.EOF?(this._emitCurrentToken(),this._emitEOFToken()):e===G.NULL?(this._err(ce.unexpectedNullCharacter),this.currentToken.data+=en.REPLACEMENT_CHARACTER):this.currentToken.data+=Vn(e)}[wR](e){this._consumeSequenceIfMatch(Oc.DASH_DASH_STRING,e,!0)?(this._createCommentToken(),this.state=_R):this._consumeSequenceIfMatch(Oc.DOCTYPE_STRING,e,!1)?this.state=FR:this._consumeSequenceIfMatch(Oc.CDATA_START_STRING,e,!0)?this.allowCDATA?this.state=Fv:(this._err(ce.cdataInHtmlContent),this._createCommentToken(),this.currentToken.data="[CDATA[",this.state=$1):this._ensureHibernation()||(this._err(ce.incorrectlyOpenedComment),this._createCommentToken(),this._reconsumeInState($1))}[_R](e){e===G.HYPHEN_MINUS?this.state=kR:e===G.GREATER_THAN_SIGN?(this._err(ce.abruptClosingOfEmptyComment),this.state=It,this._emitCurrentToken()):this._reconsumeInState(hu)}[kR](e){e===G.HYPHEN_MINUS?this.state=Av:e===G.GREATER_THAN_SIGN?(this._err(ce.abruptClosingOfEmptyComment),this.state=It,this._emitCurrentToken()):e===G.EOF?(this._err(ce.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="-",this._reconsumeInState(hu))}[hu](e){e===G.HYPHEN_MINUS?this.state=Nv:e===G.LESS_THAN_SIGN?(this.currentToken.data+="<",this.state=IR):e===G.NULL?(this._err(ce.unexpectedNullCharacter),this.currentToken.data+=en.REPLACEMENT_CHARACTER):e===G.EOF?(this._err(ce.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.data+=Vn(e)}[IR](e){e===G.EXCLAMATION_MARK?(this.currentToken.data+="!",this.state=NR):e===G.LESS_THAN_SIGN?this.currentToken.data+="!":this._reconsumeInState(hu)}[NR](e){e===G.HYPHEN_MINUS?this.state=AR:this._reconsumeInState(hu)}[AR](e){e===G.HYPHEN_MINUS?this.state=DR:this._reconsumeInState(Nv)}[DR](e){e!==G.GREATER_THAN_SIGN&&e!==G.EOF&&this._err(ce.nestedComment),this._reconsumeInState(Av)}[Nv](e){e===G.HYPHEN_MINUS?this.state=Av:e===G.EOF?(this._err(ce.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="-",this._reconsumeInState(hu))}[Av](e){e===G.GREATER_THAN_SIGN?(this.state=It,this._emitCurrentToken()):e===G.EXCLAMATION_MARK?this.state=RR:e===G.HYPHEN_MINUS?this.currentToken.data+="-":e===G.EOF?(this._err(ce.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="--",this._reconsumeInState(hu))}[RR](e){e===G.HYPHEN_MINUS?(this.currentToken.data+="--!",this.state=Nv):e===G.GREATER_THAN_SIGN?(this._err(ce.incorrectlyClosedComment),this.state=It,this._emitCurrentToken()):e===G.EOF?(this._err(ce.eofInComment),this._emitCurrentToken(),this._emitEOFToken()):(this.currentToken.data+="--!",this._reconsumeInState(hu))}[FR](e){En(e)?this.state=Dv:e===G.GREATER_THAN_SIGN?this._reconsumeInState(Dv):e===G.EOF?(this._err(ce.eofInDoctype),this._createDoctypeToken(null),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(ce.missingWhitespaceBeforeDoctypeName),this._reconsumeInState(Dv))}[Dv](e){En(e)||(Bo(e)?(this._createDoctypeToken(fu(e)),this.state=Rv):e===G.NULL?(this._err(ce.unexpectedNullCharacter),this._createDoctypeToken(en.REPLACEMENT_CHARACTER),this.state=Rv):e===G.GREATER_THAN_SIGN?(this._err(ce.missingDoctypeName),this._createDoctypeToken(null),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=It):e===G.EOF?(this._err(ce.eofInDoctype),this._createDoctypeToken(null),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._createDoctypeToken(Vn(e)),this.state=Rv))}[Rv](e){En(e)?this.state=OR:e===G.GREATER_THAN_SIGN?(this.state=It,this._emitCurrentToken()):Bo(e)?this.currentToken.name+=fu(e):e===G.NULL?(this._err(ce.unexpectedNullCharacter),this.currentToken.name+=en.REPLACEMENT_CHARACTER):e===G.EOF?(this._err(ce.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.name+=Vn(e)}[OR](e){En(e)||(e===G.GREATER_THAN_SIGN?(this.state=It,this._emitCurrentToken()):e===G.EOF?(this._err(ce.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this._consumeSequenceIfMatch(Oc.PUBLIC_STRING,e,!1)?this.state=$R:this._consumeSequenceIfMatch(Oc.SYSTEM_STRING,e,!1)?this.state=MR:this._ensureHibernation()||(this._err(ce.invalidCharacterSequenceAfterDoctypeName),this.currentToken.forceQuirks=!0,this._reconsumeInState(pl)))}[$R](e){En(e)?this.state=LR:e===G.QUOTATION_MARK?(this._err(ce.missingWhitespaceAfterDoctypePublicKeyword),this.currentToken.publicId="",this.state=LS):e===G.APOSTROPHE?(this._err(ce.missingWhitespaceAfterDoctypePublicKeyword),this.currentToken.publicId="",this.state=PS):e===G.GREATER_THAN_SIGN?(this._err(ce.missingDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this.state=It,this._emitCurrentToken()):e===G.EOF?(this._err(ce.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(ce.missingQuoteBeforeDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState(pl))}[LR](e){En(e)||(e===G.QUOTATION_MARK?(this.currentToken.publicId="",this.state=LS):e===G.APOSTROPHE?(this.currentToken.publicId="",this.state=PS):e===G.GREATER_THAN_SIGN?(this._err(ce.missingDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this.state=It,this._emitCurrentToken()):e===G.EOF?(this._err(ce.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(ce.missingQuoteBeforeDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState(pl)))}[LS](e){e===G.QUOTATION_MARK?this.state=MS:e===G.NULL?(this._err(ce.unexpectedNullCharacter),this.currentToken.publicId+=en.REPLACEMENT_CHARACTER):e===G.GREATER_THAN_SIGN?(this._err(ce.abruptDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=It):e===G.EOF?(this._err(ce.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.publicId+=Vn(e)}[PS](e){e===G.APOSTROPHE?this.state=MS:e===G.NULL?(this._err(ce.unexpectedNullCharacter),this.currentToken.publicId+=en.REPLACEMENT_CHARACTER):e===G.GREATER_THAN_SIGN?(this._err(ce.abruptDoctypePublicIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=It):e===G.EOF?(this._err(ce.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.publicId+=Vn(e)}[MS](e){En(e)?this.state=PR:e===G.GREATER_THAN_SIGN?(this.state=It,this._emitCurrentToken()):e===G.QUOTATION_MARK?(this._err(ce.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),this.currentToken.systemId="",this.state=L1):e===G.APOSTROPHE?(this._err(ce.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),this.currentToken.systemId="",this.state=P1):e===G.EOF?(this._err(ce.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(ce.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState(pl))}[PR](e){En(e)||(e===G.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=It):e===G.QUOTATION_MARK?(this.currentToken.systemId="",this.state=L1):e===G.APOSTROPHE?(this.currentToken.systemId="",this.state=P1):e===G.EOF?(this._err(ce.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(ce.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState(pl)))}[MR](e){En(e)?this.state=BR:e===G.QUOTATION_MARK?(this._err(ce.missingWhitespaceAfterDoctypeSystemKeyword),this.currentToken.systemId="",this.state=L1):e===G.APOSTROPHE?(this._err(ce.missingWhitespaceAfterDoctypeSystemKeyword),this.currentToken.systemId="",this.state=P1):e===G.GREATER_THAN_SIGN?(this._err(ce.missingDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this.state=It,this._emitCurrentToken()):e===G.EOF?(this._err(ce.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(ce.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState(pl))}[BR](e){En(e)||(e===G.QUOTATION_MARK?(this.currentToken.systemId="",this.state=L1):e===G.APOSTROPHE?(this.currentToken.systemId="",this.state=P1):e===G.GREATER_THAN_SIGN?(this._err(ce.missingDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this.state=It,this._emitCurrentToken()):e===G.EOF?(this._err(ce.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(ce.missingQuoteBeforeDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._reconsumeInState(pl)))}[L1](e){e===G.QUOTATION_MARK?this.state=BS:e===G.NULL?(this._err(ce.unexpectedNullCharacter),this.currentToken.systemId+=en.REPLACEMENT_CHARACTER):e===G.GREATER_THAN_SIGN?(this._err(ce.abruptDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=It):e===G.EOF?(this._err(ce.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.systemId+=Vn(e)}[P1](e){e===G.APOSTROPHE?this.state=BS:e===G.NULL?(this._err(ce.unexpectedNullCharacter),this.currentToken.systemId+=en.REPLACEMENT_CHARACTER):e===G.GREATER_THAN_SIGN?(this._err(ce.abruptDoctypeSystemIdentifier),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=It):e===G.EOF?(this._err(ce.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):this.currentToken.systemId+=Vn(e)}[BS](e){En(e)||(e===G.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=It):e===G.EOF?(this._err(ce.eofInDoctype),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._emitEOFToken()):(this._err(ce.unexpectedCharacterAfterDoctypeSystemIdentifier),this._reconsumeInState(pl)))}[pl](e){e===G.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=It):e===G.NULL?this._err(ce.unexpectedNullCharacter):e===G.EOF&&(this._emitCurrentToken(),this._emitEOFToken())}[Fv](e){e===G.RIGHT_SQUARE_BRACKET?this.state=zR:e===G.EOF?(this._err(ce.eofInCdata),this._emitEOFToken()):this._emitCodePoint(e)}[zR](e){e===G.RIGHT_SQUARE_BRACKET?this.state=HR:(this._emitChars("]"),this._reconsumeInState(Fv))}[HR](e){e===G.GREATER_THAN_SIGN?this.state=It:e===G.RIGHT_SQUARE_BRACKET?this._emitChars("]"):(this._emitChars("]]"),this._reconsumeInState(Fv))}[xh](e){this.tempBuff=[G.AMPERSAND],e===G.NUMBER_SIGN?(this.tempBuff.push(e),this.state=VR):zS(e)?this._reconsumeInState(UR):(this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState))}[UR](e){const n=this._matchNamedCharacterReference(e);if(this._ensureHibernation())this.tempBuff=[G.AMPERSAND];else if(n){const r=this.tempBuff[this.tempBuff.length-1]===G.SEMICOLON;this._isCharacterReferenceAttributeQuirk(r)||(r||this._errOnNextCodePoint(ce.missingSemicolonAfterCharacterReference),this.tempBuff=n),this._flushCodePointsConsumedAsCharacterReference(),this.state=this.returnState}else this._flushCodePointsConsumedAsCharacterReference(),this.state=WR}[WR](e){zS(e)?this._isCharacterReferenceInAttribute()?this.currentAttr.value+=Vn(e):this._emitCodePoint(e):(e===G.SEMICOLON&&this._err(ce.unknownNamedCharacterReference),this._reconsumeInState(this.returnState))}[VR](e){this.charRefCode=0,e===G.LATIN_SMALL_X||e===G.LATIN_CAPITAL_X?(this.tempBuff.push(e),this.state=GR):this._reconsumeInState(jR)}[GR](e){Rce(e)?this._reconsumeInState(KR):(this._err(ce.absenceOfDigitsInNumericCharacterReference),this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState))}[jR](e){Sm(e)?this._reconsumeInState(qR):(this._err(ce.absenceOfDigitsInNumericCharacterReference),this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState))}[KR](e){e7(e)?this.charRefCode=this.charRefCode*16+e-55:t7(e)?this.charRefCode=this.charRefCode*16+e-87:Sm(e)?this.charRefCode=this.charRefCode*16+e-48:e===G.SEMICOLON?this.state=M1:(this._err(ce.missingSemicolonAfterCharacterReference),this._reconsumeInState(M1))}[qR](e){Sm(e)?this.charRefCode=this.charRefCode*10+e-48:e===G.SEMICOLON?this.state=M1:(this._err(ce.missingSemicolonAfterCharacterReference),this._reconsumeInState(M1))}[M1](){if(this.charRefCode===G.NULL)this._err(ce.nullCharacterReference),this.charRefCode=G.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(ce.characterReferenceOutsideUnicodeRange),this.charRefCode=G.REPLACEMENT_CHARACTER;else if(en.isSurrogate(this.charRefCode))this._err(ce.surrogateCharacterReference),this.charRefCode=G.REPLACEMENT_CHARACTER;else if(en.isUndefinedCodePoint(this.charRefCode))this._err(ce.noncharacterCharacterReference);else if(en.isControlCodePoint(this.charRefCode)||this.charRefCode===G.CARRIAGE_RETURN){this._err(ce.controlCharacterReference);const e=Ace[this.charRefCode];e&&(this.charRefCode=e)}this.tempBuff=[this.charRefCode],this._flushCodePointsConsumedAsCharacterReference(),this._reconsumeInState(this.returnState)}};ko.CHARACTER_TOKEN="CHARACTER_TOKEN";ko.NULL_CHARACTER_TOKEN="NULL_CHARACTER_TOKEN";ko.WHITESPACE_CHARACTER_TOKEN="WHITESPACE_CHARACTER_TOKEN";ko.START_TAG_TOKEN="START_TAG_TOKEN";ko.END_TAG_TOKEN="END_TAG_TOKEN";ko.COMMENT_TOKEN="COMMENT_TOKEN";ko.DOCTYPE_TOKEN="DOCTYPE_TOKEN";ko.EOF_TOKEN="EOF_TOKEN";ko.HIBERNATION_TOKEN="HIBERNATION_TOKEN";ko.MODE={DATA:It,RCDATA:Dh,RAWTEXT:nm,SCRIPT_DATA:vl,PLAINTEXT:JM};ko.getTokenAttr=function(t,e){for(let n=t.attrs.length-1;n>=0;n--)if(t.attrs[n].name===e)return t.attrs[n].value;return null};var zT=ko,fa={};const HS=fa.NAMESPACES={HTML:"http://www.w3.org/1999/xhtml",MATHML:"http://www.w3.org/1998/Math/MathML",SVG:"http://www.w3.org/2000/svg",XLINK:"http://www.w3.org/1999/xlink",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"};fa.ATTRS={TYPE:"type",ACTION:"action",ENCODING:"encoding",PROMPT:"prompt",NAME:"name",COLOR:"color",FACE:"face",SIZE:"size"};fa.DOCUMENT_MODE={NO_QUIRKS:"no-quirks",QUIRKS:"quirks",LIMITED_QUIRKS:"limited-quirks"};const Ee=fa.TAG_NAMES={A:"a",ADDRESS:"address",ANNOTATION_XML:"annotation-xml",APPLET:"applet",AREA:"area",ARTICLE:"article",ASIDE:"aside",B:"b",BASE:"base",BASEFONT:"basefont",BGSOUND:"bgsound",BIG:"big",BLOCKQUOTE:"blockquote",BODY:"body",BR:"br",BUTTON:"button",CAPTION:"caption",CENTER:"center",CODE:"code",COL:"col",COLGROUP:"colgroup",DD:"dd",DESC:"desc",DETAILS:"details",DIALOG:"dialog",DIR:"dir",DIV:"div",DL:"dl",DT:"dt",EM:"em",EMBED:"embed",FIELDSET:"fieldset",FIGCAPTION:"figcaption",FIGURE:"figure",FONT:"font",FOOTER:"footer",FOREIGN_OBJECT:"foreignObject",FORM:"form",FRAME:"frame",FRAMESET:"frameset",H1:"h1",H2:"h2",H3:"h3",H4:"h4",H5:"h5",H6:"h6",HEAD:"head",HEADER:"header",HGROUP:"hgroup",HR:"hr",HTML:"html",I:"i",IMG:"img",IMAGE:"image",INPUT:"input",IFRAME:"iframe",KEYGEN:"keygen",LABEL:"label",LI:"li",LINK:"link",LISTING:"listing",MAIN:"main",MALIGNMARK:"malignmark",MARQUEE:"marquee",MATH:"math",MENU:"menu",META:"meta",MGLYPH:"mglyph",MI:"mi",MO:"mo",MN:"mn",MS:"ms",MTEXT:"mtext",NAV:"nav",NOBR:"nobr",NOFRAMES:"noframes",NOEMBED:"noembed",NOSCRIPT:"noscript",OBJECT:"object",OL:"ol",OPTGROUP:"optgroup",OPTION:"option",P:"p",PARAM:"param",PLAINTEXT:"plaintext",PRE:"pre",RB:"rb",RP:"rp",RT:"rt",RTC:"rtc",RUBY:"ruby",S:"s",SCRIPT:"script",SECTION:"section",SELECT:"select",SOURCE:"source",SMALL:"small",SPAN:"span",STRIKE:"strike",STRONG:"strong",STYLE:"style",SUB:"sub",SUMMARY:"summary",SUP:"sup",TABLE:"table",TBODY:"tbody",TEMPLATE:"template",TEXTAREA:"textarea",TFOOT:"tfoot",TD:"td",TH:"th",THEAD:"thead",TITLE:"title",TR:"tr",TRACK:"track",TT:"tt",U:"u",UL:"ul",SVG:"svg",VAR:"var",WBR:"wbr",XMP:"xmp"};fa.SPECIAL_ELEMENTS={[HS.HTML]:{[Ee.ADDRESS]:!0,[Ee.APPLET]:!0,[Ee.AREA]:!0,[Ee.ARTICLE]:!0,[Ee.ASIDE]:!0,[Ee.BASE]:!0,[Ee.BASEFONT]:!0,[Ee.BGSOUND]:!0,[Ee.BLOCKQUOTE]:!0,[Ee.BODY]:!0,[Ee.BR]:!0,[Ee.BUTTON]:!0,[Ee.CAPTION]:!0,[Ee.CENTER]:!0,[Ee.COL]:!0,[Ee.COLGROUP]:!0,[Ee.DD]:!0,[Ee.DETAILS]:!0,[Ee.DIR]:!0,[Ee.DIV]:!0,[Ee.DL]:!0,[Ee.DT]:!0,[Ee.EMBED]:!0,[Ee.FIELDSET]:!0,[Ee.FIGCAPTION]:!0,[Ee.FIGURE]:!0,[Ee.FOOTER]:!0,[Ee.FORM]:!0,[Ee.FRAME]:!0,[Ee.FRAMESET]:!0,[Ee.H1]:!0,[Ee.H2]:!0,[Ee.H3]:!0,[Ee.H4]:!0,[Ee.H5]:!0,[Ee.H6]:!0,[Ee.HEAD]:!0,[Ee.HEADER]:!0,[Ee.HGROUP]:!0,[Ee.HR]:!0,[Ee.HTML]:!0,[Ee.IFRAME]:!0,[Ee.IMG]:!0,[Ee.INPUT]:!0,[Ee.LI]:!0,[Ee.LINK]:!0,[Ee.LISTING]:!0,[Ee.MAIN]:!0,[Ee.MARQUEE]:!0,[Ee.MENU]:!0,[Ee.META]:!0,[Ee.NAV]:!0,[Ee.NOEMBED]:!0,[Ee.NOFRAMES]:!0,[Ee.NOSCRIPT]:!0,[Ee.OBJECT]:!0,[Ee.OL]:!0,[Ee.P]:!0,[Ee.PARAM]:!0,[Ee.PLAINTEXT]:!0,[Ee.PRE]:!0,[Ee.SCRIPT]:!0,[Ee.SECTION]:!0,[Ee.SELECT]:!0,[Ee.SOURCE]:!0,[Ee.STYLE]:!0,[Ee.SUMMARY]:!0,[Ee.TABLE]:!0,[Ee.TBODY]:!0,[Ee.TD]:!0,[Ee.TEMPLATE]:!0,[Ee.TEXTAREA]:!0,[Ee.TFOOT]:!0,[Ee.TH]:!0,[Ee.THEAD]:!0,[Ee.TITLE]:!0,[Ee.TR]:!0,[Ee.TRACK]:!0,[Ee.UL]:!0,[Ee.WBR]:!0,[Ee.XMP]:!0},[HS.MATHML]:{[Ee.MI]:!0,[Ee.MO]:!0,[Ee.MN]:!0,[Ee.MS]:!0,[Ee.MTEXT]:!0,[Ee.ANNOTATION_XML]:!0},[HS.SVG]:{[Ee.TITLE]:!0,[Ee.FOREIGN_OBJECT]:!0,[Ee.DESC]:!0}};const n7=fa,xe=n7.TAG_NAMES,tn=n7.NAMESPACES;function YR(t){switch(t.length){case 1:return t===xe.P;case 2:return t===xe.RB||t===xe.RP||t===xe.RT||t===xe.DD||t===xe.DT||t===xe.LI;case 3:return t===xe.RTC;case 6:return t===xe.OPTION;case 8:return t===xe.OPTGROUP}return!1}function Fce(t){switch(t.length){case 1:return t===xe.P;case 2:return t===xe.RB||t===xe.RP||t===xe.RT||t===xe.DD||t===xe.DT||t===xe.LI||t===xe.TD||t===xe.TH||t===xe.TR;case 3:return t===xe.RTC;case 5:return t===xe.TBODY||t===xe.TFOOT||t===xe.THEAD;case 6:return t===xe.OPTION;case 7:return t===xe.CAPTION;case 8:return t===xe.OPTGROUP||t===xe.COLGROUP}return!1}function Ov(t,e){switch(t.length){case 2:if(t===xe.TD||t===xe.TH)return e===tn.HTML;if(t===xe.MI||t===xe.MO||t===xe.MN||t===xe.MS)return e===tn.MATHML;break;case 4:if(t===xe.HTML)return e===tn.HTML;if(t===xe.DESC)return e===tn.SVG;break;case 5:if(t===xe.TABLE)return e===tn.HTML;if(t===xe.MTEXT)return e===tn.MATHML;if(t===xe.TITLE)return e===tn.SVG;break;case 6:return(t===xe.APPLET||t===xe.OBJECT)&&e===tn.HTML;case 7:return(t===xe.CAPTION||t===xe.MARQUEE)&&e===tn.HTML;case 8:return t===xe.TEMPLATE&&e===tn.HTML;case 13:return t===xe.FOREIGN_OBJECT&&e===tn.SVG;case 14:return t===xe.ANNOTATION_XML&&e===tn.MATHML}return!1}let Oce=class{constructor(e,n){this.stackTop=-1,this.items=[],this.current=e,this.currentTagName=null,this.currentTmplContent=null,this.tmplCount=0,this.treeAdapter=n}_indexOf(e){let n=-1;for(let r=this.stackTop;r>=0;r--)if(this.items[r]===e){n=r;break}return n}_isInTemplate(){return this.currentTagName===xe.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===tn.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagName=this.current&&this.treeAdapter.getTagName(this.current),this.currentTmplContent=this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):null}push(e){this.items[++this.stackTop]=e,this._updateCurrentElement(),this._isInTemplate()&&this.tmplCount++}pop(){this.stackTop--,this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this._updateCurrentElement()}replace(e,n){const r=this._indexOf(e);this.items[r]=n,r===this.stackTop&&this._updateCurrentElement()}insertAfter(e,n){const r=this._indexOf(e)+1;this.items.splice(r,0,n),r===++this.stackTop&&this._updateCurrentElement()}popUntilTagNamePopped(e){for(;this.stackTop>-1;){const n=this.currentTagName,r=this.treeAdapter.getNamespaceURI(this.current);if(this.pop(),n===e&&r===tn.HTML)break}}popUntilElementPopped(e){for(;this.stackTop>-1;){const n=this.current;if(this.pop(),n===e)break}}popUntilNumberedHeaderPopped(){for(;this.stackTop>-1;){const e=this.currentTagName,n=this.treeAdapter.getNamespaceURI(this.current);if(this.pop(),e===xe.H1||e===xe.H2||e===xe.H3||e===xe.H4||e===xe.H5||e===xe.H6&&n===tn.HTML)break}}popUntilTableCellPopped(){for(;this.stackTop>-1;){const e=this.currentTagName,n=this.treeAdapter.getNamespaceURI(this.current);if(this.pop(),e===xe.TD||e===xe.TH&&n===tn.HTML)break}}popAllUpToHtmlElement(){this.stackTop=0,this._updateCurrentElement()}clearBackToTableContext(){for(;this.currentTagName!==xe.TABLE&&this.currentTagName!==xe.TEMPLATE&&this.currentTagName!==xe.HTML||this.treeAdapter.getNamespaceURI(this.current)!==tn.HTML;)this.pop()}clearBackToTableBodyContext(){for(;this.currentTagName!==xe.TBODY&&this.currentTagName!==xe.TFOOT&&this.currentTagName!==xe.THEAD&&this.currentTagName!==xe.TEMPLATE&&this.currentTagName!==xe.HTML||this.treeAdapter.getNamespaceURI(this.current)!==tn.HTML;)this.pop()}clearBackToTableRowContext(){for(;this.currentTagName!==xe.TR&&this.currentTagName!==xe.TEMPLATE&&this.currentTagName!==xe.HTML||this.treeAdapter.getNamespaceURI(this.current)!==tn.HTML;)this.pop()}remove(e){for(let n=this.stackTop;n>=0;n--)if(this.items[n]===e){this.items.splice(n,1),this.stackTop--,this._updateCurrentElement();break}}tryPeekProperlyNestedBodyElement(){const e=this.items[1];return e&&this.treeAdapter.getTagName(e)===xe.BODY?e:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){let n=this._indexOf(e);return--n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.currentTagName===xe.HTML}hasInScope(e){for(let n=this.stackTop;n>=0;n--){const r=this.treeAdapter.getTagName(this.items[n]),s=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===e&&s===tn.HTML)return!0;if(Ov(r,s))return!1}return!0}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const n=this.treeAdapter.getTagName(this.items[e]),r=this.treeAdapter.getNamespaceURI(this.items[e]);if((n===xe.H1||n===xe.H2||n===xe.H3||n===xe.H4||n===xe.H5||n===xe.H6)&&r===tn.HTML)return!0;if(Ov(n,r))return!1}return!0}hasInListItemScope(e){for(let n=this.stackTop;n>=0;n--){const r=this.treeAdapter.getTagName(this.items[n]),s=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===e&&s===tn.HTML)return!0;if((r===xe.UL||r===xe.OL)&&s===tn.HTML||Ov(r,s))return!1}return!0}hasInButtonScope(e){for(let n=this.stackTop;n>=0;n--){const r=this.treeAdapter.getTagName(this.items[n]),s=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===e&&s===tn.HTML)return!0;if(r===xe.BUTTON&&s===tn.HTML||Ov(r,s))return!1}return!0}hasInTableScope(e){for(let n=this.stackTop;n>=0;n--){const r=this.treeAdapter.getTagName(this.items[n]);if(this.treeAdapter.getNamespaceURI(this.items[n])===tn.HTML){if(r===e)return!0;if(r===xe.TABLE||r===xe.TEMPLATE||r===xe.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--){const n=this.treeAdapter.getTagName(this.items[e]);if(this.treeAdapter.getNamespaceURI(this.items[e])===tn.HTML){if(n===xe.TBODY||n===xe.THEAD||n===xe.TFOOT)return!0;if(n===xe.TABLE||n===xe.HTML)return!1}}return!0}hasInSelectScope(e){for(let n=this.stackTop;n>=0;n--){const r=this.treeAdapter.getTagName(this.items[n]);if(this.treeAdapter.getNamespaceURI(this.items[n])===tn.HTML){if(r===e)return!0;if(r!==xe.OPTION&&r!==xe.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;YR(this.currentTagName);)this.pop()}generateImpliedEndTagsThoroughly(){for(;Fce(this.currentTagName);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;YR(this.currentTagName)&&this.currentTagName!==e;)this.pop()}};var $ce=Oce;const $v=3;let AN=class gu{constructor(e){this.length=0,this.entries=[],this.treeAdapter=e,this.bookmark=null}_getNoahArkConditionCandidates(e){const n=[];if(this.length>=$v){const r=this.treeAdapter.getAttrList(e).length,s=this.treeAdapter.getTagName(e),i=this.treeAdapter.getNamespaceURI(e);for(let o=this.length-1;o>=0;o--){const a=this.entries[o];if(a.type===gu.MARKER_ENTRY)break;const l=a.element,u=this.treeAdapter.getAttrList(l);this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===i&&u.length===r&&n.push({idx:o,attrs:u})}}return n.length<$v?[]:n}_ensureNoahArkCondition(e){const n=this._getNoahArkConditionCandidates(e);let r=n.length;if(r){const s=this.treeAdapter.getAttrList(e),i=s.length,o=Object.create(null);for(let a=0;a<i;a++){const l=s[a];o[l.name]=l.value}for(let a=0;a<i;a++)for(let l=0;l<r;l++){const u=n[l].attrs[a];if(o[u.name]!==u.value&&(n.splice(l,1),r--),n.length<$v)return}for(let a=r-1;a>=$v-1;a--)this.entries.splice(n[a].idx,1),this.length--}}insertMarker(){this.entries.push({type:gu.MARKER_ENTRY}),this.length++}pushElement(e,n){this._ensureNoahArkCondition(e),this.entries.push({type:gu.ELEMENT_ENTRY,element:e,token:n}),this.length++}insertElementAfterBookmark(e,n){let r=this.length-1;for(;r>=0&&this.entries[r]!==this.bookmark;r--);this.entries.splice(r+1,0,{type:gu.ELEMENT_ENTRY,element:e,token:n}),this.length++}removeEntry(e){for(let n=this.length-1;n>=0;n--)if(this.entries[n]===e){this.entries.splice(n,1),this.length--;break}}clearToLastMarker(){for(;this.length;){const e=this.entries.pop();if(this.length--,e.type===gu.MARKER_ENTRY)break}}getElementEntryInScopeWithTagName(e){for(let n=this.length-1;n>=0;n--){const r=this.entries[n];if(r.type===gu.MARKER_ENTRY)return null;if(this.treeAdapter.getTagName(r.element)===e)return r}return null}getElementEntry(e){for(let n=this.length-1;n>=0;n--){const r=this.entries[n];if(r.type===gu.ELEMENT_ENTRY&&r.element===e)return r}return null}};AN.MARKER_ENTRY="MARKER_ENTRY";AN.ELEMENT_ENTRY="ELEMENT_ENTRY";var Lce=AN;let r7=class{constructor(e){const n={},r=this._getOverriddenMethods(this,n);for(const s of Object.keys(r))typeof r[s]=="function"&&(n[s]=e[s],e[s]=r[s])}_getOverriddenMethods(){throw new Error("Not implemented")}};r7.install=function(t,e,n){t.__mixins||(t.__mixins=[]);for(let s=0;s<t.__mixins.length;s++)if(t.__mixins[s].constructor===e)return t.__mixins[s];const r=new e(t,n);return t.__mixins.push(r),r};var Ql=r7;const Pce=Ql;let Mce=class extends Pce{constructor(e){super(e),this.preprocessor=e,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.offset=0,this.col=0,this.line=1}_getOverriddenMethods(e,n){return{advance(){const r=this.pos+1,s=this.html[r];return e.isEol&&(e.isEol=!1,e.line++,e.lineStartPos=r),(s===`
`||s==="\r"&&this.html[r+1]!==`
`)&&(e.isEol=!0),e.col=r-e.lineStartPos+1,e.offset=e.droppedBufferSize+r,n.advance.call(this)},retreat(){n.retreat.call(this),e.isEol=!1,e.col=this.pos-e.lineStartPos+1},dropParsedChunk(){const r=this.pos;n.dropParsedChunk.call(this);const s=r-this.pos;e.lineStartPos-=s,e.droppedBufferSize+=s,e.offset=e.droppedBufferSize+this.pos}}}};var s7=Mce;const QR=Ql,US=zT,Bce=s7;let zce=class extends QR{constructor(e){super(e),this.tokenizer=e,this.posTracker=QR.install(e.preprocessor,Bce),this.currentAttrLocation=null,this.ctLoc=null}_getCurrentLocation(){return{startLine:this.posTracker.line,startCol:this.posTracker.col,startOffset:this.posTracker.offset,endLine:-1,endCol:-1,endOffset:-1}}_attachCurrentAttrLocationInfo(){this.currentAttrLocation.endLine=this.posTracker.line,this.currentAttrLocation.endCol=this.posTracker.col,this.currentAttrLocation.endOffset=this.posTracker.offset;const e=this.tokenizer.currentToken,n=this.tokenizer.currentAttr;e.location.attrs||(e.location.attrs=Object.create(null)),e.location.attrs[n.name]=this.currentAttrLocation}_getOverriddenMethods(e,n){const r={_createStartTagToken(){n._createStartTagToken.call(this),this.currentToken.location=e.ctLoc},_createEndTagToken(){n._createEndTagToken.call(this),this.currentToken.location=e.ctLoc},_createCommentToken(){n._createCommentToken.call(this),this.currentToken.location=e.ctLoc},_createDoctypeToken(s){n._createDoctypeToken.call(this,s),this.currentToken.location=e.ctLoc},_createCharacterToken(s,i){n._createCharacterToken.call(this,s,i),this.currentCharacterToken.location=e.ctLoc},_createEOFToken(){n._createEOFToken.call(this),this.currentToken.location=e._getCurrentLocation()},_createAttr(s){n._createAttr.call(this,s),e.currentAttrLocation=e._getCurrentLocation()},_leaveAttrName(s){n._leaveAttrName.call(this,s),e._attachCurrentAttrLocationInfo()},_leaveAttrValue(s){n._leaveAttrValue.call(this,s),e._attachCurrentAttrLocationInfo()},_emitCurrentToken(){const s=this.currentToken.location;this.currentCharacterToken&&(this.currentCharacterToken.location.endLine=s.startLine,this.currentCharacterToken.location.endCol=s.startCol,this.currentCharacterToken.location.endOffset=s.startOffset),this.currentToken.type===US.EOF_TOKEN?(s.endLine=s.startLine,s.endCol=s.startCol,s.endOffset=s.startOffset):(s.endLine=e.posTracker.line,s.endCol=e.posTracker.col+1,s.endOffset=e.posTracker.offset+1),n._emitCurrentToken.call(this)},_emitCurrentCharacterToken(){const s=this.currentCharacterToken&&this.currentCharacterToken.location;s&&s.endOffset===-1&&(s.endLine=e.posTracker.line,s.endCol=e.posTracker.col,s.endOffset=e.posTracker.offset),n._emitCurrentCharacterToken.call(this)}};return Object.keys(US.MODE).forEach(s=>{const i=US.MODE[s];r[i]=function(o){e.ctLoc=e._getCurrentLocation(),n[i].call(this,o)}}),r}};var i7=zce;const Hce=Ql;let Uce=class extends Hce{constructor(e,n){super(e),this.onItemPop=n.onItemPop}_getOverriddenMethods(e,n){return{pop(){e.onItemPop(this.current),n.pop.call(this)},popAllUpToHtmlElement(){for(let r=this.stackTop;r>0;r--)e.onItemPop(this.items[r]);n.popAllUpToHtmlElement.call(this)},remove(r){e.onItemPop(this.current),n.remove.call(this,r)}}}};var Wce=Uce;const WS=Ql,ZR=zT,Vce=i7,Gce=Wce,jce=fa,VS=jce.TAG_NAMES;let Kce=class extends WS{constructor(e){super(e),this.parser=e,this.treeAdapter=this.parser.treeAdapter,this.posTracker=null,this.lastStartTagToken=null,this.lastFosterParentingLocation=null,this.currentToken=null}_setStartLocation(e){let n=null;this.lastStartTagToken&&(n=Object.assign({},this.lastStartTagToken.location),n.startTag=this.lastStartTagToken.location),this.treeAdapter.setNodeSourceCodeLocation(e,n)}_setEndLocation(e,n){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&n.location){const s=n.location,i=this.treeAdapter.getTagName(e),o=n.type===ZR.END_TAG_TOKEN&&i===n.tagName,a={};o?(a.endTag=Object.assign({},s),a.endLine=s.endLine,a.endCol=s.endCol,a.endOffset=s.endOffset):(a.endLine=s.startLine,a.endCol=s.startCol,a.endOffset=s.startOffset),this.treeAdapter.updateNodeSourceCodeLocation(e,a)}}_getOverriddenMethods(e,n){return{_bootstrap(r,s){n._bootstrap.call(this,r,s),e.lastStartTagToken=null,e.lastFosterParentingLocation=null,e.currentToken=null;const i=WS.install(this.tokenizer,Vce);e.posTracker=i.posTracker,WS.install(this.openElements,Gce,{onItemPop:function(o){e._setEndLocation(o,e.currentToken)}})},_runParsingLoop(r){n._runParsingLoop.call(this,r);for(let s=this.openElements.stackTop;s>=0;s--)e._setEndLocation(this.openElements.items[s],e.currentToken)},_processTokenInForeignContent(r){e.currentToken=r,n._processTokenInForeignContent.call(this,r)},_processToken(r){if(e.currentToken=r,n._processToken.call(this,r),r.type===ZR.END_TAG_TOKEN&&(r.tagName===VS.HTML||r.tagName===VS.BODY&&this.openElements.hasInScope(VS.BODY)))for(let i=this.openElements.stackTop;i>=0;i--){const o=this.openElements.items[i];if(this.treeAdapter.getTagName(o)===r.tagName){e._setEndLocation(o,r);break}}},_setDocumentType(r){n._setDocumentType.call(this,r);const s=this.treeAdapter.getChildNodes(this.document),i=s.length;for(let o=0;o<i;o++){const a=s[o];if(this.treeAdapter.isDocumentTypeNode(a)){this.treeAdapter.setNodeSourceCodeLocation(a,r.location);break}}},_attachElementToTree(r){e._setStartLocation(r),e.lastStartTagToken=null,n._attachElementToTree.call(this,r)},_appendElement(r,s){e.lastStartTagToken=r,n._appendElement.call(this,r,s)},_insertElement(r,s){e.lastStartTagToken=r,n._insertElement.call(this,r,s)},_insertTemplate(r){e.lastStartTagToken=r,n._insertTemplate.call(this,r);const s=this.treeAdapter.getTemplateContent(this.openElements.current);this.treeAdapter.setNodeSourceCodeLocation(s,null)},_insertFakeRootElement(){n._insertFakeRootElement.call(this),this.treeAdapter.setNodeSourceCodeLocation(this.openElements.current,null)},_appendCommentNode(r,s){n._appendCommentNode.call(this,r,s);const i=this.treeAdapter.getChildNodes(s),o=i[i.length-1];this.treeAdapter.setNodeSourceCodeLocation(o,r.location)},_findFosterParentingLocation(){return e.lastFosterParentingLocation=n._findFosterParentingLocation.call(this),e.lastFosterParentingLocation},_insertCharacters(r){n._insertCharacters.call(this,r);const s=this._shouldFosterParentOnInsertion(),i=s&&e.lastFosterParentingLocation.parent||this.openElements.currentTmplContent||this.openElements.current,o=this.treeAdapter.getChildNodes(i),a=s&&e.lastFosterParentingLocation.beforeElement?o.indexOf(e.lastFosterParentingLocation.beforeElement)-1:o.length-1,l=o[a];if(this.treeAdapter.getNodeSourceCodeLocation(l)){const{endLine:c,endCol:d,endOffset:h}=r.location;this.treeAdapter.updateNodeSourceCodeLocation(l,{endLine:c,endCol:d,endOffset:h})}else this.treeAdapter.setNodeSourceCodeLocation(l,r.location)}}}};var qce=Kce;const Xce=Ql;let Yce=class extends Xce{constructor(e,n){super(e),this.posTracker=null,this.onParseError=n.onParseError}_setErrorLocation(e){e.startLine=e.endLine=this.posTracker.line,e.startCol=e.endCol=this.posTracker.col,e.startOffset=e.endOffset=this.posTracker.offset}_reportError(e){const n={code:e,startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1};this._setErrorLocation(n),this.onParseError(n)}_getOverriddenMethods(e){return{_err(n){e._reportError(n)}}}};var DN=Yce;const Qce=DN,Zce=s7,Jce=Ql;let ede=class extends Qce{constructor(e,n){super(e,n),this.posTracker=Jce.install(e,Zce),this.lastErrOffset=-1}_reportError(e){this.lastErrOffset!==this.posTracker.offset&&(this.lastErrOffset=this.posTracker.offset,super._reportError(e))}};var tde=ede;const nde=DN,rde=tde,sde=Ql;let ide=class extends nde{constructor(e,n){super(e,n);const r=sde.install(e.preprocessor,rde,n);this.posTracker=r.posTracker}};var ode=ide;const ade=DN,lde=ode,ude=i7,JR=Ql;let cde=class extends ade{constructor(e,n){super(e,n),this.opts=n,this.ctLoc=null,this.locBeforeToken=!1}_setErrorLocation(e){this.ctLoc&&(e.startLine=this.ctLoc.startLine,e.startCol=this.ctLoc.startCol,e.startOffset=this.ctLoc.startOffset,e.endLine=this.locBeforeToken?this.ctLoc.startLine:this.ctLoc.endLine,e.endCol=this.locBeforeToken?this.ctLoc.startCol:this.ctLoc.endCol,e.endOffset=this.locBeforeToken?this.ctLoc.startOffset:this.ctLoc.endOffset)}_getOverriddenMethods(e,n){return{_bootstrap(r,s){n._bootstrap.call(this,r,s),JR.install(this.tokenizer,lde,e.opts),JR.install(this.tokenizer,ude)},_processInputToken(r){e.ctLoc=r.location,n._processInputToken.call(this,r)},_err(r,s){e.locBeforeToken=s&&s.beforeToken,e._reportError(r)}}}};var dde=cde,Pt={};const{DOCUMENT_MODE:hde}=fa;Pt.createDocument=function(){return{nodeName:"#document",mode:hde.NO_QUIRKS,childNodes:[]}};Pt.createDocumentFragment=function(){return{nodeName:"#document-fragment",childNodes:[]}};Pt.createElement=function(t,e,n){return{nodeName:t,tagName:t,attrs:n,namespaceURI:e,childNodes:[],parentNode:null}};Pt.createCommentNode=function(t){return{nodeName:"#comment",data:t,parentNode:null}};const o7=function(t){return{nodeName:"#text",value:t,parentNode:null}},a7=Pt.appendChild=function(t,e){t.childNodes.push(e),e.parentNode=t},fde=Pt.insertBefore=function(t,e,n){const r=t.childNodes.indexOf(n);t.childNodes.splice(r,0,e),e.parentNode=t};Pt.setTemplateContent=function(t,e){t.content=e};Pt.getTemplateContent=function(t){return t.content};Pt.setDocumentType=function(t,e,n,r){let s=null;for(let i=0;i<t.childNodes.length;i++)if(t.childNodes[i].nodeName==="#documentType"){s=t.childNodes[i];break}s?(s.name=e,s.publicId=n,s.systemId=r):a7(t,{nodeName:"#documentType",name:e,publicId:n,systemId:r})};Pt.setDocumentMode=function(t,e){t.mode=e};Pt.getDocumentMode=function(t){return t.mode};Pt.detachNode=function(t){if(t.parentNode){const e=t.parentNode.childNodes.indexOf(t);t.parentNode.childNodes.splice(e,1),t.parentNode=null}};Pt.insertText=function(t,e){if(t.childNodes.length){const n=t.childNodes[t.childNodes.length-1];if(n.nodeName==="#text"){n.value+=e;return}}a7(t,o7(e))};Pt.insertTextBefore=function(t,e,n){const r=t.childNodes[t.childNodes.indexOf(n)-1];r&&r.nodeName==="#text"?r.value+=e:fde(t,o7(e),n)};Pt.adoptAttributes=function(t,e){const n=[];for(let r=0;r<t.attrs.length;r++)n.push(t.attrs[r].name);for(let r=0;r<e.length;r++)n.indexOf(e[r].name)===-1&&t.attrs.push(e[r])};Pt.getFirstChild=function(t){return t.childNodes[0]};Pt.getChildNodes=function(t){return t.childNodes};Pt.getParentNode=function(t){return t.parentNode};Pt.getAttrList=function(t){return t.attrs};Pt.getTagName=function(t){return t.tagName};Pt.getNamespaceURI=function(t){return t.namespaceURI};Pt.getTextNodeContent=function(t){return t.value};Pt.getCommentNodeContent=function(t){return t.data};Pt.getDocumentTypeNodeName=function(t){return t.name};Pt.getDocumentTypeNodePublicId=function(t){return t.publicId};Pt.getDocumentTypeNodeSystemId=function(t){return t.systemId};Pt.isTextNode=function(t){return t.nodeName==="#text"};Pt.isCommentNode=function(t){return t.nodeName==="#comment"};Pt.isDocumentTypeNode=function(t){return t.nodeName==="#documentType"};Pt.isElementNode=function(t){return!!t.tagName};Pt.setNodeSourceCodeLocation=function(t,e){t.sourceCodeLocation=e};Pt.getNodeSourceCodeLocation=function(t){return t.sourceCodeLocation};Pt.updateNodeSourceCodeLocation=function(t,e){t.sourceCodeLocation=Object.assign(t.sourceCodeLocation,e)};var pde=function(e,n){return n=n||Object.create(null),[e,n].reduce((r,s)=>(Object.keys(s).forEach(i=>{r[i]=s[i]}),r),Object.create(null))},HT={};const{DOCUMENT_MODE:Ch}=fa,l7="html",mde="about:legacy-compat",gde="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",u7=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],yde=u7.concat(["-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"]),vde=["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"],c7=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],bde=c7.concat(["-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"]);function eF(t){const e=t.indexOf('"')!==-1?"'":'"';return e+t+e}function tF(t,e){for(let n=0;n<e.length;n++)if(t.indexOf(e[n])===0)return!0;return!1}HT.isConforming=function(t){return t.name===l7&&t.publicId===null&&(t.systemId===null||t.systemId===mde)};HT.getDocumentMode=function(t){if(t.name!==l7)return Ch.QUIRKS;const e=t.systemId;if(e&&e.toLowerCase()===gde)return Ch.QUIRKS;let n=t.publicId;if(n!==null){if(n=n.toLowerCase(),vde.indexOf(n)>-1)return Ch.QUIRKS;let r=e===null?yde:u7;if(tF(n,r))return Ch.QUIRKS;if(r=e===null?c7:bde,tF(n,r))return Ch.LIMITED_QUIRKS}return Ch.NO_QUIRKS};HT.serializeContent=function(t,e,n){let r="!DOCTYPE ";return t&&(r+=t),e?r+=" PUBLIC "+eF(e):n&&(r+=" SYSTEM"),n!==null&&(r+=" "+eF(n)),r};var pc={};const GS=zT,RN=fa,Ke=RN.TAG_NAMES,qr=RN.NAMESPACES,Cb=RN.ATTRS,nF={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Ede="definitionurl",Tde="definitionURL",xde={attributename:"attributeName",attributetype:"attributeType",basefrequency:"baseFrequency",baseprofile:"baseProfile",calcmode:"calcMode",clippathunits:"clipPathUnits",diffuseconstant:"diffuseConstant",edgemode:"edgeMode",filterunits:"filterUnits",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",limitingconeangle:"limitingConeAngle",markerheight:"markerHeight",markerunits:"markerUnits",markerwidth:"markerWidth",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",numoctaves:"numOctaves",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",refx:"refX",refy:"refY",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",specularconstant:"specularConstant",specularexponent:"specularExponent",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stitchtiles:"stitchTiles",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textlength:"textLength",viewbox:"viewBox",viewtarget:"viewTarget",xchannelselector:"xChannelSelector",ychannelselector:"yChannelSelector",zoomandpan:"zoomAndPan"},Cde={"xlink:actuate":{prefix:"xlink",name:"actuate",namespace:qr.XLINK},"xlink:arcrole":{prefix:"xlink",name:"arcrole",namespace:qr.XLINK},"xlink:href":{prefix:"xlink",name:"href",namespace:qr.XLINK},"xlink:role":{prefix:"xlink",name:"role",namespace:qr.XLINK},"xlink:show":{prefix:"xlink",name:"show",namespace:qr.XLINK},"xlink:title":{prefix:"xlink",name:"title",namespace:qr.XLINK},"xlink:type":{prefix:"xlink",name:"type",namespace:qr.XLINK},"xml:base":{prefix:"xml",name:"base",namespace:qr.XML},"xml:lang":{prefix:"xml",name:"lang",namespace:qr.XML},"xml:space":{prefix:"xml",name:"space",namespace:qr.XML},xmlns:{prefix:"",name:"xmlns",namespace:qr.XMLNS},"xmlns:xlink":{prefix:"xmlns",name:"xlink",namespace:qr.XMLNS}},Sde=pc.SVG_TAG_NAMES_ADJUSTMENT_MAP={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient",textpath:"textPath"},wde={[Ke.B]:!0,[Ke.BIG]:!0,[Ke.BLOCKQUOTE]:!0,[Ke.BODY]:!0,[Ke.BR]:!0,[Ke.CENTER]:!0,[Ke.CODE]:!0,[Ke.DD]:!0,[Ke.DIV]:!0,[Ke.DL]:!0,[Ke.DT]:!0,[Ke.EM]:!0,[Ke.EMBED]:!0,[Ke.H1]:!0,[Ke.H2]:!0,[Ke.H3]:!0,[Ke.H4]:!0,[Ke.H5]:!0,[Ke.H6]:!0,[Ke.HEAD]:!0,[Ke.HR]:!0,[Ke.I]:!0,[Ke.IMG]:!0,[Ke.LI]:!0,[Ke.LISTING]:!0,[Ke.MENU]:!0,[Ke.META]:!0,[Ke.NOBR]:!0,[Ke.OL]:!0,[Ke.P]:!0,[Ke.PRE]:!0,[Ke.RUBY]:!0,[Ke.S]:!0,[Ke.SMALL]:!0,[Ke.SPAN]:!0,[Ke.STRONG]:!0,[Ke.STRIKE]:!0,[Ke.SUB]:!0,[Ke.SUP]:!0,[Ke.TABLE]:!0,[Ke.TT]:!0,[Ke.U]:!0,[Ke.UL]:!0,[Ke.VAR]:!0};pc.causesExit=function(t){const e=t.tagName;return e===Ke.FONT&&(GS.getTokenAttr(t,Cb.COLOR)!==null||GS.getTokenAttr(t,Cb.SIZE)!==null||GS.getTokenAttr(t,Cb.FACE)!==null)?!0:wde[e]};pc.adjustTokenMathMLAttrs=function(t){for(let e=0;e<t.attrs.length;e++)if(t.attrs[e].name===Ede){t.attrs[e].name=Tde;break}};pc.adjustTokenSVGAttrs=function(t){for(let e=0;e<t.attrs.length;e++){const n=xde[t.attrs[e].name];n&&(t.attrs[e].name=n)}};pc.adjustTokenXMLAttrs=function(t){for(let e=0;e<t.attrs.length;e++){const n=Cde[t.attrs[e].name];n&&(t.attrs[e].prefix=n.prefix,t.attrs[e].name=n.name,t.attrs[e].namespace=n.namespace)}};pc.adjustTokenSVGTagName=function(t){const e=Sde[t.tagName];e&&(t.tagName=e)};function _de(t,e){return e===qr.MATHML&&(t===Ke.MI||t===Ke.MO||t===Ke.MN||t===Ke.MS||t===Ke.MTEXT)}function kde(t,e,n){if(e===qr.MATHML&&t===Ke.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===Cb.ENCODING){const s=n[r].value.toLowerCase();return s===nF.TEXT_HTML||s===nF.APPLICATION_XML}}return e===qr.SVG&&(t===Ke.FOREIGN_OBJECT||t===Ke.DESC||t===Ke.TITLE)}pc.isIntegrationPoint=function(t,e,n,r){return!!((!r||r===qr.HTML)&&kde(t,e,n)||(!r||r===qr.MATHML)&&_de(t,e))};const X=zT,Ide=$ce,rF=Lce,Nde=qce,Ade=dde,sF=Ql,Dde=Pt,Rde=pde,iF=HT,Oa=pc,Zr=NN,Fde=ha,Kd=fa,_=Kd.TAG_NAMES,Pe=Kd.NAMESPACES,d7=Kd.ATTRS,Ode={scriptingEnabled:!0,sourceCodeLocationInfo:!1,onParseError:null,treeAdapter:Dde},h7="hidden",$de=8,Lde=3,f7="INITIAL_MODE",FN="BEFORE_HTML_MODE",UT="BEFORE_HEAD_MODE",np="IN_HEAD_MODE",p7="IN_HEAD_NO_SCRIPT_MODE",WT="AFTER_HEAD_MODE",Wa="IN_BODY_MODE",bE="TEXT_MODE",fs="IN_TABLE_MODE",m7="IN_TABLE_TEXT_MODE",VT="IN_CAPTION_MODE",n0="IN_COLUMN_GROUP_MODE",vo="IN_TABLE_BODY_MODE",zl="IN_ROW_MODE",GT="IN_CELL_MODE",ON="IN_SELECT_MODE",$N="IN_SELECT_IN_TABLE_MODE",EE="IN_TEMPLATE_MODE",LN="AFTER_BODY_MODE",jT="IN_FRAMESET_MODE",g7="AFTER_FRAMESET_MODE",y7="AFTER_AFTER_BODY_MODE",v7="AFTER_AFTER_FRAMESET_MODE",Pde={[_.TR]:zl,[_.TBODY]:vo,[_.THEAD]:vo,[_.TFOOT]:vo,[_.CAPTION]:VT,[_.COLGROUP]:n0,[_.TABLE]:fs,[_.BODY]:Wa,[_.FRAMESET]:jT},Mde={[_.CAPTION]:fs,[_.COLGROUP]:fs,[_.TBODY]:fs,[_.TFOOT]:fs,[_.THEAD]:fs,[_.COL]:n0,[_.TR]:vo,[_.TD]:zl,[_.TH]:zl},oF={[f7]:{[X.CHARACTER_TOKEN]:z1,[X.NULL_CHARACTER_TOKEN]:z1,[X.WHITESPACE_CHARACTER_TOKEN]:Dt,[X.COMMENT_TOKEN]:mr,[X.DOCTYPE_TOKEN]:qde,[X.START_TAG_TOKEN]:z1,[X.END_TAG_TOKEN]:z1,[X.EOF_TOKEN]:z1},[FN]:{[X.CHARACTER_TOKEN]:wm,[X.NULL_CHARACTER_TOKEN]:wm,[X.WHITESPACE_CHARACTER_TOKEN]:Dt,[X.COMMENT_TOKEN]:mr,[X.DOCTYPE_TOKEN]:Dt,[X.START_TAG_TOKEN]:Xde,[X.END_TAG_TOKEN]:Yde,[X.EOF_TOKEN]:wm},[UT]:{[X.CHARACTER_TOKEN]:_m,[X.NULL_CHARACTER_TOKEN]:_m,[X.WHITESPACE_CHARACTER_TOKEN]:Dt,[X.COMMENT_TOKEN]:mr,[X.DOCTYPE_TOKEN]:Lv,[X.START_TAG_TOKEN]:Qde,[X.END_TAG_TOKEN]:Zde,[X.EOF_TOKEN]:_m},[np]:{[X.CHARACTER_TOKEN]:km,[X.NULL_CHARACTER_TOKEN]:km,[X.WHITESPACE_CHARACTER_TOKEN]:Js,[X.COMMENT_TOKEN]:mr,[X.DOCTYPE_TOKEN]:Lv,[X.START_TAG_TOKEN]:Or,[X.END_TAG_TOKEN]:qd,[X.EOF_TOKEN]:km},[p7]:{[X.CHARACTER_TOKEN]:Im,[X.NULL_CHARACTER_TOKEN]:Im,[X.WHITESPACE_CHARACTER_TOKEN]:Js,[X.COMMENT_TOKEN]:mr,[X.DOCTYPE_TOKEN]:Lv,[X.START_TAG_TOKEN]:Jde,[X.END_TAG_TOKEN]:ehe,[X.EOF_TOKEN]:Im},[WT]:{[X.CHARACTER_TOKEN]:Nm,[X.NULL_CHARACTER_TOKEN]:Nm,[X.WHITESPACE_CHARACTER_TOKEN]:Js,[X.COMMENT_TOKEN]:mr,[X.DOCTYPE_TOKEN]:Lv,[X.START_TAG_TOKEN]:the,[X.END_TAG_TOKEN]:nhe,[X.EOF_TOKEN]:Nm},[Wa]:{[X.CHARACTER_TOKEN]:Pv,[X.NULL_CHARACTER_TOKEN]:Dt,[X.WHITESPACE_CHARACTER_TOKEN]:$c,[X.COMMENT_TOKEN]:mr,[X.DOCTYPE_TOKEN]:Dt,[X.START_TAG_TOKEN]:vi,[X.END_TAG_TOKEN]:PN,[X.EOF_TOKEN]:gl},[bE]:{[X.CHARACTER_TOKEN]:Js,[X.NULL_CHARACTER_TOKEN]:Js,[X.WHITESPACE_CHARACTER_TOKEN]:Js,[X.COMMENT_TOKEN]:Dt,[X.DOCTYPE_TOKEN]:Dt,[X.START_TAG_TOKEN]:Dt,[X.END_TAG_TOKEN]:Fhe,[X.EOF_TOKEN]:Ohe},[fs]:{[X.CHARACTER_TOKEN]:yl,[X.NULL_CHARACTER_TOKEN]:yl,[X.WHITESPACE_CHARACTER_TOKEN]:yl,[X.COMMENT_TOKEN]:mr,[X.DOCTYPE_TOKEN]:Dt,[X.START_TAG_TOKEN]:MN,[X.END_TAG_TOKEN]:BN,[X.EOF_TOKEN]:gl},[m7]:{[X.CHARACTER_TOKEN]:Vhe,[X.NULL_CHARACTER_TOKEN]:Dt,[X.WHITESPACE_CHARACTER_TOKEN]:Whe,[X.COMMENT_TOKEN]:H1,[X.DOCTYPE_TOKEN]:H1,[X.START_TAG_TOKEN]:H1,[X.END_TAG_TOKEN]:H1,[X.EOF_TOKEN]:H1},[VT]:{[X.CHARACTER_TOKEN]:Pv,[X.NULL_CHARACTER_TOKEN]:Dt,[X.WHITESPACE_CHARACTER_TOKEN]:$c,[X.COMMENT_TOKEN]:mr,[X.DOCTYPE_TOKEN]:Dt,[X.START_TAG_TOKEN]:Ghe,[X.END_TAG_TOKEN]:jhe,[X.EOF_TOKEN]:gl},[n0]:{[X.CHARACTER_TOKEN]:TE,[X.NULL_CHARACTER_TOKEN]:TE,[X.WHITESPACE_CHARACTER_TOKEN]:Js,[X.COMMENT_TOKEN]:mr,[X.DOCTYPE_TOKEN]:Dt,[X.START_TAG_TOKEN]:Khe,[X.END_TAG_TOKEN]:qhe,[X.EOF_TOKEN]:gl},[vo]:{[X.CHARACTER_TOKEN]:yl,[X.NULL_CHARACTER_TOKEN]:yl,[X.WHITESPACE_CHARACTER_TOKEN]:yl,[X.COMMENT_TOKEN]:mr,[X.DOCTYPE_TOKEN]:Dt,[X.START_TAG_TOKEN]:Xhe,[X.END_TAG_TOKEN]:Yhe,[X.EOF_TOKEN]:gl},[zl]:{[X.CHARACTER_TOKEN]:yl,[X.NULL_CHARACTER_TOKEN]:yl,[X.WHITESPACE_CHARACTER_TOKEN]:yl,[X.COMMENT_TOKEN]:mr,[X.DOCTYPE_TOKEN]:Dt,[X.START_TAG_TOKEN]:Qhe,[X.END_TAG_TOKEN]:Zhe,[X.EOF_TOKEN]:gl},[GT]:{[X.CHARACTER_TOKEN]:Pv,[X.NULL_CHARACTER_TOKEN]:Dt,[X.WHITESPACE_CHARACTER_TOKEN]:$c,[X.COMMENT_TOKEN]:mr,[X.DOCTYPE_TOKEN]:Dt,[X.START_TAG_TOKEN]:Jhe,[X.END_TAG_TOKEN]:efe,[X.EOF_TOKEN]:gl},[ON]:{[X.CHARACTER_TOKEN]:Js,[X.NULL_CHARACTER_TOKEN]:Dt,[X.WHITESPACE_CHARACTER_TOKEN]:Js,[X.COMMENT_TOKEN]:mr,[X.DOCTYPE_TOKEN]:Dt,[X.START_TAG_TOKEN]:b7,[X.END_TAG_TOKEN]:E7,[X.EOF_TOKEN]:gl},[$N]:{[X.CHARACTER_TOKEN]:Js,[X.NULL_CHARACTER_TOKEN]:Dt,[X.WHITESPACE_CHARACTER_TOKEN]:Js,[X.COMMENT_TOKEN]:mr,[X.DOCTYPE_TOKEN]:Dt,[X.START_TAG_TOKEN]:tfe,[X.END_TAG_TOKEN]:nfe,[X.EOF_TOKEN]:gl},[EE]:{[X.CHARACTER_TOKEN]:Pv,[X.NULL_CHARACTER_TOKEN]:Dt,[X.WHITESPACE_CHARACTER_TOKEN]:$c,[X.COMMENT_TOKEN]:mr,[X.DOCTYPE_TOKEN]:Dt,[X.START_TAG_TOKEN]:rfe,[X.END_TAG_TOKEN]:sfe,[X.EOF_TOKEN]:T7},[LN]:{[X.CHARACTER_TOKEN]:xE,[X.NULL_CHARACTER_TOKEN]:xE,[X.WHITESPACE_CHARACTER_TOKEN]:$c,[X.COMMENT_TOKEN]:Kde,[X.DOCTYPE_TOKEN]:Dt,[X.START_TAG_TOKEN]:ife,[X.END_TAG_TOKEN]:ofe,[X.EOF_TOKEN]:B1},[jT]:{[X.CHARACTER_TOKEN]:Dt,[X.NULL_CHARACTER_TOKEN]:Dt,[X.WHITESPACE_CHARACTER_TOKEN]:Js,[X.COMMENT_TOKEN]:mr,[X.DOCTYPE_TOKEN]:Dt,[X.START_TAG_TOKEN]:afe,[X.END_TAG_TOKEN]:lfe,[X.EOF_TOKEN]:B1},[g7]:{[X.CHARACTER_TOKEN]:Dt,[X.NULL_CHARACTER_TOKEN]:Dt,[X.WHITESPACE_CHARACTER_TOKEN]:Js,[X.COMMENT_TOKEN]:mr,[X.DOCTYPE_TOKEN]:Dt,[X.START_TAG_TOKEN]:ufe,[X.END_TAG_TOKEN]:cfe,[X.EOF_TOKEN]:B1},[y7]:{[X.CHARACTER_TOKEN]:Sb,[X.NULL_CHARACTER_TOKEN]:Sb,[X.WHITESPACE_CHARACTER_TOKEN]:$c,[X.COMMENT_TOKEN]:aF,[X.DOCTYPE_TOKEN]:Dt,[X.START_TAG_TOKEN]:dfe,[X.END_TAG_TOKEN]:Sb,[X.EOF_TOKEN]:B1},[v7]:{[X.CHARACTER_TOKEN]:Dt,[X.NULL_CHARACTER_TOKEN]:Dt,[X.WHITESPACE_CHARACTER_TOKEN]:$c,[X.COMMENT_TOKEN]:aF,[X.DOCTYPE_TOKEN]:Dt,[X.START_TAG_TOKEN]:hfe,[X.END_TAG_TOKEN]:Dt,[X.EOF_TOKEN]:B1}};class Bde{constructor(e){this.options=Rde(Ode,e),this.treeAdapter=this.options.treeAdapter,this.pendingScript=null,this.options.sourceCodeLocationInfo&&sF.install(this,Nde),this.options.onParseError&&sF.install(this,Ade,{onParseError:this.options.onParseError})}parse(e){const n=this.treeAdapter.createDocument();return this._bootstrap(n,null),this.tokenizer.write(e,!0),this._runParsingLoop(null),n}parseFragment(e,n){n||(n=this.treeAdapter.createElement(_.TEMPLATE,Pe.HTML,[]));const r=this.treeAdapter.createElement("documentmock",Pe.HTML,[]);this._bootstrap(r,n),this.treeAdapter.getTagName(n)===_.TEMPLATE&&this._pushTmplInsertionMode(EE),this._initTokenizerForFragmentParsing(),this._insertFakeRootElement(),this._resetInsertionMode(),this._findFormInFragmentContext(),this.tokenizer.write(e,!0),this._runParsingLoop(null);const s=this.treeAdapter.getFirstChild(r),i=this.treeAdapter.createDocumentFragment();return this._adoptNodes(s,i),i}_bootstrap(e,n){this.tokenizer=new X(this.options),this.stopped=!1,this.insertionMode=f7,this.originalInsertionMode="",this.document=e,this.fragmentContext=n,this.headElement=null,this.formElement=null,this.openElements=new Ide(this.document,this.treeAdapter),this.activeFormattingElements=new rF(this.treeAdapter),this.tmplInsertionModeStack=[],this.tmplInsertionModeStackTop=-1,this.currentTmplInsertionMode=null,this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1}_err(){}_runParsingLoop(e){for(;!this.stopped;){this._setupTokenizerCDATAMode();const n=this.tokenizer.getNextToken();if(n.type===X.HIBERNATION_TOKEN)break;if(this.skipNextNewLine&&(this.skipNextNewLine=!1,n.type===X.WHITESPACE_CHARACTER_TOKEN&&n.chars[0]===`
`)){if(n.chars.length===1)continue;n.chars=n.chars.substr(1)}if(this._processInputToken(n),e&&this.pendingScript)break}}runParsingLoopForCurrentChunk(e,n){if(this._runParsingLoop(n),n&&this.pendingScript){const r=this.pendingScript;this.pendingScript=null,n(r);return}e&&e()}_setupTokenizerCDATAMode(){const e=this._getAdjustedCurrentElement();this.tokenizer.allowCDATA=e&&e!==this.document&&this.treeAdapter.getNamespaceURI(e)!==Pe.HTML&&!this._isIntegrationPoint(e)}_switchToTextParsing(e,n){this._insertElement(e,Pe.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=bE}switchToPlaintextParsing(){this.insertionMode=bE,this.originalInsertionMode=Wa,this.tokenizer.state=X.MODE.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;do{if(this.treeAdapter.getTagName(e)===_.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}while(e)}_initTokenizerForFragmentParsing(){if(this.treeAdapter.getNamespaceURI(this.fragmentContext)===Pe.HTML){const e=this.treeAdapter.getTagName(this.fragmentContext);e===_.TITLE||e===_.TEXTAREA?this.tokenizer.state=X.MODE.RCDATA:e===_.STYLE||e===_.XMP||e===_.IFRAME||e===_.NOEMBED||e===_.NOFRAMES||e===_.NOSCRIPT?this.tokenizer.state=X.MODE.RAWTEXT:e===_.SCRIPT?this.tokenizer.state=X.MODE.SCRIPT_DATA:e===_.PLAINTEXT&&(this.tokenizer.state=X.MODE.PLAINTEXT)}}_setDocumentType(e){const n=e.name||"",r=e.publicId||"",s=e.systemId||"";this.treeAdapter.setDocumentType(this.document,n,r,s)}_attachElementToTree(e){if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const n=this.openElements.currentTmplContent||this.openElements.current;this.treeAdapter.appendChild(n,e)}}_appendElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r)}_insertElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r),this.openElements.push(r)}_insertFakeElement(e){const n=this.treeAdapter.createElement(e,Pe.HTML,[]);this._attachElementToTree(n),this.openElements.push(n)}_insertTemplate(e){const n=this.treeAdapter.createElement(e.tagName,Pe.HTML,e.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n),this.openElements.push(n)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(_.HTML,Pe.HTML,[]);this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e)}_appendCommentNode(e,n){const r=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(n,r)}_insertCharacters(e){if(this._shouldFosterParentOnInsertion())this._fosterParentText(e.chars);else{const n=this.openElements.currentTmplContent||this.openElements.current;this.treeAdapter.insertText(n,e.chars)}}_adoptNodes(e,n){for(let r=this.treeAdapter.getFirstChild(e);r;r=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_shouldProcessTokenInForeignContent(e){const n=this._getAdjustedCurrentElement();if(!n||n===this.document)return!1;const r=this.treeAdapter.getNamespaceURI(n);if(r===Pe.HTML||this.treeAdapter.getTagName(n)===_.ANNOTATION_XML&&r===Pe.MATHML&&e.type===X.START_TAG_TOKEN&&e.tagName===_.SVG)return!1;const s=e.type===X.CHARACTER_TOKEN||e.type===X.NULL_CHARACTER_TOKEN||e.type===X.WHITESPACE_CHARACTER_TOKEN;return(e.type===X.START_TAG_TOKEN&&e.tagName!==_.MGLYPH&&e.tagName!==_.MALIGNMARK||s)&&this._isIntegrationPoint(n,Pe.MATHML)||(e.type===X.START_TAG_TOKEN||s)&&this._isIntegrationPoint(n,Pe.HTML)?!1:e.type!==X.EOF_TOKEN}_processToken(e){oF[this.insertionMode][e.type](this,e)}_processTokenInBodyMode(e){oF[Wa][e.type](this,e)}_processTokenInForeignContent(e){e.type===X.CHARACTER_TOKEN?pfe(this,e):e.type===X.NULL_CHARACTER_TOKEN?ffe(this,e):e.type===X.WHITESPACE_CHARACTER_TOKEN?Js(this,e):e.type===X.COMMENT_TOKEN?mr(this,e):e.type===X.START_TAG_TOKEN?mfe(this,e):e.type===X.END_TAG_TOKEN&&gfe(this,e)}_processInputToken(e){this._shouldProcessTokenInForeignContent(e)?this._processTokenInForeignContent(e):this._processToken(e),e.type===X.START_TAG_TOKEN&&e.selfClosing&&!e.ackSelfClosing&&this._err(Zr.nonVoidHtmlElementStartTagWithTrailingSolidus)}_isIntegrationPoint(e,n){const r=this.treeAdapter.getTagName(e),s=this.treeAdapter.getNamespaceURI(e),i=this.treeAdapter.getAttrList(e);return Oa.isIntegrationPoint(r,s,i,n)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.length;if(e){let n=e,r=null;do if(n--,r=this.activeFormattingElements.entries[n],r.type===rF.MARKER_ENTRY||this.openElements.contains(r.element)){n++;break}while(n>0);for(let s=n;s<e;s++)r=this.activeFormattingElements.entries[s],this._insertElement(r.token,this.treeAdapter.getNamespaceURI(r.element)),r.element=this.openElements.current}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=zl}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(_.P),this.openElements.popUntilTagNamePopped(_.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop,n=!1;e>=0;e--){let r=this.openElements.items[e];e===0&&(n=!0,this.fragmentContext&&(r=this.fragmentContext));const s=this.treeAdapter.getTagName(r),i=Pde[s];if(i){this.insertionMode=i;break}else if(!n&&(s===_.TD||s===_.TH)){this.insertionMode=GT;break}else if(!n&&s===_.HEAD){this.insertionMode=np;break}else if(s===_.SELECT){this._resetInsertionModeForSelect(e);break}else if(s===_.TEMPLATE){this.insertionMode=this.currentTmplInsertionMode;break}else if(s===_.HTML){this.insertionMode=this.headElement?WT:UT;break}else if(n){this.insertionMode=Wa;break}}}_resetInsertionModeForSelect(e){if(e>0)for(let n=e-1;n>0;n--){const r=this.openElements.items[n],s=this.treeAdapter.getTagName(r);if(s===_.TEMPLATE)break;if(s===_.TABLE){this.insertionMode=$N;return}}this.insertionMode=ON}_pushTmplInsertionMode(e){this.tmplInsertionModeStack.push(e),this.tmplInsertionModeStackTop++,this.currentTmplInsertionMode=e}_popTmplInsertionMode(){this.tmplInsertionModeStack.pop(),this.tmplInsertionModeStackTop--,this.currentTmplInsertionMode=this.tmplInsertionModeStack[this.tmplInsertionModeStackTop]}_isElementCausesFosterParenting(e){const n=this.treeAdapter.getTagName(e);return n===_.TABLE||n===_.TBODY||n===_.TFOOT||n===_.THEAD||n===_.TR}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.current)}_findFosterParentingLocation(){const e={parent:null,beforeElement:null};for(let n=this.openElements.stackTop;n>=0;n--){const r=this.openElements.items[n],s=this.treeAdapter.getTagName(r),i=this.treeAdapter.getNamespaceURI(r);if(s===_.TEMPLATE&&i===Pe.HTML){e.parent=this.treeAdapter.getTemplateContent(r);break}else if(s===_.TABLE){e.parent=this.treeAdapter.getParentNode(r),e.parent?e.beforeElement=r:e.parent=this.openElements.items[n-1];break}}return e.parent||(e.parent=this.openElements.items[0]),e}_fosterParentElement(e){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,e,n.beforeElement):this.treeAdapter.appendChild(n.parent,e)}_fosterParentText(e){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertTextBefore(n.parent,e,n.beforeElement):this.treeAdapter.insertText(n.parent,e)}_isSpecialElement(e){const n=this.treeAdapter.getTagName(e),r=this.treeAdapter.getNamespaceURI(e);return Kd.SPECIAL_ELEMENTS[r][n]}}var zde=Bde;function Hde(t,e){let n=t.activeFormattingElements.getElementEntryInScopeWithTagName(e.tagName);return n?t.openElements.contains(n.element)?t.openElements.hasInScope(e.tagName)||(n=null):(t.activeFormattingElements.removeEntry(n),n=null):zo(t,e),n}function Ude(t,e){let n=null;for(let r=t.openElements.stackTop;r>=0;r--){const s=t.openElements.items[r];if(s===e.element)break;t._isSpecialElement(s)&&(n=s)}return n||(t.openElements.popUntilElementPopped(e.element),t.activeFormattingElements.removeEntry(e)),n}function Wde(t,e,n){let r=e,s=t.openElements.getCommonAncestor(e);for(let i=0,o=s;o!==n;i++,o=s){s=t.openElements.getCommonAncestor(o);const a=t.activeFormattingElements.getElementEntry(o),l=a&&i>=Lde;!a||l?(l&&t.activeFormattingElements.removeEntry(a),t.openElements.remove(o)):(o=Vde(t,a),r===e&&(t.activeFormattingElements.bookmark=a),t.treeAdapter.detachNode(r),t.treeAdapter.appendChild(o,r),r=o)}return r}function Vde(t,e){const n=t.treeAdapter.getNamespaceURI(e.element),r=t.treeAdapter.createElement(e.token.tagName,n,e.token.attrs);return t.openElements.replace(e.element,r),e.element=r,r}function Gde(t,e,n){if(t._isElementCausesFosterParenting(e))t._fosterParentElement(n);else{const r=t.treeAdapter.getTagName(e),s=t.treeAdapter.getNamespaceURI(e);r===_.TEMPLATE&&s===Pe.HTML&&(e=t.treeAdapter.getTemplateContent(e)),t.treeAdapter.appendChild(e,n)}}function jde(t,e,n){const r=t.treeAdapter.getNamespaceURI(n.element),s=n.token,i=t.treeAdapter.createElement(s.tagName,r,s.attrs);t._adoptNodes(e,i),t.treeAdapter.appendChild(e,i),t.activeFormattingElements.insertElementAfterBookmark(i,n.token),t.activeFormattingElements.removeEntry(n),t.openElements.remove(n.element),t.openElements.insertAfter(e,i)}function xu(t,e){let n;for(let r=0;r<$de&&(n=Hde(t,e),!!n);r++){const s=Ude(t,n);if(!s)break;t.activeFormattingElements.bookmark=n;const i=Wde(t,s,n.element),o=t.openElements.getCommonAncestor(n.element);t.treeAdapter.detachNode(i),Gde(t,o,i),jde(t,s,n)}}function Dt(){}function Lv(t){t._err(Zr.misplacedDoctype)}function mr(t,e){t._appendCommentNode(e,t.openElements.currentTmplContent||t.openElements.current)}function Kde(t,e){t._appendCommentNode(e,t.openElements.items[0])}function aF(t,e){t._appendCommentNode(e,t.document)}function Js(t,e){t._insertCharacters(e)}function B1(t){t.stopped=!0}function qde(t,e){t._setDocumentType(e);const n=e.forceQuirks?Kd.DOCUMENT_MODE.QUIRKS:iF.getDocumentMode(e);iF.isConforming(e)||t._err(Zr.nonConformingDoctype),t.treeAdapter.setDocumentMode(t.document,n),t.insertionMode=FN}function z1(t,e){t._err(Zr.missingDoctype,{beforeToken:!0}),t.treeAdapter.setDocumentMode(t.document,Kd.DOCUMENT_MODE.QUIRKS),t.insertionMode=FN,t._processToken(e)}function Xde(t,e){e.tagName===_.HTML?(t._insertElement(e,Pe.HTML),t.insertionMode=UT):wm(t,e)}function Yde(t,e){const n=e.tagName;(n===_.HTML||n===_.HEAD||n===_.BODY||n===_.BR)&&wm(t,e)}function wm(t,e){t._insertFakeRootElement(),t.insertionMode=UT,t._processToken(e)}function Qde(t,e){const n=e.tagName;n===_.HTML?vi(t,e):n===_.HEAD?(t._insertElement(e,Pe.HTML),t.headElement=t.openElements.current,t.insertionMode=np):_m(t,e)}function Zde(t,e){const n=e.tagName;n===_.HEAD||n===_.BODY||n===_.HTML||n===_.BR?_m(t,e):t._err(Zr.endTagWithoutMatchingOpenElement)}function _m(t,e){t._insertFakeElement(_.HEAD),t.headElement=t.openElements.current,t.insertionMode=np,t._processToken(e)}function Or(t,e){const n=e.tagName;n===_.HTML?vi(t,e):n===_.BASE||n===_.BASEFONT||n===_.BGSOUND||n===_.LINK||n===_.META?(t._appendElement(e,Pe.HTML),e.ackSelfClosing=!0):n===_.TITLE?t._switchToTextParsing(e,X.MODE.RCDATA):n===_.NOSCRIPT?t.options.scriptingEnabled?t._switchToTextParsing(e,X.MODE.RAWTEXT):(t._insertElement(e,Pe.HTML),t.insertionMode=p7):n===_.NOFRAMES||n===_.STYLE?t._switchToTextParsing(e,X.MODE.RAWTEXT):n===_.SCRIPT?t._switchToTextParsing(e,X.MODE.SCRIPT_DATA):n===_.TEMPLATE?(t._insertTemplate(e,Pe.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1,t.insertionMode=EE,t._pushTmplInsertionMode(EE)):n===_.HEAD?t._err(Zr.misplacedStartTagForHeadElement):km(t,e)}function qd(t,e){const n=e.tagName;n===_.HEAD?(t.openElements.pop(),t.insertionMode=WT):n===_.BODY||n===_.BR||n===_.HTML?km(t,e):n===_.TEMPLATE&&t.openElements.tmplCount>0?(t.openElements.generateImpliedEndTagsThoroughly(),t.openElements.currentTagName!==_.TEMPLATE&&t._err(Zr.closingOfElementWithOpenChildElements),t.openElements.popUntilTagNamePopped(_.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t._popTmplInsertionMode(),t._resetInsertionMode()):t._err(Zr.endTagWithoutMatchingOpenElement)}function km(t,e){t.openElements.pop(),t.insertionMode=WT,t._processToken(e)}function Jde(t,e){const n=e.tagName;n===_.HTML?vi(t,e):n===_.BASEFONT||n===_.BGSOUND||n===_.HEAD||n===_.LINK||n===_.META||n===_.NOFRAMES||n===_.STYLE?Or(t,e):n===_.NOSCRIPT?t._err(Zr.nestedNoscriptInHead):Im(t,e)}function ehe(t,e){const n=e.tagName;n===_.NOSCRIPT?(t.openElements.pop(),t.insertionMode=np):n===_.BR?Im(t,e):t._err(Zr.endTagWithoutMatchingOpenElement)}function Im(t,e){const n=e.type===X.EOF_TOKEN?Zr.openElementsLeftAfterEof:Zr.disallowedContentInNoscriptInHead;t._err(n),t.openElements.pop(),t.insertionMode=np,t._processToken(e)}function the(t,e){const n=e.tagName;n===_.HTML?vi(t,e):n===_.BODY?(t._insertElement(e,Pe.HTML),t.framesetOk=!1,t.insertionMode=Wa):n===_.FRAMESET?(t._insertElement(e,Pe.HTML),t.insertionMode=jT):n===_.BASE||n===_.BASEFONT||n===_.BGSOUND||n===_.LINK||n===_.META||n===_.NOFRAMES||n===_.SCRIPT||n===_.STYLE||n===_.TEMPLATE||n===_.TITLE?(t._err(Zr.abandonedHeadElementChild),t.openElements.push(t.headElement),Or(t,e),t.openElements.remove(t.headElement)):n===_.HEAD?t._err(Zr.misplacedStartTagForHeadElement):Nm(t,e)}function nhe(t,e){const n=e.tagName;n===_.BODY||n===_.HTML||n===_.BR?Nm(t,e):n===_.TEMPLATE?qd(t,e):t._err(Zr.endTagWithoutMatchingOpenElement)}function Nm(t,e){t._insertFakeElement(_.BODY),t.insertionMode=Wa,t._processToken(e)}function $c(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e)}function Pv(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e),t.framesetOk=!1}function rhe(t,e){t.openElements.tmplCount===0&&t.treeAdapter.adoptAttributes(t.openElements.items[0],e.attrs)}function she(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t.openElements.tmplCount===0&&(t.framesetOk=!1,t.treeAdapter.adoptAttributes(n,e.attrs))}function ihe(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();t.framesetOk&&n&&(t.treeAdapter.detachNode(n),t.openElements.popAllUpToHtmlElement(),t._insertElement(e,Pe.HTML),t.insertionMode=jT)}function ml(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Pe.HTML)}function ohe(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement();const n=t.openElements.currentTagName;(n===_.H1||n===_.H2||n===_.H3||n===_.H4||n===_.H5||n===_.H6)&&t.openElements.pop(),t._insertElement(e,Pe.HTML)}function lF(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Pe.HTML),t.skipNextNewLine=!0,t.framesetOk=!1}function ahe(t,e){const n=t.openElements.tmplCount>0;(!t.formElement||n)&&(t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Pe.HTML),n||(t.formElement=t.openElements.current))}function lhe(t,e){t.framesetOk=!1;const n=e.tagName;for(let r=t.openElements.stackTop;r>=0;r--){const s=t.openElements.items[r],i=t.treeAdapter.getTagName(s);let o=null;if(n===_.LI&&i===_.LI?o=_.LI:(n===_.DD||n===_.DT)&&(i===_.DD||i===_.DT)&&(o=i),o){t.openElements.generateImpliedEndTagsWithExclusion(o),t.openElements.popUntilTagNamePopped(o);break}if(i!==_.ADDRESS&&i!==_.DIV&&i!==_.P&&t._isSpecialElement(s))break}t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Pe.HTML)}function uhe(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Pe.HTML),t.tokenizer.state=X.MODE.PLAINTEXT}function che(t,e){t.openElements.hasInScope(_.BUTTON)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(_.BUTTON)),t._reconstructActiveFormattingElements(),t._insertElement(e,Pe.HTML),t.framesetOk=!1}function dhe(t,e){const n=t.activeFormattingElements.getElementEntryInScopeWithTagName(_.A);n&&(xu(t,e),t.openElements.remove(n.element),t.activeFormattingElements.removeEntry(n)),t._reconstructActiveFormattingElements(),t._insertElement(e,Pe.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function Sh(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Pe.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function hhe(t,e){t._reconstructActiveFormattingElements(),t.openElements.hasInScope(_.NOBR)&&(xu(t,e),t._reconstructActiveFormattingElements()),t._insertElement(e,Pe.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function uF(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Pe.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1}function fhe(t,e){t.treeAdapter.getDocumentMode(t.document)!==Kd.DOCUMENT_MODE.QUIRKS&&t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Pe.HTML),t.framesetOk=!1,t.insertionMode=fs}function Rh(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,Pe.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function phe(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,Pe.HTML);const n=X.getTokenAttr(e,d7.TYPE);(!n||n.toLowerCase()!==h7)&&(t.framesetOk=!1),e.ackSelfClosing=!0}function cF(t,e){t._appendElement(e,Pe.HTML),e.ackSelfClosing=!0}function mhe(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._appendElement(e,Pe.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function ghe(t,e){e.tagName=_.IMG,Rh(t,e)}function yhe(t,e){t._insertElement(e,Pe.HTML),t.skipNextNewLine=!0,t.tokenizer.state=X.MODE.RCDATA,t.originalInsertionMode=t.insertionMode,t.framesetOk=!1,t.insertionMode=bE}function vhe(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._reconstructActiveFormattingElements(),t.framesetOk=!1,t._switchToTextParsing(e,X.MODE.RAWTEXT)}function bhe(t,e){t.framesetOk=!1,t._switchToTextParsing(e,X.MODE.RAWTEXT)}function dF(t,e){t._switchToTextParsing(e,X.MODE.RAWTEXT)}function Ehe(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Pe.HTML),t.framesetOk=!1,t.insertionMode===fs||t.insertionMode===VT||t.insertionMode===vo||t.insertionMode===zl||t.insertionMode===GT?t.insertionMode=$N:t.insertionMode=ON}function hF(t,e){t.openElements.currentTagName===_.OPTION&&t.openElements.pop(),t._reconstructActiveFormattingElements(),t._insertElement(e,Pe.HTML)}function fF(t,e){t.openElements.hasInScope(_.RUBY)&&t.openElements.generateImpliedEndTags(),t._insertElement(e,Pe.HTML)}function The(t,e){t.openElements.hasInScope(_.RUBY)&&t.openElements.generateImpliedEndTagsWithExclusion(_.RTC),t._insertElement(e,Pe.HTML)}function xhe(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Pe.HTML)}function Che(t,e){t._reconstructActiveFormattingElements(),Oa.adjustTokenMathMLAttrs(e),Oa.adjustTokenXMLAttrs(e),e.selfClosing?t._appendElement(e,Pe.MATHML):t._insertElement(e,Pe.MATHML),e.ackSelfClosing=!0}function She(t,e){t._reconstructActiveFormattingElements(),Oa.adjustTokenSVGAttrs(e),Oa.adjustTokenXMLAttrs(e),e.selfClosing?t._appendElement(e,Pe.SVG):t._insertElement(e,Pe.SVG),e.ackSelfClosing=!0}function Yi(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Pe.HTML)}function vi(t,e){const n=e.tagName;switch(n.length){case 1:n===_.I||n===_.S||n===_.B||n===_.U?Sh(t,e):n===_.P?ml(t,e):n===_.A?dhe(t,e):Yi(t,e);break;case 2:n===_.DL||n===_.OL||n===_.UL?ml(t,e):n===_.H1||n===_.H2||n===_.H3||n===_.H4||n===_.H5||n===_.H6?ohe(t,e):n===_.LI||n===_.DD||n===_.DT?lhe(t,e):n===_.EM||n===_.TT?Sh(t,e):n===_.BR?Rh(t,e):n===_.HR?mhe(t,e):n===_.RB?fF(t,e):n===_.RT||n===_.RP?The(t,e):n!==_.TH&&n!==_.TD&&n!==_.TR&&Yi(t,e);break;case 3:n===_.DIV||n===_.DIR||n===_.NAV?ml(t,e):n===_.PRE?lF(t,e):n===_.BIG?Sh(t,e):n===_.IMG||n===_.WBR?Rh(t,e):n===_.XMP?vhe(t,e):n===_.SVG?She(t,e):n===_.RTC?fF(t,e):n!==_.COL&&Yi(t,e);break;case 4:n===_.HTML?rhe(t,e):n===_.BASE||n===_.LINK||n===_.META?Or(t,e):n===_.BODY?she(t,e):n===_.MAIN||n===_.MENU?ml(t,e):n===_.FORM?ahe(t,e):n===_.CODE||n===_.FONT?Sh(t,e):n===_.NOBR?hhe(t,e):n===_.AREA?Rh(t,e):n===_.MATH?Che(t,e):n===_.MENU?xhe(t,e):n!==_.HEAD&&Yi(t,e);break;case 5:n===_.STYLE||n===_.TITLE?Or(t,e):n===_.ASIDE?ml(t,e):n===_.SMALL?Sh(t,e):n===_.TABLE?fhe(t,e):n===_.EMBED?Rh(t,e):n===_.INPUT?phe(t,e):n===_.PARAM||n===_.TRACK?cF(t,e):n===_.IMAGE?ghe(t,e):n!==_.FRAME&&n!==_.TBODY&&n!==_.TFOOT&&n!==_.THEAD&&Yi(t,e);break;case 6:n===_.SCRIPT?Or(t,e):n===_.CENTER||n===_.FIGURE||n===_.FOOTER||n===_.HEADER||n===_.HGROUP||n===_.DIALOG?ml(t,e):n===_.BUTTON?che(t,e):n===_.STRIKE||n===_.STRONG?Sh(t,e):n===_.APPLET||n===_.OBJECT?uF(t,e):n===_.KEYGEN?Rh(t,e):n===_.SOURCE?cF(t,e):n===_.IFRAME?bhe(t,e):n===_.SELECT?Ehe(t,e):n===_.OPTION?hF(t,e):Yi(t,e);break;case 7:n===_.BGSOUND?Or(t,e):n===_.DETAILS||n===_.ADDRESS||n===_.ARTICLE||n===_.SECTION||n===_.SUMMARY?ml(t,e):n===_.LISTING?lF(t,e):n===_.MARQUEE?uF(t,e):n===_.NOEMBED?dF(t,e):n!==_.CAPTION&&Yi(t,e);break;case 8:n===_.BASEFONT?Or(t,e):n===_.FRAMESET?ihe(t,e):n===_.FIELDSET?ml(t,e):n===_.TEXTAREA?yhe(t,e):n===_.TEMPLATE?Or(t,e):n===_.NOSCRIPT?t.options.scriptingEnabled?dF(t,e):Yi(t,e):n===_.OPTGROUP?hF(t,e):n!==_.COLGROUP&&Yi(t,e);break;case 9:n===_.PLAINTEXT?uhe(t,e):Yi(t,e);break;case 10:n===_.BLOCKQUOTE||n===_.FIGCAPTION?ml(t,e):Yi(t,e);break;default:Yi(t,e)}}function whe(t){t.openElements.hasInScope(_.BODY)&&(t.insertionMode=LN)}function _he(t,e){t.openElements.hasInScope(_.BODY)&&(t.insertionMode=LN,t._processToken(e))}function pu(t,e){const n=e.tagName;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n))}function khe(t){const e=t.openElements.tmplCount>0,n=t.formElement;e||(t.formElement=null),(n||e)&&t.openElements.hasInScope(_.FORM)&&(t.openElements.generateImpliedEndTags(),e?t.openElements.popUntilTagNamePopped(_.FORM):t.openElements.remove(n))}function Ihe(t){t.openElements.hasInButtonScope(_.P)||t._insertFakeElement(_.P),t._closePElement()}function Nhe(t){t.openElements.hasInListItemScope(_.LI)&&(t.openElements.generateImpliedEndTagsWithExclusion(_.LI),t.openElements.popUntilTagNamePopped(_.LI))}function Ahe(t,e){const n=e.tagName;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTagsWithExclusion(n),t.openElements.popUntilTagNamePopped(n))}function Dhe(t){t.openElements.hasNumberedHeaderInScope()&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilNumberedHeaderPopped())}function pF(t,e){const n=e.tagName;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker())}function Rhe(t){t._reconstructActiveFormattingElements(),t._insertFakeElement(_.BR),t.openElements.pop(),t.framesetOk=!1}function zo(t,e){const n=e.tagName;for(let r=t.openElements.stackTop;r>0;r--){const s=t.openElements.items[r];if(t.treeAdapter.getTagName(s)===n){t.openElements.generateImpliedEndTagsWithExclusion(n),t.openElements.popUntilElementPopped(s);break}if(t._isSpecialElement(s))break}}function PN(t,e){const n=e.tagName;switch(n.length){case 1:n===_.A||n===_.B||n===_.I||n===_.S||n===_.U?xu(t,e):n===_.P?Ihe(t):zo(t,e);break;case 2:n===_.DL||n===_.UL||n===_.OL?pu(t,e):n===_.LI?Nhe(t):n===_.DD||n===_.DT?Ahe(t,e):n===_.H1||n===_.H2||n===_.H3||n===_.H4||n===_.H5||n===_.H6?Dhe(t):n===_.BR?Rhe(t):n===_.EM||n===_.TT?xu(t,e):zo(t,e);break;case 3:n===_.BIG?xu(t,e):n===_.DIR||n===_.DIV||n===_.NAV||n===_.PRE?pu(t,e):zo(t,e);break;case 4:n===_.BODY?whe(t):n===_.HTML?_he(t,e):n===_.FORM?khe(t):n===_.CODE||n===_.FONT||n===_.NOBR?xu(t,e):n===_.MAIN||n===_.MENU?pu(t,e):zo(t,e);break;case 5:n===_.ASIDE?pu(t,e):n===_.SMALL?xu(t,e):zo(t,e);break;case 6:n===_.CENTER||n===_.FIGURE||n===_.FOOTER||n===_.HEADER||n===_.HGROUP||n===_.DIALOG?pu(t,e):n===_.APPLET||n===_.OBJECT?pF(t,e):n===_.STRIKE||n===_.STRONG?xu(t,e):zo(t,e);break;case 7:n===_.ADDRESS||n===_.ARTICLE||n===_.DETAILS||n===_.SECTION||n===_.SUMMARY||n===_.LISTING?pu(t,e):n===_.MARQUEE?pF(t,e):zo(t,e);break;case 8:n===_.FIELDSET?pu(t,e):n===_.TEMPLATE?qd(t,e):zo(t,e);break;case 10:n===_.BLOCKQUOTE||n===_.FIGCAPTION?pu(t,e):zo(t,e);break;default:zo(t,e)}}function gl(t,e){t.tmplInsertionModeStackTop>-1?T7(t,e):t.stopped=!0}function Fhe(t,e){e.tagName===_.SCRIPT&&(t.pendingScript=t.openElements.current),t.openElements.pop(),t.insertionMode=t.originalInsertionMode}function Ohe(t,e){t._err(Zr.eofInElementThatCanContainOnlyText),t.openElements.pop(),t.insertionMode=t.originalInsertionMode,t._processToken(e)}function yl(t,e){const n=t.openElements.currentTagName;n===_.TABLE||n===_.TBODY||n===_.TFOOT||n===_.THEAD||n===_.TR?(t.pendingCharacterTokens=[],t.hasNonWhitespacePendingCharacterToken=!1,t.originalInsertionMode=t.insertionMode,t.insertionMode=m7,t._processToken(e)):to(t,e)}function $he(t,e){t.openElements.clearBackToTableContext(),t.activeFormattingElements.insertMarker(),t._insertElement(e,Pe.HTML),t.insertionMode=VT}function Lhe(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,Pe.HTML),t.insertionMode=n0}function Phe(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(_.COLGROUP),t.insertionMode=n0,t._processToken(e)}function Mhe(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,Pe.HTML),t.insertionMode=vo}function Bhe(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(_.TBODY),t.insertionMode=vo,t._processToken(e)}function zhe(t,e){t.openElements.hasInTableScope(_.TABLE)&&(t.openElements.popUntilTagNamePopped(_.TABLE),t._resetInsertionMode(),t._processToken(e))}function Hhe(t,e){const n=X.getTokenAttr(e,d7.TYPE);n&&n.toLowerCase()===h7?t._appendElement(e,Pe.HTML):to(t,e),e.ackSelfClosing=!0}function Uhe(t,e){!t.formElement&&t.openElements.tmplCount===0&&(t._insertElement(e,Pe.HTML),t.formElement=t.openElements.current,t.openElements.pop())}function MN(t,e){const n=e.tagName;switch(n.length){case 2:n===_.TD||n===_.TH||n===_.TR?Bhe(t,e):to(t,e);break;case 3:n===_.COL?Phe(t,e):to(t,e);break;case 4:n===_.FORM?Uhe(t,e):to(t,e);break;case 5:n===_.TABLE?zhe(t,e):n===_.STYLE?Or(t,e):n===_.TBODY||n===_.TFOOT||n===_.THEAD?Mhe(t,e):n===_.INPUT?Hhe(t,e):to(t,e);break;case 6:n===_.SCRIPT?Or(t,e):to(t,e);break;case 7:n===_.CAPTION?$he(t,e):to(t,e);break;case 8:n===_.COLGROUP?Lhe(t,e):n===_.TEMPLATE?Or(t,e):to(t,e);break;default:to(t,e)}}function BN(t,e){const n=e.tagName;n===_.TABLE?t.openElements.hasInTableScope(_.TABLE)&&(t.openElements.popUntilTagNamePopped(_.TABLE),t._resetInsertionMode()):n===_.TEMPLATE?qd(t,e):n!==_.BODY&&n!==_.CAPTION&&n!==_.COL&&n!==_.COLGROUP&&n!==_.HTML&&n!==_.TBODY&&n!==_.TD&&n!==_.TFOOT&&n!==_.TH&&n!==_.THEAD&&n!==_.TR&&to(t,e)}function to(t,e){const n=t.fosterParentingEnabled;t.fosterParentingEnabled=!0,t._processTokenInBodyMode(e),t.fosterParentingEnabled=n}function Whe(t,e){t.pendingCharacterTokens.push(e)}function Vhe(t,e){t.pendingCharacterTokens.push(e),t.hasNonWhitespacePendingCharacterToken=!0}function H1(t,e){let n=0;if(t.hasNonWhitespacePendingCharacterToken)for(;n<t.pendingCharacterTokens.length;n++)to(t,t.pendingCharacterTokens[n]);else for(;n<t.pendingCharacterTokens.length;n++)t._insertCharacters(t.pendingCharacterTokens[n]);t.insertionMode=t.originalInsertionMode,t._processToken(e)}function Ghe(t,e){const n=e.tagName;n===_.CAPTION||n===_.COL||n===_.COLGROUP||n===_.TBODY||n===_.TD||n===_.TFOOT||n===_.TH||n===_.THEAD||n===_.TR?t.openElements.hasInTableScope(_.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(_.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=fs,t._processToken(e)):vi(t,e)}function jhe(t,e){const n=e.tagName;n===_.CAPTION||n===_.TABLE?t.openElements.hasInTableScope(_.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(_.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=fs,n===_.TABLE&&t._processToken(e)):n!==_.BODY&&n!==_.COL&&n!==_.COLGROUP&&n!==_.HTML&&n!==_.TBODY&&n!==_.TD&&n!==_.TFOOT&&n!==_.TH&&n!==_.THEAD&&n!==_.TR&&PN(t,e)}function Khe(t,e){const n=e.tagName;n===_.HTML?vi(t,e):n===_.COL?(t._appendElement(e,Pe.HTML),e.ackSelfClosing=!0):n===_.TEMPLATE?Or(t,e):TE(t,e)}function qhe(t,e){const n=e.tagName;n===_.COLGROUP?t.openElements.currentTagName===_.COLGROUP&&(t.openElements.pop(),t.insertionMode=fs):n===_.TEMPLATE?qd(t,e):n!==_.COL&&TE(t,e)}function TE(t,e){t.openElements.currentTagName===_.COLGROUP&&(t.openElements.pop(),t.insertionMode=fs,t._processToken(e))}function Xhe(t,e){const n=e.tagName;n===_.TR?(t.openElements.clearBackToTableBodyContext(),t._insertElement(e,Pe.HTML),t.insertionMode=zl):n===_.TH||n===_.TD?(t.openElements.clearBackToTableBodyContext(),t._insertFakeElement(_.TR),t.insertionMode=zl,t._processToken(e)):n===_.CAPTION||n===_.COL||n===_.COLGROUP||n===_.TBODY||n===_.TFOOT||n===_.THEAD?t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=fs,t._processToken(e)):MN(t,e)}function Yhe(t,e){const n=e.tagName;n===_.TBODY||n===_.TFOOT||n===_.THEAD?t.openElements.hasInTableScope(n)&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=fs):n===_.TABLE?t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=fs,t._processToken(e)):(n!==_.BODY&&n!==_.CAPTION&&n!==_.COL&&n!==_.COLGROUP||n!==_.HTML&&n!==_.TD&&n!==_.TH&&n!==_.TR)&&BN(t,e)}function Qhe(t,e){const n=e.tagName;n===_.TH||n===_.TD?(t.openElements.clearBackToTableRowContext(),t._insertElement(e,Pe.HTML),t.insertionMode=GT,t.activeFormattingElements.insertMarker()):n===_.CAPTION||n===_.COL||n===_.COLGROUP||n===_.TBODY||n===_.TFOOT||n===_.THEAD||n===_.TR?t.openElements.hasInTableScope(_.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=vo,t._processToken(e)):MN(t,e)}function Zhe(t,e){const n=e.tagName;n===_.TR?t.openElements.hasInTableScope(_.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=vo):n===_.TABLE?t.openElements.hasInTableScope(_.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=vo,t._processToken(e)):n===_.TBODY||n===_.TFOOT||n===_.THEAD?(t.openElements.hasInTableScope(n)||t.openElements.hasInTableScope(_.TR))&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=vo,t._processToken(e)):(n!==_.BODY&&n!==_.CAPTION&&n!==_.COL&&n!==_.COLGROUP||n!==_.HTML&&n!==_.TD&&n!==_.TH)&&BN(t,e)}function Jhe(t,e){const n=e.tagName;n===_.CAPTION||n===_.COL||n===_.COLGROUP||n===_.TBODY||n===_.TD||n===_.TFOOT||n===_.TH||n===_.THEAD||n===_.TR?(t.openElements.hasInTableScope(_.TD)||t.openElements.hasInTableScope(_.TH))&&(t._closeTableCell(),t._processToken(e)):vi(t,e)}function efe(t,e){const n=e.tagName;n===_.TD||n===_.TH?t.openElements.hasInTableScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=zl):n===_.TABLE||n===_.TBODY||n===_.TFOOT||n===_.THEAD||n===_.TR?t.openElements.hasInTableScope(n)&&(t._closeTableCell(),t._processToken(e)):n!==_.BODY&&n!==_.CAPTION&&n!==_.COL&&n!==_.COLGROUP&&n!==_.HTML&&PN(t,e)}function b7(t,e){const n=e.tagName;n===_.HTML?vi(t,e):n===_.OPTION?(t.openElements.currentTagName===_.OPTION&&t.openElements.pop(),t._insertElement(e,Pe.HTML)):n===_.OPTGROUP?(t.openElements.currentTagName===_.OPTION&&t.openElements.pop(),t.openElements.currentTagName===_.OPTGROUP&&t.openElements.pop(),t._insertElement(e,Pe.HTML)):n===_.INPUT||n===_.KEYGEN||n===_.TEXTAREA||n===_.SELECT?t.openElements.hasInSelectScope(_.SELECT)&&(t.openElements.popUntilTagNamePopped(_.SELECT),t._resetInsertionMode(),n!==_.SELECT&&t._processToken(e)):(n===_.SCRIPT||n===_.TEMPLATE)&&Or(t,e)}function E7(t,e){const n=e.tagName;if(n===_.OPTGROUP){const r=t.openElements.items[t.openElements.stackTop-1],s=r&&t.treeAdapter.getTagName(r);t.openElements.currentTagName===_.OPTION&&s===_.OPTGROUP&&t.openElements.pop(),t.openElements.currentTagName===_.OPTGROUP&&t.openElements.pop()}else n===_.OPTION?t.openElements.currentTagName===_.OPTION&&t.openElements.pop():n===_.SELECT&&t.openElements.hasInSelectScope(_.SELECT)?(t.openElements.popUntilTagNamePopped(_.SELECT),t._resetInsertionMode()):n===_.TEMPLATE&&qd(t,e)}function tfe(t,e){const n=e.tagName;n===_.CAPTION||n===_.TABLE||n===_.TBODY||n===_.TFOOT||n===_.THEAD||n===_.TR||n===_.TD||n===_.TH?(t.openElements.popUntilTagNamePopped(_.SELECT),t._resetInsertionMode(),t._processToken(e)):b7(t,e)}function nfe(t,e){const n=e.tagName;n===_.CAPTION||n===_.TABLE||n===_.TBODY||n===_.TFOOT||n===_.THEAD||n===_.TR||n===_.TD||n===_.TH?t.openElements.hasInTableScope(n)&&(t.openElements.popUntilTagNamePopped(_.SELECT),t._resetInsertionMode(),t._processToken(e)):E7(t,e)}function rfe(t,e){const n=e.tagName;if(n===_.BASE||n===_.BASEFONT||n===_.BGSOUND||n===_.LINK||n===_.META||n===_.NOFRAMES||n===_.SCRIPT||n===_.STYLE||n===_.TEMPLATE||n===_.TITLE)Or(t,e);else{const r=Mde[n]||Wa;t._popTmplInsertionMode(),t._pushTmplInsertionMode(r),t.insertionMode=r,t._processToken(e)}}function sfe(t,e){e.tagName===_.TEMPLATE&&qd(t,e)}function T7(t,e){t.openElements.tmplCount>0?(t.openElements.popUntilTagNamePopped(_.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t._popTmplInsertionMode(),t._resetInsertionMode(),t._processToken(e)):t.stopped=!0}function ife(t,e){e.tagName===_.HTML?vi(t,e):xE(t,e)}function ofe(t,e){e.tagName===_.HTML?t.fragmentContext||(t.insertionMode=y7):xE(t,e)}function xE(t,e){t.insertionMode=Wa,t._processToken(e)}function afe(t,e){const n=e.tagName;n===_.HTML?vi(t,e):n===_.FRAMESET?t._insertElement(e,Pe.HTML):n===_.FRAME?(t._appendElement(e,Pe.HTML),e.ackSelfClosing=!0):n===_.NOFRAMES&&Or(t,e)}function lfe(t,e){e.tagName===_.FRAMESET&&!t.openElements.isRootHtmlElementCurrent()&&(t.openElements.pop(),!t.fragmentContext&&t.openElements.currentTagName!==_.FRAMESET&&(t.insertionMode=g7))}function ufe(t,e){const n=e.tagName;n===_.HTML?vi(t,e):n===_.NOFRAMES&&Or(t,e)}function cfe(t,e){e.tagName===_.HTML&&(t.insertionMode=v7)}function dfe(t,e){e.tagName===_.HTML?vi(t,e):Sb(t,e)}function Sb(t,e){t.insertionMode=Wa,t._processToken(e)}function hfe(t,e){const n=e.tagName;n===_.HTML?vi(t,e):n===_.NOFRAMES&&Or(t,e)}function ffe(t,e){e.chars=Fde.REPLACEMENT_CHARACTER,t._insertCharacters(e)}function pfe(t,e){t._insertCharacters(e),t.framesetOk=!1}function mfe(t,e){if(Oa.causesExit(e)&&!t.fragmentContext){for(;t.treeAdapter.getNamespaceURI(t.openElements.current)!==Pe.HTML&&!t._isIntegrationPoint(t.openElements.current);)t.openElements.pop();t._processToken(e)}else{const n=t._getAdjustedCurrentElement(),r=t.treeAdapter.getNamespaceURI(n);r===Pe.MATHML?Oa.adjustTokenMathMLAttrs(e):r===Pe.SVG&&(Oa.adjustTokenSVGTagName(e),Oa.adjustTokenSVGAttrs(e)),Oa.adjustTokenXMLAttrs(e),e.selfClosing?t._appendElement(e,r):t._insertElement(e,r),e.ackSelfClosing=!0}}function gfe(t,e){for(let n=t.openElements.stackTop;n>0;n--){const r=t.openElements.items[n];if(t.treeAdapter.getNamespaceURI(r)===Pe.HTML){t._processToken(e);break}if(t.treeAdapter.getTagName(r).toLowerCase()===e.tagName){t.openElements.popUntilElementPopped(r);break}}}const mF=/[#.]/g;function yfe(t,e){const n=t||"",r={};let s=0,i,o;for(;s<n.length;){mF.lastIndex=s;const a=mF.exec(n),l=n.slice(s,a?a.index:n.length);l&&(i?i==="#"?r.id=l:Array.isArray(r.className)?r.className.push(l):r.className=[l]:o=l,s+=l.length),a&&(i=a[0],s++)}return{type:"element",tagName:o||e||"div",properties:r,children:[]}}const vfe=new Set(["menu","submit","reset","button"]),H_={}.hasOwnProperty;function x7(t,e,n){const r=n&&xfe(n);return function(i,o,...a){let l=-1,u;if(i==null)u={type:"root",children:[]},a.unshift(o);else if(u=yfe(i,e),u.tagName=u.tagName.toLowerCase(),r&&H_.call(r,u.tagName)&&(u.tagName=r[u.tagName]),bfe(o,u.tagName)){let c;for(c in o)H_.call(o,c)&&Efe(t,u.properties,c,o[c])}else a.unshift(o);for(;++l<a.length;)U_(u.children,a[l]);return u.type==="element"&&u.tagName==="template"&&(u.content={type:"root",children:u.children},u.children=[]),u}}function bfe(t,e){return t==null||typeof t!="object"||Array.isArray(t)?!1:e==="input"||!t.type||typeof t.type!="string"?!0:"children"in t&&Array.isArray(t.children)?!1:e==="button"?vfe.has(t.type.toLowerCase()):!("value"in t)}function Efe(t,e,n,r){const s=$T(t,n);let i=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?s.spaceSeparated?o=W3(r):s.commaSeparated?o=V3(r):s.commaOrSpaceSeparated?o=W3(V3(r).join(" ")):o=gF(s,s.property,r):Array.isArray(r)?o=r.concat():o=s.property==="style"?Tfe(r):String(r);if(Array.isArray(o)){const a=[];for(;++i<o.length;)a[i]=gF(s,s.property,o[i]);o=a}s.property==="className"&&Array.isArray(e.className)&&(o=e.className.concat(o)),e[s.property]=o}}function U_(t,e){let n=-1;if(e!=null)if(typeof e=="string"||typeof e=="number")t.push({type:"text",value:String(e)});else if(Array.isArray(e))for(;++n<e.length;)U_(t,e[n]);else if(typeof e=="object"&&"type"in e)e.type==="root"?U_(t,e.children):t.push(e);else throw new Error("Expected node, nodes, or string, got `"+e+"`")}function gF(t,e,n){if(typeof n=="string"){if(t.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((t.boolean||t.overloadedBoolean)&&(n===""||ag(n)===ag(e)))return!0}return n}function Tfe(t){const e=[];let n;for(n in t)H_.call(t,n)&&e.push([n,t[n]].join(": "));return e.join("; ")}function xfe(t){const e={};let n=-1;for(;++n<t.length;)e[t[n].toLowerCase()]=t[n];return e}const Cfe=x7(jg,"div"),Sfe=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],wfe=x7(tp,"g",Sfe);function _fe(t){const e=String(t),n=[],r=/\r?\n|\r/g;for(;r.test(e);)n.push(r.lastIndex);return n.push(e.length+1),{toPoint:s,toOffset:i};function s(o){let a=-1;if(typeof o=="number"&&o>-1&&o<n[n.length-1]){for(;++a<n.length;)if(n[a]>o)return{line:a+1,column:o-(a>0?n[a-1]:0)+1,offset:o}}return{line:void 0,column:void 0,offset:void 0}}function i(o){const a=o&&o.line,l=o&&o.column;if(typeof a=="number"&&typeof l=="number"&&!Number.isNaN(a)&&!Number.isNaN(l)&&a-1 in n){const u=(n[a-2]||0)+l-1||0;if(u>-1&&u<n[n.length-1])return u}return-1}}const lg={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},C7={}.hasOwnProperty,kfe=Object.prototype;function Ife(t,e){const n=e||{};let r,s;return Dfe(n)?(s=n,r={}):(s=n.file||void 0,r=n),zN({schema:r.space==="svg"?tp:jg,file:s,verbose:r.verbose,location:!1},t)}function zN(t,e){let n;switch(e.nodeName){case"#comment":{const r=e;return n={type:"comment",value:r.data},wb(t,r,n),n}case"#document":case"#document-fragment":{const r=e,s="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:S7(t,e.childNodes),data:{quirksMode:s}},t.file&&t.location){const i=String(t.file),o=_fe(i),a=o.toPoint(0),l=o.toPoint(i.length);n.position={start:a,end:l}}return n}case"#documentType":{const r=e;return n={type:"doctype"},wb(t,r,n),n}case"#text":{const r=e;return n={type:"text",value:r.value},wb(t,r,n),n}default:return n=Nfe(t,e),n}}function S7(t,e){let n=-1;const r=[];for(;++n<e.length;)r[n]=zN(t,e[n]);return r}function Nfe(t,e){const n=t.schema;t.schema=e.namespaceURI===lg.svg?tp:jg;let r=-1;const s={};for(;++r<e.attrs.length;){const a=e.attrs[r],l=(a.prefix?a.prefix+":":"")+a.name;C7.call(kfe,l)||(s[l]=a.value)}const o=(t.schema.space==="svg"?wfe:Cfe)(e.tagName,s,S7(t,e.childNodes));if(wb(t,e,o),o.tagName==="template"){const a=e,l=a.sourceCodeLocation,u=l&&l.startTag&&Yh(l.startTag),c=l&&l.endTag&&Yh(l.endTag),d=zN(t,a.content);u&&c&&t.file&&(d.position={start:u.end,end:c.start}),o.content=d}return t.schema=n,o}function wb(t,e,n){if("sourceCodeLocation"in e&&e.sourceCodeLocation&&t.file){const r=Afe(t,n,e.sourceCodeLocation);r&&(t.location=!0,n.position=r)}}function Afe(t,e,n){const r=Yh(n);if(e.type==="element"){const s=e.children[e.children.length-1];if(r&&!n.endTag&&s&&s.position&&s.position.end&&(r.end=Object.assign({},s.position.end)),t.verbose){const i={};let o;if(n.attrs)for(o in n.attrs)C7.call(n.attrs,o)&&(i[$T(t.schema,o).property]=Yh(n.attrs[o]));e.data={position:{opening:Yh(n.startTag),closing:n.endTag?Yh(n.endTag):null,properties:i}}}}return r}function Yh(t){const e=yF({line:t.startLine,column:t.startCol,offset:t.startOffset}),n=yF({line:t.endLine,column:t.endCol,offset:t.endOffset});return e||n?{start:e,end:n}:void 0}function yF(t){return t.line&&t.column?t:void 0}function Dfe(t){return"messages"in t}const vF={}.hasOwnProperty;function w7(t,e){const n=e||{};function r(s,...i){let o=r.invalid;const a=r.handlers;if(s&&vF.call(s,t)){const l=String(s[t]);o=vF.call(a,l)?a[l]:r.unknown}if(o)return o.call(this,s,...i)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const Rfe={}.hasOwnProperty,_7=w7("type",{handlers:{root:Ofe,element:Bfe,text:Pfe,comment:Mfe,doctype:Lfe}});function Ffe(t,e){const n=e&&typeof e=="object"?e.space:e;return _7(t,n==="svg"?tp:jg)}function Ofe(t,e){const n={nodeName:"#document",mode:(t.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=HN(t.children,n,e),rp(t,n),n}function $fe(t,e){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=HN(t.children,n,e),rp(t,n),n}function Lfe(t){const e={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:void 0};return rp(t,e),e}function Pfe(t){const e={nodeName:"#text",value:t.value,parentNode:void 0};return rp(t,e),e}function Mfe(t){const e={nodeName:"#comment",data:t.value,parentNode:void 0};return rp(t,e),e}function Bfe(t,e){const n=e;let r=n;t.type==="element"&&t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=tp);const s=[];let i;if(t.properties){for(i in t.properties)if(i!=="children"&&Rfe.call(t.properties,i)){const a=zfe(r,i,t.properties[i]);a&&s.push(a)}}const o={nodeName:t.tagName,tagName:t.tagName,attrs:s,namespaceURI:lg[r.space],childNodes:[],parentNode:void 0};return o.childNodes=HN(t.children,o,r),rp(t,o),t.tagName==="template"&&t.content&&(o.content=$fe(t.content,r)),o}function zfe(t,e,n){const r=$T(t,e);if(n==null||n===!1||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?DM(n):AM(n));const s={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const i=s.name.indexOf(":");i<0?s.prefix="":(s.name=s.name.slice(i+1),s.prefix=r.attribute.slice(0,i)),s.namespace=lg[r.space]}return s}function HN(t,e,n){let r=-1;const s=[];if(t)for(;++r<t.length;){const i=_7(t[r],n);i.parentNode=e,s.push(i)}return s}function rp(t,e){const n=t.position;n&&n.start&&n.end&&(e.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const Hfe=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","isindex","keygen","link","menuitem","meta","nextid","param","source","track","wbr"],Ufe="IN_TEMPLATE_MODE",Wfe="DATA_STATE",Vfe="CHARACTER_TOKEN",Gfe="START_TAG_TOKEN",jfe="END_TAG_TOKEN",Kfe="COMMENT_TOKEN",qfe="DOCTYPE_TOKEN",Xfe={sourceCodeLocationInfo:!0,scriptingEnabled:!1},k7=function(t,e,n){let r=-1;const s=new zde(Xfe),i=w7("type",{handlers:{root:m,element:y,text:g,comment:E,doctype:v,raw:b},unknown:Jfe});let o,a,l,u,c;if(tpe(e)&&(n=e,e=void 0),n&&n.passThrough)for(;++r<n.passThrough.length;)i.handlers[n.passThrough[r]]=T;const d=Ife(epe(t)?f():h(),e);if(o&&kf(d,"comment",(C,S,N)=>{const I=C;if(I.value.stitch&&N!==null&&S!==null)return N.children[S]=I.value.stitch,S}),t.type!=="root"&&d.type==="root"&&d.children.length===1)return d.children[0];return d;function h(){const C={nodeName:"template",tagName:"template",attrs:[],namespaceURI:lg.html,childNodes:[]},S={nodeName:"documentmock",tagName:"documentmock",attrs:[],namespaceURI:lg.html,childNodes:[]},N={nodeName:"#document-fragment",childNodes:[]};if(s._bootstrap(S,C),s._pushTmplInsertionMode(Ufe),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),a=s.tokenizer,!a)throw new Error("Expected `tokenizer`");return l=a.preprocessor,c=a.__mixins[0],u=c.posTracker,i(t),x(),s._adoptNodes(S.childNodes[0],N),N}function f(){const C=s.treeAdapter.createDocument();if(s._bootstrap(C,void 0),a=s.tokenizer,!a)throw new Error("Expected `tokenizer`");return l=a.preprocessor,c=a.__mixins[0],u=c.posTracker,i(t),x(),C}function p(C){let S=-1;if(C)for(;++S<C.length;)i(C[S])}function m(C){p(C.children)}function y(C){x(),s._processInputToken(Yfe(C)),p(C.children),Hfe.includes(C.tagName)||(x(),s._processInputToken(Zfe(C)))}function g(C){x(),s._processInputToken({type:Vfe,chars:C.value,location:Qh(C)})}function v(C){x(),s._processInputToken({type:qfe,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:Qh(C)})}function E(C){x(),s._processInputToken({type:Kfe,data:C.value,location:Qh(C)})}function b(C){const S=RT(C),N=S.line||1,I=S.column||1,F=S.offset||0;if(!l)throw new Error("Expected `preprocessor`");if(!a)throw new Error("Expected `tokenizer`");if(!u)throw new Error("Expected `posTracker`");if(!c)throw new Error("Expected `locationTracker`");l.html=void 0,l.pos=-1,l.lastGapPos=-1,l.lastCharPos=-1,l.gapStack=[],l.skipNextNewLine=!1,l.lastChunkWritten=!1,l.endOfChunkHit=!1,u.isEol=!1,u.lineStartPos=-I+1,u.droppedBufferSize=F,u.offset=0,u.col=1,u.line=N,c.currentAttrLocation=void 0,c.ctLoc=Qh(C),a.write(C.value),s._runParsingLoop(null),(a.state==="NAMED_CHARACTER_REFERENCE_STATE"||a.state==="NUMERIC_CHARACTER_REFERENCE_END_STATE")&&(l.lastChunkWritten=!0,a[a.state](a._consume()))}function T(C){o=!0;let S;"children"in C?S={...C,children:k7({type:"root",children:C.children},e,n).children}:S={...C},E({type:"comment",value:{stitch:S}})}function x(){if(!a)throw new Error("Expected `tokenizer`");if(!u)throw new Error("Expected `posTracker`");const C=a.currentCharacterToken;C&&(C.location.endLine=u.line,C.location.endCol=u.col+1,C.location.endOffset=u.offset+1,s._processInputToken(C)),a.tokenQueue=[],a.state=Wfe,a.returnState="",a.charRefCode=-1,a.tempBuff=[],a.lastStartTagName="",a.consumedAfterSnapshot=-1,a.active=!1,a.currentCharacterToken=void 0,a.currentToken=void 0,a.currentAttr=void 0}};function Yfe(t){const e=Object.assign(Qh(t));return e.startTag=Object.assign({},e),{type:Gfe,tagName:t.tagName,selfClosing:!1,attrs:Qfe(t),location:e}}function Qfe(t){return Ffe({tagName:t.tagName,type:"element",properties:t.properties,children:[]}).attrs}function Zfe(t){const e=Object.assign(Qh(t));return e.startTag=Object.assign({},e),{type:jfe,tagName:t.tagName,attrs:[],location:e}}function Jfe(t){throw new Error("Cannot compile `"+t.type+"` node")}function epe(t){const e=t.type==="root"?t.children[0]:t;return Boolean(e&&(e.type==="doctype"||e.type==="element"&&e.tagName==="html"))}function Qh(t){const e=RT(t),n=wN(t);return{startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function tpe(t){return Boolean(t&&!("message"in t&&"messages"in t))}function npe(t={}){return(e,n)=>k7(e,n,t)}function rpe(){const t=["a","b","c","d","e","f","0","1","2","3","4","5","6","7","8","9"];let e=[];for(let n=0;n<36;n++)n===8||n===13||n===18||n===23?e[n]="-":e[n]=t[Math.ceil(Math.random()*t.length-1)];return e.join("")}var wi=rpe,spe=typeof global=="object"&&global&&global.Object===Object&&global;const I7=spe;var ipe=typeof self=="object"&&self&&self.Object===Object&&self,ope=I7||ipe||Function("return this")();const ol=ope;var ape=ol.Symbol;const If=ape;var N7=Object.prototype,lpe=N7.hasOwnProperty,upe=N7.toString,U1=If?If.toStringTag:void 0;function cpe(t){var e=lpe.call(t,U1),n=t[U1];try{t[U1]=void 0;var r=!0}catch{}var s=upe.call(t);return r&&(e?t[U1]=n:delete t[U1]),s}var dpe=Object.prototype,hpe=dpe.toString;function fpe(t){return hpe.call(t)}var ppe="[object Null]",mpe="[object Undefined]",bF=If?If.toStringTag:void 0;function r0(t){return t==null?t===void 0?mpe:ppe:bF&&bF in Object(t)?cpe(t):fpe(t)}function s0(t){return t!=null&&typeof t=="object"}var gpe=Array.isArray;const KT=gpe;function i0(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var ype="[object AsyncFunction]",vpe="[object Function]",bpe="[object GeneratorFunction]",Epe="[object Proxy]";function A7(t){if(!i0(t))return!1;var e=r0(t);return e==vpe||e==bpe||e==ype||e==Epe}var Tpe=ol["__core-js_shared__"];const jS=Tpe;var EF=function(){var t=/[^.]+$/.exec(jS&&jS.keys&&jS.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function xpe(t){return!!EF&&EF in t}var Cpe=Function.prototype,Spe=Cpe.toString;function Xd(t){if(t!=null){try{return Spe.call(t)}catch{}try{return t+""}catch{}}return""}var wpe=/[\\^$.*+?()[\]{}|]/g,_pe=/^\[object .+?Constructor\]$/,kpe=Function.prototype,Ipe=Object.prototype,Npe=kpe.toString,Ape=Ipe.hasOwnProperty,Dpe=RegExp("^"+Npe.call(Ape).replace(wpe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Rpe(t){if(!i0(t)||xpe(t))return!1;var e=A7(t)?Dpe:_pe;return e.test(Xd(t))}function Fpe(t,e){return t==null?void 0:t[e]}function Yd(t,e){var n=Fpe(t,e);return Rpe(n)?n:void 0}var Ope=Yd(ol,"WeakMap");const W_=Ope;var TF=Object.create,$pe=function(){function t(){}return function(e){if(!i0(e))return{};if(TF)return TF(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();const Lpe=$pe;function Ppe(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var Mpe=function(){try{var t=Yd(Object,"defineProperty");return t({},"",{}),t}catch{}}();const xF=Mpe;function Bpe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var zpe=9007199254740991,Hpe=/^(?:0|[1-9]\d*)$/;function Upe(t,e){var n=typeof t;return e=e??zpe,!!e&&(n=="number"||n!="symbol"&&Hpe.test(t))&&t>-1&&t%1==0&&t<e}function D7(t,e,n){e=="__proto__"&&xF?xF(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function R7(t,e){return t===e||t!==t&&e!==e}var Wpe=Object.prototype,Vpe=Wpe.hasOwnProperty;function F7(t,e,n){var r=t[e];(!(Vpe.call(t,e)&&R7(r,n))||n===void 0&&!(e in t))&&D7(t,e,n)}function qT(t,e,n,r){var s=!n;n||(n={});for(var i=-1,o=e.length;++i<o;){var a=e[i],l=r?r(n[a],t[a],a,n,t):void 0;l===void 0&&(l=t[a]),s?D7(n,a,l):F7(n,a,l)}return n}var Gpe=9007199254740991;function O7(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Gpe}function UN(t){return t!=null&&O7(t.length)&&!A7(t)}var jpe=Object.prototype;function XT(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||jpe;return t===n}function Kpe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var qpe="[object Arguments]";function CF(t){return s0(t)&&r0(t)==qpe}var $7=Object.prototype,Xpe=$7.hasOwnProperty,Ype=$7.propertyIsEnumerable,Qpe=CF(function(){return arguments}())?CF:function(t){return s0(t)&&Xpe.call(t,"callee")&&!Ype.call(t,"callee")};const L7=Qpe;function Zpe(){return!1}var P7=typeof Oi=="object"&&Oi&&!Oi.nodeType&&Oi,SF=P7&&typeof $i=="object"&&$i&&!$i.nodeType&&$i,Jpe=SF&&SF.exports===P7,wF=Jpe?ol.Buffer:void 0,e1e=wF?wF.isBuffer:void 0,t1e=e1e||Zpe;const WN=t1e;var n1e="[object Arguments]",r1e="[object Array]",s1e="[object Boolean]",i1e="[object Date]",o1e="[object Error]",a1e="[object Function]",l1e="[object Map]",u1e="[object Number]",c1e="[object Object]",d1e="[object RegExp]",h1e="[object Set]",f1e="[object String]",p1e="[object WeakMap]",m1e="[object ArrayBuffer]",g1e="[object DataView]",y1e="[object Float32Array]",v1e="[object Float64Array]",b1e="[object Int8Array]",E1e="[object Int16Array]",T1e="[object Int32Array]",x1e="[object Uint8Array]",C1e="[object Uint8ClampedArray]",S1e="[object Uint16Array]",w1e="[object Uint32Array]",Cn={};Cn[y1e]=Cn[v1e]=Cn[b1e]=Cn[E1e]=Cn[T1e]=Cn[x1e]=Cn[C1e]=Cn[S1e]=Cn[w1e]=!0;Cn[n1e]=Cn[r1e]=Cn[m1e]=Cn[s1e]=Cn[g1e]=Cn[i1e]=Cn[o1e]=Cn[a1e]=Cn[l1e]=Cn[u1e]=Cn[c1e]=Cn[d1e]=Cn[h1e]=Cn[f1e]=Cn[p1e]=!1;function _1e(t){return s0(t)&&O7(t.length)&&!!Cn[r0(t)]}function VN(t){return function(e){return t(e)}}var M7=typeof Oi=="object"&&Oi&&!Oi.nodeType&&Oi,Am=M7&&typeof $i=="object"&&$i&&!$i.nodeType&&$i,k1e=Am&&Am.exports===M7,KS=k1e&&I7.process,I1e=function(){try{var t=Am&&Am.require&&Am.require("util").types;return t||KS&&KS.binding&&KS.binding("util")}catch{}}();const Nf=I1e;var _F=Nf&&Nf.isTypedArray,N1e=_F?VN(_F):_1e;const B7=N1e;var A1e=Object.prototype,D1e=A1e.hasOwnProperty;function z7(t,e){var n=KT(t),r=!n&&L7(t),s=!n&&!r&&WN(t),i=!n&&!r&&!s&&B7(t),o=n||r||s||i,a=o?Kpe(t.length,String):[],l=a.length;for(var u in t)(e||D1e.call(t,u))&&!(o&&(u=="length"||s&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Upe(u,l)))&&a.push(u);return a}function H7(t,e){return function(n){return t(e(n))}}var R1e=H7(Object.keys,Object);const F1e=R1e;var O1e=Object.prototype,$1e=O1e.hasOwnProperty;function U7(t){if(!XT(t))return F1e(t);var e=[];for(var n in Object(t))$1e.call(t,n)&&n!="constructor"&&e.push(n);return e}function GN(t){return UN(t)?z7(t):U7(t)}function L1e(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var P1e=Object.prototype,M1e=P1e.hasOwnProperty;function B1e(t){if(!i0(t))return L1e(t);var e=XT(t),n=[];for(var r in t)r=="constructor"&&(e||!M1e.call(t,r))||n.push(r);return n}function jN(t){return UN(t)?z7(t,!0):B1e(t)}var z1e=Yd(Object,"create");const ug=z1e;function H1e(){this.__data__=ug?ug(null):{},this.size=0}function U1e(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var W1e="__lodash_hash_undefined__",V1e=Object.prototype,G1e=V1e.hasOwnProperty;function j1e(t){var e=this.__data__;if(ug){var n=e[t];return n===W1e?void 0:n}return G1e.call(e,t)?e[t]:void 0}var K1e=Object.prototype,q1e=K1e.hasOwnProperty;function X1e(t){var e=this.__data__;return ug?e[t]!==void 0:q1e.call(e,t)}var Y1e="__lodash_hash_undefined__";function Q1e(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ug&&e===void 0?Y1e:e,this}function _d(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}_d.prototype.clear=H1e;_d.prototype.delete=U1e;_d.prototype.get=j1e;_d.prototype.has=X1e;_d.prototype.set=Q1e;function Z1e(){this.__data__=[],this.size=0}function YT(t,e){for(var n=t.length;n--;)if(R7(t[n][0],e))return n;return-1}var J1e=Array.prototype,eme=J1e.splice;function tme(t){var e=this.__data__,n=YT(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():eme.call(e,n,1),--this.size,!0}function nme(t){var e=this.__data__,n=YT(e,t);return n<0?void 0:e[n][1]}function rme(t){return YT(this.__data__,t)>-1}function sme(t,e){var n=this.__data__,r=YT(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function Zl(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Zl.prototype.clear=Z1e;Zl.prototype.delete=tme;Zl.prototype.get=nme;Zl.prototype.has=rme;Zl.prototype.set=sme;var ime=Yd(ol,"Map");const cg=ime;function ome(){this.size=0,this.__data__={hash:new _d,map:new(cg||Zl),string:new _d}}function ame(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function QT(t,e){var n=t.__data__;return ame(e)?n[typeof e=="string"?"string":"hash"]:n.map}function lme(t){var e=QT(this,t).delete(t);return this.size-=e?1:0,e}function ume(t){return QT(this,t).get(t)}function cme(t){return QT(this,t).has(t)}function dme(t,e){var n=QT(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function sp(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}sp.prototype.clear=ome;sp.prototype.delete=lme;sp.prototype.get=ume;sp.prototype.has=cme;sp.prototype.set=dme;function W7(t,e){for(var n=-1,r=e.length,s=t.length;++n<r;)t[s+n]=e[n];return t}var hme=H7(Object.getPrototypeOf,Object);const V7=hme;function fme(){this.__data__=new Zl,this.size=0}function pme(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function mme(t){return this.__data__.get(t)}function gme(t){return this.__data__.has(t)}var yme=200;function vme(t,e){var n=this.__data__;if(n instanceof Zl){var r=n.__data__;if(!cg||r.length<yme-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new sp(r)}return n.set(t,e),this.size=n.size,this}function ip(t){var e=this.__data__=new Zl(t);this.size=e.size}ip.prototype.clear=fme;ip.prototype.delete=pme;ip.prototype.get=mme;ip.prototype.has=gme;ip.prototype.set=vme;function bme(t,e){return t&&qT(e,GN(e),t)}function Eme(t,e){return t&&qT(e,jN(e),t)}var G7=typeof Oi=="object"&&Oi&&!Oi.nodeType&&Oi,kF=G7&&typeof $i=="object"&&$i&&!$i.nodeType&&$i,Tme=kF&&kF.exports===G7,IF=Tme?ol.Buffer:void 0,NF=IF?IF.allocUnsafe:void 0;function xme(t,e){if(e)return t.slice();var n=t.length,r=NF?NF(n):new t.constructor(n);return t.copy(r),r}function Cme(t,e){for(var n=-1,r=t==null?0:t.length,s=0,i=[];++n<r;){var o=t[n];e(o,n,t)&&(i[s++]=o)}return i}function j7(){return[]}var Sme=Object.prototype,wme=Sme.propertyIsEnumerable,AF=Object.getOwnPropertySymbols,_me=AF?function(t){return t==null?[]:(t=Object(t),Cme(AF(t),function(e){return wme.call(t,e)}))}:j7;const KN=_me;function kme(t,e){return qT(t,KN(t),e)}var Ime=Object.getOwnPropertySymbols,Nme=Ime?function(t){for(var e=[];t;)W7(e,KN(t)),t=V7(t);return e}:j7;const K7=Nme;function Ame(t,e){return qT(t,K7(t),e)}function q7(t,e,n){var r=e(t);return KT(t)?r:W7(r,n(t))}function Dme(t){return q7(t,GN,KN)}function Rme(t){return q7(t,jN,K7)}var Fme=Yd(ol,"DataView");const V_=Fme;var Ome=Yd(ol,"Promise");const G_=Ome;var $me=Yd(ol,"Set");const j_=$me;var DF="[object Map]",Lme="[object Object]",RF="[object Promise]",FF="[object Set]",OF="[object WeakMap]",$F="[object DataView]",Pme=Xd(V_),Mme=Xd(cg),Bme=Xd(G_),zme=Xd(j_),Hme=Xd(W_),Uc=r0;(V_&&Uc(new V_(new ArrayBuffer(1)))!=$F||cg&&Uc(new cg)!=DF||G_&&Uc(G_.resolve())!=RF||j_&&Uc(new j_)!=FF||W_&&Uc(new W_)!=OF)&&(Uc=function(t){var e=r0(t),n=e==Lme?t.constructor:void 0,r=n?Xd(n):"";if(r)switch(r){case Pme:return $F;case Mme:return DF;case Bme:return RF;case zme:return FF;case Hme:return OF}return e});const ZT=Uc;var Ume=Object.prototype,Wme=Ume.hasOwnProperty;function Vme(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&Wme.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var Gme=ol.Uint8Array;const LF=Gme;function qN(t){var e=new t.constructor(t.byteLength);return new LF(e).set(new LF(t)),e}function jme(t,e){var n=e?qN(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var Kme=/\w*$/;function qme(t){var e=new t.constructor(t.source,Kme.exec(t));return e.lastIndex=t.lastIndex,e}var PF=If?If.prototype:void 0,MF=PF?PF.valueOf:void 0;function Xme(t){return MF?Object(MF.call(t)):{}}function Yme(t,e){var n=e?qN(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var Qme="[object Boolean]",Zme="[object Date]",Jme="[object Map]",ege="[object Number]",tge="[object RegExp]",nge="[object Set]",rge="[object String]",sge="[object Symbol]",ige="[object ArrayBuffer]",oge="[object DataView]",age="[object Float32Array]",lge="[object Float64Array]",uge="[object Int8Array]",cge="[object Int16Array]",dge="[object Int32Array]",hge="[object Uint8Array]",fge="[object Uint8ClampedArray]",pge="[object Uint16Array]",mge="[object Uint32Array]";function gge(t,e,n){var r=t.constructor;switch(e){case ige:return qN(t);case Qme:case Zme:return new r(+t);case oge:return jme(t,n);case age:case lge:case uge:case cge:case dge:case hge:case fge:case pge:case mge:return Yme(t,n);case Jme:return new r;case ege:case rge:return new r(t);case tge:return qme(t);case nge:return new r;case sge:return Xme(t)}}function yge(t){return typeof t.constructor=="function"&&!XT(t)?Lpe(V7(t)):{}}var vge="[object Map]";function bge(t){return s0(t)&&ZT(t)==vge}var BF=Nf&&Nf.isMap,Ege=BF?VN(BF):bge;const Tge=Ege;var xge="[object Set]";function Cge(t){return s0(t)&&ZT(t)==xge}var zF=Nf&&Nf.isSet,Sge=zF?VN(zF):Cge;const wge=Sge;var _ge=1,kge=2,Ige=4,X7="[object Arguments]",Nge="[object Array]",Age="[object Boolean]",Dge="[object Date]",Rge="[object Error]",Y7="[object Function]",Fge="[object GeneratorFunction]",Oge="[object Map]",$ge="[object Number]",Q7="[object Object]",Lge="[object RegExp]",Pge="[object Set]",Mge="[object String]",Bge="[object Symbol]",zge="[object WeakMap]",Hge="[object ArrayBuffer]",Uge="[object DataView]",Wge="[object Float32Array]",Vge="[object Float64Array]",Gge="[object Int8Array]",jge="[object Int16Array]",Kge="[object Int32Array]",qge="[object Uint8Array]",Xge="[object Uint8ClampedArray]",Yge="[object Uint16Array]",Qge="[object Uint32Array]",hn={};hn[X7]=hn[Nge]=hn[Hge]=hn[Uge]=hn[Age]=hn[Dge]=hn[Wge]=hn[Vge]=hn[Gge]=hn[jge]=hn[Kge]=hn[Oge]=hn[$ge]=hn[Q7]=hn[Lge]=hn[Pge]=hn[Mge]=hn[Bge]=hn[qge]=hn[Xge]=hn[Yge]=hn[Qge]=!0;hn[Rge]=hn[Y7]=hn[zge]=!1;function _b(t,e,n,r,s,i){var o,a=e&_ge,l=e&kge,u=e&Ige;if(n&&(o=s?n(t,r,s,i):n(t)),o!==void 0)return o;if(!i0(t))return t;var c=KT(t);if(c){if(o=Vme(t),!a)return Ppe(t,o)}else{var d=ZT(t),h=d==Y7||d==Fge;if(WN(t))return xme(t,a);if(d==Q7||d==X7||h&&!s){if(o=l||h?{}:yge(t),!a)return l?Ame(t,Eme(o,t)):kme(t,bme(o,t))}else{if(!hn[d])return s?t:{};o=gge(t,d,a)}}i||(i=new ip);var f=i.get(t);if(f)return f;i.set(t,o),wge(t)?t.forEach(function(y){o.add(_b(y,e,n,y,t,i))}):Tge(t)&&t.forEach(function(y,g){o.set(g,_b(y,e,n,g,t,i))});var p=u?l?Rme:Dme:l?jN:GN,m=c?void 0:p(t);return Bpe(m||t,function(y,g){m&&(g=y,y=t[g]),F7(o,g,_b(y,e,n,g,t,i))}),o}var Zge=1,Jge=4;function e0e(t){return _b(t,Zge|Jge)}var t0e="[object Map]",n0e="[object Set]",r0e=Object.prototype,s0e=r0e.hasOwnProperty;function W1(t){if(t==null)return!0;if(UN(t)&&(KT(t)||typeof t=="string"||typeof t.splice=="function"||WN(t)||B7(t)||L7(t)))return!t.length;var e=ZT(t);if(e==t0e||e==n0e)return!t.size;if(XT(t))return!U7(t).length;for(var n in t)if(s0e.call(t,n))return!1;return!0}/*! @license DOMPurify 3.0.8 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.8/LICENSE */const{entries:Z7,setPrototypeOf:HF,isFrozen:i0e,getPrototypeOf:o0e,getOwnPropertyDescriptor:XN}=Object;let{freeze:Ms,seal:oa,create:J7}=Object,{apply:K_,construct:q_}=typeof Reflect<"u"&&Reflect;Ms||(Ms=function(e){return e});oa||(oa=function(e){return e});K_||(K_=function(e,n,r){return e.apply(n,r)});q_||(q_=function(e,n){return new e(...n)});const Mv=Co(Array.prototype.forEach),UF=Co(Array.prototype.pop),V1=Co(Array.prototype.push),kb=Co(String.prototype.toLowerCase),qS=Co(String.prototype.toString),a0e=Co(String.prototype.match),G1=Co(String.prototype.replace),l0e=Co(String.prototype.indexOf),u0e=Co(String.prototype.trim),xi=Co(RegExp.prototype.test),j1=c0e(TypeError);function Co(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return K_(t,e,r)}}function c0e(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return q_(t,n)}}function _t(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:kb;HF&&HF(t,null);let r=e.length;for(;r--;){let s=e[r];if(typeof s=="string"){const i=n(s);i!==s&&(i0e(e)||(e[r]=i),s=i)}t[s]=!0}return t}function d0e(t){for(let e=0;e<t.length;e++)XN(t,e)===void 0&&(t[e]=null);return t}function Wc(t){const e=J7(null);for(const[n,r]of Z7(t))XN(t,n)!==void 0&&(Array.isArray(r)?e[n]=d0e(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=Wc(r):e[n]=r);return e}function Bv(t,e){for(;t!==null;){const r=XN(t,e);if(r){if(r.get)return Co(r.get);if(typeof r.value=="function")return Co(r.value)}t=o0e(t)}function n(r){return console.warn("fallback value for",r),null}return n}const WF=Ms(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),XS=Ms(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),YS=Ms(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),h0e=Ms(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),QS=Ms(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),f0e=Ms(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),VF=Ms(["#text"]),GF=Ms(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),ZS=Ms(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),jF=Ms(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),zv=Ms(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),p0e=oa(/\{\{[\w\W]*|[\w\W]*\}\}/gm),m0e=oa(/<%[\w\W]*|[\w\W]*%>/gm),g0e=oa(/\${[\w\W]*}/gm),y0e=oa(/^data-[\-\w.\u00B7-\uFFFF]/),v0e=oa(/^aria-[\-\w]+$/),eB=oa(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),b0e=oa(/^(?:\w+script|data):/i),E0e=oa(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),tB=oa(/^html$/i);var KF=Object.freeze({__proto__:null,MUSTACHE_EXPR:p0e,ERB_EXPR:m0e,TMPLIT_EXPR:g0e,DATA_ATTR:y0e,ARIA_ATTR:v0e,IS_ALLOWED_URI:eB,IS_SCRIPT_OR_DATA:b0e,ATTR_WHITESPACE:E0e,DOCTYPE_NAME:tB});const T0e=function(){return typeof window>"u"?null:window},x0e=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const s="data-tt-policy-suffix";n&&n.hasAttribute(s)&&(r=n.getAttribute(s));const i="dompurify"+(r?"#"+r:"");try{return e.createPolicy(i,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function nB(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:T0e();const e=oe=>nB(oe);if(e.version="3.0.8",e.removed=[],!t||!t.document||t.document.nodeType!==9)return e.isSupported=!1,e;let{document:n}=t;const r=n,s=r.currentScript,{DocumentFragment:i,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:u,NamedNodeMap:c=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:d,DOMParser:h,trustedTypes:f}=t,p=l.prototype,m=Bv(p,"cloneNode"),y=Bv(p,"nextSibling"),g=Bv(p,"childNodes"),v=Bv(p,"parentNode");if(typeof o=="function"){const oe=n.createElement("template");oe.content&&oe.content.ownerDocument&&(n=oe.content.ownerDocument)}let E,b="";const{implementation:T,createNodeIterator:x,createDocumentFragment:C,getElementsByTagName:S}=n,{importNode:N}=r;let I={};e.isSupported=typeof Z7=="function"&&typeof v=="function"&&T&&T.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:F,ERB_EXPR:L,TMPLIT_EXPR:z,DATA_ATTR:H,ARIA_ATTR:$,IS_SCRIPT_OR_DATA:M,ATTR_WHITESPACE:j}=KF;let{IS_ALLOWED_URI:P}=KF,B=null;const K=_t({},[...WF,...XS,...YS,...QS,...VF]);let A=null;const O=_t({},[...GF,...ZS,...jF,...zv]);let se=Object.seal(J7(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ae=null,de=null,le=!0,ve=!0,Ne=!1,_e=!0,Se=!1,Fe=!1,et=!1,ot=!1,dt=!1,at=!1,nt=!1,me=!0,Oe=!1;const Ge="user-content-";let Ye=!0,lt=!1,ft={},Ve=null;const dn=_t({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ln=null;const Nn=_t({},["audio","video","img","source","image","track"]);let ne=null;const fe=_t({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),De="http://www.w3.org/1998/Math/MathML",Qe="http://www.w3.org/2000/svg",ge="http://www.w3.org/1999/xhtml";let Bt=ge,Qt=!1,vn=null;const pt=_t({},[De,Qe,ge],qS);let Tt=null;const xt=["application/xhtml+xml","text/html"],$t="text/html";let He=null,rs=null;const fh=n.createElement("form"),Do=function(Y){return Y instanceof RegExp||Y instanceof Function},va=function(){let Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(rs&&rs===Y)){if((!Y||typeof Y!="object")&&(Y={}),Y=Wc(Y),Tt=xt.indexOf(Y.PARSER_MEDIA_TYPE)===-1?$t:Y.PARSER_MEDIA_TYPE,He=Tt==="application/xhtml+xml"?qS:kb,B="ALLOWED_TAGS"in Y?_t({},Y.ALLOWED_TAGS,He):K,A="ALLOWED_ATTR"in Y?_t({},Y.ALLOWED_ATTR,He):O,vn="ALLOWED_NAMESPACES"in Y?_t({},Y.ALLOWED_NAMESPACES,qS):pt,ne="ADD_URI_SAFE_ATTR"in Y?_t(Wc(fe),Y.ADD_URI_SAFE_ATTR,He):fe,Ln="ADD_DATA_URI_TAGS"in Y?_t(Wc(Nn),Y.ADD_DATA_URI_TAGS,He):Nn,Ve="FORBID_CONTENTS"in Y?_t({},Y.FORBID_CONTENTS,He):dn,ae="FORBID_TAGS"in Y?_t({},Y.FORBID_TAGS,He):{},de="FORBID_ATTR"in Y?_t({},Y.FORBID_ATTR,He):{},ft="USE_PROFILES"in Y?Y.USE_PROFILES:!1,le=Y.ALLOW_ARIA_ATTR!==!1,ve=Y.ALLOW_DATA_ATTR!==!1,Ne=Y.ALLOW_UNKNOWN_PROTOCOLS||!1,_e=Y.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Se=Y.SAFE_FOR_TEMPLATES||!1,Fe=Y.WHOLE_DOCUMENT||!1,dt=Y.RETURN_DOM||!1,at=Y.RETURN_DOM_FRAGMENT||!1,nt=Y.RETURN_TRUSTED_TYPE||!1,ot=Y.FORCE_BODY||!1,me=Y.SANITIZE_DOM!==!1,Oe=Y.SANITIZE_NAMED_PROPS||!1,Ye=Y.KEEP_CONTENT!==!1,lt=Y.IN_PLACE||!1,P=Y.ALLOWED_URI_REGEXP||eB,Bt=Y.NAMESPACE||ge,se=Y.CUSTOM_ELEMENT_HANDLING||{},Y.CUSTOM_ELEMENT_HANDLING&&Do(Y.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(se.tagNameCheck=Y.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Y.CUSTOM_ELEMENT_HANDLING&&Do(Y.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(se.attributeNameCheck=Y.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Y.CUSTOM_ELEMENT_HANDLING&&typeof Y.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(se.allowCustomizedBuiltInElements=Y.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Se&&(ve=!1),at&&(dt=!0),ft&&(B=_t({},VF),A=[],ft.html===!0&&(_t(B,WF),_t(A,GF)),ft.svg===!0&&(_t(B,XS),_t(A,ZS),_t(A,zv)),ft.svgFilters===!0&&(_t(B,YS),_t(A,ZS),_t(A,zv)),ft.mathMl===!0&&(_t(B,QS),_t(A,jF),_t(A,zv))),Y.ADD_TAGS&&(B===K&&(B=Wc(B)),_t(B,Y.ADD_TAGS,He)),Y.ADD_ATTR&&(A===O&&(A=Wc(A)),_t(A,Y.ADD_ATTR,He)),Y.ADD_URI_SAFE_ATTR&&_t(ne,Y.ADD_URI_SAFE_ATTR,He),Y.FORBID_CONTENTS&&(Ve===dn&&(Ve=Wc(Ve)),_t(Ve,Y.FORBID_CONTENTS,He)),Ye&&(B["#text"]=!0),Fe&&_t(B,["html","head","body"]),B.table&&(_t(B,["tbody"]),delete ae.tbody),Y.TRUSTED_TYPES_POLICY){if(typeof Y.TRUSTED_TYPES_POLICY.createHTML!="function")throw j1('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Y.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw j1('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');E=Y.TRUSTED_TYPES_POLICY,b=E.createHTML("")}else E===void 0&&(E=x0e(f,s)),E!==null&&typeof b=="string"&&(b=E.createHTML(""));Ms&&Ms(Y),rs=Y}},ul=_t({},["mi","mo","mn","ms","mtext"]),Nr=_t({},["foreignobject","desc","title","annotation-xml"]),Ki=_t({},["title","style","font","a","script"]),_c=_t({},[...XS,...YS,...h0e]),Wt=_t({},[...QS,...f0e]),rt=function(Y){let ue=v(Y);(!ue||!ue.tagName)&&(ue={namespaceURI:Bt,tagName:"template"});const Te=kb(Y.tagName),ht=kb(ue.tagName);return vn[Y.namespaceURI]?Y.namespaceURI===Qe?ue.namespaceURI===ge?Te==="svg":ue.namespaceURI===De?Te==="svg"&&(ht==="annotation-xml"||ul[ht]):Boolean(_c[Te]):Y.namespaceURI===De?ue.namespaceURI===ge?Te==="math":ue.namespaceURI===Qe?Te==="math"&&Nr[ht]:Boolean(Wt[Te]):Y.namespaceURI===ge?ue.namespaceURI===Qe&&!Nr[ht]||ue.namespaceURI===De&&!ul[ht]?!1:!Wt[Te]&&(Ki[Te]||!_c[Te]):!!(Tt==="application/xhtml+xml"&&vn[Y.namespaceURI]):!1},Zn=function(Y){V1(e.removed,{element:Y});try{Y.parentNode.removeChild(Y)}catch{Y.remove()}},qi=function(Y,ue){try{V1(e.removed,{attribute:ue.getAttributeNode(Y),from:ue})}catch{V1(e.removed,{attribute:null,from:ue})}if(ue.removeAttribute(Y),Y==="is"&&!A[Y])if(dt||at)try{Zn(ue)}catch{}else try{ue.setAttribute(Y,"")}catch{}},Ro=function(Y){let ue=null,Te=null;if(ot)Y="<remove></remove>"+Y;else{const st=a0e(Y,/^[\r\n\t ]+/);Te=st&&st[0]}Tt==="application/xhtml+xml"&&Bt===ge&&(Y='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Y+"</body></html>");const ht=E?E.createHTML(Y):Y;if(Bt===ge)try{ue=new h().parseFromString(ht,Tt)}catch{}if(!ue||!ue.documentElement){ue=T.createDocument(Bt,"template",null);try{ue.documentElement.innerHTML=Qt?b:ht}catch{}}const zt=ue.body||ue.documentElement;return Y&&Te&&zt.insertBefore(n.createTextNode(Te),zt.childNodes[0]||null),Bt===ge?S.call(ue,Fe?"html":"body")[0]:Fe?ue.documentElement:zt},Ar=function(Y){return x.call(Y.ownerDocument||Y,Y,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,null)},p2=function(Y){return Y instanceof d&&(typeof Y.nodeName!="string"||typeof Y.textContent!="string"||typeof Y.removeChild!="function"||!(Y.attributes instanceof c)||typeof Y.removeAttribute!="function"||typeof Y.setAttribute!="function"||typeof Y.namespaceURI!="string"||typeof Y.insertBefore!="function"||typeof Y.hasChildNodes!="function")},y1=function(Y){return typeof a=="function"&&Y instanceof a},Xi=function(Y,ue,Te){I[Y]&&Mv(I[Y],ht=>{ht.call(e,ue,Te,rs)})},ph=function(Y){let ue=null;if(Xi("beforeSanitizeElements",Y,null),p2(Y))return Zn(Y),!0;const Te=He(Y.nodeName);if(Xi("uponSanitizeElement",Y,{tagName:Te,allowedTags:B}),Y.hasChildNodes()&&!y1(Y.firstElementChild)&&xi(/<[/\w]/g,Y.innerHTML)&&xi(/<[/\w]/g,Y.textContent))return Zn(Y),!0;if(!B[Te]||ae[Te]){if(!ae[Te]&&kc(Te)&&(se.tagNameCheck instanceof RegExp&&xi(se.tagNameCheck,Te)||se.tagNameCheck instanceof Function&&se.tagNameCheck(Te)))return!1;if(Ye&&!Ve[Te]){const ht=v(Y)||Y.parentNode,zt=g(Y)||Y.childNodes;if(zt&&ht){const st=zt.length;for(let Zt=st-1;Zt>=0;--Zt)ht.insertBefore(m(zt[Zt],!0),y(Y))}}return Zn(Y),!0}return Y instanceof l&&!rt(Y)||(Te==="noscript"||Te==="noembed"||Te==="noframes")&&xi(/<\/no(script|embed|frames)/i,Y.innerHTML)?(Zn(Y),!0):(Se&&Y.nodeType===3&&(ue=Y.textContent,Mv([F,L,z],ht=>{ue=G1(ue,ht," ")}),Y.textContent!==ue&&(V1(e.removed,{element:Y.cloneNode()}),Y.textContent=ue)),Xi("afterSanitizeElements",Y,null),!1)},v1=function(Y,ue,Te){if(me&&(ue==="id"||ue==="name")&&(Te in n||Te in fh))return!1;if(!(ve&&!de[ue]&&xi(H,ue))){if(!(le&&xi($,ue))){if(!A[ue]||de[ue]){if(!(kc(Y)&&(se.tagNameCheck instanceof RegExp&&xi(se.tagNameCheck,Y)||se.tagNameCheck instanceof Function&&se.tagNameCheck(Y))&&(se.attributeNameCheck instanceof RegExp&&xi(se.attributeNameCheck,ue)||se.attributeNameCheck instanceof Function&&se.attributeNameCheck(ue))||ue==="is"&&se.allowCustomizedBuiltInElements&&(se.tagNameCheck instanceof RegExp&&xi(se.tagNameCheck,Te)||se.tagNameCheck instanceof Function&&se.tagNameCheck(Te))))return!1}else if(!ne[ue]){if(!xi(P,G1(Te,j,""))){if(!((ue==="src"||ue==="xlink:href"||ue==="href")&&Y!=="script"&&l0e(Te,"data:")===0&&Ln[Y])){if(!(Ne&&!xi(M,G1(Te,j,"")))){if(Te)return!1}}}}}}return!0},kc=function(Y){return Y.indexOf("-")>0},jy=function(Y){Xi("beforeSanitizeAttributes",Y,null);const{attributes:ue}=Y;if(!ue)return;const Te={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:A};let ht=ue.length;for(;ht--;){const zt=ue[ht],{name:st,namespaceURI:Zt,value:Ht}=zt,pr=He(st);let bn=st==="value"?Ht:u0e(Ht);if(Te.attrName=pr,Te.attrValue=bn,Te.keepAttr=!0,Te.forceKeepAttr=void 0,Xi("uponSanitizeAttribute",Y,Te),bn=Te.attrValue,Te.forceKeepAttr||(qi(st,Y),!Te.keepAttr))continue;if(!_e&&xi(/\/>/i,bn)){qi(st,Y);continue}Se&&Mv([F,L,z],Ic=>{bn=G1(bn,Ic," ")});const ba=He(Y.nodeName);if(v1(ba,pr,bn)){if(Oe&&(pr==="id"||pr==="name")&&(qi(st,Y),bn=Ge+bn),E&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!Zt)switch(f.getAttributeType(ba,pr)){case"TrustedHTML":{bn=E.createHTML(bn);break}case"TrustedScriptURL":{bn=E.createScriptURL(bn);break}}try{Zt?Y.setAttributeNS(Zt,st,bn):Y.setAttribute(st,bn),UF(e.removed)}catch{}}}Xi("afterSanitizeAttributes",Y,null)},m2=function oe(Y){let ue=null;const Te=Ar(Y);for(Xi("beforeSanitizeShadowDOM",Y,null);ue=Te.nextNode();)Xi("uponSanitizeShadowNode",ue,null),!ph(ue)&&(ue.content instanceof i&&oe(ue.content),jy(ue));Xi("afterSanitizeShadowDOM",Y,null)};return e.sanitize=function(oe){let Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ue=null,Te=null,ht=null,zt=null;if(Qt=!oe,Qt&&(oe="<!-->"),typeof oe!="string"&&!y1(oe))if(typeof oe.toString=="function"){if(oe=oe.toString(),typeof oe!="string")throw j1("dirty is not a string, aborting")}else throw j1("toString is not a function");if(!e.isSupported)return oe;if(et||va(Y),e.removed=[],typeof oe=="string"&&(lt=!1),lt){if(oe.nodeName){const Ht=He(oe.nodeName);if(!B[Ht]||ae[Ht])throw j1("root node is forbidden and cannot be sanitized in-place")}}else if(oe instanceof a)ue=Ro("<!---->"),Te=ue.ownerDocument.importNode(oe,!0),Te.nodeType===1&&Te.nodeName==="BODY"||Te.nodeName==="HTML"?ue=Te:ue.appendChild(Te);else{if(!dt&&!Se&&!Fe&&oe.indexOf("<")===-1)return E&&nt?E.createHTML(oe):oe;if(ue=Ro(oe),!ue)return dt?null:nt?b:""}ue&&ot&&Zn(ue.firstChild);const st=Ar(lt?oe:ue);for(;ht=st.nextNode();)ph(ht)||(ht.content instanceof i&&m2(ht.content),jy(ht));if(lt)return oe;if(dt){if(at)for(zt=C.call(ue.ownerDocument);ue.firstChild;)zt.appendChild(ue.firstChild);else zt=ue;return(A.shadowroot||A.shadowrootmode)&&(zt=N.call(r,zt,!0)),zt}let Zt=Fe?ue.outerHTML:ue.innerHTML;return Fe&&B["!doctype"]&&ue.ownerDocument&&ue.ownerDocument.doctype&&ue.ownerDocument.doctype.name&&xi(tB,ue.ownerDocument.doctype.name)&&(Zt="<!DOCTYPE "+ue.ownerDocument.doctype.name+`>
`+Zt),Se&&Mv([F,L,z],Ht=>{Zt=G1(Zt,Ht," ")}),E&&nt?E.createHTML(Zt):Zt},e.setConfig=function(){let oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};va(oe),et=!0},e.clearConfig=function(){rs=null,et=!1},e.isValidAttribute=function(oe,Y,ue){rs||va({});const Te=He(oe),ht=He(Y);return v1(Te,ht,ue)},e.addHook=function(oe,Y){typeof Y=="function"&&(I[oe]=I[oe]||[],V1(I[oe],Y))},e.removeHook=function(oe){if(I[oe])return UF(I[oe])},e.removeHooks=function(oe){I[oe]&&(I[oe]=[])},e.removeAllHooks=function(){I={}},e}var rB=nB();const C0e="_container_n5nsr_1",S0e="_chatRoot_n5nsr_8",w0e="_chatContainer_n5nsr_18",_0e="_chatEmptyState_n5nsr_30",k0e="_chatEmptyStateTitle_n5nsr_38",I0e="_chatEmptyStateSubtitle_n5nsr_50",N0e="_chatIcon_n5nsr_62",A0e="_chatMessageStream_n5nsr_67",D0e="_chatMessageUser_n5nsr_79",R0e="_chatMessageUserMessage_n5nsr_85",F0e="_chatMessageGpt_n5nsr_103",O0e="_chatMessageError_n5nsr_109",$0e="_chatMessageErrorContent_n5nsr_121",L0e="_chatInput_n5nsr_133",P0e="_clearChatBroom_n5nsr_146",M0e="_clearChatBroomNoCosmos_n5nsr_162",B0e="_newChatIcon_n5nsr_178",z0e="_stopGeneratingContainer_n5nsr_194",H0e="_stopGeneratingIcon_n5nsr_211",U0e="_stopGeneratingText_n5nsr_217",W0e="_citationPanel_n5nsr_232",V0e="_citationPanelHeaderContainer_n5nsr_250",G0e="_citationPanelHeader_n5nsr_250",j0e="_citationPanelDismiss_n5nsr_265",K0e="_citationPanelTitle_n5nsr_276",q0e="_citationPanelContent_n5nsr_291",X0e="_viewSourceButton_n5nsr_308",Jt={container:C0e,chatRoot:S0e,chatContainer:w0e,chatEmptyState:_0e,chatEmptyStateTitle:k0e,chatEmptyStateSubtitle:I0e,chatIcon:N0e,chatMessageStream:A0e,chatMessageUser:D0e,chatMessageUserMessage:R0e,chatMessageGpt:F0e,chatMessageError:O0e,chatMessageErrorContent:$0e,chatInput:L0e,clearChatBroom:P0e,clearChatBroomNoCosmos:M0e,newChatIcon:B0e,stopGeneratingContainer:z0e,stopGeneratingIcon:H0e,stopGeneratingText:U0e,citationPanel:W0e,citationPanelHeaderContainer:V0e,citationPanelHeader:G0e,citationPanelDismiss:j0e,citationPanelTitle:K0e,citationPanelContent:q0e,viewSourceButton:X0e},sB=["iframe","a","img","svg","h1","h2","h3","h4","h5","h6","div","p","span","small","del","img","pictrue","embed","video","audio","i","u","sup","sub","strong","strike","code","pre","body","section","article","footer","table","tr","td","th","thead","tbody","tfooter","ul","ol","li"];var CE={},Y0e={get exports(){return CE},set exports(t){CE=t}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q0e=1e-7,Z0e=1e-4;class YN{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class JT{refCount(e){return Ys("refCount")}incRef(e){return Ys("incRef")}timerAvailable(){return!0}time(e){return Ys("time")}read(e){return Ys("read")}readSync(e){return Ys("readSync")}readToGPU(e,n){return Ys("readToGPU")}numDataIds(){return Ys("numDataIds")}disposeData(e,n){return Ys("disposeData")}write(e,n,r){return Ys("write")}move(e,n,r,s,i){return Ys("move")}createTensorFromGPUData(e,n,r){return Ys("createTensorFromGPUData")}memory(){return Ys("memory")}floatPrecision(){return Ys("floatPrecision")}epsilon(){return this.floatPrecision()===32?Q0e:Z0e}dispose(){return Ys("dispose")}}function Ys(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QN(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,_l(t,e,n)}function J0e(t,e){if(t.length!==e.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${e.length}`);let n=t.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,_l(t,n,r),_l(e,n,r)}function Xu(t,e,n){return Math.max(t,Math.min(e,n))}function ex(t){return t%2===0?t:t+1}function _l(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function iB(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function eye(t,e){const n=Math.random();return e*n+(1-n)*t}function tye(t,e){let n=0;for(let r=0;r<t.length;r++){const s=Number(t[r])-Number(e[r]);n+=s*s}return n}function D(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function Hr(t,e,n=""){D(Et(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function Qd(t){D(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function re(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function nye(t){return t.length===0}function oB(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==null&&e[n]!==null&&t[n]!==e[n])return!1;return!0}function Et(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function kd(t){return t%1===0}function rye(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{const e=Math.exp(2*t);return(e-1)/(e+1)}}function SE(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function sye(t){const e=new Uint32Array(t);for(let n=0;n<t;++n)e[n]=n;return QN(e),e}function hd(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function X_(t,e=s=>0,n,r){return new Promise((s,i)=>{let o=0;const a=()=>{if(t()){s();return}o++;const l=e(o);if(n!=null&&o>=n){i();return}r!=null?r(a,l):setTimeout(a,l)};a()})}function ZN(t,e){let n=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const s=t.slice();return s[r]=e/n,s}function yt(t,e){const n=e.length;return t=t==null?e.map((r,s)=>s):[].concat(t),D(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),D(t.every(r=>kd(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function Jl(t,e){const n=[],r=[],s=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||s?null:yt(e,t).sort();let o=0;for(let a=0;a<t.length;++a){if(i!=null){if(i[o]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(i[o]==null||i[o]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),i[o]<=a&&o++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function xr(t,e){return Bn(t,e)}function Bn(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function aB(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function lB(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function JN(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function dg(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function uB(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function Pa(t){return typeof t=="string"||t instanceof String}function cB(t){return typeof t=="boolean"}function wE(t){return typeof t=="number"}function Zd(t){return Array.isArray(t)?Zd(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":wE(t)?"float32":Pa(t)?"string":cB(t)?"bool":"float32"}function Yu(t){return!!(t&&t.constructor&&t.call&&t.apply)}function _E(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function Ue(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function dB(t,e,n,r=!1){const s=new Array;if(e.length===1){const i=e[0]*(r?2:1);for(let o=0;o<i;o++)s[o]=n[t+o]}else{const i=e[0],o=e.slice(1),a=o.reduce((l,u)=>l*u)*(r?2:1);for(let l=0;l<i;l++)s[l]=dB(t+l*a,o,n,r)}return s}function Mi(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((s,i)=>s*i)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return dB(0,t,e,n)}function hB(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function tx(t,e){const n=zr(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function zr(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function e9(t,e){const n=t.reduce((r,s)=>r*s,1);if(e==null||e==="float32")return Mi(t,new Float32Array(n));if(e==="int32")return Mi(t,new Int32Array(n));if(e==="bool")return Mi(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function bi(t){t.forEach(e=>{D(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function ta(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let s=0;s<t.length-1;++s)r+=n[s]*t[s];return r}function Jd(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let s=0;s<r.length-1;++s)r[s]=Math.floor(t/n[s]),t-=r[s]*n[s];return r[r.length-1]=t,r}function Qu(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qF="tfjsflags";class fB{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=iye,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(ee().getBool("IS_TEST")||ee().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const s=this.urlFlags[e];ee().getBool("IS_TEST")||ee().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${s}.`),this.set(e,s)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(Qu(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);qF in e&&e[qF].split(",").forEach(r=>{const[s,i]=r.split(":");this.urlFlags[s]=aye(s,i)})}}function iye(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(oye(e,r[0],r[1]),r.join("="))),e}function oye(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function aye(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function ee(){return t9}let t9=null;function lye(t){t9=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let JS;function pB(){if(JS==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");JS=t}return JS}function uye(){const t=pB();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function n9(t,e){const n=uye();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const o0="Abs",op="Acos",ap="Acosh",eh="Add",a0="AddN",nx="All",rx="Any",l0="ArgMax",u0="ArgMin",lp="Asin",up="Asinh",cp="Atan",dp="Atanh",hp="Atan2",c0="AvgPool",sx="AvgPoolGrad",d0="AvgPool3D",ix="AvgPool3DGrad",h0="BatchMatMul",f0="BatchToSpaceND",ox="Bincount",p0="BitwiseAnd",mB="BroadcastTo",ax="BroadcastArgs",fp="Cast",pp="Ceil",mp="ClipByValue",lx="Complex",m0="ComplexAbs",g0="Concat",y0="Conv2D",ux="Conv2DBackpropFilter",v0="Conv2DBackpropInput",b0="Conv3D",cx="Conv3DBackpropFilterV2",dx="Conv3DBackpropInputV2",gp="Cos",yp="Cosh",hx="Cumprod",E0="Cumsum",fx="CropAndResize",px="DenseBincount",mx="DepthToSpace",T0="DepthwiseConv2dNative",gx="DepthwiseConv2dNativeBackpropFilter",yx="DepthwiseConv2dNativeBackpropInput",vx="Diag",x0="Dilation2D",kE="Dilation2DBackpropInput",IE="Dilation2DBackpropFilter",bx="Draw",vp="RealDiv",Ex="Einsum",bp="Elu",Tx="EluGrad",Ep="Erf",C0="Equal",Tp="Exp",S0="ExpandDims",xp="Expm1",xx="FFT",Cx="Fill",Sx="FlipLeftRight",Cp="Floor",Sp="FloorDiv",w0="FusedBatchNorm",_0="GatherV2",wx="GatherNd",k0="Greater",wp="GreaterEqual",_p="Identity",_x="IFFT",kx="Imag",kp="IsFinite",Ip="IsInf",Np="IsNan",I0="LeakyRelu",N0="Less",A0="LessEqual",Ix="LinSpace",Ap="Log",Dp="Log1p",D0="LogicalAnd",R0="LogicalNot",F0="LogicalOr",cye="LogicalXor",gB="LogSoftmax",dye="LowerBound",O0="LRN",Nx="LRNGrad",hye="MatrixBandPart",$0="Max",Rp="Maximum",L0="MaxPool",Ax="MaxPoolGrad",P0="MaxPool3D",Dx="MaxPool3DGrad",Rx="MaxPoolWithArgmax",M0="Mean",B0="Min",Fp="Minimum",z0="MirrorPad",Op="Mod",Fx="Multinomial",$p="Multiply",H0="Neg",U0="NotEqual",Ox="NonMaxSuppressionV3",$x="NonMaxSuppressionV4",Lx="NonMaxSuppressionV5",W0="OnesLike",V0="OneHot",G0="Pack",j0="PadV2",fye="Pool",Lp="Pow",K0="Prelu",q0="Prod",Px="RaggedGather",Mx="RaggedRange",Bx="RaggedTensorToTensor",zx="Range",Hx="Real",Pp="Reciprocal",Mp="Relu",X0="Reshape",Y0="ResizeNearestNeighbor",Ux="ResizeNearestNeighborGrad",Q0="ResizeBilinear",Wx="ResizeBilinearGrad",Bp="Relu6",Z0="Reverse",zp="Round",Hp="Rsqrt",Vx="ScatterNd",Gx="TensorScatterUpdate",jx="SearchSorted",J0="Select",Up="Selu",ey="Slice",Wp="Sin",Vp="Sinh",Gp="Sign",jp="Sigmoid",Kp="Softplus",qp="Sqrt",ty="Sum",ny="SpaceToBatchND",ry="SplitV",sy="Softmax",Kx="SparseFillEmptyRows",qx="SparseReshape",Xx="SparseSegmentMean",Yx="SparseSegmentSum",Qx="SparseToDense",Xp="SquaredDifference",Zx="Square",iy="StaticRegexReplace",Jx="StridedSlice",eC="StringNGrams",tC="StringSplit",nC="StringToHashBucketFast",Yp="Sub",Qp="Tan",Zp="Tanh",Jp="Tile",rC="TopK",sC="Transform",fd="Transpose",iC="Unique",oy="Unpack",ay="UnsortedSegmentSum",pye="UpperBound",ly="ZerosLike",e1="Step",NE="FromPixels",oC="RotateWithOffset",hg="_FusedMatMul",fg="FusedConv2D",pg="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ki(...t){ee().getBool("IS_TEST")||ee().getBool("PROD")||console.warn(...t)}function mye(...t){ee().getBool("IS_TEST")||ee().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Af=n9("kernelRegistry",()=>new Map),mg=n9("gradRegistry",()=>new Map);function gg(t,e){const n=r9(t,e);return Af.get(n)}function Y_(t){return mg.get(t)}function AE(t){const e=Af.entries(),n=[];for(;;){const{done:r,value:s}=e.next();if(r)break;const[i,o]=s,[a]=i.split("_");a===t&&n.push(o)}return n}function aC(t){const{kernelName:e,backendName:n}=t,r=r9(e,n);Af.has(r)&&ki(`The kernel '${e}' for backend '${n}' is already registered`),Af.set(r,t)}function yB(t){const{kernelName:e}=t;mg.has(e)&&ee().getBool("DEBUG")&&ki(`Overriding the gradient for '${e}'`),mg.set(e,t)}function gye(t,e){const n=r9(t,e);if(!Af.has(n))throw new Error(`The kernel '${t}' for backend '${e}' is not registered`);Af.delete(n)}function yye(t){if(!mg.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);mg.delete(t)}function vye(t,e){AE(t).forEach(r=>{const s=Object.assign({},r,{backendName:e});aC(s)})}function r9(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vB(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var Q_=mn,uo=null;try{uo=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function mn(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}mn.prototype.__isLong__;Object.defineProperty(mn.prototype,"__isLong__",{value:!0});function Ei(t){return(t&&t.__isLong__)===!0}mn.isLong=Ei;var XF={},YF={};function th(t,e){var n,r,s;return e?(t>>>=0,(s=0<=t&&t<256)&&(r=YF[t],r)?r:(n=gn(t,(t|0)<0?-1:0,!0),s&&(YF[t]=n),n)):(t|=0,(s=-128<=t&&t<128)&&(r=XF[t],r)?r:(n=gn(t,t<0?-1:0,!1),s&&(XF[t]=n),n))}mn.fromInt=th;function co(t,e){if(isNaN(t))return e?id:ho;if(e){if(t<0)return id;if(t>=bB)return xB}else{if(t<=-ZF)return ci;if(t+1>=ZF)return TB}return t<0?co(-t,e).neg():gn(t%Df|0,t/Df|0,e)}mn.fromNumber=co;function gn(t,e,n){return new mn(t,e,n)}mn.fromBits=gn;var DE=Math.pow;function s9(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return ho;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return s9(t.substring(1),e,n).neg();for(var s=co(DE(n,8)),i=ho,o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),l=parseInt(t.substring(o,o+a),n);if(a<8){var u=co(DE(n,a));i=i.mul(u).add(co(l))}else i=i.mul(s),i=i.add(co(l))}return i.unsigned=e,i}mn.fromString=s9;function pa(t,e){return typeof t=="number"?co(t,e):typeof t=="string"?s9(t,e):gn(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}mn.fromValue=pa;var QF=1<<16,bye=1<<24,Df=QF*QF,bB=Df*Df,ZF=bB/2,JF=th(bye),ho=th(0);mn.ZERO=ho;var id=th(0,!0);mn.UZERO=id;var Zh=th(1);mn.ONE=Zh;var EB=th(1,!0);mn.UONE=EB;var Z_=th(-1);mn.NEG_ONE=Z_;var TB=gn(-1,2147483647,!1);mn.MAX_VALUE=TB;var xB=gn(-1,-1,!0);mn.MAX_UNSIGNED_VALUE=xB;var ci=gn(0,-2147483648,!1);mn.MIN_VALUE=ci;var Ie=mn.prototype;Ie.toInt=function(){return this.unsigned?this.low>>>0:this.low};Ie.toNumber=function(){return this.unsigned?(this.high>>>0)*Df+(this.low>>>0):this.high*Df+(this.low>>>0)};Ie.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(ci)){var n=co(e),r=this.div(n),s=r.mul(n).sub(this);return r.toString(e)+s.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var i=co(DE(e,6),this.unsigned),o=this,a="";;){var l=o.div(i),u=o.sub(l.mul(i)).toInt()>>>0,c=u.toString(e);if(o=l,o.isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}};Ie.getHighBits=function(){return this.high};Ie.getHighBitsUnsigned=function(){return this.high>>>0};Ie.getLowBits=function(){return this.low};Ie.getLowBitsUnsigned=function(){return this.low>>>0};Ie.getNumBitsAbs=function(){if(this.isNegative())return this.eq(ci)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};Ie.isZero=function(){return this.high===0&&this.low===0};Ie.eqz=Ie.isZero;Ie.isNegative=function(){return!this.unsigned&&this.high<0};Ie.isPositive=function(){return this.unsigned||this.high>=0};Ie.isOdd=function(){return(this.low&1)===1};Ie.isEven=function(){return(this.low&1)===0};Ie.equals=function(e){return Ei(e)||(e=pa(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};Ie.eq=Ie.equals;Ie.notEquals=function(e){return!this.eq(e)};Ie.neq=Ie.notEquals;Ie.ne=Ie.notEquals;Ie.lessThan=function(e){return this.comp(e)<0};Ie.lt=Ie.lessThan;Ie.lessThanOrEqual=function(e){return this.comp(e)<=0};Ie.lte=Ie.lessThanOrEqual;Ie.le=Ie.lessThanOrEqual;Ie.greaterThan=function(e){return this.comp(e)>0};Ie.gt=Ie.greaterThan;Ie.greaterThanOrEqual=function(e){return this.comp(e)>=0};Ie.gte=Ie.greaterThanOrEqual;Ie.ge=Ie.greaterThanOrEqual;Ie.compare=function(e){if(Ei(e)||(e=pa(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};Ie.comp=Ie.compare;Ie.negate=function(){return!this.unsigned&&this.eq(ci)?ci:this.not().add(Zh)};Ie.neg=Ie.negate;Ie.add=function(e){Ei(e)||(e=pa(e));var n=this.high>>>16,r=this.high&65535,s=this.low>>>16,i=this.low&65535,o=e.high>>>16,a=e.high&65535,l=e.low>>>16,u=e.low&65535,c=0,d=0,h=0,f=0;return f+=i+u,h+=f>>>16,f&=65535,h+=s+l,d+=h>>>16,h&=65535,d+=r+a,c+=d>>>16,d&=65535,c+=n+o,c&=65535,gn(h<<16|f,c<<16|d,this.unsigned)};Ie.subtract=function(e){return Ei(e)||(e=pa(e)),this.add(e.neg())};Ie.sub=Ie.subtract;Ie.multiply=function(e){if(this.isZero())return ho;if(Ei(e)||(e=pa(e)),uo){var n=uo.mul(this.low,this.high,e.low,e.high);return gn(n,uo.get_high(),this.unsigned)}if(e.isZero())return ho;if(this.eq(ci))return e.isOdd()?ci:ho;if(e.eq(ci))return this.isOdd()?ci:ho;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(JF)&&e.lt(JF))return co(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,s=this.high&65535,i=this.low>>>16,o=this.low&65535,a=e.high>>>16,l=e.high&65535,u=e.low>>>16,c=e.low&65535,d=0,h=0,f=0,p=0;return p+=o*c,f+=p>>>16,p&=65535,f+=i*c,h+=f>>>16,f&=65535,f+=o*u,h+=f>>>16,f&=65535,h+=s*c,d+=h>>>16,h&=65535,h+=i*u,d+=h>>>16,h&=65535,h+=o*l,d+=h>>>16,h&=65535,d+=r*c+s*u+i*l+o*a,d&=65535,gn(f<<16|p,d<<16|h,this.unsigned)};Ie.mul=Ie.multiply;Ie.divide=function(e){if(Ei(e)||(e=pa(e)),e.isZero())throw Error("division by zero");if(uo){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?uo.div_u:uo.div_s)(this.low,this.high,e.low,e.high);return gn(n,uo.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?id:ho;var r,s,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return id;if(e.gt(this.shru(1)))return EB;i=id}else{if(this.eq(ci)){if(e.eq(Zh)||e.eq(Z_))return ci;if(e.eq(ci))return Zh;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(ho)?e.isNegative()?Zh:Z_:(s=this.sub(e.mul(r)),i=r.add(s.div(e)),i)}else if(e.eq(ci))return this.unsigned?id:ho;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=ho}for(s=this;s.gte(e);){r=Math.max(1,Math.floor(s.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:DE(2,a-48),u=co(r),c=u.mul(e);c.isNegative()||c.gt(s);)r-=l,u=co(r,this.unsigned),c=u.mul(e);u.isZero()&&(u=Zh),i=i.add(u),s=s.sub(c)}return i};Ie.div=Ie.divide;Ie.modulo=function(e){if(Ei(e)||(e=pa(e)),uo){var n=(this.unsigned?uo.rem_u:uo.rem_s)(this.low,this.high,e.low,e.high);return gn(n,uo.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};Ie.mod=Ie.modulo;Ie.rem=Ie.modulo;Ie.not=function(){return gn(~this.low,~this.high,this.unsigned)};Ie.and=function(e){return Ei(e)||(e=pa(e)),gn(this.low&e.low,this.high&e.high,this.unsigned)};Ie.or=function(e){return Ei(e)||(e=pa(e)),gn(this.low|e.low,this.high|e.high,this.unsigned)};Ie.xor=function(e){return Ei(e)||(e=pa(e)),gn(this.low^e.low,this.high^e.high,this.unsigned)};Ie.shiftLeft=function(e){return Ei(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?gn(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):gn(0,this.low<<e-32,this.unsigned)};Ie.shl=Ie.shiftLeft;Ie.shiftRight=function(e){return Ei(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?gn(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):gn(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};Ie.shr=Ie.shiftRight;Ie.shiftRightUnsigned=function(e){if(Ei(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return gn(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?gn(n,0,this.unsigned):gn(n>>>e-32,0,this.unsigned)};Ie.shru=Ie.shiftRightUnsigned;Ie.shr_u=Ie.shiftRightUnsigned;Ie.toSigned=function(){return this.unsigned?gn(this.low,this.high,!1):this};Ie.toUnsigned=function(){return this.unsigned?this:gn(this.low,this.high,!0)};Ie.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};Ie.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};Ie.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};mn.fromBytes=function(e,n,r){return r?mn.fromBytesLE(e,n):mn.fromBytesBE(e,n)};mn.fromBytesLE=function(e,n){return new mn(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};mn.fromBytesBE=function(e,n){return new mn(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const Eye=O8({__proto__:null,default:Q_},[Q_]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xc=Q_||Eye;function uy(t){return Xc.fromString(t,!0,16)}const CB=uy("c3a5c85c97cb3127"),Vc=uy("b492b66fbe98f273"),hs=uy("9ae16a3b2f90404f");function J_(t){return t.xor(t.shru(47))}function SB(t,e,n){const r=t.slice(e,e+n);return Xc.fromBytes(Array.from(r),!0,!0)}function on(t,e){return SB(t,e,8)}function eO(t,e){return SB(t,e,4)}function yr(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function Vu(t,e,n=uy("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let s=e.xor(r).mul(n);return s=s.xor(s.shru(47)),s=s.mul(n),s}function Tye(t,e,n,r,s,i){s=s.add(t),i=yr(i.add(s).add(r),21);const o=s;return s=s.add(e),s=s.add(n),i=i.add(yr(s,44)),[s.add(r),i.add(o)]}function Hv(t,e,n,r){return Tye(on(t,e),on(t,e+8),on(t,e+16),on(t,e+24),n,r)}function xye(t,e=t.length){if(e>=8){const n=hs.add(e*2),r=on(t,0).add(hs),s=on(t,e-8),i=yr(s,37).mul(n).add(r),o=yr(r,25).add(s).mul(n);return Vu(i,o,n)}if(e>=4){const n=hs.add(e*2),r=eO(t,0);return Vu(r.shl(3).add(e),eO(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],s=t[e-1],i=n+(r<<8),o=e+(s<<2);return J_(hs.mul(i).xor(CB.mul(o))).mul(hs)}return hs}function Cye(t,e=t.length){const n=hs.add(e*2),r=on(t,0).mul(Vc),s=on(t,8),i=on(t,e-8).mul(n),o=on(t,e-16).mul(hs);return Vu(yr(r.add(s),43).add(yr(i,30)).add(o),r.add(yr(s.add(hs),18)).add(i),n)}function Sye(t,e=t.length){const n=hs.add(e*2),r=on(t,0).mul(hs),s=on(t,8),i=on(t,e-8).mul(n),o=on(t,e-16).mul(hs),a=yr(r.add(s),43).add(yr(i,30)).add(o),l=Vu(a,r.add(yr(s.add(hs),18)).add(i),n),u=on(t,16).mul(n),c=on(t,24),d=a.add(on(t,e-32)).mul(n),h=l.add(on(t,e-24)).mul(n);return Vu(yr(u.add(c),43).add(yr(d,30)).add(h),u.add(yr(c.add(r),18)).add(d),n)}function wB(t,e=t.length){const n=Xc.fromNumber(81,!0);if(e<=32)return e<=16?xye(t,e):Cye(t,e);if(e<=64)return Sye(t,e);let r=n,s=n.mul(Vc).add(113),i=J_(s.mul(hs).add(113)).mul(hs),o=[Xc.UZERO,Xc.UZERO],a=[Xc.UZERO,Xc.UZERO];r=r.mul(hs).add(on(t,0));let l=0;const u=(e-1>>6)*64,c=u+(e-1&63)-63;do r=yr(r.add(s).add(o[0]).add(on(t,l+8)),37).mul(Vc),s=yr(s.add(o[1]).add(on(t,l+48)),42).mul(Vc),r=r.xor(a[1]),s=s.add(o[0]).add(on(t,l+40)),i=yr(i.add(a[0]),33).mul(Vc),o=Hv(t,l,o[1].mul(Vc),r.add(a[0])),a=Hv(t,l+32,i.add(a[1]),s.add(on(t,l+16))),[i,r]=[r,i],l+=64;while(l!==u);const d=Vc.add(i.and(255).shl(1));return l=c,a[0]=a[0].add(e-1&63),o[0]=o[0].add(a[0]),a[0]=a[0].add(o[0]),r=yr(r.add(s).add(o[0]).add(on(t,l+8)),37).mul(d),s=yr(s.add(o[1]).add(on(t,l+48)),42).mul(d),r=r.xor(a[1].mul(9)),s=s.add(o[0].mul(9).add(on(t,l+40))),i=yr(i.add(a[0]),33).mul(d),o=Hv(t,l,o[1].mul(d),r.add(a[0])),a=Hv(t,l+32,i.add(a[1]),s.add(on(t,l+16))),[i,r]=[r,i],Vu(Vu(o[0],a[0],d).add(J_(s).mul(CB)).add(i),Vu(o[1],a[1],d).add(r),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eu(t,e){return e==="string"?Va(t):mc([t],e)}function wye(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function mc(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Qa(t)),ee().getBool("DEBUG")&&aB(t,e),wye(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function ls(){return ee().platform.now()}function _ye(t,e){return ee().platform.fetch(t,e)}function Va(t,e="utf-8"){return e=e||"utf-8",ee().platform.encode(t,e)}function Hl(t,e="utf-8"){return e=e||"utf-8",ee().platform.decode(t,e)}function vr(t){return ee().platform.isTypedArray!=null?ee().platform.isTypedArray(t):vB(t)}function Qa(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||Qu(t)||t==null||vr(t)&&n)e.push(t);else if(Array.isArray(t)||vr(t))for(let r=0;r<t.length;++r)Qa(t[r],e,n);else{let r=-1;for(const s of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(s)&&(r=Math.max(r,Number(s)));for(let s=0;s<=r;s++)Qa(t[s],e,n)}return e}const kye=Object.freeze(Object.defineProperty({__proto__:null,arraysEqual:Et,arraysEqualWithNull:oB,assert:D,assertNonNegativeIntegerDimensions:bi,assertNonNull:Qd,assertShapesMatch:Hr,bytesFromStringArray:uB,bytesPerElement:dg,checkConversionForErrors:aB,clamp:Xu,computeStrides:Ue,convertBackendValuesAndArrayBuffer:hB,createScalarValue:eu,createShuffledIndices:sye,decodeString:Hl,distSquared:tye,encodeString:Va,fetch:_ye,fingerPrint64:wB,flatten:Qa,getArrayFromDType:Bn,getTypedArrayFromDType:xr,hasEncodingLoss:JN,hexToLong:uy,indexToLoc:Jd,inferDtype:Zd,inferFromImplicitShape:ZN,isBoolean:cB,isFunction:Yu,isInt:kd,isNumber:wE,isPromise:Qu,isScalarShape:nye,isString:Pa,isTypedArray:vr,isValidDtype:lB,locToIndex:ta,makeOnesTypedArray:tx,makeZerosNestedTypedArray:e9,makeZerosTypedArray:zr,nearestDivisor:_E,nearestLargerEven:ex,now:ls,parseAxisParam:yt,randUniform:eye,repeatedTry:X_,rightPad:hd,shuffle:QN,shuffleCombo:J0e,sizeFromShape:re,sizeToSquarishShape:SE,squeezeShape:Jl,sum:iB,swap:_l,tanh:rye,toNestedArray:Mi,toTypedArray:mc},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Iye{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new Aye)}profileKernel(e,n,r){let s;const i=()=>{s=r()};let o;const a=ls();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(i);else{i();for(const u of s)u.dataSync();o=Promise.resolve({kernelMs:ls()-a})}if(ee().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let u=0;u<s.length;u++){const c=s[u];c.data().then(d=>{Nye(d,c.dtype,e)})}return{kernelName:e,outputs:s,inputs:n,timeMs:o.then(u=>u.kernelMs),extraInfo:o.then(u=>u.getExtraProfileInfo!=null?u.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:s,inputs:i,extraInfo:o}=e;r.forEach(a=>{Promise.all([a.data(),s,o]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],i,l[2])})})}}function Nye(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const s=t[r];if(isNaN(s)||!isFinite(s))return console.warn(`Found ${s} in the result of '${n}'`),!0}return!1}class Aye{logKernelProfile(e,n,r,s,i,o){const a=typeof s=="number"?hd(`${s}ms`,9):s.error,l=hd(e,25),u=n.rank,c=n.size,d=hd(n.shape.toString(),14);let h="";for(const f in i){const p=i[f];if(p!=null){const m=p.shape||n.shape,y=m.length;h+=`${f}: ${y}D ${y>0?m:""} `}}console.log(`%c${l}	%c${a}	%c${u}D ${d}	%c${c}	%c${h}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dye(t,e,n){const r={},s={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const u=t[l],c=u.inputs;for(const d in c){const h=c[d];let f=!1;for(let p=0;p<e.length;p++)if(r[h.id]){u.outputs.forEach(m=>r[m.id]=!0),f=!0,s[u.id]=!0;break}if(f)break}}const i={};i[n.id]=!0;const o={};for(let l=t.length-1;l>=0;l--){const u=t[l],c=u.inputs;for(let d=0;d<u.outputs.length;d++)if(i[u.outputs[d].id]){for(const h in c)i[c[h].id]=!0,o[u.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const u=t[l];if(s[u.id]&&o[u.id]){const c={};for(const h in u.inputs){const f=u.inputs[h];r[f.id]&&(c[h]=f)}const d=Object.assign({},u);d.inputs=c,d.outputs=u.outputs,a.push(d)}}return a}function Rye(t,e,n,r){for(let s=e.length-1;s>=0;s--){const i=e[s],o=[];if(i.outputs.forEach(l=>{const u=t[l.id];u!=null?o.push(u):o.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const a=i.gradient(o);for(const l in i.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const u=n(()=>a[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);const c=i.inputs[l];if(!Et(u.shape,c.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${c.shape}'`);if(t[c.id]==null)t[c.id]=u;else{const d=t[c.id];t[c.id]=r(d,u),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tO=20,K1=3,ew=7;function Fye(t,e,n,r){const s=Ue(e),i=Oye(t,e,n,s),o=e.length,a=Ib(t,e,n,s,i),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${o}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(u=>"    "+u).join(`
`)),l.join(`
`)}function Oye(t,e,n,r){const s=re(e),i=r[r.length-1],o=new Array(i).fill(0),a=e.length,l=n==="complex64"?sm(t):t;if(a>1)for(let u=0;u<s/i;u++){const c=u*i;for(let d=0;d<i;d++)o[d]=Math.max(o[d],rm(l[c+d],0,n).length)}return o}function rm(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(ew))} + ${parseFloat(t[1].toFixed(ew))}j`:Pa(t)?r=`'${t}'`:n==="bool"?r=_B(t):r=parseFloat(t.toFixed(ew)).toString(),hd(r,e)}function _B(t){return t===0?"false":"true"}function Ib(t,e,n,r,s,i=!0){const o=n==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(n==="complex64"){const m=sm(t);return[rm(m[0],0,n)]}return n==="bool"?[_B(t[0])]:[t[0].toString()]}if(l===1){if(a>tO){const y=K1*o;let g=Array.from(t.slice(0,y)),v=Array.from(t.slice((a-K1)*o,a*o));return n==="complex64"&&(g=sm(g),v=sm(v)),["["+g.map((E,b)=>rm(E,s[b],n)).join(", ")+", ..., "+v.map((E,b)=>rm(E,s[a-K1+b],n)).join(", ")+"]"]}return["["+(n==="complex64"?sm(t):Array.from(t)).map((y,g)=>rm(y,s[g],n)).join(", ")+"]"]}const u=e.slice(1),c=r.slice(1),d=r[0]*o,h=[];if(a>tO){for(let m=0;m<K1;m++){const y=m*d,g=y+d;h.push(...Ib(t.slice(y,g),u,n,c,s,!1))}h.push("...");for(let m=a-K1;m<a;m++){const y=m*d,g=y+d;h.push(...Ib(t.slice(y,g),u,n,c,s,m===a-1))}}else for(let m=0;m<a;m++){const y=m*d,g=y+d;h.push(...Ib(t.slice(y,g),u,n,c,s,m===a-1))}const f=l===2?",":"";h[0]="["+(a>0?h[0]+f:"");for(let m=1;m<h.length-1;m++)h[m]=" "+h[m]+f;let p=`,
`;for(let m=2;m<l;m++)p+=`
`;return h[h.length-1]=" "+h[h.length-1]+"]"+(i?"":p),h}function sm(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rr{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=re(e),r!=null){const s=r.length;D(s===this.size,()=>`Length of values '${s}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Bn(n,this.size),this.strides=Ue(e)}set(e,...n){n.length===0&&(n=[0]),D(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const s of e){if(s<0||s>=this.shape[n]){const i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=e[e.length-1];for(let s=0;s<e.length-1;++s)r+=this.strides[s]*e[s];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return qo().makeTensor(this.values,this.shape,this.dtype)}}let qo=null,Fh=null;function $ye(t){qo=t}function Lye(t){Fh=t}class Ut{constructor(e,n,r,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=re(e),this.strides=Ue(e),this.dataId=r,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Fh.buffer(this.shape,this.dtype,e)}bufferSync(){return Fh.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Mi(this.shape,e,this.dtype==="complex64")}arraySync(){return Mi(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=qo().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>Hl(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),qo().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=qo().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>Hl(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await qo().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),qo().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Fh.print(this,e)}clone(){return this.throwIfDisposed(),Fh.clone(this)}toString(e=!1){const n=this.dataSync();return Fye(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Fh.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),qo().makeVariable(this,e,n,r)}}Object.defineProperty(Ut,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function ie(){return n9("Tensor",()=>Ut)}ie();class yg extends Ut{constructor(e,n,r,s){super(e.shape,e.dtype,e.dataId,s),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Et(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);qo().disposeTensor(this),this.dataId=e.dataId,qo().incRef(this,null)}dispose(){qo().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(yg,Symbol.hasInstance,{value:t=>t instanceof Ut&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ek;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(ek||(ek={}));var tk;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(tk||(tk={}));var nk;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(nk||(nk={}));var rk;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(rk||(rk={}));var sk;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(sk||(sk={}));const Pye={float32:rk,int32:tk,bool:nk,complex64:sk};function Bs(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return Pye[t][e]}function lC(t){return Bs(t,"int32")}function kB(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function IB(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function On(t,e){if(t.dtype===e.dtype)return[t,e];const n=Bs(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function NB(t,e){D(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function Mye(t,e){return e.some(n=>n.id===t.id)}function i9(t){const e=[];return AB(t,e,new Set),e}function AB(t,e,n){if(t==null)return;if(t instanceof Ut){e.push(t);return}if(!Bye(t))return;const r=t;for(const s in r){const i=r[s];n.has(i)||(n.add(i),AB(i,e,n))}}function Bye(t){return Array.isArray(t)||typeof t=="object"}const zye=Object.freeze(Object.defineProperty({__proto__:null,assertTypesMatch:NB,getTensorsInContainer:i9,isTensorInList:Mye,makeTypesMatch:On},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tw(t){return t.kernelName!=null}class nO{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class Rf{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new nO}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(ki(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Iye(this.backendInstance),!0}setupRegisteredKernels(){AE(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){AE(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof JT)&&typeof r.then=="function"){const s=++this.pendingBackendInitId,i=r.then(o=>s<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,ki(`Initialization of backend ${e} failed`),ki(o.stack||o.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return ki(`Initialization of backend ${e} failed`),ki(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:s,asyncInit:i}=this.initializeBackend(r);if(i||s)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),s=r.backend,i=this.readSync(n),o=s.refCount(n);s.disposeData(n,!0),r.backend=e,e.move(n,i,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let s;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(s),()=>(s=n(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,n,r){e();try{const s=r();return n(),s}catch(s){throw n(),s}}nextTensorId(){return Rf.nextTensorId++}nextVariableId(){return Rf.nextVariableId++}clone(e){const n=W.runKernel(_p,{x:e}),r={x:e},s=o=>({x:()=>{const a="float32",l={x:o},u={dtype:a};return W.runKernel(fp,l,u)}}),i=[];return this.addTapeNode(this.state.activeScope.name,r,[n],s,i,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(gg(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const s=this.backend.numDataIds();let i=0;r.forEach(l=>{i+=l.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=s-n-i-o;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const s=this.isTapeOn(),i=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const u=tw(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(tw(e)){const{kernelName:p,inputs:m,attrs:y}=e;this.backendName==null&&this.backend;const g=gg(p,this.backendName);D(g!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),a=()=>{const v=this.backend.numDataIds();l=g.kernelFunc({inputs:m,attrs:y,backend:this.backend});const E=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,v,E);const b=E.map(T=>T.rank!=null?T:this.makeTensorFromTensorInfo(T));if(s){const T=this.getTensorsForGradient(p,m,b);r=this.saveTensorsForBackwardMode(T)}return b}}else{const{forwardFunc:p}=e,m=y=>{s&&(r=y.map(g=>this.keep(this.clone(g))))};a=()=>{const y=this.backend.numDataIds();l=this.tidy(()=>p(this.backend,m));const g=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,y,g),g}}const{inputs:c,attrs:d}=e,h=tw(e)?null:e.backwardsFunc;let f;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(f=this.profiler.profileKernel(u,c,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(f),n=f.outputs)}),s&&this.addTapeNode(u,c,n,h,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(p=>c[p]!=null?c[p].shape:null),outputShapes:n.map(p=>p.shape),kernelTimeMs:f.timeMs,extraInfo:f.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const s=Y_(e);if(s!=null){const i=s.inputsToSave||[],o=s.outputsToSave||[];let a;s.saveAllInputs?(D(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(u=>n[u])):a=i.map(u=>n[u]);const l=r.filter((u,c)=>o[c]);return a.concat(l)}return[]}makeTensor(e,n,r,s){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",s=s||this.backend;let i=e;r==="string"&&Pa(e[0])&&(i=e.map(l=>Va(l)));const o=s.write(i,n,r),a=new Ut(n,r,o,this.nextTensorId());if(this.trackTensor(a,s),r==="string"){const l=this.state.tensorInfo.get(o),u=uB(i);this.state.numBytes+=u-l.bytes,l.bytes=u}return a}makeTensorFromDataId(e,n,r,s){r=r||"float32";const i={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(i,s)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:s,dtype:i}=e,o=new Ut(s,i,r,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(e,n=!0,r,s){r=r||this.nextVariableId().toString(),s!=null&&s!==e.dtype&&(e=e.cast(s));const i=new yg(e,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*dg(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof yg||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*dg(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const s of this.state.activeProfile.kernels)s.kernelTimeMs=await s.kernelTimeMs,s.extraInfo=await s.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,s,i,o){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:i},l=Y_(e);l!=null&&(s=l.gradFunc),s!=null&&(a.gradient=u=>(u=u.map((c,d)=>{if(c==null){const h=r[d],f=zr(h.size,h.dtype);return this.makeTensor(f,h.shape,h.dtype)}return c}),s(u.length>1?u:u[0],i,o))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=i9(e),r=new Set(n.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){const o=this.state.activeScope.track[i];!o.kept&&!r.has(o.id)&&o.dispose()}const s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(i=>{!i.kept&&i.scopeId===s.id&&this.track(i)})}gradients(e,n,r,s=!1){if(D(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));D(i instanceof Ut,()=>"The result y returned by f() must be a tensor.");const o=Dye(this.state.activeTape,n,i);if(!s&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[i.id]=r??Hye(i.shape),Rye(a,o,u=>this.tidy(u),Uye);const l=n.map(u=>a[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(const c of u.saved)c.dispose()}),this.state.activeTape=null),{value:i,grads:l}})}customGrad(e){return D(Yu(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{D(n.every(a=>a instanceof Ut),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const s={};n.forEach((a,l)=>{s[l]=a});const i=(a,l)=>(r=e(...n,l),D(r.value instanceof Ut,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),D(Yu(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(a,l)=>{const u=r.gradFunc(a,l),c=Array.isArray(u)?u:[u];D(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),D(c.every(h=>h instanceof Ut),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return c.forEach((h,f)=>{d[f]=()=>h}),d};return this.runKernelFunc({forwardFunc:i,backwardsFunc:o,inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=ls(),r=await this.backend.time(e);return r.wallMs=ls()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new nO;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Rf.nextTensorId=0;Rf.nextVariableId=0;function Hye(t){const e=tx(re(t),"float32");return W.makeTensor(e,t,"float32")}function DB(){const t=pB();if(t._tfengine==null){const e=new fB(t);t._tfengine=new Rf(e)}return lye(t._tfengine.ENV),$ye(()=>t._tfengine),t._tfengine}const W=DB();function Uye(t,e){const n={a:t,b:e};return W.runKernel(eh,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wye(){return typeof navigator<"u"&&navigator!=null}let ik;function Vye(t){ik=t}function o9(t){if(ik!==void 0)return ik;if(t||Wye()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function a9(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}const Gye=Object.freeze(Object.defineProperty({__proto__:null,isBrowser:a9,isMobile:o9,mockIsMobile:Vye},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zs=ee();zs.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});zs.registerFlag("IS_BROWSER",()=>a9());zs.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");zs.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));zs.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));zs.registerFlag("PROD",()=>!1);zs.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>zs.getBool("DEBUG"));zs.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);zs.registerFlag("IS_TEST",()=>!1);zs.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>zs.getBool("DEBUG"));zs.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);zs.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);zs.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Za(t,e){let n=t;if(vr(t))return e==="string"?[]:[t.length];if(kB(t)){const s=t.channels||"RGBA";return[t.height,t.width*s.length]}else if(IB(t))return[t.buffer.size/(e==null?4:dg(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||vr(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&ee().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&RB(t,r,[]),r}function RB(t,e,n){if(n=n||[],!Array.isArray(t)&&!vr(t)){D(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}D(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),D(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let s=0;s<t.length;++s)RB(t[s],r,n.concat(s))}function rO(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function R(t,e,n,r="numeric"){if(t instanceof ie())return rO(r,t.dtype,e,n),t;let s=Zd(t);if(s!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(s=r),rO(r,s,e,n),t==null||!vr(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const i=Za(t,s);!vr(t)&&!Array.isArray(t)&&(t=[t]);const a=s!=="string"?mc(t,s):Qa(t,[],!0);return W.makeTensor(a,i,s)}function vg(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((i,o)=>R(i,`${e}[${o}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l9="__op";function V(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+l9;const s=(...i)=>{W.startScope(n);try{const o=r(...i);return Qu(o)&&console.error("Cannot return a Promise inside of tidy."),W.endScope(o),o}catch(o){throw W.endScope(null),o}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jye(t,e){const n=R(t,"real","complex"),r=R(e,"imag","complex");Hr(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const s={real:n,imag:r};return W.runKernel(lx,s)}const Ul=V({complex_:jye});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gc(t,e,n,r){if(r==null)r=Zd(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(IB(t)||kB(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return W.backend.createTensorFromGPUData(t,e||n,r)}if(!vr(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){bi(e);const s=re(e),i=re(n);D(s===i,()=>`Based on the provided shape, [${e}], the tensor should have ${s} values but has ${i}`);for(let o=0;o<n.length;++o){const a=n[o],l=o===n.length-1?a!==re(e.slice(o)):!0;D(n[o]===e[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!vr(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?mc(t,r):Qa(t,[],!0),W.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bo(t,e,n){const r=Za(t,n);return gc(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Id={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class ma{static join(e){return new ma(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>vr(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const s=e[r];r!==e.length-1&&s.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const i=n+s.byteLength;this.shards.push({buffer:s,start:n,end:i}),n=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const s=n-e,i=new ArrayBuffer(s),o=new Uint8Array(i);let a=0;for(let l=r;l<this.shards.length;l++){const u=this.shards[l],d=e+a-u.start,h=a,p=Math.min(n,u.end)-u.start,m=new Uint8Array(u.buffer,d,p-d);if(o.set(m,h),a+=m.length,n<u.end)break}return i}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(s){return e<s.start?-1:e>=s.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=Kye(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function Kye(t,e){let n=0,r=t.length;for(;n<=r;){const s=Math.floor((r-n)/2)+n,i=e(t[s]);if(i===0)return s;i<0?r=s:n=s+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qye(){ee().set("PROD",!0)}function Xye(){ee().set("DEBUG",!0)}function Yye(){ee().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function Qye(t){ee().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Zye(){W.disposeVariables()}function Wo(){return W}function RE(){return W.memory()}function Jye(t){return W.profile(t)}function J(t,e){return W.tidy(t,e)}function gt(t){i9(t).forEach(n=>n.dispose())}function lr(t){return W.keep(t)}function eve(t){return W.time(t)}function tve(t){return W.setBackend(t)}function nve(){return W.ready()}function FB(){return W.backendName}function rve(t){W.removeBackend(t)}function sve(t){return W.findBackend(t)}function ive(t){return W.findBackendFactory(t)}function u9(t,e,n=1){return W.registerBackend(t,e,n)}function c9(){return W.backend}function ove(t,e){ee().setPlatform(t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zu=4;async function ok(t,e){const n=[],r=[],s=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<s.length;++o){const a=s[o],l=Array.isArray(t)?t[o].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const u={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const c=new Promise(async d=>{const h=await l.bytes(),f=h.reduce((y,g)=>y+g.length,0)+Zu*h.length,p=new Uint8Array(f);let m=0;for(let y=0;y<h.length;y++){const g=h[y],v=new Uint8Array(new Uint32Array([g.length]).buffer);p.set(v,m),m+=Zu,p.set(g,m),m+=g.length}d(p)});r.push(c)}else r.push(l.data());e!=null&&(u.group=e),n.push(u)}const i=await Promise.all(r);return{data:uve(i),specs:n}}function OB(t,e){const n=new ma(t),r={};let s=0;for(const i of e){const o=ave(i,(a,l)=>n.slice(s+a,s+l));r[i.name]=$B(i,n.slice(s,s+o)),s+=o}return r}function ave(t,e){const n=re(t.shape);let r;if("quantization"in t){const s=t.quantization;r=Id[s.dtype]}else if(t.dtype==="string"){let s=0;for(let i=0;i<n;i++)s+=Zu+new Uint32Array(e(s,s+Zu))[0];return s}else r=Id[t.dtype];return n*r}async function lve(t,e){const n=re(t.shape);let r;if("quantization"in t){const s=t.quantization;r=Id[s.dtype]}else if(t.dtype==="string"){let s=0;for(let i=0;i<n;i++)s+=Zu+new Uint32Array(await e(s,s+Zu))[0];return s}else r=Id[t.dtype];return n*r}function $B(t,e){const n=t.name,r=t.dtype,s=t.shape,i=re(s);let o,a=0;if("quantization"in t){const l=t.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${t.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${t.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const u=Id[l.dtype],c=l.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){o=new Float32Array(c.length);for(let d=0;d<c.length;d++){const h=c[d];o[d]=h*l.scale+l.min}}else if(l.dtype==="float16")o=mve()(c);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);o=new Int32Array(c.length);for(let d=0;d<c.length;d++){const h=c[d];o[d]=Math.round(h*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=i*u}else if(r==="string"){const l=re(t.shape);o=[];for(let u=0;u<l;u++){const c=new Uint32Array(e.slice(a,a+Zu))[0];a+=Zu;const d=new Uint8Array(e.slice(a,a+c));o.push(d),a+=c}}else{const l=Id[r];if(r==="float32")o=new Float32Array(e);else if(r==="int32")o=new Int32Array(e);else if(r==="bool")o=new Uint8Array(e);else if(r==="complex64"){o=new Float32Array(e);const u=new Float32Array(o.length/2),c=new Float32Array(o.length/2);for(let p=0;p<u.length;p++)u[p]=o[p*2],c[p]=o[p*2+1];const d=bo(u,s,"float32"),h=bo(c,s,"float32"),f=Ul(d,h);return d.dispose(),h.dispose(),f}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=i*l}return bo(o,s,r)}async function sO(t,e,n){let r=new Uint8Array(e);for(;r.byteLength<n;){const{done:s,value:i}=await t.read();if(s&&i==null){const a=n-r.byteLength;throw new Error(`Reader is done but ${a} bytes are still expected`)}const o=new Uint8Array(r.length+i.byteLength);o.set(r,0),o.set(new Uint8Array(i),r.length),r=o}return r.buffer}async function LB(t,e){const n={},r=t.getReader();let s=new ArrayBuffer(0);for(const i of e){const o=await lve(i,async(u,c)=>(s=await sO(r,s,c),s.slice(u,c)));s=await sO(r,s,o);const a=s.slice(0,o);s=s.slice(o);const l=$B(i,a);if(n[i.name]=l,FB()==="webgpu"){const u=c9();"uploadToGPU"in u&&re(l.shape)>=ee().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&u.uploadToGPU(l.dataId)}}return n}function uve(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(i=>{if(e+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});const r=new Uint8Array(e);let s=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),s),s+=i.byteLength}),r.buffer}const d9=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function iO(t){return d9?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function cve(t){if(d9)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,s=e.length;r<s;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function dve(t){if(d9){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function PB(t){return ma.join(t)}function oO(t){const e="/";for(t=t.trim();t.endsWith(e);)t=t.slice(0,t.length-1);const n=t.split(e);return n[n.length-1]}function MB(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function h9(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}async function f9(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),h9(t,n,r)}function cy(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:iO(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:iO(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new ma(t.weightData).byteLength}}function FE(t){const e=[];for(const n of t)e.push(...n.weights);return e}function hve(){const t=n=>{let r=n<<13,s=0;for(;!(r&8388608);)s-=8388608,r<<=1;return r&=-8388609,s+=947912704,r|s},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function fve(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function pve(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function mve(){const t=hve(),e=fve(),n=pve();return r=>{const s=new ArrayBuffer(4*r.length),i=new Uint32Array(s);for(let o=0;o<r.length;o++){const a=r[o],l=t[n[a>>10]+(a&1023)]+e[a>>10];i[o]=l}return new Float32Array(s)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class An{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return An.instance==null&&(An.instance=new An),An.instance}static registerSaveRouter(e){An.getInstance().saveRouters.push(e)}static registerLoadRouter(e){An.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return An.getHandlers(e,"save")}static getLoadHandlers(e,n){return An.getHandlers(e,"load",n)}static getHandlers(e,n,r){const s=[];return(n==="load"?An.getInstance().loadRouters:An.getInstance().saveRouters).forEach(o=>{const a=o(e,r);a!==null&&s.push(a)}),s}}const gve=t=>An.registerSaveRouter(t),yve=t=>An.registerLoadRouter(t),BB=t=>An.getSaveHandlers(t),vve=(t,e)=>An.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ak="tensorflowjs",lk=1,od="models_store",Ru="model_info_store";function zB(){if(!ee().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function uk(t){const e=t.result;e.createObjectStore(od,{keyPath:"modelPath"}),e.createObjectStore(Ru,{keyPath:"modelPath"})}class Nd{constructor(e){if(this.indexedDB=zB(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,s)=>{const i=this.indexedDB.open(ak,lk);i.onupgradeneeded=()=>uk(i),i.onsuccess=()=>{const o=i.result;if(n==null){const a=o.transaction(od,"readonly"),u=a.objectStore(od).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return o.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(u.result.modelArtifacts)},u.onerror=c=>(o.close(),s(u.error)),a.oncomplete=()=>o.close()}else{n.weightData=ma.join(n.weightData);const a=cy(n),l=o.transaction(Ru,"readwrite");let u=l.objectStore(Ru),c;try{c=u.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(h){return s(h)}let d;c.onsuccess=()=>{d=o.transaction(od,"readwrite");const h=d.objectStore(od);let f;try{f=h.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(p){return s(p)}f.onsuccess=()=>r({modelArtifactsInfo:a}),f.onerror=p=>{u=l.objectStore(Ru);const m=u.delete(this.modelPath);m.onsuccess=()=>(o.close(),s(f.error)),m.onerror=y=>(o.close(),s(f.error))}},c.onerror=h=>(o.close(),s(c.error)),l.oncomplete=()=>{d==null?o.close():d.oncomplete=()=>o.close()}}},i.onerror=o=>s(i.error)})}}Nd.URL_SCHEME="indexeddb://";const HB=t=>ee().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Nd.URL_SCHEME)?bve(t.slice(Nd.URL_SCHEME.length)):null;An.registerSaveRouter(HB);An.registerLoadRouter(HB);function bve(t){return new Nd(t)}function Eve(t){return t.startsWith(Nd.URL_SCHEME)?t.slice(Nd.URL_SCHEME.length):t}class Tve{constructor(){this.indexedDB=zB()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(ak,lk);r.onupgradeneeded=()=>uk(r),r.onsuccess=()=>{const s=r.result,i=s.transaction(Ru,"readonly"),a=i.objectStore(Ru).getAll();a.onsuccess=()=>{const l={};for(const u of a.result)l[u.modelPath]=u.modelArtifactsInfo;e(l)},a.onerror=l=>(s.close(),n(a.error)),i.oncomplete=()=>s.close()},r.onerror=s=>n(r.error)})}async removeModel(e){return e=Eve(e),new Promise((n,r)=>{const s=this.indexedDB.open(ak,lk);s.onupgradeneeded=()=>uk(s),s.onsuccess=()=>{const i=s.result,o=i.transaction(Ru,"readwrite"),a=o.objectStore(Ru),l=a.get(e);let u;l.onsuccess=()=>{if(l.result==null)return i.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const c=a.delete(e),d=()=>{u=i.transaction(od,"readwrite");const f=u.objectStore(od).delete(e);f.onsuccess=()=>n(l.result.modelArtifactsInfo),f.onerror=p=>r(l.error)};c.onsuccess=d,c.onerror=h=>(d(),i.close(),r(l.error))}},l.onerror=c=>(i.close(),r(l.error)),o.oncomplete=()=>{u==null?i.close():u.oncomplete=()=>i.close()}},s.onerror=i=>r(s.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kl="/",Oh="tensorflowjs_models",UB="info",xve="model_topology",Cve="weight_specs",Sve="weight_data",wve="model_metadata";function WB(t){return{info:[Oh,t,UB].join(kl),topology:[Oh,t,xve].join(kl),weightSpecs:[Oh,t,Cve].join(kl),weightData:[Oh,t,Sve].join(kl),modelMetadata:[Oh,t,wve].join(kl)}}function VB(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function _ve(t){const e=t.split(kl);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(kl)}function kve(t){return t.startsWith(Ad.URL_SCHEME)?t.slice(Ad.URL_SCHEME.length):t}class Ad{constructor(e){if(!ee().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=WB(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),s=cy(e),i=ma.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,cve(i));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:s}}catch{throw VB(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=s;const i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){const a=JSON.parse(i);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=dve(o),n}}Ad.URL_SCHEME="localstorage://";const GB=t=>ee().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Ad.URL_SCHEME)?Ive(t.slice(Ad.URL_SCHEME.length)):null;An.registerSaveRouter(GB);An.registerLoadRouter(GB);function Ive(t){return new Ad(t)}class Nve{constructor(){D(ee().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),D(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=Oh+kl,r=kl+UB;for(let s=0;s<this.LS.length;++s){const i=this.LS.key(s);if(i.startsWith(n)&&i.endsWith(r)){const o=_ve(i);e[o]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=kve(e);const n=WB(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return VB(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cf="://";class us{constructor(){this.managers={}}static getInstance(){return us.instance==null&&(us.instance=new us),us.instance}static registerManager(e,n){D(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(cf)&&(e=e.slice(0,e.indexOf(cf))),D(e.length>0,()=>"scheme must not be an empty string.");const r=us.getInstance();D(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=us.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(us.getInstance().managers)}}function Nb(t){if(t.indexOf(cf)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${us.getSchemes().join(",")}`);return{scheme:t.split(cf)[0],path:t.split(cf)[1]}}async function jB(t,e,n=!1){D(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=An.getLoadHandlers(t);D(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),D(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const s=r[0],i=An.getSaveHandlers(e);D(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),D(i.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const o=i[0],a=Nb(t).scheme,l=Nb(t).path,u=a===Nb(t).scheme,c=await s.load();n&&u&&await us.getManager(a).removeModel(l);const d=await o.save(c);return n&&!u&&await us.getManager(a).removeModel(l),d.modelArtifactsInfo}async function Ave(){const t=us.getSchemes(),e={};for(const n of t){const r=await us.getManager(n).listModels();for(const s in r){const i=n+cf+s;e[i]=r[s]}}return e}async function Dve(t){const e=Nb(t);return us.getManager(e.scheme).removeModel(e.path)}async function Rve(t,e){return jB(t,e,!1)}async function Fve(t,e){return jB(t,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ove{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!ee().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const s=this.functionRefs[r.data.index];s(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return vB(e)}}if(ee().get("IS_BROWSER")){ee().setPlatform("browser",new Ove);try{us.registerManager(Ad.URL_SCHEME,new Nve)}catch{}try{us.registerManager(Nd.URL_SCHEME,new Tve)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ve={importFetch:()=>require("node-fetch")};let nw;class Lve{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return ee().global.fetch!=null?ee().global.fetch(e,n):(nw==null&&(nw=$ve.importFetch()),nw(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}ee().get("IS_NODE")&&!ee().get("IS_BROWSER")&&ee().setPlatform("node",new Lve);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ct(t,e="float32",n){return e=e||"float32",bi(t),new rr(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pve(t,e){const n=R(t,"x","cast");if(!lB(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},s={dtype:e};return W.runKernel(fp,r,s)}const Ce=V({cast_:Pve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mve(t){const n={x:R(t,"x","clone","string_or_numeric")};return W.runKernel(_p,n)}const Ga=V({clone_:Mve});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p9(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */DB();const Bve={buffer:ct,cast:Ce,clone:Ga,print:p9};Lye(Bve);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zve(t,e){let n=R(t,"a","add"),r=R(e,"b","add");[n,r]=On(n,r);const s={a:n,b:r};return W.runKernel(eh,s)}const he=V({add_:zve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hve(t,e){let n=R(t,"a","floorDiv"),r=R(e,"b","floorDiv");[n,r]=On(n,r);const s={a:n,b:r};return W.runKernel(Sp,s)}const uC=V({floorDiv_:Hve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uve(t,e){let n=R(t,"a","div"),r=R(e,"b","div");if([n,r]=On(n,r),n.dtype==="int32"&&r.dtype==="int32")return uC(n,r);const s={a:n,b:r},i={};return W.runKernel(vp,s,i)}const ze=V({div_:Uve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wve(t,e){let n=R(t,"a","mul"),r=R(e,"b","mul");[n,r]=On(n,r);const s={a:n,b:r};return W.runKernel($p,s)}const q=V({mul_:Wve});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vve(t){const e=R(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return W.runKernel(m0,n)}else{const n={x:e};return W.runKernel(o0,n)}}const er=V({abs_:Vve});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gve(t){const n={x:R(t,"x","acos")};return W.runKernel(op,n)}const m9=V({acos_:Gve});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jve(t){const n={x:R(t,"x","acosh")};return W.runKernel(ap,n)}const g9=V({acosh_:jve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kve(t){D(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),D(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((s,i)=>R(s,`tensors${i}`,"addN")),n=e[0];e.forEach(s=>{if(s.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(s=>{if(!Et(s.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return W.runKernel(a0,r)}const KB=V({addN_:Kve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qve(t,e=null,n=!1){const s={x:R(t,"x","all","bool")},i={axis:e,keepDims:n};return W.runKernel(nx,s,i)}const cC=V({all_:qve});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xve(t,e=null,n=!1){const s={x:R(t,"x","any","bool")},i={axis:e,keepDims:n};return W.runKernel(rx,s,i)}const bg=V({any_:Xve});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yve(t,e=0){const r={x:R(t,"x","argMax")},s={axis:e};return W.runKernel(l0,r,s)}const Dd=V({argMax_:Yve});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qve(t,e=0){const r={x:R(t,"x","argMin")},s={axis:e};return W.runKernel(u0,r,s)}const y9=V({argMin_:Qve});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zve(t){const n={x:R(t,"x","asin")};return W.runKernel(lp,n)}const v9=V({asin_:Zve});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jve(t){const n={x:R(t,"x","asinh")};return W.runKernel(up,n)}const b9=V({asinh_:Jve});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ebe(t){const n={x:R(t,"x","atan")};return W.runKernel(cp,n)}const E9=V({atan_:ebe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tbe(t,e){let n=R(t,"a","atan2"),r=R(e,"b","atan2");[n,r]=On(n,r);const s={a:n,b:r};return W.runKernel(hp,s)}const T9=V({atan2_:tbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nbe(t){const n={x:R(t,"x","atanh")};return W.runKernel(dp,n)}const x9=V({atanh_:nbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dy(t,e,n,r,s="NHWC",i){const o=t[3],a=[...e,o],l=nu(s);return kr(t,a,n,i,r,null,null,l)}function Io(t,e,n,r,s,i,o="channelsLast"){const[a,l]=Eg(e);let u;if(o==="channelsLast")u=[a,l,t[3],t[3]];else if(o==="channelsFirst")u=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return kr(t,u,n,r,s,i,!1,o)}function tu(t,e,n,r,s,i,o="NDHWC"){const[a,l,u]=ck(e);let c,d;if(o==="NDHWC")d="channelsLast",c=[a,l,u,t[4],t[4]];else if(o==="NCDHW")d="channelsFirst",c=[a,l,u,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return yc(t,c,n,r,s,!1,d,i)}function kr(t,e,n,r,s,i,o=!1,a="channelsLast"){let[l,u,c,d]=[-1,-1,-1,-1];if(a==="channelsLast")[l,u,c,d]=t;else if(a==="channelsFirst")[l,d,u,c]=t;else throw new Error(`Unknown dataFormat ${a}`);const[h,f,,p]=e,[m,y]=Eg(n),[g,v]=Eg(r),E=df(h,g),b=df(f,v),{padInfo:T,outHeight:x,outWidth:C}=ibe(s,u,c,m,y,E,b,i,a),S=o?p*d:p;let N;return a==="channelsFirst"?N=[l,S,x,C]:a==="channelsLast"&&(N=[l,x,C,S]),{batchSize:l,dataFormat:a,inHeight:u,inWidth:c,inChannels:d,outHeight:x,outWidth:C,outChannels:S,padInfo:T,strideHeight:m,strideWidth:y,filterHeight:h,filterWidth:f,effectiveFilterHeight:E,effectiveFilterWidth:b,dilationHeight:g,dilationWidth:v,inShape:t,outShape:N,filterShape:e}}function yc(t,e,n,r,s,i=!1,o="channelsLast",a){let[l,u,c,d,h]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[l,u,c,d,h]=t;else if(o==="channelsFirst")[l,h,u,c,d]=t;else throw new Error(`Unknown dataFormat ${o}`);const[f,p,m,,y]=e,[g,v,E]=ck(n),[b,T,x]=ck(r),C=df(f,b),S=df(p,T),N=df(m,x),{padInfo:I,outDepth:F,outHeight:L,outWidth:z}=obe(s,u,c,d,g,v,E,C,S,N,a),H=i?y*h:y;let $;return o==="channelsFirst"?$=[l,H,F,L,z]:o==="channelsLast"&&($=[l,F,L,z,H]),{batchSize:l,dataFormat:o,inDepth:u,inHeight:c,inWidth:d,inChannels:h,outDepth:F,outHeight:L,outWidth:z,outChannels:H,padInfo:I,strideDepth:g,strideHeight:v,strideWidth:E,filterDepth:f,filterHeight:p,filterWidth:m,effectiveFilterDepth:C,effectiveFilterHeight:S,effectiveFilterWidth:N,dilationDepth:b,dilationHeight:T,dilationWidth:x,inShape:t,outShape:$,filterShape:e}}function rbe(t,e,n,r,s){r==null&&(r=C9(t,e,n));const i=t[0],o=t[1],a=Tg((i-e+2*r)/n+1,s),l=Tg((o-e+2*r)/n+1,s);return[a,l]}function sbe(t,e,n,r,s,i){s==null&&(s=C9(t,e[0],r[0]));const o=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*s>=e[a]&&(o[a]=Tg((t[a]-e[a]+2*s)/r[a]+1,i));return o}function C9(t,e,n,r=1){const s=df(e,r);return Math.floor((t[0]*(n-1)-n+s)/2)}function Eg(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function ck(t){return typeof t=="number"?[t,t,t]:t}function df(t,e){return e<=1?t:t+(t-1)*(e-1)}function ibe(t,e,n,r,s,i,o,a,l){let u,c,d;if(typeof t=="number"){u={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const f=rbe([e,n],i,r,t,a);c=f[0],d=f[1]}else if(t==="same"){c=Math.ceil(e/r),d=Math.ceil(n/s);const h=Math.max(0,(c-1)*r+i-e),f=Math.max(0,(d-1)*s+o-n),p=Math.floor(h/2),m=h-p,y=Math.floor(f/2),g=f-y;u={top:p,bottom:m,left:y,right:g,type:"SAME"}}else if(t==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((e-i+1)/r),d=Math.ceil((n-o+1)/s);else if(typeof t=="object"){const h=l==="channelsLast"?t[1][0]:t[2][0],f=l==="channelsLast"?t[1][1]:t[2][1],p=l==="channelsLast"?t[2][0]:t[3][0],m=l==="channelsLast"?t[2][1]:t[3][1];u={top:h,bottom:f,left:p,right:m,type:h===0&&f===0&&p===0&&m===0?"VALID":"EXPLICIT"},c=Tg((e-i+h+f)/r+1,a),d=Tg((n-o+p+m)/s+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:u,outHeight:c,outWidth:d}}function obe(t,e,n,r,s,i,o,a,l,u,c){let d,h,f,p;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const y=sbe([e,n,r,1],[a,l,u],1,[s,i,o],t,c);h=y[0],f=y[1],p=y[2]}else if(t==="same"){h=Math.ceil(e/s),f=Math.ceil(n/i),p=Math.ceil(r/o);const m=(h-1)*s+a-e,y=(f-1)*i+l-n,g=(p-1)*o+u-r,v=Math.floor(m/2),E=m-v,b=Math.floor(y/2),T=y-b,x=Math.floor(g/2),C=g-x;d={top:b,bottom:T,left:x,right:C,front:v,back:E,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:h,outHeight:f,outWidth:p}}function Tg(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function Ju(t){const[e,n,r]=Eg(t);return e===1&&n===1&&r===1}function Ur(t,e){return Ju(t)||Ju(e)}function Rd(t){return Eg(t).every(e=>e>0)}function nu(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function bs(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")D(kd(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(s=>{D(kd(s),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${s}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function abe(t,e){const r={x:R(t,"x","reshape","string_or_numeric")},s={shape:e};return W.runKernel(X0,r,s)}const Q=V({reshape_:abe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lbe(t,e,n,r,s){const i=R(t,"x","avgPool","float32"),o=1;D(Ur(n,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let a=i,l=!1;i.rank===3&&(l=!0,a=Q(i,[1,i.shape[0],i.shape[1],i.shape[2]])),D(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),bs("avgPool",r,s);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:s};let d=W.runKernel(c0,u,c);return d=Ce(d,i.dtype),l?Q(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const hy=V({avgPool_:lbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ube(t,e,n,r,s,i="NDHWC"){const o=R(t,"x","avgPool3d","float32");let a=o,l=!1;o.rank===4&&(l=!0,a=Q(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),D(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),D(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),D(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),bs("avgPool3d",r,s);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:i};let d=W.runKernel(d0,u,c);return d=Ce(d,a.dtype),l?Q(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const S9=V({avgPool3d_:ube});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cbe(t,e=0){D(t.length>=1,()=>"Pass at least one tensor to concat");const n=vg(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return Ga(n[0]);const r=n,s={axis:e};return W.runKernel(g0,r,s)}const jn=V({concat_:cbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dbe(t,e,n=!1,r=!1){let s=R(t,"a","matMul"),i=R(e,"b","matMul");[s,i]=On(s,i);const o={a:s,b:i},a={transposeA:n,transposeB:r};return W.runKernel(h0,o,a)}const mt=V({matMul_:dbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hbe(t){const n={x:R(t,"x","sigmoid","float32")};return W.runKernel(jp,n)}const na=V({sigmoid_:hbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fbe(t,e,n){const r=R(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const s={x:r},i={begin:e,size:n};return W.runKernel(ey,s,i)}const Nt=V({slice_:fbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pbe(t){const n={x:R(t,"x","tanh","float32")};return W.runKernel(Zp,n)}const ec=V({tanh_:pbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mbe(t,e,n,r,s,i){const o=R(t,"forgetBias","basicLSTMCell"),a=R(e,"lstmKernel","basicLSTMCell"),l=R(n,"lstmBias","basicLSTMCell"),u=R(r,"data","basicLSTMCell"),c=R(s,"c","basicLSTMCell"),d=R(i,"h","basicLSTMCell"),h=jn([u,d],1),f=mt(h,a),p=he(f,l),m=p.shape[0],y=p.shape[1]/4,g=[m,y],v=Nt(p,[0,0],g),E=Nt(p,[0,y],g),b=Nt(p,[0,y*2],g),T=Nt(p,[0,y*3],g),x=he(q(na(v),ec(E)),q(c,na(he(o,b)))),C=q(ec(x),na(T));return[x,C]}const qB=V({basicLSTMCell_:mbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gbe(t,e,n){const r=R(t,"x","batchToSpaceND"),s=e.reduce((a,l)=>a*l);D(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),D(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),D(r.shape[0]%s===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${s}`);const i={x:r},o={blockShape:e,crops:n};return W.runKernel(f0,i,o)}const fy=V({batchToSpaceND_:gbe});function ybe(t){let e;return t.rank===0||t.rank===1?e=Q(t,[1,1,1,t.size]):t.rank===2?e=Q(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=Q(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vbe(t,e,n,r,s,i){i==null&&(i=.001);const o=R(t,"x","batchNorm"),a=R(e,"mean","batchNorm"),l=R(n,"variance","batchNorm");let u;s!=null&&(u=R(s,"scale","batchNorm"));let c;r!=null&&(c=R(r,"offset","batchNorm")),D(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),D(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),D(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const h={x:ybe(o),scale:u,offset:c,mean:a,variance:l},f={varianceEpsilon:i},p=W.runKernel(w0,h,f);return Q(p,o.shape)}const t1=V({batchNorm_:vbe});function bbe(t,e,n,r,s,i){const o=R(t,"x","batchNorm"),a=R(e,"mean","batchNorm"),l=R(n,"variance","batchNorm");let u;s!=null&&(u=R(s,"scale","batchNorm"));let c;return r!=null&&(c=R(r,"offset","batchNorm")),D(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),D(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),D(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&D(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&D(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),t1(o,a,l,c,u,i)}const w9=V({batchNorm2d_:bbe});function Ebe(t,e,n,r,s,i){const o=R(t,"x","batchNorm"),a=R(e,"mean","batchNorm"),l=R(n,"variance","batchNorm");let u;s!=null&&(u=R(s,"scale","batchNorm"));let c;return r!=null&&(c=R(r,"offset","batchNorm")),D(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),D(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),D(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&D(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&D(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),t1(o,a,l,c,u,i)}const _9=V({batchNorm3d_:Ebe});function Tbe(t,e,n,r,s,i){const o=R(t,"x","batchNorm"),a=R(e,"mean","batchNorm"),l=R(n,"variance","batchNorm");let u;s!=null&&(u=R(s,"scale","batchNorm"));let c;return r!=null&&(c=R(r,"offset","batchNorm")),D(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),D(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),D(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&D(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&D(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),t1(o,a,l,c,u,i)}const k9=V({batchNorm4d_:Tbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xbe(t,e,n){const r=R(t,"x","bincount"),s=R(e,"weights","bincount");D(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),D(n>=0,()=>`size must be non-negative, but got ${n}.`),D(s.size===r.size||s.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${s.shape}.`);const i={x:r,weights:s},o={size:n};return W.runKernel(ox,i,o)}const I9=V({bincount_:xbe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cbe(t,e){const n=R(t,"x","bitwiseAnd"),r=R(e,"y","bitwiseAnd");if(!Et(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);const s={a:n,b:r};return W.runKernel(p0,s)}const XB=V({bitwiseAnd_:Cbe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sbe(t,e){const n=R(t,"s0","broadcastArgs","int32"),r=R(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const s={s0:n,s1:r};return W.runKernel(ax,s)}const YB=V({broadcastArgs_:Sbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wbe(t,e){let n=R(t,"broadcastTo","x");const r=n.shape;if(bi(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const u=n.shape.slice();for(;u.length<e.length;)u.unshift(1);n=Q(n,u)}const s=n.shape,i=Array.from(e);for(let u=e.length-1;u>=0;u--)if(s[u]===e[u])i[u]=1;else if(n.shape[u]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(i.map((u,c)=>u>1?c:-1).filter(u=>u>=0).length===0)return Ga(n);const a={x:n},l={reps:i};return W.runKernel(Jp,a,l)}const pd=V({broadcastTo_:wbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _be(t){const n={x:R(t,"x","ceil","float32")};return W.runKernel(pp,n)}const N9=V({ceil_:_be});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nh(t,e,n){bi(t),n=n||Zd(e);const r={shape:t,value:e,dtype:n};return W.runKernel(Cx,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kbe(t,e,n){const r=R(t,"x","clipByValue");if(D(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return nh(r.shape,e,r.dtype);const s={x:r},i={clipValueMin:e,clipValueMax:n};return W.runKernel(mp,s,i)}const Hs=V({clipByValue_:kbe});function Ibe(t){return jn(t,0)}const A9=V({concat1d_:Ibe});function Nbe(t,e){return jn(t,e)}const D9=V({concat2d_:Nbe});function Abe(t,e){return jn(t,e)}const R9=V({concat3d_:Abe});function Dbe(t,e){return jn(t,e)}const F9=V({concat4d_:Dbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rbe(t,e,n,r,s="NHWC",i=[1,1],o){const a=R(t,"x","conv2d","float32"),l=R(e,"filter","conv2d","float32");let u=a,c=!1;a.rank===3&&(c=!0,u=Q(a,[1,a.shape[0],a.shape[1],a.shape[2]])),D(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),D(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),bs("conv2d",r,o);const d=s==="NHWC"?u.shape[3]:u.shape[1];D(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),D(Ur(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),D(Rd(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),D(Rd(n),()=>"Error in conv2D: Strides should be larger than 0.");const h={x:u,filter:l},f={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o},p=W.runKernel(y0,h,f);return c?Q(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Wl=V({conv2d_:Rbe});function Fbe(t,e,n,r,s="NWC",i=1,o){const a=R(t,"x","conv1d"),l=R(e,"filter","conv1d");let u=a,c=!1;a.rank===2&&(c=!0,u=Q(a,[1,a.shape[0],a.shape[1]])),D(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),D(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),bs("conv1d",r,o),D(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),D(Ur(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),D(Rd(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),D(Rd(n),()=>"Error in conv1D: Stride should be larger than 0."),D(s==="NWC",()=>`Error in conv1d: got dataFormat of ${s} but only NWC is currently supported.`);const d=Q(l,[1,l.shape[0],l.shape[1],l.shape[2]]),h=Q(u,[u.shape[0],1,u.shape[1],u.shape[2]]),y=Wl(h,d,[1,n],r,"NHWC",[1,i],o);return c?Q(y,[y.shape[2],y.shape[3]]):Q(y,[y.shape[0],y.shape[2],y.shape[3]])}const dC=V({conv1d_:Fbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Obe(t,e,n,r,s,i="NHWC",o){D(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,l=e,u=!1;e.rank===3&&(u=!0,l=Q(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),D(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),D(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),D(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=i==="NHWC"?a[3]:a[1],d=i==="NHWC"?l.shape[3]:l.shape[1];D(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),D(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),bs("conv2dDerInput",s,o);const h={dy:l,filter:n},f={strides:r,pad:s,dataFormat:i,dimRoundingMode:o,inputShape:a},p=W.runKernel(v0,h,f);return u?Q(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const O9=V({conv2DBackpropInput_:Obe});function $be(t,e,n,r,s,i){const o=R(t,"x","conv2dTranspose"),a=R(e,"filter","conv2dTranspose");return O9(n,o,a,r,s,"NHWC",i)}const hC=V({conv2dTranspose_:$be});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lbe(t,e,n,r,s="NDHWC",i=[1,1,1]){const o=R(t,"x","conv3d"),a=R(e,"filter","conv3d");let l=o,u=!1;o.rank===4&&(u=!0,l=Q(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),D(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),D(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),D(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),D(Ur(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),D(s==="NDHWC",()=>`Error in conv3d: got dataFormat of ${s} but only NDHWC is currently supported.`),D(Rd(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),D(Rd(n),()=>"Error in conv3D: Strides should be larger than 0.");const c={x:l,filter:a},d={strides:n,pad:r,dataFormat:s,dilations:i},h=W.runKernel(b0,c,d);return u?Q(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const $9=V({conv3d_:Lbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pbe(t,e,n,r,s){D(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let i=t,o=e,a=!1;e.rank===4&&(a=!0,o=Q(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);const l=i[4],u=o.shape[4];D(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),D(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),D(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),D(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),D(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);const c={dy:o,filter:n},d={pad:s,strides:r,inputShape:i},h=W.runKernel(dx,c,d);return a?Q(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const QB=V({conv3DBackpropInput_:Pbe});function Mbe(t,e,n,r,s){const i=R(t,"x","conv3dTranspose"),o=R(e,"filter","conv3dTranspose");return QB(n,i,o,r,s)}const L9=V({conv3dTranspose_:Mbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bbe(t){const n={x:R(t,"x","cos","float32")};return W.runKernel(gp,n)}const py=V({cos_:Bbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zbe(t){const n={x:R(t,"x","cosh","float32")};return W.runKernel(yp,n)}const fC=V({cosh_:zbe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hbe(t,e=0,n=!1,r=!1){const i={x:R(t,"x","cumprod")},o={axis:e,exclusive:n,reverse:r};return W.runKernel(hx,i,o)}const xg=V({cumprod_:Hbe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ube(t,e=0,n=!1,r=!1){const i={x:R(t,"x","cumsum")},o={axis:e,exclusive:n,reverse:r};return W.runKernel(E0,i,o)}const pC=V({cumsum_:Ube});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wbe(t,e,n,r=!1){const s=R(t,"x","denseBincount"),i=R(e,"weights","denseBincount");D(s.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${s.dtype}`),D(s.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${s.rank}.`),D(n>=0,()=>`size must be non-negative, but got ${n}.`),D(i.size===s.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${s.shape}, weights shape: ${i.shape}.`);const o={x:s,weights:i},a={size:n,binaryOutput:r};return W.runKernel(px,o,a)}const OE=V({denseBincount_:Wbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vbe(t,e,n="NHWC"){const r=R(t,"x","depthToSpace","float32"),s=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];D(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),D(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e}  for depthToSpace with input shape
    ${r.shape}`),D(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e} for depthToSpace with input shape
        ${r.shape}`),D(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const a={x:r},l={blockSize:e,dataFormat:n};return W.runKernel(mx,a,l)}const P9=V({depthToSpace_:Vbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gbe(t,e,n,r,s="NHWC",i=[1,1],o){const a=R(t,"x","depthwiseConv2d","float32"),l=R(e,"filter","depthwiseConv2d","float32");let u=a,c=!1;a.rank===3&&(c=!0,u=Q(a,[1,a.shape[0],a.shape[1],a.shape[2]])),D(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),D(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=s==="NHWC"?u.shape[3]:u.shape[1];D(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),bs("depthwiseConv2d",r,o);const h={x:u,filter:l},f={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o},p=W.runKernel(T0,h,f);return c?Q(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const n1=V({depthwiseConv2d_:Gbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jbe(t){const n={x:R(t,"x","diag")};return W.runKernel(vx,n)}const ZB=V({diag_:jbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kbe(t,e,n,r,s=[1,1],i="NHWC"){const o=R(t,"x","dilation2d"),a=R(e,"filter","dilation2d");D(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),D(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),D(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let l=o,u=!1;o.rank===3&&(l=Q(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=!0),D(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);const c={x:l,filter:a},d={strides:n,pad:r,dilations:s},h=W.runKernel(x0,c,d);return u?Q(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const M9=V({dilation2d_:Kbe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fd(t,e){const n=t.length,r=[];for(let s=0;s<n;s++){const i=n-1-s,o=t[i]||1;(e[e.length-1-s]||1)>1&&o===1&&r.unshift(i)}return r}function sr(t,e){const n=[];for(let r=0;r<e.length;r++){const s=t[t.length-r-1],i=e.length-r-1,o=e[i];(s==null||s===1&&o>1)&&n.unshift(i)}return n}function it(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let s=0;s<n;s++){let i=t[t.length-s-1];i==null&&(i=1);let o=e[e.length-s-1];if(o==null&&(o=1),i===1)r[n-s-1]=o;else if(o===1)r[n-s-1]=i;else if(i!==o){const a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else r[n-s-1]=i}return r}const qbe=Object.freeze(Object.defineProperty({__proto__:null,assertAndGetBroadcastShape:it,getBroadcastDims:Fd,getReductionAxes:sr},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xbe(t,e){let n=R(t,"a","equal","string_or_numeric"),r=R(e,"b","equal","string_or_numeric");[n,r]=On(n,r),it(n.shape,r.shape);const s={a:n,b:r};return W.runKernel(C0,s)}const So=V({equal_:Xbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ybe(t,e,n){const r=R(e,"a","where"),s=R(n,"b","where"),i=R(t,"condition","where","bool"),o=it(it(i.shape,r.shape),s.shape),a=pd(i,o),l=pd(r,o),u=pd(s,o),c={condition:a,t:l,e:u};return W.runKernel(J0,c)}const Br=V({where_:Ybe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qbe(t){const n={x:R(t,"x","zerosLike")};return W.runKernel(ly,n)}const At=V({zerosLike_:Qbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zbe(t,e){let n=R(t,"a","div"),r=R(e,"b","div");[n,r]=On(n,r);const s=ze(n,r),i=At(s),o=So(r,i);return Br(o,i,s)}const B9=V({divNoNan_:Zbe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jbe(t,e){const n=R(t,"t1","dot"),r=R(e,"t2","dot");D((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const s=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(D(s===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${s} and ${i}.`),n.rank===1&&r.rank===1){const o=Q(n,[1,-1]),a=Q(r,[-1,1]),l=mt(o,a);return Q(l,[])}else if(n.rank===1&&r.rank===2){const o=Q(n,[1,-1]),a=Q(r,[r.shape[0],r.shape[1]]),l=mt(o,a);return Q(l,[l.size])}else if(n.rank===2&&r.rank===1){const o=Q(r,[-1,1]),a=mt(n,o);return Q(a,[a.size])}else{const o=Q(r,[r.shape[0],r.shape[1]]);return mt(n,o)}}const z9=V({dot_:Jbe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eEe(t,...e){const n=e.map((s,i)=>R(s,`tensors${i}`,"einsum")),r={equation:t};return W.runKernel(Ex,n,r)}const Yc=V({einsum_:eEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tEe(t){const n={x:R(t,"x","elu","float32")};return W.runKernel(bp,n)}const r1=V({elu_:tEe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nEe(t,e){const n=R(t,"x","ensureShape","string_or_numeric");if(!oB(n.shape,e))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${e}`);return t}const JB=V({ensureShape_:nEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rEe(t){let e=R(t,"x","erf");D(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=Ce(e,"float32"));const n={x:e};return W.runKernel(Ep,n)}const mC=V({erf_:rEe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H9(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function ez(t,e,n){const r=t.length+e.length,s=[];let i=0,o=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?s.push(t[i++]):s.push(e[o++]);return s}function Ir(t,e){const n=[],r=t.length;for(let i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);const s=e.map(i=>t[i]);return[n,s]}function Kn(t,e){const n=e.map(r=>1);return ez(t,n,e)}function Wr(t,e,n){D(H9(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function $n(t,e){if(H9(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function vc(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function Xn(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sEe(t,e=null,n=!1){const s={x:R(t,"x","max")},i={reductionIndices:e,keepDims:n};return W.runKernel($0,s,i)}const Bi=V({max_:sEe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iEe(t,e=null,n=!1){const s={x:R(t,"x","min")},i={axis:e,keepDims:n};return W.runKernel(B0,s,i)}const Ff=V({min_:iEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oEe(t,e){let n=R(t,"base","pow"),r=R(e,"exp","pow");[n,r]=On(n,r);const s={a:n,b:r};return W.runKernel(Lp,s)}const Ja=V({pow_:oEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function We(t,e){if((vr(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&vr(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return gc(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aEe(t){const n={x:R(t,"x","sqrt","float32")};return W.runKernel(qp,n)}const Cr=V({sqrt_:aEe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lEe(t){const e=R(t,"x","square"),n={};return W.runKernel("Square",{x:e},n)}const qt=V({square_:lEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uEe(t,e=null,n=!1){let r=R(t,"x","sum");r.dtype==="bool"&&(r=Ce(r,"int32"));const s={x:r},i={axis:e,keepDims:n};return W.runKernel(ty,s,i)}const Le=V({sum_:uEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cEe(t,e="euclidean",n=null,r=!1){t=R(t,"x","norm");const s=tz(t,e,n);let i=s.shape;if(r){const o=yt(n,t.shape);i=Kn(s.shape,o)}return Q(s,i)}function tz(t,e,n=null){if(t.rank===0)return er(t);if(t.rank!==1&&n===null)return tz(Q(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return Le(er(t),n);if(e===1/0)return Bi(er(t),n);if(e===-1/0)return Ff(er(t),n);if(e==="euclidean"||e===2)return Cr(Le(Ja(er(t),We(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return Bi(Le(er(t),n[0]),n[1]-1);if(e===1/0)return Bi(Le(er(t),n[1]),n[0]);if(e===-1/0)return Ff(Le(er(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return Cr(Le(qt(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const s1=V({norm_:cEe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dEe(t,e=null,n=!1){return s1(t,"euclidean",e,n)}const U9=V({euclideanNorm_:dEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hEe(t){const n={x:R(t,"x","exp")};return W.runKernel(Tp,n)}const Us=V({exp_:hEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fEe(t,e=0){const n=R(t,"x","expandDims","string_or_numeric");D(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},s={dim:e};return W.runKernel(S0,r,s)}const Xr=V({expandDims_:fEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pEe(t){const n={x:R(t,"x","expm1")};return W.runKernel(xp,n)}const W9=V({expm1_:pEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mEe(t,e){const n=R(t,"x","tile","string_or_numeric");D(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},s={reps:e};return W.runKernel(Jp,r,s)}const Ri=V({tile_:mEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gEe(t,e,n,r="float32"){e==null&&(e=t);const s=ct([t,e],r),i=t<=e?t:e;for(let a=0;a<i;++a)s.set(1,a,a);const o=Q(s.toTensor(),[t,e]);if(n==null)return o;if(n.length===1)return Ri(Xr(o,0),[n[0],1,1]);if(n.length===2)return Ri(Xr(Xr(o,0),0),[n[0],n[1],1,1]);if(n.length===3)return Ri(Xr(Xr(Xr(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const gC=V({eye_:gEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yEe(t){const n={x:R(t,"x","floor","float32")};return W.runKernel(Cp,n)}const i1=V({floor_:yEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vEe(t,e,n=0,r=0){const s=R(t,"x","gather"),i=R(e,"indices","gather","int32"),o={x:s,indices:i},a={axis:n,batchDims:r};return W.runKernel(_0,o,a)}const o1=V({gather_:vEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bEe(t,e){let n=R(t,"a","greater","string_or_numeric"),r=R(e,"b","greater","string_or_numeric");[n,r]=On(n,r),it(n.shape,r.shape);const s={a:n,b:r};return W.runKernel(k0,s)}const qs=V({greater_:bEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EEe(t,e){let n=R(t,"a","greaterEqual","string_or_numeric"),r=R(e,"b","greaterEqual","string_or_numeric");[n,r]=On(n,r),it(n.shape,r.shape);const s={a:n,b:r};return W.runKernel(wp,s)}const ru=V({greaterEqual_:EEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TEe(t){const n={input:R(t,"input","imag")};return W.runKernel(kx,n)}const my=V({imag_:TEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xEe(t){const n={x:R(t,"x","isFinite")};return W.runKernel(kp,n)}const V9=V({isFinite_:xEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CEe(t){const n={x:R(t,"x","isInf")};return W.runKernel(Ip,n)}const G9=V({isInf_:CEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SEe(t){const n={x:R(t,"x","isNaN")};return W.runKernel(Np,n)}const j9=V({isNaN_:SEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wEe(t,e=.2){const r={x:R(t,"x","leakyRelu")},s={alpha:e};return W.runKernel(I0,r,s)}const gy=V({leakyRelu_:wEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ee(t,e){let n=R(t,"a","less","string_or_numeric"),r=R(e,"b","less","string_or_numeric");[n,r]=On(n,r),it(n.shape,r.shape);const s={a:n,b:r};return W.runKernel(N0,s)}const Of=V({less_:_Ee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kEe(t,e){let n=R(t,"a","lessEqual","string_or_numeric"),r=R(e,"b","lessEqual","string_or_numeric");[n,r]=On(n,r),it(n.shape,r.shape);const s={a:n,b:r};return W.runKernel(A0,s)}const bc=V({lessEqual_:kEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nz(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return W.runKernel(Ix,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IEe(t,e=5,n=1,r=1,s=.5){const i=R(t,"x","localResponseNormalization");D(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),D(kd(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=i,a=!1;i.rank===3&&(a=!0,o=Q(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const l={x:o},u={depthRadius:e,bias:n,alpha:r,beta:s},c=W.runKernel(O0,l,u);return a?Q(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const K9=V({localResponseNormalization_:IEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NEe(t){const n={x:R(t,"x","log","float32")};return W.runKernel(Ap,n)}const pi=V({log_:NEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AEe(t){const n={x:R(t,"x","log1p")};return W.runKernel(Dp,n)}const yy=V({log1p_:AEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DEe(t){return D(Yu(t),()=>"The f passed in grad(f) must be a function"),(e,n)=>{const r=R(e,"x","tf.grad","string_or_numeric"),s=n!=null?R(n,"dy","tf.grad"):null;return W.tidy(()=>{const{value:i,grads:o}=W.gradients(()=>t(r),[r],s);return s!=null&&Hr(i.shape,s.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),yC(o),o[0]})}}function REe(t){return D(Yu(t),()=>"The f passed in grads(f) must be a function"),(e,n)=>{D(Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const r=vg(e,"args","tf.grads","string_or_numeric"),s=n!=null?R(n,"dy","tf.grads"):null;return W.tidy(()=>{const{value:i,grads:o}=W.gradients(()=>t(...r),r,s);return s!=null&&Hr(i.shape,s.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),yC(o),o})}}function FEe(t){return D(Yu(t),()=>"The f passed in valueAndGrad(f) must be a function"),(e,n)=>{D(e instanceof Ut,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),D(n==null||n instanceof Ut,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:r,value:s}=W.gradients(()=>t(e),[e],n);return yC(r),{grad:r[0],value:s}}}function OEe(t){return D(Yu(t),()=>"The f passed in valueAndGrads(f) must be a function"),(e,n)=>{D(Array.isArray(e)&&e.every(s=>s instanceof Ut),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),D(n==null||n instanceof Ut,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const r=W.gradients(()=>t(...e),e,n);return n!=null&&Hr(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),yC(r.grads),r}}function rz(t,e){D(Yu(t),()=>"The f passed in variableGrads(f) must be a function"),D(e==null||Array.isArray(e)&&e.every(u=>u instanceof yg),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const u in W.registeredVariables)e.push(W.registeredVariables[u])}const r=n?e.filter(u=>!u.trainable):null,s=e.length;e=e.filter(u=>u.trainable),D(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);const i=!0,{value:o,grads:a}=W.gradients(t,e,null,i);D(a.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),D(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const l={};return e.forEach((u,c)=>{a[c]!=null&&(l[u.name]=a[c])}),r!=null&&r.forEach(u=>l[u.name]=null),{value:o,grads:l}}function el(t){return W.customGrad(t)}function yC(t){if(t.filter(n=>n==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ee(t){const n={x:R(t,"x","neg")};return W.runKernel(H0,n)}const an=V({neg_:$Ee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LEe(t){const n={x:R(t,"x","softplus")};return W.runKernel(Kp,n)}const rh=V({softplus_:LEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PEe(t){const e=R(t,"x","logSigmoid");return el(r=>({value:an(rh(an(r))),gradFunc:o=>q(o,na(an(r)))}))(e)}const q9=V({logSigmoid_:PEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MEe(t,e){let n=R(t,"a","sub"),r=R(e,"b","sub");[n,r]=On(n,r);const s={a:n,b:r};return W.runKernel(Yp,s)}const Re=V({sub_:MEe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BEe(t,e=-1){const n=R(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return el((s,i)=>{const a=Bi(s,e,!0),l=Re(s,a),u=Re(Ce(l,"float32"),pi(Le(Us(l),e,!0)));return i([u]),{value:u,gradFunc:(d,h)=>{const[f]=h,p=!0,m=Us(f);return Re(d,q(Le(d,e,p),m))}}})(n)}const vC=V({logSoftmax_:BEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zEe(t,e=null,n=!1){const r=R(t,"x","logSumExp"),s=yt(e,r.shape),i=Bi(r,s,!0),o=Re(r,i),a=Us(o),l=Le(a,s),u=pi(l),c=he(Q(i,u.shape),u);if(n){const d=Kn(c.shape,s);return Q(c,d)}return c}const vy=V({logSumExp_:zEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HEe(t,e){const n=R(t,"a","logicalAnd","bool"),r=R(e,"b","logicalAnd","bool");it(n.shape,r.shape);const s={a:n,b:r};return W.runKernel(D0,s)}const aa=V({logicalAnd_:HEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UEe(t){const n={x:R(t,"x","logicalNot","bool")};return W.runKernel(R0,n)}const by=V({logicalNot_:UEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WEe(t,e){const n=R(t,"a","logicalOr","bool"),r=R(e,"b","logicalOr","bool");it(n.shape,r.shape);const s={a:n,b:r};return W.runKernel(F0,s)}const bC=V({logicalOr_:WEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VEe(t,e){const n=R(t,"a","logicalXor","bool"),r=R(e,"b","logicalXor","bool");return it(n.shape,r.shape),aa(bC(t,e),by(aa(t,e)))}const X9=V({logicalXor_:VEe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uv=2147483648;function GEe(t,e,n="left"){const r=R(t,"sortedSequence","searchSorted"),s=R(e,"values","searchSorted"),i=r.shape[r.shape.length-1],o=s.shape[s.shape.length-1],a=Q(r,[-1,i]),l=Q(s,[-1,o]);if(a.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(a.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(re(l.shape)>=Uv)throw new Error(`values tensor size must less than ${Uv}`);if(a.shape[1]>=Uv)throw new Error(`trailing dim_size must less than ${Uv} for int32 output type, was ${a.shape[1]}`);const u={sortedSequence:a,values:l},c={side:n};return W.runKernel(jx,u,c)}const EC=V({searchSorted_:GEe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sz(t,e){return EC(t,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jEe(t,e,n,r,s){const i=R(t,"x","maxPool"),o=1;let a=i,l=!1;i.rank===3&&(l=!0,a=Q(i,[1,i.shape[0],i.shape[1],i.shape[2]])),D(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),D(Ur(n,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),bs("maxPool",r,s);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:s},d=W.runKernel(L0,u,c);return l?Q(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const Ey=V({maxPool_:jEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KEe(t,e=[1,1,1],n,r,s,i="NDHWC"){const o=R(t,"x","maxPool3d");let a=o,l=!1;o.rank===4&&(l=!0,a=Q(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),D(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),D(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),bs("maxPool3d",r,s);const u={x:a},c={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:i},d=W.runKernel(P0,u,c);return l?Q(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const Y9=V({maxPool3d_:KEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qEe(t,e,n,r,s=!1){const o={x:R(t,"x","maxPoolWithArgmax")},a={filterSize:e,strides:n,pad:r,includeBatchInIndex:s},l=W.runKernel(Rx,o,a);return{result:l[0],indexes:l[1]}}const iz=V({maxPoolWithArgmax_:qEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XEe(t,e){let n=R(t,"a","maximum"),r=R(e,"b","maximum");[n,r]=On(n,r),n.dtype==="bool"&&(n=Ce(n,"int32"),r=Ce(r,"int32")),it(n.shape,r.shape);const s={a:n,b:r};return W.runKernel(Rp,s)}const al=V({maximum_:XEe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YEe(t,e=null,n=!1){const s={x:R(t,"x","mean")},i={axis:e,keepDims:n};return W.runKernel(M0,s,i)}const Rn=V({mean_:YEe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nr(t,e="float32"){if(bi(t),e==="complex64"){const r=nr(t,"float32"),s=nr(t,"float32");return Ul(r,s)}const n=zr(re(t),e);return W.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Os(t,e="float32"){if(bi(t),e==="complex64"){const r=Os(t,"float32"),s=nr(t,"float32");return Ul(r,s)}const n=tx(re(t),e);return W.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oz(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=R(t,"x","meshgrid",t instanceof Ut?t.dtype:"float32");if(e===void 0)return[r];let s=R(e,"y","meshgrid",e instanceof Ut?e.dtype:"float32");const i=re(r.shape),o=re(s.shape);return n==="xy"?(r=Q(r,[1,-1]),s=Q(s,[-1,1]),[mt(Os([o,1],r.dtype),r),mt(s,Os([1,i],s.dtype))]):(r=Q(r,[-1,1]),s=Q(s,[1,-1]),[mt(r,Os([1,o],r.dtype)),mt(Os([i,1],s.dtype),s)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QEe(t,e){let n=R(t,"a","minimum"),r=R(e,"b","minimum");[n,r]=On(n,r),n.dtype==="bool"&&(n=Ce(n,"int32"),r=Ce(r,"int32")),it(n.shape,r.shape);const s={a:n,b:r};return W.runKernel(Fp,s)}const tc=V({minimum_:QEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZEe(t,e,n){D(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=R(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");D(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const s=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)D(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),D(e[a][0]>=0&&e[a][0]<=r.shape[a]-s&&e[a][1]>=0&&e[a][1]<=r.shape[a]-s,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-s} or less than 0 for input of shape ${r.shape}`);const i={paddings:e,mode:n},o={x:r};return W.runKernel(z0,o,i)}const Q9=V({mirrorPad_:ZEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JEe(t,e){let n=R(t,"a","mod"),r=R(e,"b","mod");[n,r]=On(n,r);const s={a:n,b:r};return W.runKernel(Op,s)}const Z9=V({mod_:JEe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eTe(t,e=null,n=!1){t=R(t,"x","moments");const r=yt(e,t.shape),s=Rn(t,r,n);let i=s.shape;n||(i=Kn(s.shape,r));const o=qt(Re(Ce(t,"float32"),Q(s,i))),a=Rn(o,r,n);return{mean:s,variance:a}}const Ty=V({moments_:eTe});function tTe(t,e,n,r){const s=R(e,"data","multiRNNCell"),i=vg(n,"c","multiRNNCell"),o=vg(r,"h","multiRNNCell");let a=s;const l=[];for(let d=0;d<t.length;d++){const h=t[d](a,i[d],o[d]);l.push(h[0]),l.push(h[1]),a=h[1]}const u=[],c=[];for(let d=0;d<l.length;d+=2)u.push(l[d]),c.push(l[d+1]);return[u,c]}const az=V({multiRNNCell_:tTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nTe(t,e,n,r=!1){const s=R(t,"logits","multinomial"),i=s.size,o=s.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(o>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${o}`);n=n||Math.random();const l={logits:o===1?Q(s,[1,-1]):s},u={numSamples:e,seed:n,normalized:r},c=W.runKernel(Fx,l,u);return o===1?Q(c,[c.size]):c}const lz=V({multinomial_:nTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rTe(t,e){let n=R(t,"a","notEqual","string_or_numeric"),r=R(e,"b","notEqual","string_or_numeric");[n,r]=On(n,r),it(n.shape,r.shape);const s={a:n,b:r};return W.runKernel(U0,s)}const Od=V({notEqual_:rTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sTe(t,e,n=1,r=0,s="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const o={indices:R(t,"indices","oneHot","int32")},a={dtype:s,depth:e,onValue:n,offValue:r};return W.runKernel(V0,o,a)}const $f=V({oneHot_:sTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iTe(t){const n={x:R(t,"x","onesLike")};return W.runKernel(W0,n)}const mi=V({onesLike_:iTe});function oTe(t,e){const n=R(t,"v1","outerProduct"),r=R(e,"v2","outerProduct");D(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const s=Q(n,[-1,1]),i=Q(r,[1,-1]);return mt(s,i)}const uz=V({outerProduct_:oTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aTe(t,e,n=0){const r=R(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const s={paddings:e,constantValue:n},i={x:r};return W.runKernel(j0,i,s)}const su=V({pad_:aTe});function lTe(t,e,n=0){return D(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),su(t,[e],n)}const cz=V({pad1d_:lTe});function uTe(t,e,n=0){return D(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),su(t,e,n)}const dz=V({pad2d_:uTe});function cTe(t,e,n=0){return D(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),su(t,e,n)}const hz=V({pad3d_:cTe});function dTe(t,e,n=0){return D(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),su(t,e,n)}const fz=V({pad4d_:dTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hTe(t,e,n){const r=R(t,"x","spaceToBatchND");D(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),D(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),D(r.shape.reduce((o,a,l)=>l>0&&l<=e.length?o&&(a+n[l-1][0]+n[l-1][1])%e[l-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const s={x:r},i={blockShape:e,paddings:n};return W.runKernel(ny,s,i)}const xy=V({spaceToBatchND_:hTe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fTe(t,e,n,r,s,i,o){s==null&&(s=[1,1]),i==null&&(i=1),r===0&&(r="valid");const a=R(t,"x","maxPool");let l=a,u=!1;a.rank===3&&(u=!0,l=Q(a,[1,a.shape[0],a.shape[1],a.shape[2]])),D(Ur(i,s),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${s}'`);const c=Io(l.shape,e,i,s,r),d=[c.dilationHeight,c.dilationWidth];let h;r==="same"?h=mTe([c.filterHeight,c.filterWidth],d):h=[[0,0],[0,0]];const f=d[0]===1&&d[1]===1,[p,m]=pTe([c.inHeight,c.inWidth],d,h),y=f?r:"valid",g=f?l:xy(l,d,p),E=(n==="avg"?()=>hy(g,e,i,y,o):()=>Ey(g,e,i,y,o))(),b=f?E:fy(E,d,m);return u?Q(b,[b.shape[1],b.shape[2],b.shape[3]]):b}function pTe(t,e,n){const r=n.map(c=>c[0]),s=n.map(c=>c[1]),i=t.concat(r,s),o=e.map((c,d)=>(c-i[d]%c)%c),a=s.map((c,d)=>c+o[d]),l=e.map((c,d)=>[r[d],a[d]]),u=e.map((c,d)=>[0,o[d]]);return[l,u]}function mTe(t,e){const r=t.map((o,a)=>o+(o-1)*(e[a]-1)).map(o=>o-1),s=r.map(o=>Math.floor(o/2)),i=r.map((o,a)=>o-s[a]);return r.map((o,a)=>[s[a],i[a]])}const J9=V({pool_:fTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gTe(t,e){const n=R(t,"x","prelu"),r=R(e,"alpha","prelu"),s={x:n,alpha:r};return W.runKernel(K0,s)}const Cy=V({prelu_:gTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yTe(t,e=null,n=!1){let r=R(t,"x","prod");r.dtype==="bool"&&(r=Ce(r,"int32"));const s={x:r},i={axis:e,keepDims:n};return W.runKernel(q0,s,i)}const eA=V({prod_:yTe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vTe(t,e,n,r){const s=t.map((c,d)=>R(c,`tensors${d}`,"raggedGather","int32")),i=R(e,"paramsDenseValues","raggedGather"),o=R(n,"indices","raggedGather","int32"),a={paramsNestedSplits:s,paramsDenseValues:i,indices:o},l={outputRaggedRank:r},u=W.runKernel(Px,a,l);return{outputNestedSplits:u.slice(0,u.length-1),outputDenseValues:u[u.length-1]}}const pz=V({raggedGather_:vTe});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bTe(t,e,n){const r=R(t,"starts","raggedRange"),s=R(e,"limits","raggedRange",r.dtype),i=R(n,"deltas","raggedRange",r.dtype),o={starts:r,limits:s,deltas:i},a=W.runKernel(Mx,o);return{rtNestedSplits:a[0],rtDenseValues:a[1]}}const mz=V({raggedRange_:bTe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ETe(t,e,n,r,s){const i=R(t,"shape","raggedTensorToTensor","int32"),o=R(e,"values","raggedTensorToTensor"),a=R(n,"defaultValue","raggedTensorToTensor",o.dtype),l=r.map((d,h)=>R(d,`tensors${h}`,"raggedTensorToTensor","int32")),u={shape:i,values:o,defaultValue:a,rowPartitionTensors:l},c={rowPartitionTypes:s};return W.runKernel(Bx,u,c)}const gz=V({raggedTensorToTensor_:ETe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TTe(t,e,n){bi(t);const r=re(t);let s=null;if(n==null||n==="float32")s=new Float32Array(r);else if(n==="int32")s=new Int32Array(r);else if(n==="bool")s=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let i=0;i<r;i++)s[i]=e();return W.makeTensor(s,t,n)}const yz=V({rand_:TTe});var dk={},xTe={get exports(){return dk},set exports(t){dk=t}};(function(t){(function(e,n,r){function s(l){var u=this,c=a();u.next=function(){var d=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=d|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function i(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function o(l,u){var c=new s(l),d=u&&u.state,h=c.next;return h.int32=function(){return c.next()*4294967296|0},h.double=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.quick=h,d&&(typeof d=="object"&&i(d,c),h.state=function(){return i(c,{})}),h}function a(){var l=4022871197,u=function(c){c=String(c);for(var d=0;d<c.length;d++){l+=c.charCodeAt(d);var h=.02519603282416938*l;l=h>>>0,h-=l,h*=l,l=h>>>0,h-=l,l+=h*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(ac,t,!1)})(xTe);var hk={},CTe={get exports(){return hk},set exports(t){hk=t}};(function(t){(function(e,n,r){function s(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function o(a,l){var u=new s(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var h=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(ac,t,!1)})(CTe);var fk={},STe={get exports(){return fk},set exports(t){fk=t}};(function(t){(function(e,n,r){function s(a){var l=this,u="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function o(a,l){var u=new s(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var h=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(ac,t,!1)})(STe);var pk={},wTe={get exports(){return pk},set exports(t){pk=t}};(function(t){(function(e,n,r){function s(a){var l=this;l.next=function(){var c=l.x,d=l.i,h,f;return h=c[d],h^=h>>>7,f=h^h<<24,h=c[d+1&7],f^=h^h>>>10,h=c[d+3&7],f^=h^h>>>3,h=c[d+4&7],f^=h^h<<7,h=c[d+7&7],h=h^h<<13,f^=h^h<<9,c[d]=f,l.i=d+1&7,f};function u(c,d){var h,f=[];if(d===(d|0))f[0]=d;else for(d=""+d,h=0;h<d.length;++h)f[h&7]=f[h&7]<<15^d.charCodeAt(h)+f[h+1&7]<<13;for(;f.length<8;)f.push(0);for(h=0;h<8&&f[h]===0;++h);for(h==8?f[7]=-1:f[h],c.x=f,c.i=0,h=256;h>0;--h)c.next()}u(l,a)}function i(a,l){return l.x=a.x.slice(),l.i=a.i,l}function o(a,l){a==null&&(a=+new Date);var u=new s(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var h=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.x&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(ac,t,!1)})(wTe);var mk={},_Te={get exports(){return mk},set exports(t){mk=t}};(function(t){(function(e,n,r){function s(a){var l=this;l.next=function(){var c=l.w,d=l.X,h=l.i,f,p;return l.w=c=c+1640531527|0,p=d[h+34&127],f=d[h=h+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,p=d[h]=p^f,l.i=h,p+(c^c>>>16)|0};function u(c,d){var h,f,p,m,y,g=[],v=128;for(d===(d|0)?(f=d,d=null):(d=d+"\0",f=0,v=Math.max(v,d.length)),p=0,m=-32;m<v;++m)d&&(f^=d.charCodeAt((m+32)%d.length)),m===0&&(y=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,m>=0&&(y=y+1640531527|0,h=g[m&127]^=f+y,p=h==0?p+1:0);for(p>=128&&(g[(d&&d.length||0)&127]=-1),p=127,m=4*128;m>0;--m)f=g[p+34&127],h=g[p=p+1&127],f^=f<<13,h^=h<<17,f^=f>>>15,h^=h>>>12,g[p]=f^h;c.w=y,c.X=g,c.i=p}u(l,a)}function i(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function o(a,l){a==null&&(a=+new Date);var u=new s(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var h=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.X&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(ac,t,!1)})(_Te);var gk={},kTe={get exports(){return gk},set exports(t){gk=t}};(function(t){(function(e,n,r){function s(a){var l=this,u="";l.next=function(){var d=l.b,h=l.c,f=l.d,p=l.a;return d=d<<25^d>>>7^h,h=h-f|0,f=f<<24^f>>>8^p,p=p-d|0,l.b=d=d<<20^d>>>12^h,l.c=h=h-f|0,l.d=f<<16^h>>>16^p,l.a=p-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):u+=a;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function i(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function o(a,l){var u=new s(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var h=u.next()>>>11,f=(u.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&i(c,u),d.state=function(){return i(u,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(ac,t,!1)})(kTe);var yk={},ITe={get exports(){return yk},set exports(t){yk=t}};const NTe={},ATe=Object.freeze(Object.defineProperty({__proto__:null,default:NTe},Symbol.toStringTag,{value:"Module"})),DTe=Zk(ATe);(function(t){(function(e,n,r){var s=256,i=6,o=52,a="random",l=r.pow(s,i),u=r.pow(2,o),c=u*2,d=s-1,h;function f(b,T,x){var C=[];T=T==!0?{entropy:!0}:T||{};var S=g(y(T.entropy?[b,E(n)]:b??v(),3),C),N=new p(C),I=function(){for(var F=N.g(i),L=l,z=0;F<u;)F=(F+z)*s,L*=s,z=N.g(1);for(;F>=c;)F/=2,L/=2,z>>>=1;return(F+z)/L};return I.int32=function(){return N.g(4)|0},I.quick=function(){return N.g(4)/4294967296},I.double=I,g(E(N.S),n),(T.pass||x||function(F,L,z,H){return H&&(H.S&&m(H,N),F.state=function(){return m(N,{})}),z?(r[a]=F,L):F})(I,S,"global"in T?T.global:this==r,T.state)}function p(b){var T,x=b.length,C=this,S=0,N=C.i=C.j=0,I=C.S=[];for(x||(b=[x++]);S<s;)I[S]=S++;for(S=0;S<s;S++)I[S]=I[N=d&N+b[S%x]+(T=I[S])],I[N]=T;(C.g=function(F){for(var L,z=0,H=C.i,$=C.j,M=C.S;F--;)L=M[H=d&H+1],z=z*s+M[d&(M[H]=M[$=d&$+L])+(M[$]=L)];return C.i=H,C.j=$,z})(s)}function m(b,T){return T.i=b.i,T.j=b.j,T.S=b.S.slice(),T}function y(b,T){var x=[],C=typeof b,S;if(T&&C=="object")for(S in b)try{x.push(y(b[S],T-1))}catch{}return x.length?x:C=="string"?b:b+"\0"}function g(b,T){for(var x=b+"",C,S=0;S<x.length;)T[d&S]=d&(C^=T[d&S]*19)+x.charCodeAt(S++);return E(T)}function v(){try{var b;return h&&(b=h.randomBytes)?b=b(s):(b=new Uint8Array(s),(e.crypto||e.msCrypto).getRandomValues(b)),E(b)}catch{var T=e.navigator,x=T&&T.plugins;return[+new Date,e,x,e.screen,E(n)]}}function E(b){return String.fromCharCode.apply(0,b)}if(g(r.random(),n),t.exports){t.exports=f;try{h=DTe}catch{}}else r["seed"+a]=f})(typeof self<"u"?self:ac,[],Math)})(ITe);var RTe=dk,FTe=hk,OTe=fk,$Te=pk,LTe=mk,PTe=gk,sh=yk;sh.alea=RTe;sh.xor128=FTe;sh.xorwow=OTe;sh.xorshift7=$Te;sh.xor4096=LTe;sh.tychei=PTe;var TC=sh;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MTe=.001,vz=.1;function BTe(t,e,n){return n==null&&(n=tA()),vk(t,e,(r,s)=>nA(r,s,n))}function tA(){return W.backend.floatPrecision()===32?MTe:vz}function vk(t,e,n){let r=!0;if((vr(t)||vr(e))&&(r=!1),vr(t)&&vr(e)&&(r=!0),r){const o=t.constructor.name,a=e.constructor.name;if(o!==a)throw new Error(`Arrays are of different type. Actual: ${o}. Expected: ${a}`)}if(Array.isArray(t)&&Array.isArray(e)){const o=Za(t),a=Za(e);if(!Et(o,a))throw new Error(`Arrays have different shapes. Actual: [${o}]. Expected: [${a}]`)}const s=vr(t)?t:Qa(t),i=vr(e)?e:Qa(e);if(s.length!==i.length)throw new Error(`Arrays have different lengths actual: ${s.length} vs expected: ${i.length}.
Actual:   ${s}.
Expected: ${i}.`);for(let o=0;o<i.length;++o){const a=s[o],l=i[o];if(!n(a,l))throw new Error(`Arrays differ: actual[${o}] = ${a}, expected[${o}] = ${l}.
Actual:   ${s}.
Expected: ${i}.`)}typeof expect<"u"&&expect().nothing()}function zTe(t,e){t().then(()=>e.fail(),()=>e()),typeof expect<"u"&&expect().nothing()}function HTe(t,e){const n=typeof e=="string"||typeof e=="number"||typeof e=="boolean"?[e]:e;return Pa(t)||Pa(t[0])||Pa(e)||Pa(e[0])?vk(t,n,(r,s)=>r==s):vk(t,e,(r,s)=>nA(r,s,0))}function UTe(t,e,n){if(n==null&&(n=tA()),!nA(t,e,n))throw new Error(`Numbers differ: actual === ${t}, expected === ${e}`);typeof expect<"u"&&expect().nothing()}function nA(t,e,n){return!isFinite(t)&&!isFinite(e)?!0:!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}function WTe(t,e,n){for(let r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error(`Value out of range:${t[r]} low: ${e}, high: ${n}`)}function VTe(t,e){const n=new Float32Array(t),r=new Float32Array(e);if(n.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${n.length}`);for(let s=0;s<r.length;s++)if(n[s]!==r[s])throw new Error(`Expected ArrayBuffer value at ${s} to be ${r[s]} but got ${n[s]} instead`)}function bz(t){for(let e=0;e<t.length;e++){const n=t[e];Array.isArray(n)?bz(n):t[e]=Va(n)}return t}function GTe(t){const e=document.createElement("video");return"playsInline"in e&&(e.playsInline=!0),e.muted=!0,e.loop=!0,e.style.position="fixed",e.style.left="0px",e.style.top="0px",e.preload="auto",e.appendChild(t),new Promise(n=>{e.addEventListener("loadeddata",r=>n(e)),e.load()})}async function jTe(t){await t.play(),"requestVideoFrameCallback"in t&&await new Promise(e=>{t.requestVideoFrameCallback(e)})}const KTe=Object.freeze(Object.defineProperty({__proto__:null,TEST_EPSILON_FLOAT16:vz,createVideoElement:GTe,encodeStrings:bz,expectArrayBuffersEqual:VTe,expectArraysClose:BTe,expectArraysEqual:HTe,expectNumbersClose:UTe,expectPromiseToFail:zTe,expectValuesInRange:WTe,play:jTe,testEpsilon:tA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rA{constructor(e,n,r,s,i){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=i||Math.random();this.random=TC.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const s=this.nextVal;return this.nextVal=NaN,s}let e,n,r=!1;for(;!r;){let s,i,o;do s=2*this.random()-1,i=2*this.random()-1,o=s*s+i*i;while(o>=1||o===0);const a=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*s*a,n=this.mean+this.stdDev*i*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class qTe{constructor(e,n,r,s){this.alpha=e,this.beta=1/n,this.dtype=r;const i=s||Math.random();this.randu=TC.alea(i.toString()),this.randn=new rA(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,s,i,o;for(;;){do s=this.randn.nextValue(),o=1+this.c*s;while(o<=0);if(o*=o*o,e=s*s,n=1-.331*e*e,r=.5*e+this.d*(1-o+Math.log(o)),i=this.randu(),i<n||Math.log(i)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class XTe{constructor(e=0,n=1,r,s){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=TC.alea(s)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YTe(t,e,n=1,r="float32",s){if(bi(t),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const i=new qTe(e,n,r,s),o=ct(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const Ez=V({randomGamma_:YTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QTe(t,e=0,n=1,r,s){if(bi(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const i=new rA(e,n,r,!1,s),o=ct(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const xC=V({randomNormal_:QTe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZTe(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return xC(t,0,1,e,n)}const Tz=V({randomStandardNormal_:ZTe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JTe(t,e=0,n=1,r="float32",s){bi(t);const i=ct(t,r),o=new XTe(e,n,null,s);for(let a=0;a<i.values.length;a++)i.values[a]=o.nextValue();return i.toTensor()}const Ec=V({randomUniform_:JTe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function exe(t,e,n,r){return Ec(t,e,n,"int32",r)}const xz=V({randomUniformInt_:exe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $d(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const s={start:t,stop:e,step:n,dtype:r};return W.runKernel(zx,{},s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function txe(t){const n={input:R(t,"input","real")};return W.runKernel(Hx,n)}const Lf=V({real_:txe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nxe(t){const n={x:R(t,"x","reciprocal")};return W.runKernel(Pp,n)}const sA=V({reciprocal_:nxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rxe(t){const n={x:R(t,"x","relu")};return W.runKernel(Mp,n)}const ga=V({relu_:rxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sxe(t){const n={x:R(t,"x","relu6")};return W.runKernel(Bp,n)}const CC=V({relu6_:sxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ixe(t,e){const r={x:R(t,"x","reverse")},s={dims:e};return W.runKernel(Z0,r,s)}const Hi=V({reverse_:ixe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oxe(t){const e=R(t,"x","reverse");return D(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),Hi(e,0)}const Cz=V({reverse1d_:oxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function axe(t,e){const n=R(t,"x","reverse");return D(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),Hi(n,e)}const Sz=V({reverse2d_:axe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lxe(t,e){const n=R(t,"x","reverse");return D(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),Hi(n,e)}const wz=V({reverse3d_:lxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uxe(t,e){const n=R(t,"x","reverse");return D(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),Hi(n,e)}const _z=V({reverse4d_:uxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cxe(t){const n={x:R(t,"x","round")};return W.runKernel(zp,n)}const SC=V({round_:cxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dxe(t){const n={x:R(t,"x","rsqrt","float32")};return W.runKernel(Hp,n)}const wC=V({rsqrt_:dxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hxe(t){const n={x:R(t,"x","selu")};return W.runKernel(Up,n)}const _C=V({selu_:hxe});function fxe(t,e,n,r,s,i=[1,1],o="NHWC"){const a=R(t,"x","separableConv2d"),l=R(e,"depthwiseFilter","separableConv2d"),u=R(n,"pointwiseFilter","separableConv2d");let c=a,d=!1;if(a.rank===3&&(d=!0,c=Q(a,[1,a.shape[0],a.shape[1],a.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");D(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),D(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),D(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),D(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),D(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const h=l.shape[2],f=l.shape[3];D(u.shape[2]===h*f,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${h*f}, but got ${u.shape[2]}.`);const p=n1(c,l,r,s,o,i),y=Wl(p,u,1,"valid",o);return d?Q(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const kC=V({separableConv2d_:fxe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function pxe(t,e){const n=R(t,"x","setdiff1d"),r=R(e,"y","setdiff1d");D(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),D(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),D(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const s=await n.data(),i=await r.data(),o=new Set(i);let a=0;for(let c=0;c<s.length;c++)o.has(s[c])||a++;const l=new rr([a],n.dtype),u=new rr([a],"int32");for(let c=0,d=0;c<s.length;c++)o.has(s[c])||(l.values[d]=s[c],u.values[d]=c,d++);return[l.toTensor(),u.toTensor()]}const kz=pxe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mxe(t){const n={x:R(t,"x","sign")};return W.runKernel(Gp,n)}const iA=V({sign_:mxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gxe(t){const n={x:R(t,"x","sin","float32")};return W.runKernel(Wp,n)}const IC=V({sin_:gxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yxe(t){const n={x:R(t,"x","sinh")};return W.runKernel(Vp,n)}const NC=V({sinh_:yxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vxe(t,e,n){const r=R(t,"x","slice1d");return D(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Nt(r,[e],[n])}const Sy=V({slice1d_:vxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bxe(t,e,n){const r=R(t,"x","slice2d");return D(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Nt(r,e,n)}const AC=V({slice2d_:bxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Exe(t,e,n){const r=R(t,"x","slice3d");return D(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Nt(r,e,n)}const wy=V({slice3d_:Exe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Txe(t,e,n){const r=R(t,"x","slice4d");return D(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Nt(r,e,n)}const Pf=V({slice4d_:Txe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xxe(t,e=-1){const n=R(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},s={dim:e};return W.runKernel(sy,r,s)}const _y=V({softmax_:xxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cxe(t){D(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return W.runKernel(xx,e)}const ky=V({fft_:Cxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sxe(t){D(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return W.runKernel(_x,e)}const Mf=V({ifft_:Sxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wxe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const s=Q(t,[n,e]);r=Mf(s)}else{const s=[n,2*(e-1)],i=Q(Lf(t),[n,e]),o=Q(my(t),[n,e]),a=Hi(Nt(i,[0,1],[n,e-2]),1),l=q(Hi(Nt(o,[0,1],[n,e-2]),1),We(-1)),u=jn([i,a],1),c=jn([o,l],1),d=Q(Ul(u,c),[s[0],s[1]]);r=Mf(d)}if(r=Lf(r),t.rank===3&&t.shape[0]!==0){const s=r,i=t.shape[0];r=Q(r,[i,r.shape[0]/i,r.shape[1]]),s.dispose()}return r}const DC=V({irfft_:wxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _xe(t,e,n=0){const s={x:R(t,"x","split")},i={numOrSizeSplits:e,axis:n};return W.runKernel(ry,s,i)}const Ls=V({split_:_xe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kxe(t,e){D(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let s;if(e!=null&&e<n){const p=t.shape.map(y=>0),m=t.shape.map(y=>y);m[t.shape.length-1]=e,s=Nt(t,p,m),n=e}else if(e!=null&&e>n){const p=t.shape.map(m=>m);p[t.shape.length-1]=e-n,s=jn([t,nr(p)],t.shape.length-1),n=e}else s=t;const i=At(s),o=Q(Ul(s,i),[r,n]),a=ky(o),l=Math.floor(n/2)+1,u=Lf(a),c=my(a),d=Ls(u,[l,n-l],u.shape.length-1),h=Ls(c,[l,n-l],c.shape.length-1),f=s.shape.slice();return f[s.shape.length-1]=l,Q(Ul(d[0],h[0]),f)}const Iy=V({rfft_:kxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ixe(t,e){let n=R(t,"a","squaredDifference"),r=R(e,"b","squaredDifference");[n,r]=On(n,r),it(n.shape,r.shape);const s={a:n,b:r},i={};return W.runKernel(Xp,s,i)}const RC=V({squaredDifference_:Ixe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nxe(t,e){const n=R(t,"x","squeeze","string_or_numeric");return Q(n,Jl(n.shape,e).newShape)}const Tc=V({squeeze_:Nxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Axe(t,e=0){const n=vg(t,"tensors","stack","string_or_numeric");D(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&D(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,s={axis:e};return W.runKernel(G0,r,s)}const Ws=V({stack_:Axe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dxe(t,e=0){const r={x:R(t,"x","step")},s={alpha:e};return W.runKernel(e1,r,s)}const ih=V({step_:Dxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rxe(t,e,n,r,s=0,i=0,o=0,a=0,l=0){const c={x:R(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:r,beginMask:s,endMask:i,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};return W.runKernel(Jx,c,d)}const oA=V({stridedSlice_:Rxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fxe(t){const n={x:R(t,"x","tan","float32")};return W.runKernel(Qp,n)}const aA=V({tan_:Fxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yr(t,e){Qd(t);const n=Za(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return gc(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hf(t,e,n){if(Qd(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=Za(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return gc(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lA(t,e,n){if(Qd(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=Za(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return gc(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iz(t,e,n){if(Qd(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=Za(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return gc(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nz(t,e,n){if(Qd(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=Za(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return gc(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Az(t,e,n){if(Qd(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=Za(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,gc(t,e,r,n)}function uA(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,s=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${s}.`;if(n.rank<s)throw new Error(i+` update.rank < ${s}. `);if(t.length<r+(n.rank-s))throw new Error(i+` Output shape length < ${r+(n.rank-s)}`);if(n.rank!==s+t.length-r)throw new Error(i+` update.rank != ${s+t.length-r}`);for(let o=0;o<s;++o)if(n.shape[o]!==e.shape[o])throw new Error(i+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-s;++o)if(n.shape[o+s]!==t[o+r])throw new Error(i+` updates.shape[${o+s}] (${n.shape[o+s]}) != shape[${o+s}] (${t[o+s]})`)}function FC(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}uA(n,e,t)}function xc(t,e,n){const r=e.shape.length,s=r>1?e.shape[r-1]:1,i=n.length;let o=1;for(let d=s;d<i;++d)o*=n[d];const a=s<1?1:s,l=re(e.shape)/a,u=[...Ue(n.slice(0,s)),1],c=re(n);return{sliceRank:s,numUpdates:l,sliceSize:o,strides:u,outputSize:c}}const Oxe=Object.freeze(Object.defineProperty({__proto__:null,calculateShapes:xc,validateInput:FC,validateUpdateShape:uA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $xe(t,e,n){const r=R(t,"tensor","tensorScatterupdate"),s=R(e,"indices","tensorScatterupdate","int32"),i=R(n,"updates","tensorScatterupdate");if(FC(i,s,r.shape),r.dtype!==i.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${i.dtype}.`);const o={tensor:r,indices:s,updates:i},a={};return W.runKernel(Gx,o,a)}const Dz=V({tensorScatterUpdate_:$xe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lxe(t,e=1,n=!0){const r=R(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const s=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${e}`);const i={x:r},o={k:e,sorted:n},[a,l]=W.runKernel(rC,i,o);return{values:a,indices:l}}const cA=V({topk_:Lxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pxe(t,e=0,n=1,r,s){if(bi(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const i=new rA(e,n,r,!0,s),o=ct(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const OC=V({truncatedNormal_:Pxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mxe(t,e=0){const n=R(t,"x","unique","string_or_numeric");D(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},s={axis:e},[i,o]=W.runKernel(iC,r,s);return{values:i,indices:o}}const dA=V({unique_:Mxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bxe(t,e,n){const r=R(t,"x","unsortedSegmentSum"),s=R(e,"segmentIds","unsortedSegmentSum","int32");D(kd(n),()=>"numSegments must be of dtype int");const i={x:r,segmentIds:s},o={numSegments:n};return W.runKernel(ay,i,o)}const $C=V({unsortedSegmentSum_:Bxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zxe(t,e=0){const n=R(t,"x","unstack","string_or_numeric");D(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},s={axis:e};return W.runKernel(oy,r,s)}const Ui=V({unstack_:zxe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rz(t,e){return EC(t,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hA(t,e=!0,n,r){return W.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LC(t,e){const n=[];for(let i=0;i<e.length;i++)e[i]&&n.push(i);const r=ct(t,"int32"),s=ct([n.length,t.length],"int32");for(let i=0;i<n.length;i++){const o=r.indexToLoc(n[i]),a=i*t.length;s.values.set(o,a)}return s.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Hxe(t){const e=R(t,"condition","whereAsync","bool"),n=await e.data(),r=LC(e.shape,n);return t!==e&&e.dispose(),r}const fA=Hxe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Uxe(t,e,n){const r=R(t,"tensor","boolMask"),s=R(e,"mask","boolMask","bool"),i=n??0,o=s.rank,a=r.shape;D(o>0,()=>"mask cannot be scalar"),Hr(a.slice(i,i+o),s.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let m=i;m<i+o;m++)l*=a[m];const u=a.slice(0,i).concat([l],a.slice(i+o)),c=Q(r,u),d=Q(s,[-1]),h=await fA(d),f=Tc(h,[1]),p=o1(c,f,i);return t!==r&&r.dispose(),e!==s&&s.dispose(),f.dispose(),c.dispose(),d.dispose(),h.dispose(),p}const Fz=Uxe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wxe(t,e,n){const r=R(t,"x","transpose");if(e==null&&(e=r.shape.map((o,a)=>a).reverse()),D(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{D(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const s={x:r},i={perm:e};return r.dtype==="complex64"?J(()=>{let o=Lf(r),a=my(r);return o=W.runKernel(fd,{x:o},i),a=W.runKernel(fd,{x:a},i),n&&(a=an(a)),Ul(o,a)}):W.runKernel(fd,s,i)}const wt=V({transpose_:Wxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vxe(t,e,n,r,s=!0){const i=R(t,"v","movingAverage"),o=R(e,"x","movingAverage"),a=R(n,"decay","movingAverage");NB(i,o),D(Et(i.shape,o.shape),()=>"Shape mismatch in v and x");const l=We(1),u=Re(l,a);let c=q(Re(o,i),u);if(s){D(r!=null,()=>"When using zeroDebias: true, step is required.");const d=R(r,"step","movingAverage");c=ze(c,Re(l,Ja(a,d)))}return he(i,c)}const Oz=V({movingAverage_:Vxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gxe(t,e,n){bi(n);const r=R(t,"indices","scatterND","int32"),s=R(e,"updates","scatterND");FC(s,r,n);const i={indices:r,updates:s},o={shape:n};return W.runKernel(Vx,i,o)}const $z=V({scatterND_:Gxe});function jxe(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const s=t.rank>0?t.shape[0]:1,i=t.rank>1?t.shape[1]:1;if(n.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${i}.`);const o=e.size;if(!(e.rank===0||e.rank===1&&o===s))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${s}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kxe(t,e,n,r=0){bi(n);const s=R(t,"sparseIndices","sparseToDense","int32"),i=R(e,"sparseValues","sparseToDense","string_or_numeric"),o=R(r,"defaultValue","sparseToDense",i.dtype);jxe(s,i,n,o);const a={sparseIndices:s,sparseValues:i,defaultValue:o},l={outputShape:n};return W.runKernel(Qx,a,l)}const Lz=V({sparseToDense_:Kxe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qxe(t,e){const n=R(e,"indices","gatherND","int32"),s={params:R(t,"x","gatherND","string_or_numeric"),indices:n};return W.runKernel(wx,s)}const Pz=V({gatherND_:qxe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xxe(t,e){if(e==null)return t.shape.slice();if(Et(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yxe(t,e,n,r){const s=R(t,"x","dropout");if(D(s.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${s.dtype} tensor instead.`),D(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Ut?s.clone():s;const i=Xxe(s,n),o=1-e,a=ze(i1(he(Ec(i,0,1,"float32",r),o)),o);return q(s,a)}const pA=V({dropout_:Yxe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mA(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function PC(t,e,n){const r=1-t%2,s=new Float32Array(t);for(let i=0;i<t;++i){const o=2*Math.PI*i/(t+r-1);s[i]=e-n*Math.cos(o)}return Yr(s,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Qxe(t,e,n=1){const r=R(t,"predictions","inTopK"),s=R(e,"targets","inTopK");D(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),D(r.rank-1===s.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${s.rank}`),Hr(r.shape.slice(0,r.shape.length-1),s.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const i=r.shape[r.shape.length-1];D(n>0&&n<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${n}`);const o=await r.data(),a=await s.data(),[l,u]=[o.length/i,i],c=xr("bool",l);for(let d=0;d<l;d++){const h=d*u,f=o.subarray(h,h+u),p=[];for(let m=0;m<f.length;m++)p.push({value:f[m],index:m});p.sort((m,y)=>y.value-m.value),c[d]=0;for(let m=0;m<n;m++)if(p[m].index===a[d]){c[d]=1;break}}return t!==r&&r.dispose(),e!==s&&s.dispose(),bo(c,s.shape,"bool")}const Mz=Qxe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zxe(t,e,n,r,s,i="NHWC",o){let a=t;t.rank===3&&(a=Q(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=Q(e,[1,e.shape[0],e.shape[1],e.shape[2]])),D(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),D(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),D(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const u=i==="NHWC"?a.shape[3]:a.shape[1],c=i==="NHWC"?l.shape[3]:l.shape[1];D(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),D(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),bs("conv2dDerFilter",s,o);const d={x:a,dy:l},h={strides:r,pad:s,dataFormat:i,dimRoundingMode:o,filterShape:n};return W.runKernel(ux,d,h)}const gA=V({conv2DBackpropFilter_:Zxe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MC(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return q(t,ih(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function BC(t,e){let n=e;const r=sr(t.shape,e.shape);return r.length>0&&(n=Le(n,r)),Q(n,t.shape)}function zC(t,e,n,r){if(e==="linear")return t;if(e==="relu")return ga(t);if(e==="elu")return r1(t);if(e==="relu6")return CC(t);if(e==="prelu")return Cy(t,n);if(e==="leakyrelu")return gy(t,r);if(e==="sigmoid")return na(t);throw new Error(`Unknown fused activation ${e}.`)}const HC=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jxe({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",HC(W.state.gradientDepth,l)===!1){D(s==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${s} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let x=Wl(t,e,n,r,s,i,o);return a!=null&&(x=he(x,a)),zC(x,l,u,c)}const d=R(t,"x","conv2d","float32"),h=R(e,"filter","conv2d","float32");let f=d,p=!1;d.rank===3&&(p=!0,f=Q(d,[1,d.shape[0],d.shape[1],d.shape[2]])),D(f.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${f.rank}.`),D(h.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${h.rank}.`),bs("fused conv2d",r,o);const m=s==="NHWC"?f.shape[3]:f.shape[1];D(h.shape[2]===m,()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${h.shape[2]}.`),D(Ur(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const y=kr(f.shape,h.shape,n,i,r,o);let g;a!=null&&(g=R(a,"bias","fused conv2d"),[g]=On(g,d),s==="NHWC"?it(y.outShape,g.shape):(D(g.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${g.shape.length}.`),D(g.shape.length===0||g.shape[0]===y.outChannels||g.shape[0]===1,()=>`Error in fused conv2d: bias shape (${g.shape}) is not compatible with the number of output channels (${y.outChannels})`)));let v;if(u!=null){const x=u.shape;if(D(x.length<=1||x.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${x.length}.`),x.length===1)D(x[0]===1||x[0]===y.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${x}) is not compatible with the number of output channels (${y.outChannels}).`);else if(x.length===3)try{it(x,y.outShape)}catch{const S=`Error in fused conv2d: PReLU activation weights (${x}) is not compatible with the output shape of the conv2d (${y.outShape}).`;throw Error(S)}v=R(u,"prelu weights","fused conv2d")}const E=(x,C)=>{D(s==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${s} but only NHWC is currently supported.`);const[S,N,I,F]=C,L=MC(x,I,l);D(Ju(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const z=O9(N.shape,L,S,n,r),H=gA(N,L,S.shape,n,r),$=[z,H];if(F!=null){const M=BC(F,L);$.push(M)}return $},b={x:f,filter:h,bias:g,preluActivationWeights:v},T={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o,activation:l,leakyreluAlpha:c};return a==null?el((C,S,N)=>{let I=W.runKernel(fg,b,T);return N([S,C,I]),p&&(I=Q(I,[I.shape[1],I.shape[2],I.shape[3]])),{value:I,gradFunc:E}})(f,h):el((C,S,N,I)=>{let F=W.runKernel(fg,b,T);return I([S,C,F,N]),p&&(F=Q(F,[F.shape[1],F.shape[2],F.shape[3]])),{value:F,gradFunc:E}})(f,h,g)}const Bz=V({fusedConv2d_:Jxe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eCe(t,e,n,r,s,i=[1,1],o){let a=t;t.rank===3&&(a=Q(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=Q(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={x:a,dy:l},c={strides:r,pad:s,dimRoundingMode:o,dilations:i,filterShape:n};return W.runKernel(gx,u,c)}const zz=V({depthwiseConv2dNativeBackpropFilter_:eCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tCe(t,e,n,r,s,i=[1,1],o){let a=e,l=!1;e.rank===3&&(l=!0,a=Q(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const u={dy:a,filter:n},c={strides:r,pad:s,dimRoundingMode:o,dilations:i,inputShape:t},d=W.runKernel(yx,u,c);return l?Q(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const Hz=V({depthwiseConv2dNativeBackpropInput_:tCe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nCe({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(HC(W.state.gradientDepth,l)===!1){let T=n1(t,e,n,r,s,i,o);return a!=null&&(T=he(T,a)),zC(T,l,u,c)}const d=R(t,"x","depthwiseConv2d","float32"),h=R(e,"filter","depthwiseConv2d","float32");let f=d,p=!1;d.rank===3&&(p=!0,f=Q(d,[1,d.shape[0],d.shape[1],d.shape[2]])),D(f.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${f.rank}.`),D(h.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${h.rank}.`),D(f.shape[3]===h.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${f.shape[3]}) must match the inChannels dimension in filter ${h.shape[2]}.`),i==null&&(i=[1,1]),D(Ur(n,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),bs("fused depthwiseConv2d",r,o);const m=kr(f.shape,h.shape,n,i,r,o,!0);let y;a!=null&&(y=R(a,"bias","fused conv2d"),[y]=On(y,d),it(m.outShape,y.shape));let g;u!=null&&(g=R(u,"prelu weights","fused depthwiseConv2d"));const v=(T,x)=>{D(Ju(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);const[C,S,N,I]=x,F=MC(T,N,l),L=Hz(S.shape,F,C,n,r,i,o),z=zz(S,F,C.shape,n,r,i,o);if(I!=null){const H=BC(y,F);return[L,z,H]}return[L,z]},E={x:f,filter:h,bias:y,preluActivationWeights:g},b={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o,activation:l,leakyreluAlpha:c};return a==null?el((x,C,S)=>{let N=W.runKernel(pg,E,b);return S([C,x,N]),p&&(N=Q(N,[N.shape[1],N.shape[2],N.shape[3]])),{value:N,gradFunc:v}})(f,h):el((x,C,S,N)=>{let I=W.runKernel(pg,E,b);return N([C,x,I,S]),p&&(I=Q(I,[I.shape[1],I.shape[2],I.shape[3]])),{value:I,gradFunc:v}})(f,h,y)}const rCe=V({fusedDepthwiseConv2d_:nCe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sCe({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:s,activation:i="linear",preluActivationWeights:o,leakyreluAlpha:a=.2}){if(HC(W.state.gradientDepth,i)===!1){let F=mt(t,e,n,r);return s!=null&&(F=he(F,s)),zC(F,i,o,a)}let l=R(t,"a","fused matMul"),u=R(e,"b","fused matMul");[l,u]=On(l,u);const c=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?u.shape[u.rank-1]:u.shape[u.rank-2],h=n?l.shape[l.rank-1]:l.shape[l.rank-2],f=r?u.shape[u.rank-2]:u.shape[u.rank-1],p=l.shape.slice(0,-2),m=u.shape.slice(0,-2),y=re(p),g=re(m);D(c===d,()=>`Error in fused matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`);const E=it(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([h,f]),b=n?Q(l,[y,c,h]):Q(l,[y,h,c]),T=r?Q(u,[g,f,d]):Q(u,[g,d,f]);let x;s!=null&&(x=R(s,"bias","fused matMul"),[x]=On(x,l),it(E,x.shape));let C;o!=null&&(C=R(o,"prelu weights","fused matMul"));const S=(F,L)=>{const[z,H,$,M]=L,j=MC(Q(F,$.shape),$,i);let P,B;if(!n&&!r?(P=mt(j,H,!1,!0),B=mt(z,j,!0,!1)):!n&&r?(P=mt(j,H,!1,!1),B=mt(j,z,!0,!1)):n&&!r?(P=mt(H,j,!1,!0),B=mt(z,j,!1,!1)):(P=mt(H,j,!0,!0),B=mt(j,z,!0,!0)),s!=null){const K=BC(M,j);return[P,B,K]}else return[P,B]},N={a:b,b:T,bias:x,preluActivationWeights:C},I={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:a};return s==null?el((L,z,H)=>{const $=W.runKernel(hg,N,I);return H([L,z,$]),{value:Q($,E),gradFunc:S}})(b,T):el((L,z,H,$)=>{const M=W.runKernel(hg,N,I);return $([L,z,M,H]),{value:Q(M,E),gradFunc:S}})(b,T,x)}const bk=V({fusedMatMul_:sCe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uz=Object.freeze(Object.defineProperty({__proto__:null,conv2d:Bz,depthwiseConv2d:rCe,matMul:bk},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iCe(t){return PC(t,.54,.46)}const oCe=V({hammingWindow_:iCe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aCe(t){return PC(t,.5,.5)}const Wz=V({hannWindow_:aCe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lCe(t,e,n,r=!1,s=0){let i=0;const o=[];for(;i+e<=t.size;)o.push(Nt(t,i,e)),i+=n;if(r)for(;i<t.size;){const a=i+e-t.size,l=jn([Nt(t,i,e-a),nh([a],s)]);o.push(l),i+=n}return o.length===0?hf([],[0,e]):Q(jn(o),[o.length,e])}const Vz=V({frame_:lCe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uCe(t,e,n,r,s=Wz){r==null&&(r=mA(e));const i=Vz(t,e,n),o=q(i,s(e));return Iy(o,r)}const cCe=V({stft_:uCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dCe(t,e,n,r,s="bilinear",i=0){const o=R(t,"image","cropAndResize"),a=R(e,"boxes","cropAndResize","float32"),l=R(n,"boxInd","cropAndResize","int32"),u=a.shape[0];D(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),D(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${a.shape}.`),D(l.rank===1&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${a.shape}.`),D(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),D(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),D(s==="bilinear"||s==="nearest",()=>`method must be bilinear or nearest, but was ${s}`);const c={image:o,boxes:a,boxInd:l},d={method:s,extrapolationValue:i,cropSize:r};return W.runKernel(fx,c,d)}const hCe=V({cropAndResize_:dCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fCe(t){const e=R(t,"image","flipLeftRight","float32");D(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return W.runKernel(Sx,n,{})}const pCe=V({flipLeftRight_:fCe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mCe(t){const e=R(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];D(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),D(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const s=new Array(e.rank);return s.fill(1,0,n),s[n]=3,Ri(e,s)}const gCe=V({grayscaleToRGB_:mCe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yCe(t){const e=R(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];D(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),D(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const s=e.dtype,i=Ce(e,"float32"),o=Yr([.2989,.587,.114]);let a;switch(e.rank){case 2:a=Yc("ij,j->i",i,o);break;case 3:a=Yc("ijk,k->ij",i,o);break;case 4:a=Yc("ijkl,l->ijk",i,o);break;case 5:a=Yc("ijklm,m->ijkl",i,o);break;case 6:a=Yc("ijklmn,n->ijklm",i,o);break;default:throw new Error("Not a valid tensor rank.")}return a=Xr(a,-1),Ce(a,s)}const vCe=V({rgbToGrayscale_:yCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bCe(t,e,n=0,r=.5){const s=R(t,"image","rotateWithOffset","float32");D(s.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${s.rank}.`);const i={image:s},o={radians:e,fillValue:n,center:r};return W.runKernel(oC,i,o)}const ECe=V({rotateWithOffset_:bCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a1(t,e,n,r,s,i){r==null&&(r=.5),s==null&&(s=Number.NEGATIVE_INFINITY),i==null&&(i=0);const o=t.shape[0];return n=Math.min(n,o),D(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),D(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),D(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),D(e.rank===1,()=>"scores must be a 1D tensor"),D(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),D(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TCe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const i=R(t,"boxes","nonMaxSuppression","float32"),o=R(e,"scores","nonMaxSuppression","float32"),a=a1(i,o,n,r,s);n=a.maxOutputSize,r=a.iouThreshold,s=a.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:s};return W.runKernel(Ox,{boxes:i,scores:o},l)}const xCe=V({nonMaxSuppression_:TCe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CCe(t,e,n){const r=SCe(t,e,n),s=r<0?-(r+1):r;t.splice(s,0,e)}function SCe(t,e,n){return _Ce(t,e,n||wCe)}function wCe(t,e){return t>e?1:t<e?-1:0}function _Ce(t,e,n){let r=0,s=t.length,i=0,o=!1;for(;r<s;){i=r+(s-r>>>1);const a=n(e,t[i]);a>0?r=i+1:(s=i,o=!a)}return o?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UC(t,e,n,r,s){return yA(t,e,n,r,s,0)}function WC(t,e,n,r,s,i){return yA(t,e,n,r,s,0,!1,i,!0)}function VC(t,e,n,r,s,i){return yA(t,e,n,r,s,i,!0)}function yA(t,e,n,r,s,i,o=!1,a=!1,l=!1){const u=[];for(let y=0;y<e.length;y++)e[y]>s&&u.push({score:e[y],boxIndex:y,suppressBeginIndex:0});u.sort(aO);const c=i>0?-.5/i:0,d=[],h=[];for(;d.length<n&&u.length>0;){const y=u.pop(),{score:g,boxIndex:v,suppressBeginIndex:E}=y;if(g<s)break;let b=!1;for(let T=d.length-1;T>=E;--T){const x=kCe(t,v,d[T]);if(x>=r){b=!0;break}if(y.score=y.score*ICe(r,c,x),y.score<=s)break}y.suppressBeginIndex=d.length,b||(y.score===g?(d.push(v),h.push(y.score)):y.score>s&&CCe(u,y,aO))}const f=d.length,p=n-f;a&&p>0&&(d.push(...new Array(p).fill(0)),h.push(...new Array(p).fill(0)));const m={selectedIndices:d};return o&&(m.selectedScores=h),l&&(m.validOutputs=f),m}function kCe(t,e,n){const r=t.subarray(e*4,e*4+4),s=t.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(s[0],s[2]),c=Math.min(s[1],s[3]),d=Math.max(s[0],s[2]),h=Math.max(s[1],s[3]),f=(a-i)*(l-o),p=(d-u)*(h-c);if(f<=0||p<=0)return 0;const m=Math.max(i,u),y=Math.max(o,c),g=Math.min(a,d),v=Math.min(l,h),E=Math.max(g-m,0)*Math.max(v-y,0);return E/(f+p-E)}function ICe(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function aO(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function NCe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const i=R(t,"boxes","nonMaxSuppressionAsync"),o=R(e,"scores","nonMaxSuppressionAsync"),a=a1(i,o,n,r,s);n=a.maxOutputSize,r=a.iouThreshold,s=a.scoreThreshold;const l=await Promise.all([i.data(),o.data()]),u=l[0],c=l[1],{selectedIndices:d}=UC(u,c,n,r,s);return i!==t&&i.dispose(),o!==e&&o.dispose(),Yr(d,"int32")}const ACe=NCe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DCe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const o=R(t,"boxes","nonMaxSuppression"),a=R(e,"scores","nonMaxSuppression"),l=a1(o,a,n,r,s,i);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,i=l.softNmsSigma;const u={boxes:o,scores:a},c={maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:i},d=W.runKernel(Lx,u,c);return{selectedIndices:d[0],selectedScores:d[1]}}const RCe=V({nonMaxSuppressionWithScore_:DCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function FCe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const o=R(t,"boxes","nonMaxSuppressionAsync"),a=R(e,"scores","nonMaxSuppressionAsync"),l=a1(o,a,n,r,s,i);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,i=l.softNmsSigma;const u=await Promise.all([o.data(),a.data()]),c=u[0],d=u[1],{selectedIndices:h,selectedScores:f}=VC(c,d,n,r,s,i);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:Yr(h,"int32"),selectedScores:Yr(f)}}const OCe=FCe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ce(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const o=R(t,"boxes","nonMaxSuppression"),a=R(e,"scores","nonMaxSuppression"),l=a1(o,a,n,r,s,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,h={boxes:o,scores:a},f={maxOutputSize:u,iouThreshold:c,scoreThreshold:d,padToMaxOutputSize:i},p=W.runKernel($x,h,f);return{selectedIndices:p[0],validOutputs:p[1]}}const LCe=V({nonMaxSuppressionPadded_:$Ce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function PCe(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const o=R(t,"boxes","nonMaxSuppressionAsync"),a=R(e,"scores","nonMaxSuppressionAsync"),l=a1(o,a,n,r,s,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,[h,f]=await Promise.all([o.data(),a.data()]),{selectedIndices:p,validOutputs:m}=WC(h,f,u,c,d,i);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:Yr(p,"int32"),validOutputs:We(m,"int32")}}const MCe=PCe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BCe(t,e,n=!1,r=!1){const s=R(t,"images","resizeBilinear");D(s.rank===3||s.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${s.rank}.`),D(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),D(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=s,o=!1;s.rank===3&&(o=!0,i=Q(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},u=W.runKernel(Q0,a,l);return o?Q(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const Gz=V({resizeBilinear_:BCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zCe(t,e,n=!1,r=!1){const s=R(t,"images","resizeNearestNeighbor");D(s.rank===3||s.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${s.rank}.`),D(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),D(s.dtype==="float32"||s.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),D(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=s,o=!1;s.rank===3&&(o=!0,i=Q(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},u=W.runKernel(Y0,a,l);return o?Q(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const jz=V({resizeNearestNeighbor_:zCe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HCe(t,e="binary",n=!1,r=.5){const s=R(t,"image","threshold"),i=.2989,o=.587,a=.114,l=s.shape[0]*s.shape[1];let u=q(Yr([r]),255),c,d,h,f;if(D(s.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${s.rank}.`),D(s.shape[2]===3||s.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${s.shape[2]}.`),D(s.dtype==="int32"||s.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${s.dtype}.`),D(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),s.shape[2]===3){[c,d,h]=Ls(s,[1,1,1],-1);const y=q(c,i),g=q(d,o),v=q(h,a);f=he(he(y,g),v)}else f=t;if(e==="otsu"){const y=I9(Ce(SC(f),"int32"),bo([]),256);u=UCe(y,l)}const p=n?bc(f,u):qs(f,u);return Ce(q(p,255),"int32")}function UCe(t,e){let n=Yr([-1]),r=Yr([0]),s=Yr([0]),i,o,a,l,u,c;for(let d=0;d<t.size-1;d++){i=Nt(t,0,d+1),o=Nt(t,d+1),u=ze(Le(i),e),c=ze(Le(o),e);const h=Le(q(i,$d(0,i.size)));a=ze(h,Le(i));const f=nh(o.shape,i.size),p=he($d(0,o.size),f),m=q(o,p);l=ze(Le(m),Le(o));const y=Re(a,l),g=Re(a,l),v=q(u,c);s=q(q(v,y),g);const E=qs(s,r);r=Br(E,s,r),n=Br(E,Yr([d]),n)}return n}const WCe=V({threshold_:HCe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VCe(t,e,n="nearest",r="constant",s=0,i){const o=R(t,"image","transform","float32"),a=R(e,"transforms","transform","float32");D(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),D(a.rank===2&&(a.shape[0]===o.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),D(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);const l={image:o,transforms:a},u={interpolation:n,fillMode:r,fillValue:s,outputShape:i};return W.runKernel(sC,l,u)}const GCe=V({transform_:VCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jCe(t,e,n){const r=R(t,"a","bandPart");D(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const s=r.shape,[i,o]=r.shape.slice(-2);let a,l;typeof e=="number"?(D(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),D(e<=i,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`),a=R(e<0?i:e,"numLower","bandPart")):(D(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=Br(Of(e,0),i,tc(e,i))),typeof n=="number"?(D(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),D(n<=o,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`),l=R(n<0?o:n,"numUpper","bandPart")):(D(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=Br(Of(n,0),o,tc(n,o)));const u=Q($d(0,i,1,"int32"),[-1,1]),c=$d(0,o,1,"int32"),d=Re(u,c),h=aa(bc(d,a),ru(d,an(l))),f=nr([i,o],r.dtype);return Q(Ws(Ui(Q(r,[-1,i,o])).map(p=>Br(h,p,f))),s)}const KCe=V({bandPart_:jCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qCe(t){let e;if(Array.isArray(t)){e=!1,D(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const s=t[0].shape[0];for(let i=1;i<t.length;++i)D(t[i].shape[0]===s,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${s})`)}else e=!0,t=Ls(t,t.shape[0],0).map(s=>Tc(s,[0]));D(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let s=0;s<t.length;++s)n.push(W.tidy(()=>{let i=r[s];if(s>0)for(let o=0;o<s;++o){const a=q(Le(q(n[o],i)),n[o]);i=Re(i,a)}return ze(i,s1(i,"euclidean"))}));return e?Ws(n,0):n}const XCe=V({gramSchmidt_:qCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YCe(t,e=!1){if(D(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return lO(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,u)=>l*u),r=Ui(Q(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),s=[],i=[];r.forEach(l=>{const[u,c]=lO(l,e);s.push(u),i.push(c)});const o=Q(Ws(s,0),t.shape),a=Q(Ws(i,0),t.shape);return[o,a]}}function lO(t,e=!1){return W.tidy(()=>{D(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let s=gC(n),i=Ga(t);const o=hf([[1]],[1,1]);let a=Ga(o);const l=n>=r?r:n;for(let u=0;u<l;++u){const c=i,d=a,h=s;[a,i,s]=W.tidy(()=>{const f=Nt(i,[u,u],[n-u,1]),p=s1(f),m=Nt(i,[u,u],[1,1]),y=Br(qs(m,0),hf([[-1]]),hf([[1]])),g=Re(m,q(y,p)),v=ze(f,g);v.shape[0]===1?a=Ga(o):a=jn([o,Nt(v,[1,0],[v.shape[0]-1,v.shape[1]])],0);const E=an(ze(mt(y,g),p)),b=Nt(i,[u,0],[n-u,r]),T=q(E,a),x=wt(a);if(u===0)i=Re(b,mt(T,mt(x,b)));else{const N=Re(b,mt(T,mt(x,b)));i=jn([Nt(i,[0,0],[u,r]),N],0)}const C=wt(T),S=Nt(s,[0,u],[n,s.shape[1]-u]);if(u===0)s=Re(S,mt(mt(S,a),C));else{const N=Re(S,mt(mt(S,a),C));s=jn([Nt(s,[0,0],[n,u]),N],1)}return[a,i,s]}),gt([c,d,h])}return!e&&n>r&&(s=Nt(s,[0,0],[n,r]),i=Nt(i,[0,0],[r,r])),[s,i]})}const QCe=V({qr_:YCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ps;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(ps||(ps={}));function ZCe(t,e,n=ps.SUM_BY_NONZERO_WEIGHTS){const r=R(t,"losses","computeWeightedLoss");let s=null;e!=null&&(s=R(e,"weights","computeWeightedLoss"));const i=s==null?r:q(r,s);if(n===ps.NONE)return i;if(n===ps.SUM)return Le(i);if(n===ps.MEAN){if(s==null)return Rn(i);{const o=r.size/s.size,a=ze(Le(i),Le(s));return o>1?ze(a,We(o)):a}}if(n===ps.SUM_BY_NONZERO_WEIGHTS){if(s==null)return ze(Le(i),We(r.size));{const o=q(s,Os(r.shape)),a=Ce(Le(Od(o,We(0))),"float32");return ze(Le(i),a)}}throw Error(`Unknown reduction: ${n}`)}const iu=V({computeWeightedLoss_:ZCe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JCe(t,e,n,r=ps.SUM_BY_NONZERO_WEIGHTS){const s=R(t,"labels","absoluteDifference"),i=R(e,"predictions","absoluteDifference");let o=null;n!=null&&(o=R(n,"weights","absoluteDifference")),Hr(s.shape,i.shape,"Error in absoluteDifference: ");const a=er(Re(s,i));return iu(a,o,r)}const e2e=V({absoluteDifference_:JCe});function t2e(t,e,n,r,s=ps.SUM_BY_NONZERO_WEIGHTS){const i=R(t,"labels","cosineDistance"),o=R(e,"predictions","cosineDistance");let a=null;r!=null&&(a=R(r,"weights","cosineDistance")),Hr(i.shape,o.shape,"Error in cosineDistance: ");const l=We(1),u=Re(l,Le(q(i,o),n,!0));return iu(u,a,s)}const n2e=V({cosineDistance_:t2e});function r2e(t,e,n,r=ps.SUM_BY_NONZERO_WEIGHTS){let s=R(t,"labels","hingeLoss");const i=R(e,"predictions","hingeLoss");let o=null;n!=null&&(o=R(n,"weights","hingeLoss")),Hr(s.shape,i.shape,"Error in hingeLoss: ");const a=We(1);s=Re(q(We(2),s),a);const l=ga(Re(a,q(s,i)));return iu(l,o,r)}const s2e=V({hingeLoss_:r2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i2e(t,e,n,r=1,s=ps.SUM_BY_NONZERO_WEIGHTS){const i=R(t,"labels","huberLoss"),o=R(e,"predictions","huberLoss");let a=null;n!=null&&(a=R(n,"weights","huberLoss")),Hr(i.shape,o.shape,"Error in huberLoss: ");const l=We(r),u=er(Re(o,i)),c=tc(u,l),d=Re(u,c),h=he(q(We(.5),qt(c)),q(l,d));return iu(h,a,s)}const o2e=V({huberLoss_:i2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a2e(t,e,n,r=1e-7,s=ps.SUM_BY_NONZERO_WEIGHTS){const i=R(t,"labels","logLoss"),o=R(e,"predictions","logLoss");let a=null;n!=null&&(a=R(n,"weights","logLoss")),Hr(i.shape,o.shape,"Error in logLoss: ");const l=We(1),u=We(r),c=an(q(i,pi(he(o,u)))),d=q(Re(l,i),pi(he(Re(l,o),u))),h=Re(c,d);return iu(h,a,s)}const l2e=V({logLoss_:a2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u2e(t,e,n,r=ps.SUM_BY_NONZERO_WEIGHTS){const s=R(t,"labels","meanSquaredError"),i=R(e,"predictions","meanSquaredError");let o=null;n!=null&&(o=R(n,"weights","meanSquaredError")),Hr(s.shape,i.shape,"Error in meanSquaredError: ");const a=RC(s,i);return iu(a,o,r)}const c2e=V({meanSquaredError_:u2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d2e(t,e){const n=R(t,"labels","sigmoidCrossEntropyWithLogits"),r=R(e,"logits","sigmoidCrossEntropyWithLogits");Hr(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const s=ga(r),i=q(r,n),o=yy(Us(an(er(r))));return he(Re(s,i),o)}function h2e(t,e,n,r=0,s=ps.SUM_BY_NONZERO_WEIGHTS){let i=R(t,"multiClassLabels","sigmoidCrossEntropy");const o=R(e,"logits","sigmoidCrossEntropy");let a=null;if(n!=null&&(a=R(n,"weights","sigmoidCrossEntropy")),Hr(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){const u=We(r),c=We(1),d=We(.5);i=he(q(i,Re(c,u)),q(d,u))}const l=d2e(i,o);return iu(l,a,s)}const f2e=V({sigmoidCrossEntropy_:h2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p2e(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return el((s,i,o)=>{const l=vy(i,[n],!0),u=Re(Ce(i,"float32"),l);o([s,u]);const c=an(q(u,s));return{value:Le(c,[n]),gradFunc:(f,p)=>{const[m,y]=p,g=Kn(f.shape,[n]);return[q(Q(f,g),Re(Ce(m,"float32"),Us(y))),q(Q(f,g),Re(Us(y),Ce(m,"float32")))]}}})(t,e)}function m2e(t,e,n,r=0,s=ps.SUM_BY_NONZERO_WEIGHTS){let i=R(t,"onehotLabels","softmaxCrossEntropy");const o=R(e,"logits","softmaxCrossEntropy");let a=null;if(n!=null&&(a=R(n,"weights","softmaxCrossEntropy")),Hr(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const u=We(r),c=We(1),d=We(i.shape[1]);i=he(q(i,Re(c,u)),ze(u,d))}const l=p2e(i,o);return iu(l,a,s)}const g2e=V({softmaxCrossEntropy_:m2e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y2e(t,e,n,r){const s=R(t,"indices","sparseFillEmptyRows","int32"),i=R(e,"values","sparseFillEmptyRows"),o=R(n,"denseShape","sparseFillEmptyRows","int32"),a=R(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(s.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${s.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(o.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(a.rank!==0)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);const l={indices:s,values:i,denseShape:o,defaultValue:a},u=W.runKernel(Kx,l);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}const v2e=V({sparseFillEmptyRows_:y2e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b2e(t,e,n){const r=R(t,"inputIndices","sparseReshape","int32"),s=R(e,"inputShape","sparseReshape","int32"),i=R(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(s.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${s.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);const o={inputIndices:r,inputShape:s,newShape:i},a=W.runKernel(qx,o);return{outputIndices:a[0],outputShape:a[1]}}const E2e=V({sparseReshape_:b2e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T2e(t,e,n){const r=R(t,"data","sparseSegmentMean"),s=R(e,"indices","sparseSegmentMean","int32"),i=R(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${s.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);const o={data:r,indices:s,segmentIds:i};return W.runKernel(Xx,o)}const x2e=V({sparseSegmentMean_:T2e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C2e(t,e,n){const r=R(t,"data","sparseSegmentSum"),s=R(e,"indices","sparseSegmentSum","int32"),i=R(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${s.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);const o={data:r,indices:s,segmentIds:i};return W.runKernel(Yx,o)}const S2e=V({sparseSegmentSum_:C2e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w2e(t,e,n,r,s,i,o,a){const l=R(t,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const u=R(e,"dataSplits","stringNGrams");if(u.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const c={separator:n,nGramWidths:r,leftPad:s,rightPad:i,padWidth:o,preserveShortSequences:a},d={data:l,dataSplits:u},h=W.runKernel(eC,d,c);return{nGrams:h[0],nGramsSplits:h[1]}}const _2e=V({stringNGrams_:w2e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k2e(t,e,n=!0){const r=R(t,"input","stringSplit","string"),s=R(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(s.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${s.shape}`);const i={skipEmpty:n},o={input:r,delimiter:s},a=W.runKernel(tC,o,i);return{indices:a[0],values:a[1],shape:a[2]}}const I2e=V({stringSplit_:k2e});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N2e(t,e){const n=R(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const s={input:n};return W.runKernel(nC,s,r)}const A2e=V({stringToHashBucketFast_:N2e});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D2e(t,e,n,r=!0){const s=R(t,"input","staticRegexReplace","string"),i={pattern:e,rewrite:n,replaceGlobal:r};return W.runKernel(iy,{x:s},i)}const R2e=V({staticRegexReplace_:D2e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kz={fft:ky,ifft:Mf,rfft:Iy,irfft:DC},qz={hammingWindow:oCe,hannWindow:Wz,frame:Vz,stft:cCe},Qo={flipLeftRight:pCe,grayscaleToRGB:gCe,resizeNearestNeighbor:jz,resizeBilinear:Gz,rgbToGrayscale:vCe,rotateWithOffset:ECe,cropAndResize:hCe,nonMaxSuppression:xCe,nonMaxSuppressionAsync:ACe,nonMaxSuppressionWithScore:RCe,nonMaxSuppressionWithScoreAsync:OCe,nonMaxSuppressionPadded:LCe,nonMaxSuppressionPaddedAsync:MCe,threshold:WCe,transform:GCe},vA={bandPart:KCe,gramSchmidt:XCe,qr:QCe},Xz={absoluteDifference:e2e,computeWeightedLoss:iu,cosineDistance:n2e,hingeLoss:s2e,huberLoss:o2e,logLoss:l2e,meanSquaredError:c2e,sigmoidCrossEntropy:f2e,softmaxCrossEntropy:g2e},Yz={sparseFillEmptyRows:v2e,sparseReshape:E2e,sparseSegmentMean:x2e,sparseSegmentSum:S2e},Qz={stringNGrams:_2e,stringSplit:I2e,stringToHashBucketFast:A2e,staticRegexReplace:R2e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F2e=new Map,Ek=new Map;class oh{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class Ii{constructor(){this.classNameMap={}}static getMap(){return Ii.instance==null&&(Ii.instance=new Ii),Ii.instance}static register(e){Ii.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function pe(t,e,n){D(t.className!=null,()=>"Class being registered does not have the static className property defined."),D(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),D(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,s=e+">"+r;return Ii.register(t),F2e.set(s,t),Ek.set(t,s),t}function O2e(t){return Ek.has(t)?Ek.get(t):t.className}const $2e=Object.freeze(Object.defineProperty({__proto__:null,Serializable:oh,SerializationMap:Ii,getRegisteredName:O2e,registerClass:pe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ou extends oh{minimize(e,n=!1,r){const{value:s,grads:i}=this.computeGradients(e,r);if(r!=null){const o=r.map(a=>({name:a.name,tensor:i[a.name]}));this.applyGradients(o)}else this.applyGradients(i);return gt(i),n?s:(s.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return rz(e,n)}dispose(){this.iterations_!=null&&gt(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:We(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(ou,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bA extends ou{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=W.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=W.registeredVariables[r],o=!1;this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accum_grad`,variable:J(()=>At(i).variable(o))}),this.accumulatedUpdates[s]==null&&(this.accumulatedUpdates[s]={originalName:`${r}/accum_var`,variable:J(()=>At(i).variable(o))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const l=this.accumulatedGrads[s].variable,u=this.accumulatedUpdates[s].variable;J(()=>{const c=he(q(l,this.rho),q(qt(a),1-this.rho)),d=q(ze(Cr(he(u,this.epsilon)),Cr(he(l,this.epsilon))),a),h=he(q(u,this.rho),q(qt(d),1-this.rho));l.assign(c),u.assign(h);const f=he(q(d,-this.learningRate),i);i.assign(f)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(gt(this.accumulatedGrads.map(e=>e.variable)),gt(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EA extends ou{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=W.registeredVariables[r];this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accumulator`,variable:J(()=>nh(i.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(e)?e[s].tensor:e[r];if(o==null)return;const a=this.accumulatedGrads[s].variable;J(()=>{const l=he(a,qt(o));a.assign(l);const u=he(q(ze(o,Cr(he(l,W.backend.epsilon()))),-this.learningRate),i);i.assign(u)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&gt(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TA extends ou{static get className(){return"Adam"}constructor(e,n,r,s=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],J(()=>{this.accBeta1=We(n).variable(),this.accBeta2=We(r).variable()}),s==null&&(this.epsilon=W.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);J(()=>{const r=Re(1,this.accBeta1),s=Re(1,this.accBeta2);n.forEach((i,o)=>{const a=W.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:J(()=>At(a).variable(l))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${i}/v`,variable:J(()=>At(a).variable(l))});const u=Array.isArray(e)?e[o].tensor:e[i];if(u==null)return;const c=this.accumulatedFirstMoment[o].variable,d=this.accumulatedSecondMoment[o].variable,h=he(q(c,this.beta1),q(u,1-this.beta1)),f=he(q(d,this.beta2),q(qt(u),1-this.beta2)),p=ze(h,r),m=ze(f,s);c.assign(h),d.assign(f);const y=he(q(ze(p,he(Cr(m),this.epsilon)),-this.learningRate),a);a.assign(y)}),this.accBeta1.assign(q(this.accBeta1,this.beta1)),this.accBeta2.assign(q(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&gt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&gt(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),J(()=>{this.accBeta1.assign(Ja(this.beta1,this.iterations_+1)),this.accBeta2.assign(Ja(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xA extends ou{static get className(){return"Adamax"}constructor(e,n,r,s=null,i=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],J(()=>{this.iteration=We(0).variable(),this.accBeta1=We(n).variable()}),s==null&&(this.epsilon=W.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);J(()=>{const r=Re(1,this.accBeta1),s=ze(-this.learningRate,he(q(this.iteration,this.decay),1));n.forEach((i,o)=>{const a=W.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:At(a).variable(l)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${i}/v`,variable:At(a).variable(l)});const u=Array.isArray(e)?e[o].tensor:e[i];if(u==null)return;const c=this.accumulatedFirstMoment[o].variable,d=this.accumulatedWeightedInfNorm[o].variable,h=he(q(c,this.beta1),q(u,1-this.beta1)),f=q(d,this.beta2),p=er(u),m=al(f,p);c.assign(h),d.assign(m);const y=he(q(ze(s,r),ze(h,he(m,this.epsilon))),a);a.assign(y)}),this.iteration.assign(he(this.iteration,1)),this.accBeta1.assign(q(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&gt(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&gt(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GC extends ou{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=Array.isArray(e)?e[s].tensor:e[r];if(i==null)return;const o=W.registeredVariables[r];J(()=>{const a=he(q(this.c,i),o);o.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=lr(We(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CA extends GC{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=We(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=W.registeredVariables[r];this.accumulations[s]==null&&(this.accumulations[s]={originalName:`${r}/momentum`,variable:J(()=>At(i).variable(!1))});const o=this.accumulations[s].variable,a=Array.isArray(e)?e[s].tensor:e[r];a!=null&&J(()=>{let l;const u=he(q(this.m,o),a);this.useNesterov?l=he(q(this.c,he(a,q(u,this.m))),i):l=he(q(this.c,u),i),o.assign(u),i.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&gt(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SA extends ou{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,s=null,i=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=s,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,s==null&&(this.epsilon=W.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=W.registeredVariables[r],o=!1;this.accumulatedMeanSquares[s]==null&&(this.accumulatedMeanSquares[s]={originalName:`${r}/rms`,variable:J(()=>At(i).variable(o))}),this.accumulatedMoments[s]==null&&(this.accumulatedMoments[s]={originalName:`${r}/momentum`,variable:J(()=>At(i).variable(o))}),this.accumulatedMeanGrads[s]==null&&this.centered&&(this.accumulatedMeanGrads[s]={originalName:`${r}/mg`,variable:J(()=>At(i).variable(o))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const l=this.accumulatedMeanSquares[s].variable,u=this.accumulatedMoments[s].variable;J(()=>{const c=he(q(l,this.decay),q(qt(a),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[s].variable,h=he(q(d,this.decay),q(a,1-this.decay)),f=ze(q(a,this.learningRate),Cr(Re(c,he(qt(h),this.epsilon)))),p=he(q(u,this.momentum),f);l.assign(c),d.assign(h),u.assign(p);const m=Re(i,p);i.assign(m)}else{const d=he(q(l,this.decay),q(qt(a),1-this.decay)),h=he(q(u,this.momentum),ze(q(a,this.learningRate),Cr(he(d,this.epsilon))));l.assign(d),u.assign(h);const f=Re(i,h);i.assign(f)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&gt(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&gt(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&gt(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L2e=[bA,EA,TA,xA,CA,SA,GC];function P2e(){for(const t of L2e)pe(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M2e="model",B2e=".json",z2e=".weights.bin";function uO(t){return new Promise(e=>setTimeout(e)).then(t)}class Ld{constructor(e){if(!ee().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(Ld.URL_SCHEME)&&(e=e.slice(Ld.URL_SCHEME.length)),(e==null||e.length===0)&&(e=M2e),this.modelJsonFileName=e+B2e,this.weightDataFileName=e+z2e}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=ma.join(e.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const s=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],i=MB(e,s),o=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),a=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(a.download=this.modelJsonFileName,a.href=o,await uO(()=>a.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;l.download=this.weightDataFileName,l.href=r,await uO(()=>l.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:cy(e)}}}}Ld.URL_SCHEME="downloads://";class H2e{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,n)=>{const r=new FileReader;r.onload=s=>{const i=JSON.parse(s.target.result),o=i.modelTopology;if(o==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(i.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:o});return}const l=f9(i,u=>this.loadWeights(u));e(l)},r.onerror=s=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const n=[],r=[];for(const o of e)n.push(...o.weights),r.push(...o.paths);const s=this.checkManifestAndWeightFiles(e),i=r.map(o=>this.loadWeightsFile(o,s[o]));return Promise.all(i).then(o=>[n,o])}loadWeightsFile(e,n){return new Promise((r,s)=>{const i=new FileReader;i.onload=o=>{const a=o.target.result;r(a)},i.onerror=o=>s(`Failed to weights data from file of path '${e}'.`),i.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){const n=[],r=this.weightsFiles.map(i=>oO(i.name)),s={};for(const i of e)i.paths.forEach(o=>{const a=oO(o);if(n.indexOf(a)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(n.push(a),r.indexOf(a)===-1)throw new Error(`Weight file with basename '${a}' is not provided.`);s[o]=this.weightsFiles[r.indexOf(a)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return s}}const U2e=t=>ee().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Ld.URL_SCHEME)?W2e(t.slice(Ld.URL_SCHEME.length)):null;An.registerSaveRouter(U2e);function W2e(t="model"){return new Ld(t)}function V2e(t){return new H2e(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cO(t,e,n,r){o(t),n=n??0,r=r??1,a(n,r);let s=0;const i=l=>(l.then(u=>{const c=n+ ++s/t.length*(r-n);return e(c),u}),l);function o(l){D(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,u){D(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),D(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${u}`),D(u>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${u}`)}return Promise.all(t.map(i))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Zz(t,e){e==null&&(e={});const n=e.fetchFunc==null?ee().platform.fetch:e.fetchFunc,r=t.map(d=>n(d,e.requestInit,{isBinary:!0})),s=0,i=.5,a=(e.onProgress==null?await Promise.all(r):await cO(r,e.onProgress,s,i)).map(d=>d.arrayBuffer()),l=.5,u=1;return e.onProgress==null?await Promise.all(a):await cO(a,e.onProgress,l,u)}function G2e(t,e){var n;const r=e.fetchFunc==null?ee().platform.fetch:e.fetchFunc;let s=0,i;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:async o=>{for(var a;s<t.length;){i||(i=(await r(t[s],e.requestInit,{isBinary:!0})).body.getReader());const{done:l,value:u}=await i.read();if(l){s++,i=void 0,(a=e.onProgress)===null||a===void 0||a.call(e,s/t.length);continue}o.enqueue(u);return}o.close()}})}async function j2e(t,e="",n,r){return Jz(o=>Zz(o,{requestInit:r}))(t,e,n)}function Jz(t){return async(e,n="",r)=>{const s=e.map(()=>!1),i={},o=r!=null?r.map(()=>!1):[],a=[];if(e.forEach((f,p)=>{let m=0;f.weights.forEach(y=>{const g="quantization"in y?y.quantization.dtype:y.dtype,v=Id[g]*re(y.shape),E=()=>{s[p]=!0,i[p]==null&&(i[p]=[]),i[p].push({manifestEntry:y,groupOffset:m,sizeBytes:v})};r!=null?r.forEach((b,T)=>{b===y.name&&(E(),o[T]=!0)}):E(),a.push(y.name),m+=v})}),!o.every(f=>f)){const f=r.filter((p,m)=>!o[m]);throw new Error(`Could not find weights in manifest with names: ${f.join(", ")}. 
Manifest JSON has weights with names: ${a.join(", ")}.`)}const l=s.reduce((f,p,m)=>(p&&f.push(m),f),[]),u=[];l.forEach(f=>{e[f].paths.forEach(p=>{const m=n+(n.endsWith("/")?"":"/")+p;u.push(m)})});const c=await t(u),d={};let h=0;return l.forEach(f=>{const p=e[f].paths.length,m=new ma(c.slice(h,h+p));i[f].forEach(g=>{const v=m.slice(g.groupOffset,g.groupOffset+g.sizeBytes),E=OB(v,[g.manifestEntry]);for(const b in E)d[b]=E[b]}),h+=p}),d}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K2e="application/octet-stream",q2e="application/json";class wA{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(D(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=ee().platform.fetch,D(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&D(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],s=MB(e,r);if(n.body.append("model.json",new Blob([JSON.stringify(s)],{type:q2e}),"model.json"),e.weightData!=null){const o=ma.join(e.weightData);n.body.append("model.weights.bin",new Blob([o],{type:K2e}),"model.weights.bin")}const i=await this.fetch(this.path,n);if(i.ok)return{modelArtifactsInfo:cy(e),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let o=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?o+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":o+=" Please make sure the server is serving valid JSON for this request.",new Error(o)}const r=n.modelTopology,s=n.weightsManifest;if(r==null&&s==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return f9(e,n=>this.loadWeights(n))}async loadStream(){const e=await this.loadModelJSON(),n=await this.getWeightUrls(e.weightsManifest),r=FE(e.weightsManifest),s=()=>G2e(n,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:s})}async getWeightUrls(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,s]=X2e(n),i=this.weightPathPrefix||r,o=[],a=[];for(const l of e)for(const u of l.paths)this.weightUrlConverter!=null?a.push(this.weightUrlConverter(u)):o.push(i+u+s);return this.weightUrlConverter&&o.push(...await Promise.all(a)),o}async loadWeights(e){const n=await this.getWeightUrls(e),r=FE(e),s=await Zz(n,this.loadOptions);return[r,s]}}wA.URL_SCHEME_REGEX=/^https?:\/\//;function X2e(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),s=n>e?t.substring(n):"";return[r+"/",s]}function Tk(t){return t.match(wA.URL_SCHEME_REGEX)!=null}const eH=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>Tk(r)):n=Tk(t),n)return _A(t,e)}return null};An.registerSaveRouter(eH);An.registerLoadRouter(eH);function _A(t,e){return new wA(t,e)}function Y2e(t,e){return _A(t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rw{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class tH{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class Q2e{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}}function Z2e(t,e,n,r){const s=arguments;return new Q2e($E(...s))}function $E(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new rw(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new rw({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new rw({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function J2e(t){return new tH(t)}function eSe(t){return new tH(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kA=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:ma,browserFiles:V2e,browserHTTPRequest:Y2e,concatenateArrayBuffers:PB,copyModel:Rve,decodeWeights:OB,decodeWeightsStream:LB,encodeWeights:ok,fromMemory:Z2e,fromMemorySync:$E,getLoadHandlers:vve,getModelArtifactsForJSON:f9,getModelArtifactsForJSONSync:h9,getModelArtifactsInfoForJSON:cy,getSaveHandlers:BB,getWeightSpecs:FE,http:_A,isHTTPScheme:Tk,listModels:Ave,loadWeights:j2e,moveModel:Fve,registerLoadRouter:yve,registerSaveRouter:gve,removeModel:Dve,weightsLoaderFactory:Jz,withSaveHandler:J2e,withSaveHandlerSync:eSe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tSe(t,e,n){const r=R(t,"labels","confusionMatrix"),s=R(e,"predictions","confusionMatrix");D(n==null||n>0&&Number.isInteger(n),()=>`If provided, numClasses must be a positive integer, but got ${n}`),D(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),D(s.rank===1,()=>`Expected the rank of predictions to be 1, but got ${s.rank}`),D(r.shape[0]===s.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${s.shape[0]}. Labels and predictions should have the same number of elements.`),D(n>0&&Number.isInteger(n),()=>`numClasses is required to be a positive integer, but got ${n}`);const i=$f(Ce(r,"int32"),n),o=$f(Ce(s,"int32"),n),a=wt(i),l=mt(a,o);return Ce(l,"int32")}const nSe=V({confusionMatrix_:tSe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rSe=Object.freeze(Object.defineProperty({__proto__:null,confusionMatrix:nSe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Lc,dO=!1;function nH(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,s=!1,i=!1,o=!1,a=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)s=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)i=!0;else if(t.getContext!=null)o=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)a=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(gg(NE,W.backendName)!=null){const p={pixels:t},m={numChannels:e};return W.runKernel(NE,p,m)}const[u,c]=s?[t.videoWidth,t.videoHeight]:[t.width,t.height];let d;if(o)d=t.getContext("2d").getImageData(0,0,u,c).data;else if(r||n)d=t.data;else if(i||s||a){if(Lc==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")Lc=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else Lc=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Lc.canvas.width=u,Lc.canvas.height=c,Lc.drawImage(t,0,0,u,c),d=Lc.getImageData(0,0,u,c).data}let h;if(e===4)h=new Int32Array(d);else{const p=u*c;h=new Int32Array(p*e);for(let m=0;m<p;m++)for(let y=0;y<e;++y)h[m*e+y]=d[m*4+y]}return lA(h,[c,u,e],"int32")}function sSe(t){return t!=null&&t.data instanceof Uint8Array}function iSe(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function oSe(t){return t!=null&&t.width!==0&&t.height!==0}function aSe(t){return iSe()&&!(t instanceof ImageBitmap)&&oSe(t)&&!sSe(t)}async function lSe(t,e=3){let n=null;if(ee().getBool("WRAP_TO_IMAGEBITMAP")&&aSe(t)){let r;try{r=await createImageBitmap(t,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===t.width&&r.height===t.height?n=r:n=t}else n=t;return nH(n,e)}function rH(t){if(t.rank!==2&&t.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${t.rank}.`);const e=t.rank===2?1:t.shape[2];if(e>4||e===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${e}`);if(t.dtype!=="float32"&&t.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${t.dtype}. Please use float32 or int32 tensors.`)}function uSe(t){const e=(t==null?void 0:t.alpha)||1;if(e>1||e<0)throw new Error(`Alpha value ${e} is suppoed to be in range [0 - 1].`)}async function cSe(t,e){let n=R(t,"img","toPixels");if(!(t instanceof Ut)){const u=n;n=Ce(u,"int32"),u.dispose()}rH(n);const[r,s]=n.shape.slice(0,2),i=n.rank===2?1:n.shape[2],o=await n.data(),a=n.dtype==="float32"?255:1,l=new Uint8ClampedArray(s*r*4);for(let u=0;u<r*s;++u){const c=[0,0,0,255];for(let h=0;h<i;h++){const f=o[u*i+h];if(n.dtype==="float32"){if(f<0||f>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${f}.`)}else if(n.dtype==="int32"&&(f<0||f>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${f}.`);i===1?(c[0]=f*a,c[1]=f*a,c[2]=f*a):c[h]=f*a}const d=u*4;l[d+0]=Math.round(c[0]),l[d+1]=Math.round(c[1]),l[d+2]=Math.round(c[2]),l[d+3]=Math.round(c[3])}if(e!=null){dO||gg(bx,W.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),dO=!0),e.width=s,e.height=r;const u=e.getContext("2d"),c=new ImageData(l,s,r);u.putImageData(c,0,0)}return n!==t&&n.dispose(),l}function dSe(t,e,n){let r=R(t,"img","draw");if(!(t instanceof Ut)){const o=r;r=Ce(o,"int32"),o.dispose()}rH(r),uSe(n==null?void 0:n.imageOptions);const s={image:r},i={canvas:e,options:n};W.runKernel(bx,s,i)}const hSe=V({fromPixels_:nH}),fSe=Object.freeze(Object.defineProperty({__proto__:null,draw:dSe,fromPixels:hSe,fromPixelsAsync:lSe,toPixels:cSe},Symbol.toStringTag,{value:"Module"}));function jC(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(re(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const s=e.shape,i=s[s.length-1];let o=1;for(let d=0;d<s.length-1;++d)o*=s[d];const a=t.shape,l=s.slice();l.pop();let u=1;for(let d=i;d<n;++d)u*=a[d],l.push(a[d]);const c=[...Ue(t.shape).map(d=>d/u),1].slice(0,i);return[l,o,u,c]}const pSe=Object.freeze(Object.defineProperty({__proto__:null,prepareAndValidate:jC},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xk=-2,mSe=-1;function IA(t,e,n){const r=t.shape.length;D(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),D(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let s=0;s<r;++s)D(e[s]+n[s]<=t.shape[s],()=>`Error in slice${r}D: begin[${s}] + size[${s}] (${e[s]+n[s]}) would overflow input.shape[${s}] (${t.shape[s]})`)}function gSe(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function NA(t,e,n){const r=[];for(let s=0;s<t.length;s++)r[s]=Math.ceil((e[s]-t[s])/n[s]);return r}function sH(t,e,n,r){const s=[...t];for(let i=s.length;i<r.length;i++)s.push(1);for(let i=0;i<n;i++)i===0?s[e]=1:(s.splice(e,0,1),s.pop());return s}function iH(t,e,n){return n<=t?n:n-(e-1)}function oH(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function ySe(t,e,n,r,s,i,o,a,l){const u=t.length;let c=new Array(u),d=new Array(u),h=new Array(u);if(e.length&&n>0){const f=e[0],p=n+1;c=aH(o,f,p,r,t),d=lH(a,f,p,s,t),h=sH(i,f,p,t)}else for(let f=0;f<u;f++)c[f]=cH(o,r,i,t,f,l),d[f]=dH(a,s,i,t,f,l),h[f]=uH(i,f,l);return{begin:c,end:d,strides:h}}function aH(t,e,n,r,s){const i=[...s],o=oH(n,e);for(let a=0;a<i.length;a++)if(o.indexOf(a)>-1)i[a]=0;else{const l=iH(e,n,a);let u=r[l];t&1<<l&&(u=0),i[a]=u}return i}function lH(t,e,n,r,s){const i=[...s],o=oH(n,e);for(let a=0;a<i.length;a++)if(o.indexOf(a)>-1)i[a]=Number.MAX_SAFE_INTEGER;else{const l=iH(e,n,a);let u=r[l];t&1<<l&&(u=Number.MAX_SAFE_INTEGER),i[a]=u}for(let a=0;a<i.length;a++){const l=s[a];i[a]<0&&(i[a]+=l),i[a]=Xu(0,i[a],s[a])}return i}function uH(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function cH(t,e,n,r,s,i){let o=e[s];const a=n[s]||1;(t&1<<s||i&1<<s||o==null)&&(a>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const l=r[s];return o<0&&(o+=l),o=Xu(0,o,l-1),o}function dH(t,e,n,r,s,i){let o=e[s];const a=n[s]||1;(t&1<<s||i&1<<s||o==null)&&(a>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const l=r[s];return o<0&&(o+=l),a>0?o=Xu(0,o,l):o=Xu(-1,o,l-1),o}function AA(t,e,n){let r=n.length;for(let s=0;s<n.length;s++)if(n[s]>1){r=s;break}for(let s=r+1;s<n.length;s++)if(e[s]>0||n[s]!==t[s])return!1;return!0}function DA(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function KC(t,e,n){let r;const s=t.shape.length;typeof e=="number"?r=[e,...new Array(s-1).fill(0)]:e.length<s?r=e.concat(new Array(s-e.length).fill(0)):r=e.slice(),r.forEach(o=>{D(o!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(s).fill(-1):typeof n=="number"?i=[n,...new Array(s-1).fill(-1)]:n.length<s?i=n.concat(new Array(s-n.length).fill(-1)):i=n,i=i.map((o,a)=>o>=0?o:(D(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,i]}function RA(t,e,n,r,s,i,o,a,l){let u;if(r==null?(u=new Array(e.length),u.fill(1)):u=r,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const d={dims:u.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:u.slice(),beginMask:s,endMask:i,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};for(let E=0;E<d.dims;E++)c&&1<<E&a&&d.numAddAxisAfterEllipsis++,1<<E&o&&(c=!0);c||(d.ellipsisMask|=1<<d.dims,d.dims++);const h={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};vSe(d,h);let f=!0,p=!0,m=!0;const y=[],g=[];for(let E=0;E<t.length;++E){if(h.strides[E]===0)throw Error(`strides[${E}] must be non-zero`);const b=!!(h.shrinkAxisMask&1<<E),T=t[E];if(T===-1){y.push(b?1:-1);continue}const x=[h.beginMask&1<<E,h.endMask&1<<E],C=[h.strides[E]>0?0:-1,h.strides[E]>0?T:T-1];if(b&&h.strides[E]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&h.strides[E]===1;const S=!!(h.beginMask&1<<E&&h.endMask&1<<E);if(h.beginValid&&h.endValid){if(b){const L=h.begin[E]<0?T+h.begin[E]:h.begin[E];if(h.begin[E]=L,h.end[E]=h.begin[E]+1,L<0||L>=T)throw Error(`slice index ${h.begin[E]} of dimension ${E} out of bounds.`)}else h.begin[E]=hO(h.begin[E],0,h.strides[E],T,x,C),h.end[E]=hO(h.end[E],1,h.strides[E],T,x,C);const F=h.strides[E]===1&&h.begin[E]===0&&h.end[E]===T;f=f&&F,p=p&&(E===0&&h.strides[E]===1||F)}else f=f&&h.strides[E]===1&&S,p=p&&(E===0&&h.strides[E]===1||S);let N,I=!1;if(h.beginValid&&h.endValid?(N=h.end[E]-h.begin[E],I=!0):b?(N=1,I=!0):S&&T>=0&&(h.strides[E]<0?N=-T:N=T,I=!0),I){let F;N===0||N<0!=h.strides[E]<0?F=0:F=Math.trunc(N/h.strides[E])+(N%h.strides[E]!==0?1:0),y.push(F)}else y.push(-1)}for(let E=0;E<h.finalShapeGatherIndices.length;++E){const b=h.finalShapeGatherIndices[E];b>=0?g.push(y[b]):b===xk&&g.push(1)}return{finalShapeSparse:g.filter((E,b)=>h.finalShapeGatherIndices[b]!==xk),finalShape:g,isIdentity:f,sliceDim0:p,isSimpleSlice:m,begin:h.begin,end:h.end,strides:h.strides}}function vSe(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const s=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<s;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(xk),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(mSe),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function hO(t,e,n,r,s,i){if(s[e])return n>0?i[e]:i[e+1&1];{const o=t<0?r+t:t;return o<i[0]?i[0]:o>i[1]?i[1]:o}}const hH=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:IA,computeFlatOffset:DA,computeOutShape:NA,getNormalizedAxes:ySe,isSliceContinous:AA,maskToAxes:gSe,parseSliceParams:KC,sliceInfo:RA,startForAxis:cH,startIndicesWithElidedDims:aH,stopForAxis:dH,stopIndicesWithElidedDims:lH,stridesForAxis:uH,stridesWithElidedDims:sH},Symbol.toStringTag,{value:"Module"}));/** @license See the LICENSE file. */const bSe="4.20.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fH{static sgd(e){return new GC(e)}static momentum(e,n,r=!1){return new CA(e,n,r)}static rmsprop(e,n=.9,r=0,s=null,i=!1){return new SA(e,n,r,s,i)}static adam(e=.001,n=.9,r=.999,s=null){return new TA(e,n,r,s)}static adadelta(e=.001,n=.95,r=null){return new bA(e,n,r)}static adamax(e=.002,n=.9,r=.999,s=null,i=0){return new xA(e,n,r,s,i)}static adagrad(e,n=.1){return new EA(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gc=fH;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ESe=(()=>typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t())();function FA(){return new Promise(t=>ESe(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OA(t,e){const n=t[0].length;t.forEach((s,i)=>{D(s.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),D(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((s,i)=>{for(let o=0;o<n;o++)D(o===e||s[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${i}] (${s}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function ja(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Xo;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(Xo||(Xo={}));function pH(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let s=1;s<n.length;++s){const i=n[s],o=r[r.length-n.length+s],a=r[o];if(i>=0)if(a>=0){if(a!==i)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${s+t}] = ${i} but shape[${s+t}] = ${a}`)}else r[o]=i}return r}function mH(t){const e={FIRST_DIM_SIZE:Xo.FIRST_DIM_SIZE,VALUE_ROWIDS:Xo.VALUE_ROWIDS,ROW_LENGTHS:Xo.ROW_LENGTHS,ROW_SPLITS:Xo.ROW_SPLITS,ROW_LIMITS:Xo.ROW_LIMITS,ROW_STARTS:Xo.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function gH(t){return t.length===0?0:t[0]===Xo.FIRST_DIM_SIZE?t.length-1:t.length}function yH(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let s=0;s<Math.min(n,r-1);++s){const i=t[s],o=e[s+1];if(i>=0&&o>=0&&i!==1&&i!==o)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${s-t.length}] = ${i} but ragged tensor input.flatValues.shape[${s-t.length}] = ${o}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $A=30;function qC(t){return t<=$A?t:_E(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LA(t,e,n){const r=n*(typeof t=="number"?t:t[0]),s=e*(typeof t=="number"?t:t[1]);return[r,s]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ny(t,e,n,r=!0){let s=[];if(r)s=s.concat(e.slice(0)),s.push(t[0]/n),s=s.concat(t.slice(1));else{s=s.concat(t[0]);const i=e.length;for(let o=0;o<i;++o)s=s.concat([t[o+1]/e[o],e[o]]);s=s.concat(t.slice(i+1))}return s}function Ay(t,e,n=!0){const r=[];if(n){r.push(e);for(let s=e+1;s<t;++s)s<=2*e?(r.push(s),r.push(s-(e+1))):r.push(s)}else{const s=[],i=[];for(let o=1;o<t;++o)o>=e*2+1||o%2===1?i.push(o):s.push(o);r.push(...s),r.push(0),r.push(...i)}return r}function Dy(t,e,n,r=!0){const s=[];r?s.push(t[0]/n):s.push(t[0]*n);for(let i=1;i<t.length;++i)i<=e.length?r?s.push(e[i-1]*t[i]):s.push(t[i]/e[i-1]):s.push(t[i]);return s}function PA(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function MA(t,e,n){const r=t.slice(0,1);for(let s=0;s<n;++s)r.push(t[s+1]-e[s][0]-e[s][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XC=1.7580993408473768,YC=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BA=.3275911,zA=.254829592,HA=-.284496736,UA=1.421413741,WA=-1.453152027,VA=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vl(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function vH(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function bH(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=0;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function EH(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=2;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function GA(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function TH(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function xH(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let s=0;s<Math.ceil(t/2);s++){const i=(e?2:-2)*Math.PI*(s/t);n[s]=Math.cos(i),r[s]=Math.sin(i)}return{real:n,imag:r}}function CH(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),s=Math.cos(r),i=Math.sin(r);return{real:s,imag:i}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sw="->",TSe=/->/g,fO=",",pO="...";function jA(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(TSe,"").length)/sw.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${sw}").`);const[r,s]=t.split(sw);D(r.indexOf(pO)===-1,()=>`The ellipsis notation ("${pO}") is not supported yet.`);const i=r.split(fO),o=i.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let h=0;h<s.length;++h){const f=s[h];if(!i.some(p=>p.indexOf(f)!==-1))throw new Error(`Output subscripts contain the label ${f} not present in the input subscripts.`);a.indexOf(f)===-1&&a.push(f)}for(let h=0;h<r.length;++h){const f=r[h];a.indexOf(f)===-1&&f!==fO&&a.push(f)}const l=new Array(i.length);for(let h=0;h<o;++h){if(new Set(i[h].split("")).size!==i[h].length)throw new Error(`Found duplicate axes in input component ${i[h]}. Support for duplicate axes in input is not implemented yet.`);l[h]=[];for(let f=0;f<i[h].length;++f)l[h].push(a.indexOf(i[h][f]))}const u=a.length,c=s.length,d=[];for(let h=c;h<u;++h)d.push(h);return{allDims:a,summedDims:d,idDims:l}}function KA(t,e){let n=new Array(t);n.fill(-1);for(let s=0;s<e.length;++s)n[e[s]]=s;const r=[];for(let s=0;s<t;++s)n[s]===-1&&r.push(s);return n=n.filter(s=>s!==-1),{permutationIndices:n,expandDims:r}}function qA(t,e,n){const r=new Array(t);for(let s=0;s<n.length;++s){const i=n[s].shape;for(let o=0;o<e[s].length;++o)r[e[s][o]]===void 0?r[e[s][o]]=i[o]:D(r[e[s][o]]===i[o],()=>`Expected dimension ${r[e[s][o]]} at axis ${o} of input shaped ${JSON.stringify(i)}, but got dimension ${i[o]}`)}}function XA(t,e){const n=t,r=[];let s=0;t.length===0&&n.push(-1),s=t.length+1;for(let o=0;o<s;++o)r.push([]);const i=[];for(let o=0;o<n.length;++o){const a=n[o],l=xSe(e,a);for(const u of l)i.indexOf(u)===-1&&(r[o].push(u),i.push(u))}return{path:n,steps:r}}function YA(t){return t.every((e,n)=>e===n)}function xSe(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function QA(t,e,n=0){let r=[];if(typeof e=="number")D(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const s=e.reduce((o,a)=>(a===-1&&(o+=1),o),0);D(s<=1,()=>"There should be only one negative value in split array.");const i=e.indexOf(-1);if(i!==-1){const o=e.reduce((a,l)=>l>0?a+l:a);e[i]=t.shape[n]-o}D(t.shape[n]===e.reduce((o,a)=>o+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SH(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function wH(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function _H(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kH(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function IH(t,e){return`size ${t} must be non-negative, not ${e}`}function NH(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function AH(t,e){const n=re(t),r=re(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function DH(t,e){const n=re(t),r=re(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ck(){return"segment ids must be >= 0"}function RH(){return"segment ids are not increasing"}function FH(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function OH(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $H(t,e){let n=!1,r;for(t<=$A?(r=t,n=!0):r=_E(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=_E(t,r+1);return r}function LH(t,e,n){const r=[],s=t.length;for(let i=0;i<s;i++)i!==e?r.push(t[i]):r.push(n);return r}function ZA(t,e,n,r){const s=e.shape.length,i=t.shape.length;if(r!==0&&(r<-s||r>s))throw new Error(`Expect batchDims in the range of [-${s}, ${s}], but got ${r}`);if(r<0&&(r+=s),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const o=t.shape[n],a=[];let l=1,u=1,c=1;for(let d=0;d<r;++d)a.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<n;d++)a.push(t.shape[d]),u*=t.shape[d];for(let d=r;d<s;d++)a.push(e.shape[d]);for(let d=n+1;d<i;d++)a.push(t.shape[d]),c*=t.shape[d];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:o,outputShape:a}}const CSe=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:ZA,computeOutShape:LH,segOpComputeOptimalWindowSize:$H},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gl(t){try{return t.map(e=>Hl(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function PH(t){return t.map(e=>Va(e))}const MH=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:zA,ERF_A2:HA,ERF_A3:UA,ERF_A4:WA,ERF_A5:VA,ERF_P:BA,PARALLELIZE_THRESHOLD:$A,get RowPartitionType(){return Xo},SELU_SCALE:YC,SELU_SCALEALPHA:XC,applyActivation:zC,assertAndGetBroadcastShape:it,assertAxesAreInnerMostDims:Wr,assertParamsConsistent:OA,assignToTypedArray:TH,axesAreInnerMostDims:H9,calculateShapes:xc,checkEinsumDimSizes:qA,checkPadOnDimRoundingMode:bs,combineLocations:ez,combineRaggedTensorToTensorShapes:pH,complexWithEvenIndex:bH,complexWithOddIndex:EH,computeConv2DInfo:kr,computeConv3DInfo:yc,computeDefaultPad:C9,computeDilation2DInfo:dy,computeOptimalWindowSize:qC,computeOutAndReduceShapes:Ir,computeOutShape:ja,computePool2DInfo:Io,computePool3DInfo:tu,convertConv2DDataFormat:nu,decodeEinsumEquation:jA,eitherStridesOrDilationsAreOne:Ur,expandShapeToKeepDim:Kn,exponent:CH,exponents:xH,fromStringArrayToUint8:PH,fromUint8ToStringArray:Gl,getAxesPermutation:$n,getBroadcastDims:Fd,getComplexWithIndex:GA,getEinsumComputePath:XA,getEinsumPermutation:KA,getFusedBiasGradient:BC,getFusedDyActivation:MC,getImageCenter:LA,getInnerMostAxes:Xn,getPermuted:Ay,getRaggedRank:gH,getReductionAxes:sr,getReshaped:Ny,getReshapedPermuted:Dy,getRowPartitionTypesHelper:mH,getSliceBeginCoords:PA,getSliceSize:MA,getSparseFillEmptyRowsIndicesDenseShapeMismatch:SH,getSparseFillEmptyRowsNegativeIndexErrorMessage:wH,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:_H,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:NH,getSparseReshapeInputOutputMismatchErrorMessage:DH,getSparseReshapeInputOutputMultipleErrorMessage:AH,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:kH,getSparseReshapeNegativeOutputDimErrorMessage:IH,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:OH,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:Ck,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:RH,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:FH,getUndoAxesPermutation:vc,isIdentityPermutation:YA,log:mye,mergeRealAndImagArrays:Vl,prepareAndValidate:jC,prepareSplitSize:QA,segment_util:CSe,shouldFuse:HC,slice_util:hH,splitRealAndImagArrays:vH,stridesOrDilationsArePositive:Rd,tupleValuesAreOne:Ju,upcastType:Bs,validateDefaultValueShape:yH,validateInput:FC,validateUpdateShape:uA,warn:ki},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SSe=Object.freeze(Object.defineProperty({__proto__:null,nonMaxSuppressionV3Impl:UC,nonMaxSuppressionV4Impl:WC,nonMaxSuppressionV5Impl:VC,whereImpl:LC},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */P2e();const wSe=Object.freeze(Object.defineProperty({__proto__:null,Abs:o0,Acos:op,Acosh:ap,AdadeltaOptimizer:bA,AdagradOptimizer:EA,AdamOptimizer:TA,AdamaxOptimizer:xA,Add:eh,AddN:a0,All:nx,Any:rx,ArgMax:l0,ArgMin:u0,Asin:lp,Asinh:up,Atan:cp,Atan2:hp,Atanh:dp,AvgPool:c0,AvgPool3D:d0,AvgPool3DGrad:ix,AvgPoolGrad:sx,BatchMatMul:h0,BatchToSpaceND:f0,Bincount:ox,BitwiseAnd:p0,BroadcastArgs:ax,BroadcastTo:mB,Cast:fp,Ceil:pp,ClipByValue:mp,Complex:lx,ComplexAbs:m0,Concat:g0,Conv2D:y0,Conv2DBackpropFilter:ux,Conv2DBackpropInput:v0,Conv3D:b0,Conv3DBackpropFilterV2:cx,Conv3DBackpropInputV2:dx,Cos:gp,Cosh:yp,CropAndResize:fx,Cumprod:hx,Cumsum:E0,DataStorage:YN,DenseBincount:px,DepthToSpace:mx,DepthwiseConv2dNative:T0,DepthwiseConv2dNativeBackpropFilter:gx,DepthwiseConv2dNativeBackpropInput:yx,Diag:vx,Dilation2D:x0,Dilation2DBackpropFilter:IE,Dilation2DBackpropInput:kE,Draw:bx,get ENV(){return t9},Einsum:Ex,Elu:bp,EluGrad:Tx,Environment:fB,Equal:C0,Erf:Ep,Exp:Tp,ExpandDims:S0,Expm1:xp,FFT:xx,Fill:Cx,FlipLeftRight:Sx,Floor:Cp,FloorDiv:Sp,FromPixels:NE,FusedBatchNorm:w0,FusedConv2D:fg,FusedDepthwiseConv2D:pg,GatherNd:wx,GatherV2:_0,Greater:k0,GreaterEqual:wp,IFFT:_x,Identity:_p,Imag:kx,IsFinite:kp,IsInf:Ip,IsNan:Np,KernelBackend:JT,LRN:O0,LRNGrad:Nx,LeakyRelu:I0,Less:N0,LessEqual:A0,LinSpace:Ix,Log:Ap,Log1p:Dp,LogSoftmax:gB,LogicalAnd:D0,LogicalNot:R0,LogicalOr:F0,LogicalXor:cye,LowerBound:dye,MatrixBandPart:hye,Max:$0,MaxPool:L0,MaxPool3D:P0,MaxPool3DGrad:Dx,MaxPoolGrad:Ax,MaxPoolWithArgmax:Rx,Maximum:Rp,Mean:M0,Min:B0,Minimum:Fp,MirrorPad:z0,Mod:Op,MomentumOptimizer:CA,Multinomial:Fx,Multiply:$p,Neg:H0,NonMaxSuppressionV3:Ox,NonMaxSuppressionV4:$x,NonMaxSuppressionV5:Lx,NotEqual:U0,OP_SCOPE_SUFFIX:l9,OneHot:V0,OnesLike:W0,Optimizer:ou,OptimizerConstructors:fH,Pack:G0,PadV2:j0,Pool:fye,Pow:Lp,Prelu:K0,Prod:q0,RMSPropOptimizer:SA,RaggedGather:Px,RaggedRange:Mx,RaggedTensorToTensor:Bx,Range:zx,get Rank(){return ek},Real:Hx,RealDiv:vp,Reciprocal:Pp,get Reduction(){return ps},Relu:Mp,Relu6:Bp,Reshape:X0,ResizeBilinear:Q0,ResizeBilinearGrad:Wx,ResizeNearestNeighbor:Y0,ResizeNearestNeighborGrad:Ux,Reverse:Z0,RotateWithOffset:oC,Round:zp,Rsqrt:Hp,SGDOptimizer:GC,ScatterNd:Vx,SearchSorted:jx,Select:J0,Selu:Up,Sigmoid:jp,Sign:Gp,Sin:Wp,Sinh:Vp,Slice:ey,Softmax:sy,Softplus:Kp,SpaceToBatchND:ny,SparseFillEmptyRows:Kx,SparseReshape:qx,SparseSegmentMean:Xx,SparseSegmentSum:Yx,SparseToDense:Qx,SplitV:ry,Sqrt:qp,Square:Zx,SquaredDifference:Xp,StaticRegexReplace:iy,Step:e1,StridedSlice:Jx,StringNGrams:eC,StringSplit:tC,StringToHashBucketFast:nC,Sub:Yp,Sum:ty,Tan:Qp,Tanh:Zp,Tensor:Ut,TensorBuffer:rr,TensorScatterUpdate:Gx,Tile:Jp,TopK:rC,Transform:sC,Transpose:fd,Unique:iC,Unpack:oy,UnsortedSegmentSum:ay,UpperBound:pye,Variable:yg,ZerosLike:ly,_FusedMatMul:hg,abs:er,acos:m9,acosh:g9,add:he,addN:KB,all:cC,any:bg,argMax:Dd,argMin:y9,asin:v9,asinh:b9,atan:E9,atan2:T9,atanh:x9,avgPool:hy,avgPool3d:S9,backend:c9,backend_util:MH,basicLSTMCell:qB,batchNorm:t1,batchNorm2d:w9,batchNorm3d:_9,batchNorm4d:k9,batchToSpaceND:fy,bincount:I9,bitwiseAnd:XB,booleanMaskAsync:Fz,broadcastArgs:YB,broadcastTo:pd,broadcast_util:qbe,browser:fSe,buffer:ct,cast:Ce,ceil:N9,clipByValue:Hs,clone:Ga,complex:Ul,concat:jn,concat1d:A9,concat2d:D9,concat3d:R9,concat4d:F9,conv1d:dC,conv2d:Wl,conv2dTranspose:hC,conv3d:$9,conv3dTranspose:L9,copyRegisteredKernels:vye,cos:py,cosh:fC,cosineWindow:PC,cumprod:xg,cumsum:pC,customGrad:el,denseBincount:OE,deprecationWarn:Qye,depthToSpace:P9,depthwiseConv2d:n1,device_util:Gye,diag:ZB,dilation2d:M9,disableDeprecationWarnings:Yye,dispose:gt,disposeVariables:Zye,div:ze,divNoNan:B9,dot:z9,dropout:pA,einsum:Yc,elu:r1,enableDebugMode:Xye,enableProdMode:qye,enclosingPowerOfTwo:mA,engine:Wo,ensureShape:JB,env:ee,equal:So,erf:mC,euclideanNorm:U9,exp:Us,expandDims:Xr,expm1:W9,eye:gC,fft:ky,fill:nh,findBackend:sve,findBackendFactory:ive,floor:i1,floorDiv:uC,fused:Uz,gather:o1,gatherND:Pz,gather_util:pSe,getBackend:FB,getGradient:Y_,getKernel:gg,getKernelsForBackend:AE,grad:DEe,grads:REe,greater:qs,greaterEqual:ru,ifft:Mf,imag:my,image:Qo,inTopKAsync:Mz,io:kA,irfft:DC,isFinite:V9,isInf:G9,isNaN:j9,keep:lr,kernel_impls:SSe,leakyRelu:gy,less:Of,lessEqual:bc,linalg:vA,linspace:nz,localResponseNormalization:K9,log:pi,log1p:yy,logSigmoid:q9,logSoftmax:vC,logSumExp:vy,logicalAnd:aa,logicalNot:by,logicalOr:bC,logicalXor:X9,losses:Xz,lowerBound:sz,matMul:mt,math:rSe,max:Bi,maxPool:Ey,maxPool3d:Y9,maxPoolWithArgmax:iz,maximum:al,mean:Rn,memory:RE,meshgrid:oz,min:Ff,minimum:tc,mirrorPad:Q9,mod:Z9,moments:Ty,movingAverage:Oz,mul:q,multiRNNCell:az,multinomial:lz,neg:an,nextFrame:FA,norm:s1,notEqual:Od,oneHot:$f,ones:Os,onesLike:mi,op:V,outerProduct:uz,pad:su,pad1d:cz,pad2d:dz,pad3d:hz,pad4d:fz,pool:J9,pow:Ja,prelu:Cy,print:p9,prod:eA,profile:Jye,raggedGather:pz,raggedRange:mz,raggedTensorToTensor:gz,rand:yz,randomGamma:Ez,randomNormal:xC,randomStandardNormal:Tz,randomUniform:Ec,randomUniformInt:xz,range:$d,ready:nve,real:Lf,reciprocal:sA,registerBackend:u9,registerGradient:yB,registerKernel:aC,relu:ga,relu6:CC,removeBackend:rve,reshape:Q,reverse:Hi,reverse1d:Cz,reverse2d:Sz,reverse3d:wz,reverse4d:_z,rfft:Iy,round:SC,rsqrt:wC,scalar:We,scatterND:$z,scatter_util:Oxe,searchSorted:EC,selu:_C,separableConv2d:kC,serialization:$2e,setBackend:tve,setPlatform:ove,setdiff1dAsync:kz,sigmoid:na,sign:iA,signal:qz,sin:IC,sinh:NC,slice:Nt,slice1d:Sy,slice2d:AC,slice3d:wy,slice4d:Pf,slice_util:hH,softmax:_y,softplus:rh,spaceToBatchND:xy,sparse:Yz,sparseToDense:Lz,spectral:Kz,split:Ls,sqrt:Cr,square:qt,squaredDifference:RC,squeeze:Tc,stack:Ws,step:ih,stridedSlice:oA,string:Qz,sub:Re,sum:Le,sumOutType:lC,tan:aA,tanh:ec,tensor:bo,tensor1d:Yr,tensor2d:hf,tensor3d:lA,tensor4d:Iz,tensor5d:Nz,tensor6d:Az,tensorScatterUpdate:Dz,tensor_util:zye,test_util:KTe,tidy:J,tile:Ri,time:eve,topk:cA,train:Gc,transpose:wt,truncatedNormal:OC,unique:dA,unregisterGradient:yye,unregisterKernel:gye,unsortedSegmentSum:$C,unstack:Ui,upcastType:Bs,upperBound:Rz,util:kye,valueAndGrad:FEe,valueAndGrads:OEe,variable:hA,variableGrads:rz,version_core:bSe,where:Br,whereAsync:fA,zeros:nr,zerosLike:At},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Se=ee();_Se.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var ei;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(ei||(ei={}));var mO;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(mO||(mO={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JA={};function kSe(t,e){const n={tfOpName:t,category:"custom",inputs:[],attrs:[],customExecutor:e};JA[t]=n}function BH(t){return JA[t]}function ISe(t){delete JA[t]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k(t,e,n,r,s){const i=e.inputParams[t];if(i&&i.inputIndexStart!==void 0){const a=i.inputIndexStart,l=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?a+1:i.inputIndexEnd,u=a<0?e.inputNames.length+a:a;if(i.type==="tensor")return $r(e.inputNames[u],n,r,s);if(i.type==="tensors"){const h=e.inputs.slice(a,l);return e.inputNames.slice(a,l).filter((p,m)=>{var y;return((y=h[m])===null||y===void 0?void 0:y.op)!=="NoOp"}).map(p=>$r(p,n,r,s))}const c=$r(e.inputNames[u],n,r,s),d=c.dataSync();return i.type==="number"?d[0]:Mi(c.shape,d)}const o=e.attrParams[t];return o&&o.value}function $r(t,e,n,r){const[s,i]=ni(t,n);if(r!=null){const a=r.getHashTableHandleByName(s);if(a!=null)return a}const o=n.currentContextIds.find(a=>!!e[LE(s,a)]);return o!==void 0?e[LE(s,o)][i]:void 0}function gO(t,e,n){return e[LE(t,n.currentContextId)]}function Cl(t,e){const[n,r,s]=ni(t,e);return[LE(n,e&&e.currentContextId),r,s]}function LE(t,e){return e?`${t}-${e}`:t}function ni(t,e){if(t==="")return["",0,void 0];const n=e!=null&&e.parseNodeNameCache!=null;if(n){const i=e.parseNodeNameCache.get(t);if(i!=null)return i}const r=t.split(":");let s;if(r.length===1)s=[t,0,void 0];else{const i=r[0],o=r.length===3?r[1]:void 0,a=Number(r[r.length-1]);s=[i,a,o]}return n&&e.parseNodeNameCache.set(t,s),s}function Ab(t,e,n){let r=k("pad",t,e,n);if(r==="explicit"){r=k("explicitPaddings",t,e,n);const s=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)s[i][0]=r[i*2],s[i][1]=r[i*2+1];return s}return r}function Sl(t){return t.kept?t:Ga(t)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NSe=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],ASe=Object.freeze(Object.defineProperty({__proto__:null,json:NSe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DSe=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],RSe=Object.freeze(Object.defineProperty({__proto__:null,json:DSe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FSe=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],OSe=Object.freeze(Object.defineProperty({__proto__:null,json:FSe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Se=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],LSe=Object.freeze(Object.defineProperty({__proto__:null,json:$Se},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PSe=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],MSe=Object.freeze(Object.defineProperty({__proto__:null,json:PSe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BSe=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],zSe=Object.freeze(Object.defineProperty({__proto__:null,json:BSe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HSe=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],USe=Object.freeze(Object.defineProperty({__proto__:null,json:HSe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WSe=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],VSe=Object.freeze(Object.defineProperty({__proto__:null,json:WSe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GSe=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],jSe=Object.freeze(Object.defineProperty({__proto__:null,json:GSe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KSe=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],qSe=Object.freeze(Object.defineProperty({__proto__:null,json:KSe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XSe=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],YSe=Object.freeze(Object.defineProperty({__proto__:null,json:XSe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QSe=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],ZSe=Object.freeze(Object.defineProperty({__proto__:null,json:QSe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JSe=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],ewe=Object.freeze(Object.defineProperty({__proto__:null,json:JSe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const twe=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],nwe=Object.freeze(Object.defineProperty({__proto__:null,json:twe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rwe=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],swe=Object.freeze(Object.defineProperty({__proto__:null,json:rwe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iwe=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],owe=Object.freeze(Object.defineProperty({__proto__:null,json:iwe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const awe=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],lwe=Object.freeze(Object.defineProperty({__proto__:null,json:awe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uwe=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],cwe=Object.freeze(Object.defineProperty({__proto__:null,json:uwe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dwe=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],hwe=Object.freeze(Object.defineProperty({__proto__:null,json:dwe},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yO{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[ASe,RSe,OSe,LSe,MSe,zSe,USe,VSe,jSe,qSe,YSe,ZSe,ewe,nwe,swe,owe,lwe,cwe,hwe],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,s)=>(r[s.tfOpName]=s,r),{})}transformGraph(e,n={}){const r=e.node,s=[],i=[],o=[],a=r.reduce((m,y)=>(m[y.name]=this.mapNode(y),y.op.startsWith("Placeholder")?s.push(m[y.name]):y.op==="Const"?i.push(m[y.name]):(y.input==null||y.input.length===0)&&o.push(m[y.name]),m),{});let l=[];const u=[];let c={},d={};n!=null&&(c=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));const h=Object.keys(a);h.forEach(m=>{const y=a[m];y.inputNames.forEach((g,v)=>{const[E,,b]=Cl(g),T=a[E];if(T.outputs!=null){const x=T.outputs.indexOf(b);if(x!==-1){const C=`${E}:${x}`;y.inputNames[v]=C}}y.inputs.push(T),T.children.push(y)})}),Object.keys(d).length===0?h.forEach(m=>{const y=a[m];y.children.length===0&&u.push(y)}):Object.keys(d).forEach(m=>{const[y]=Cl(m),g=a[y];g!=null&&(g.signatureKey=d[m],u.push(g))}),Object.keys(c).length>0?Object.keys(c).forEach(m=>{const[y]=Cl(m),g=a[y];g&&(g.signatureKey=c[m],l.push(g))}):l=s;let f={};e.library!=null&&e.library.function!=null&&(f=e.library.function.reduce((m,y)=>(m[y.signature.name]=this.mapFunction(y),m),{}));const p={nodes:a,inputs:l,outputs:u,weights:i,placeholders:s,signature:n,functions:f};return o.length>0&&(p.initNodes=o),p}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){const n=BH(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(s=>s.startsWith("^")?s.slice(1):s),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((s,i)=>(s[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},s),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((s,i)=>{const o=i.type;let a;switch(i.type){case"string":a=Sk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Sk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":a=Dk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Dk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":a=_k(e.attr,i.tfName,i.defaultValue||0),a===void 0&&i.tfDeprecatedName&&(a=_k(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":a=Ak(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Ak(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":a=wk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=wk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":a=Fk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Fk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":a=Nk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Nk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":a=Rk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Rk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":a=kk(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=kk(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":a=Ik(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=Ik(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":a=vO(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=vO(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${e.op}`)}return s[i.name]={value:a,type:o},s},{})),r}mapFunction(e){const n=e.nodeDef,r=[],s=[];let i={};n!=null&&(i=n.reduce((d,h)=>(d[h.name]=this.mapNode(h),h.op==="Const"&&s.push(d[h.name]),d),{}));const o=[],a=[];e.signature.inputArg.forEach(d=>{const[h]=Cl(d.name),f={name:h,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:e5(d.type),type:"dtype"}},children:[]};f.signatureKey=d.name,o.push(f),i[h]=f}),Object.keys(i).forEach(d=>{const h=i[d];h.inputNames.forEach((f,p)=>{const[m,,y]=Cl(f),g=i[m];if(g.outputs!=null){const v=g.outputs.indexOf(y);if(v!==-1){const E=`${m}:${v}`;h.inputNames[p]=E}}h.inputs.push(g),g.children.push(h)})});const u=e.ret;e.signature.outputArg.forEach(d=>{const[h,f]=Cl(u[d.name]),p=i[h];p!=null&&(p.defaultOutput=f,a.push(p))});const c=this.mapArgsToSignature(e);return{nodes:i,inputs:o,outputs:a,weights:s,placeholders:r,signature:c}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}}function fwe(t){const e=ee().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function zH(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):fwe(t);return e?n:n.toLowerCase()}function Sk(t,e,n,r=!1){const s=t[e];return s!=null?zH(s.s,r):n}function wk(t,e,n){const r=t[e];return r?r.b:n}function _k(t,e,n){const r=t[e]||{},s=r.i!=null?r.i:r.f!=null?r.f:n;return typeof s=="number"?s:parseInt(s,10)}function e5(t){switch(typeof t=="string"&&(t=ei[t]),t){case ei.DT_FLOAT:case ei.DT_HALF:return"float32";case ei.DT_INT32:case ei.DT_INT64:case ei.DT_INT8:case ei.DT_UINT8:return"int32";case ei.DT_BOOL:return"bool";case ei.DT_DOUBLE:return"float32";case ei.DT_STRING:return"string";case ei.DT_COMPLEX64:case ei.DT_COMPLEX128:return"complex64";default:return null}}function vO(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function kk(t,e,n){const r=t[e];return r&&r.type?e5(r.type):n}function Ik(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(s=>e5(s)):n}function HH(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function Nk(t,e,n){const r=t[e];return r&&r.shape?HH(r.shape):n}function Ak(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(s=>typeof s=="number"?s:parseInt(s,10)):n}function Dk(t,e,n,r=!1){const s=t[e];return s&&s.list&&s.list.s?s.list.s.map(i=>zH(i,r)):n}function Rk(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(s=>HH(s)):n}function Fk(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class pwe{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(s=>this.getInput(s)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((s,i)=>(s[i]=this.getAttr(i),s),{}))}getInput(e){return $r(e,this.tensorMap,this.context)}getAttr(e,n){const r=this.node.rawAttrs[e];if(r.tensor!=null)return $r(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return _k(this.node.rawAttrs,e,n);if(r.s!=null)return Sk(this.node.rawAttrs,e,n);if(r.b!=null)return wk(this.node.rawAttrs,e,n);if(r.shape!=null)return Nk(this.node.rawAttrs,e,n);if(r.type!=null)return kk(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return Ak(this.node.rawAttrs,e,n);if(r.list.s!=null)return Dk(this.node.rawAttrs,e,n);if(r.list.shape!=null)return Rk(this.node.rawAttrs,e,n);if(r.list.b!=null)return Fk(this.node.rawAttrs,e,n);if(r.list.type!=null)return Ik(this.node.rawAttrs,e,n)}return n}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vr=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:l9,abs:er,acos:m9,acosh:g9,add:he,addN:KB,all:cC,any:bg,argMax:Dd,argMin:y9,asin:v9,asinh:b9,atan:E9,atan2:T9,atanh:x9,avgPool:hy,avgPool3d:S9,basicLSTMCell:qB,batchNorm:t1,batchNorm2d:w9,batchNorm3d:_9,batchNorm4d:k9,batchToSpaceND:fy,bincount:I9,bitwiseAnd:XB,booleanMaskAsync:Fz,broadcastArgs:YB,broadcastTo:pd,buffer:ct,cast:Ce,ceil:N9,clipByValue:Hs,clone:Ga,complex:Ul,concat:jn,concat1d:A9,concat2d:D9,concat3d:R9,concat4d:F9,conv1d:dC,conv2d:Wl,conv2dTranspose:hC,conv3d:$9,conv3dTranspose:L9,cos:py,cosh:fC,cosineWindow:PC,cumprod:xg,cumsum:pC,denseBincount:OE,depthToSpace:P9,depthwiseConv2d:n1,diag:ZB,dilation2d:M9,div:ze,divNoNan:B9,dot:z9,dropout:pA,einsum:Yc,elu:r1,enclosingPowerOfTwo:mA,ensureShape:JB,equal:So,erf:mC,euclideanNorm:U9,exp:Us,expandDims:Xr,expm1:W9,eye:gC,fft:ky,fill:nh,floor:i1,floorDiv:uC,fused:Uz,gather:o1,gatherND:Pz,greater:qs,greaterEqual:ru,ifft:Mf,imag:my,image:Qo,inTopKAsync:Mz,irfft:DC,isFinite:V9,isInf:G9,isNaN:j9,leakyRelu:gy,less:Of,lessEqual:bc,linalg:vA,linspace:nz,localResponseNormalization:K9,log:pi,log1p:yy,logSigmoid:q9,logSoftmax:vC,logSumExp:vy,logicalAnd:aa,logicalNot:by,logicalOr:bC,logicalXor:X9,losses:Xz,lowerBound:sz,matMul:mt,max:Bi,maxPool:Ey,maxPool3d:Y9,maxPoolWithArgmax:iz,maximum:al,mean:Rn,meshgrid:oz,min:Ff,minimum:tc,mirrorPad:Q9,mod:Z9,moments:Ty,movingAverage:Oz,mul:q,multiRNNCell:az,multinomial:lz,neg:an,norm:s1,notEqual:Od,oneHot:$f,ones:Os,onesLike:mi,op:V,outerProduct:uz,pad:su,pad1d:cz,pad2d:dz,pad3d:hz,pad4d:fz,pool:J9,pow:Ja,prelu:Cy,print:p9,prod:eA,raggedGather:pz,raggedRange:mz,raggedTensorToTensor:gz,rand:yz,randomGamma:Ez,randomNormal:xC,randomStandardNormal:Tz,randomUniform:Ec,randomUniformInt:xz,range:$d,real:Lf,reciprocal:sA,relu:ga,relu6:CC,reshape:Q,reverse:Hi,reverse1d:Cz,reverse2d:Sz,reverse3d:wz,reverse4d:_z,rfft:Iy,round:SC,rsqrt:wC,scalar:We,scatterND:$z,searchSorted:EC,selu:_C,separableConv2d:kC,setdiff1dAsync:kz,sigmoid:na,sign:iA,signal:qz,sin:IC,sinh:NC,slice:Nt,slice1d:Sy,slice2d:AC,slice3d:wy,slice4d:Pf,softmax:_y,softplus:rh,spaceToBatchND:xy,sparse:Yz,sparseToDense:Lz,spectral:Kz,split:Ls,sqrt:Cr,square:qt,squaredDifference:RC,squeeze:Tc,stack:Ws,step:ih,stridedSlice:oA,string:Qz,sub:Re,sum:Le,tan:aA,tanh:ec,tensor:bo,tensor1d:Yr,tensor2d:hf,tensor3d:lA,tensor4d:Iz,tensor5d:Nz,tensor6d:Az,tensorScatterUpdate:Dz,tile:Ri,topk:cA,transpose:wt,truncatedNormal:OC,unique:dA,unsortedSegmentSum:$C,unstack:Ui,upperBound:Rz,variable:hA,where:Br,whereAsync:fA,zeros:nr,zerosLike:At},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mwe=(t,e,n,r=Vr)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(k("a",t,e,n),k("b",t,e,n))];case"AddN":return[r.addN(k("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(k("a",t,e,n),k("b",t,e,n))];case"Mul":return[r.mul(k("a",t,e,n),k("b",t,e,n))];case"RealDiv":case"Div":return[r.div(k("a",t,e,n),k("b",t,e,n))];case"DivNoNan":return[r.divNoNan(k("a",t,e,n),k("b",t,e,n))];case"FloorDiv":return[r.floorDiv(k("a",t,e,n),k("b",t,e,n))];case"Sub":return[r.sub(k("a",t,e,n),k("b",t,e,n))];case"Minimum":return[r.minimum(k("a",t,e,n),k("b",t,e,n))];case"Maximum":return[r.maximum(k("a",t,e,n),k("b",t,e,n))];case"Pow":return[r.pow(k("a",t,e,n),k("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(k("a",t,e,n),k("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gwe=(t,e,n,r=Vr)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(k("x",t,e,n))];case"Acos":return[r.acos(k("x",t,e,n))];case"Acosh":return[r.acosh(k("x",t,e,n))];case"Asin":return[r.asin(k("x",t,e,n))];case"Asinh":return[r.asinh(k("x",t,e,n))];case"Atan":return[r.atan(k("x",t,e,n))];case"Atan2":return[r.atan2(k("x",t,e,n),k("y",t,e,n))];case"Atanh":return[r.atanh(k("x",t,e,n))];case"Ceil":return[r.ceil(k("x",t,e,n))];case"Complex":return[r.complex(k("real",t,e,n),k("imag",t,e,n))];case"Cos":return[r.cos(k("x",t,e,n))];case"Cosh":return[r.cosh(k("x",t,e,n))];case"Elu":return[r.elu(k("x",t,e,n))];case"Erf":return[r.erf(k("x",t,e,n))];case"Exp":return[r.exp(k("x",t,e,n))];case"Expm1":return[r.expm1(k("x",t,e,n))];case"Floor":return[r.floor(k("x",t,e,n))];case"Log":return[r.log(k("x",t,e,n))];case"Log1p":return[r.log1p(k("x",t,e,n))];case"Imag":return[r.imag(k("x",t,e,n))];case"Neg":return[r.neg(k("x",t,e,n))];case"Reciprocal":return[r.reciprocal(k("x",t,e,n))];case"Real":return[r.real(k("x",t,e,n))];case"Relu":return[r.relu(k("x",t,e,n))];case"Round":return[r.round(k("x",t,e,n))];case"Selu":return[r.selu(k("x",t,e,n))];case"Sigmoid":return[r.sigmoid(k("x",t,e,n))];case"Sin":return[r.sin(k("x",t,e,n))];case"Sign":return[r.sign(k("x",t,e,n))];case"Sinh":return[r.sinh(k("x",t,e,n))];case"Softplus":return[r.softplus(k("x",t,e,n))];case"Sqrt":return[r.sqrt(k("x",t,e,n))];case"Square":return[r.square(k("x",t,e,n))];case"Tanh":return[r.tanh(k("x",t,e,n))];case"Tan":return[r.tan(k("x",t,e,n))];case"ClipByValue":return[r.clipByValue(k("x",t,e,n),k("clipValueMin",t,e,n),k("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(k("x",t,e,n))];case"Rsqrt":return[r.rsqrt($r(t.inputNames[0],e,n))];case"LeakyRelu":return[r.leakyRelu(k("x",t,e,n),k("alpha",t,e,n))];case"Prelu":return[r.prelu(k("x",t,e,n),k("alpha",t,e,n))];case"IsNan":return[r.isNaN($r(t.inputNames[0],e,n))];case"IsInf":return[r.isInf($r(t.inputNames[0],e,n))];case"IsFinite":return[r.isFinite($r(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function no(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){D(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){const s=t[r],i=e[r];D(s<0||i<0||s===i,()=>n+` Shapes ${t} and ${e} must match`)}}}function bO(t){return!(typeof t=="number"||t.some(e=>e<0))}function q1(t,e,n){let r=Ok(t,n);const s=!bO(r);if(s&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(s&&e.forEach(i=>{r=Ok(i.shape,r)}),!bO(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function Ok(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const s=t[r],i=e[r];if(s>=0&&i>=0&&s!==i)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=s>=0?s:i}return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ywe{constructor(e,n,r,s,i,o,a){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=s,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=We(0),lr(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),no(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,lr(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,s)=>this.write(r,n[s]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let s=0;s<this.size();s++)e.push(s)}if(e.length===0)return bo([],[0].concat(this.elementShape));const r=this.readMany(e);return no(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Ws(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return bo([],[0].concat(this.elementShape));const n=[];for(let s=0;s<this.size();s++)n.push(s);const r=this.readMany(n);return no(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),jn(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,Ui(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const s=e.map(l=>(r+=l,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const i=r===0?0:n.size/r,o=[];J(()=>{n=Q(n,[1,r,i]);for(let l=0;l<e.length;++l){const c=[0,l===0?0:s[l-1],0],d=[1,e[l],i];o[l]=Q(Nt(n,c,d),this.elementShape)}return o});const a=[];for(let l=0;l<e.length;l++)a[l]=l;this.writeMany(a,o)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pd{get id(){return this.idTensor.id}constructor(e,n,r,s=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e!=null&&e.forEach(i=>{if(r!==i.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${i.dtype}`);no(n,i.shape,"TensorList shape mismatch: "),lr(i)}),this.idTensor=We(0),this.maxNumElements=s,lr(this.idTensor)}copy(){return new Pd([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);no(e,this.elementShape,"TensorList shape mismatch: ");const s=q1(this.elementShape,this.tensors,e);return J(()=>{const i=this.tensors.map(o=>Q(o,s));return Ws(i,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=q1(this.elementShape,this.tensors,e),s=this.tensors.pop();return s.kept=!1,no(s.shape,e,"TensorList shape mismatch: "),Q(s,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(no(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");lr(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const n=new Pd([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);no(this.tensors[e].shape,n,"TensorList shape mismatch: ");const s=q1(this.elementShape,this.tensors,n);return Q(this.tensors[e],s)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);no(this.elementShape,n.shape,"TensorList shape mismatch: "),lr(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);no(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const s=q1(this.elementShape,this.tensors,r);return e.length===0?bo([],[0].concat(s)):J(()=>{const i=e.map(o=>Q(this.tensors[o],s));return Ws(i,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);no(this.elementShape,n,"TensorList shape mismatch: ");const r=q1(this.elementShape,this.tensors,n);return this.size()===0?bo([],[0].concat(r)):J(()=>{const s=this.tensors.map(i=>Q(i,r));return jn(s,0)})}}function vwe(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const s=t.shape.slice(1);no(s,e,"TensorList shape mismatch: ");const i=Ui(t);return new Pd(i,e,r)}function bwe(t,e,n,r){return new Pd([],t,e,r)}function Ewe(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const s=Math.max(...e);if(r!=null&&r!==-1&&s>=r)throw new Error(`Max index must be < array size (${s}  vs. ${r})`);const i=new Pd([],n,t.dtype,r),o=Ui(t,0);return e.forEach((a,l)=>{i.setItem(a,o[l])}),i}function Twe(t,e,n){let r=0;const s=e.map(c=>(r+=c,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);const i=t.shape.slice(1),o=Ok(i,n),a=r===0?0:t.size/r,l=J(()=>{const c=[];t=Q(t,[1,r,a]);for(let d=0;d<e.length;++d){const f=[0,d===0?0:s[d-1],0],p=[1,e[d],a];c[d]=Q(Nt(t,f,p),o)}return t.dispose(),c}),u=new Pd([],n,t.dtype,e.length);for(let c=0;c<l.length;c++)u.setItem(c,l[c]);return u}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xwe=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=k("thenBranch",t,e,n),s=k("elseBranch",t,e,n),i=k("cond",t,e,n),o=k("args",t,e,n);return(await i.data())[0]?n.functionMap[r].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap):n.functionMap[s].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=k("body",t,e,n),s=k("cond",t,e,n),i=k("args",t,e,n),o=await n.functionMap[s].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),a=i.map(c=>c.id);let l=await o[0].data();o.forEach(c=>{!c.kept&&a.indexOf(c.id)===-1&&c.dispose()});let u=i;for(;l[0];){const c=u;u=await n.functionMap[r].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);const d=u.map(f=>f.id);c.forEach(f=>{!f.kept&&a.indexOf(f.id)===-1&&d.indexOf(f.id)===-1&&f.dispose()});const h=await n.functionMap[s].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);l=await h[0].data(),h.forEach(f=>{!f.kept&&a.indexOf(f.id)===-1&&d.indexOf(f.id)===-1&&f.dispose()})}return u}case"LoopCond":{const r=k("pred",t,e,n);return[Sl(r)]}case"Switch":{const r=k("pred",t,e,n);let s=k("data",t,e,n);return s.kept||(s=Sl(s)),(await r.data())[0]?[void 0,s]:[s,void 0]}case"Merge":{const r=t.inputNames.find(s=>$r(s,e,n)!==void 0);if(r){const s=$r(r,e,n);return[Sl(s)]}return}case"Enter":{const r=k("frameName",t,e,n),s=k("tensor",t,e,n);return n.enterFrame(r),[Sl(s)]}case"Exit":{const r=k("tensor",t,e,n);return n.exitFrame(),[Sl(r)]}case"NextIteration":{const r=k("tensor",t,e,n);return n.nextIteration(),[Sl(r)]}case"TensorArrayV3":{const r=k("size",t,e,n),s=k("dtype",t,e,n),i=k("elementShape",t,e,n),o=k("dynamicSize",t,e,n),a=k("clearAfterRead",t,e,n),l=k("identicalElementShapes",t,e,n),u=k("name",t,e,n),c=new ywe(u,s,r,i,l,o,a);return n.addTensorArray(c),[c.idTensor,We(1)]}case"TensorArrayWriteV3":{const r=k("tensorArrayId",t,e,n),s=k("index",t,e,n),i=k("tensor",t,e,n),o=n.getTensorArray(r.id);return o.write(s,i),[o.idTensor]}case"TensorArrayReadV3":{const r=k("tensorArrayId",t,e,n),s=k("index",t,e,n);return[n.getTensorArray(r.id).read(s)]}case"TensorArrayGatherV3":{const r=k("tensorArrayId",t,e,n),s=k("indices",t,e,n),i=k("dtype",t,e,n);return[n.getTensorArray(r.id).gather(s,i)]}case"TensorArrayScatterV3":{const r=k("tensorArrayId",t,e,n),s=k("indices",t,e,n),i=k("tensor",t,e,n),o=n.getTensorArray(r.id);return o.scatter(s,i),[o.idTensor]}case"TensorArrayConcatV3":{const r=k("tensorArrayId",t,e,n),s=n.getTensorArray(r.id),i=k("dtype",t,e,n);return[s.concat(i)]}case"TensorArraySplitV3":{const r=k("tensorArrayId",t,e,n),s=k("tensor",t,e,n),i=k("lengths",t,e,n),o=n.getTensorArray(r.id);return o.split(i,s),[o.idTensor]}case"TensorArraySizeV3":{const r=k("tensorArrayId",t,e,n),s=n.getTensorArray(r.id);return[We(s.size(),"int32")]}case"TensorArrayCloseV3":{const r=k("tensorArrayId",t,e,n),s=n.getTensorArray(r.id);return s.clearAndClose(),[s.idTensor]}case"TensorListSetItem":{const r=k("tensorListId",t,e,n),s=k("index",t,e,n),i=k("tensor",t,e,n),o=n.getTensorList(r.id);return o.setItem(s,i),[o.idTensor]}case"TensorListGetItem":{const r=k("tensorListId",t,e,n),s=k("index",t,e,n),i=k("elementShape",t,e,n),o=k("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(s,i,o)]}case"TensorListScatterV2":case"TensorListScatter":{const r=k("indices",t,e,n),s=k("tensor",t,e,n),i=k("elementShape",t,e,n),o=k("numElements",t,e,n),a=Ewe(s,r,i,o);return n.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=k("elementShape",t,e,n),s=k("elementDType",t,e,n);let i;t.op==="TensorListReserve"?i="numElements":i="maxNumElements";const o=k(i,t,e,n),a=t.op==="TensorListReserve"?-1:o,l=bwe(r,s,o,a);return n.addTensorList(l),[l.idTensor]}case"TensorListGather":{const r=k("tensorListId",t,e,n),s=k("indices",t,e,n),i=k("elementShape",t,e,n),o=k("elementDType",t,e,n);return[n.getTensorList(r.id).gather(s,o,i)]}case"TensorListStack":{const r=k("tensorListId",t,e,n),s=k("elementShape",t,e,n),i=k("elementDType",t,e,n),o=k("numElements",t,e,n);return[n.getTensorList(r.id).stack(s,i,o)]}case"TensorListFromTensor":{const r=k("tensor",t,e,n),s=k("elementShape",t,e,n),i=k("elementDType",t,e,n),o=vwe(r,s,i);return n.addTensorList(o),[o.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=k("tensorListId",t,e,n),s=n.getTensorList(r.id),i=k("dtype",t,e,n),o=k("elementShape",t,e,n);return[s.concat(i,o)]}case"TensorListPushBack":{const r=k("tensorListId",t,e,n),s=k("tensor",t,e,n),i=n.getTensorList(r.id);return i.pushBack(s),[i.idTensor]}case"TensorListPopBack":{const r=k("tensorListId",t,e,n),s=k("elementShape",t,e,n),i=k("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(s,i)]}case"TensorListSplit":{const r=k("tensor",t,e,n),s=k("elementShape",t,e,n),i=k("lengths",t,e,n),o=Twe(r,i,s);return n.addTensorList(o),[o.idTensor]}case"TensorListLength":{const r=k("tensorListId",t,e,n),s=n.getTensorList(r.id);return[We(s.size(),"int32")]}case"TensorListResize":{const r=k("tensorListId",t,e,n),s=k("size",t,e,n),o=n.getTensorList(r.id).resize(s);return n.addTensorList(o),[o.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EO(t,e,n){const[r,s]=k("fusedOps",t,e,n),i=r==="biasadd",o=!i,a=s==="prelu",l=r==="fusedbatchnorm",u=k("numArgs",t,e,n);if(i){if(a&&u!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&i&&u!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const c=k("strides",t,e,n),d=Ab(t,e,n),h=k("dataFormat",t,e,n).toUpperCase(),f=k("dilations",t,e,n);let[p,m]=k("args",t,e,n);o&&(m=p,p=void 0);const y=k("leakyreluAlpha",t,e,n);return{stride:c,pad:d,dataFormat:h,dilations:f,biasArg:p,preluArg:m,activationFunc:s,leakyreluAlpha:y}}const Cwe=(t,e,n,r=Vr)=>{switch(t.op){case"Conv1D":{const s=k("stride",t,e,n),i=k("pad",t,e,n),o=k("dataFormat",t,e,n).toUpperCase(),a=k("dilation",t,e,n);return[r.conv1d(k("x",t,e,n),k("filter",t,e,n),s,i,o,a)]}case"Conv2D":{const s=k("strides",t,e,n),i=Ab(t,e,n),o=k("dataFormat",t,e,n).toUpperCase(),a=k("dilations",t,e,n);return[r.conv2d(k("x",t,e,n),k("filter",t,e,n),[s[1],s[2]],i,o,[a[1],a[2]])]}case"_FusedConv2D":{const{stride:s,pad:i,dataFormat:o,dilations:a,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:d}=EO(t,e,n);return[r.fused.conv2d({x:k("x",t,e,n),filter:k("filter",t,e,n),strides:[s[1],s[2]],pad:i,dataFormat:o,dilations:[a[1],a[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{const{stride:s,pad:i,dataFormat:o,dilations:a,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:d}=EO(t,e,n);return[r.fused.depthwiseConv2d({x:k("x",t,e,n),filter:k("filter",t,e,n),strides:[s[1],s[2]],pad:i,dataFormat:o,dilations:[a[1],a[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const s=k("outputShape",t,e,n),i=k("strides",t,e,n),o=Ab(t,e,n);return[r.conv2dTranspose(k("x",t,e,n),k("filter",t,e,n),s,[i[1],i[2]],o)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const s=k("strides",t,e,n),i=Ab(t,e,n),o=k("dilations",t,e,n),a=k("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(k("input",t,e,n),k("filter",t,e,n),[s[1],s[2]],i,a,[o[1],o[2]])]}case"Conv3D":{const s=k("strides",t,e,n),i=k("pad",t,e,n),o=k("dataFormat",t,e,n).toUpperCase(),a=k("dilations",t,e,n);return[r.conv3d(k("x",t,e,n),k("filter",t,e,n),[s[1],s[2],s[3]],i,o,[a[1],a[2],a[3]])]}case"AvgPool":{const s=k("strides",t,e,n),i=k("pad",t,e,n),o=k("kernelSize",t,e,n);return[r.avgPool(k("x",t,e,n),[o[1],o[2]],[s[1],s[2]],i)]}case"MaxPool":{const s=k("strides",t,e,n),i=k("pad",t,e,n),o=k("kernelSize",t,e,n);return[r.maxPool(k("x",t,e,n),[o[1],o[2]],[s[1],s[2]],i)]}case"MaxPoolWithArgmax":{const s=k("strides",t,e,n),i=k("pad",t,e,n),o=k("kernelSize",t,e,n),a=k("includeBatchInIndex",t,e,n),{result:l,indexes:u}=r.maxPoolWithArgmax(k("x",t,e,n),[o[1],o[2]],[s[1],s[2]],i,a);return[l,u]}case"AvgPool3D":{const s=k("strides",t,e,n),i=k("pad",t,e,n),o=k("kernelSize",t,e,n);return[r.avgPool3d(k("x",t,e,n),[o[1],o[2],o[3]],[s[1],s[2],s[3]],i)]}case"MaxPool3D":{const s=k("strides",t,e,n),i=k("pad",t,e,n),o=k("kernelSize",t,e,n);return[r.maxPool3d(k("x",t,e,n),[o[1],o[2],o[3]],[s[1],s[2],s[3]],i)]}case"Dilation2D":{const s=k("strides",t,e,n),i=k("pad",t,e,n),o=k("dilations",t,e,n),a=s[1],l=s[2],u=o[1],c=o[2];return[r.dilation2d(k("x",t,e,n),k("filter",t,e,n),[a,l],i,[u,c],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Swe=(t,e,n,r=Vr)=>{switch(t.op){case"Fill":{const s=k("shape",t,e,n),i=k("dtype",t,e,n),o=k("value",t,e,n);return[r.fill(s,o,i)]}case"LinSpace":{const s=k("start",t,e,n),i=k("stop",t,e,n),o=k("num",t,e,n);return[r.linspace(s,i,o)]}case"Multinomial":{const s=k("logits",t,e,n),i=k("numSamples",t,e,n),o=k("seed",t,e,n);return[r.multinomial(s,i,o)]}case"OneHot":{const s=k("indices",t,e,n),i=k("depth",t,e,n),o=k("onValue",t,e,n),a=k("offValue",t,e,n),l=k("dtype",t,e,n);return[r.oneHot(s,i,o,a,l)]}case"Ones":return[r.ones(k("shape",t,e,n),k("dtype",t,e,n))];case"OnesLike":return[r.onesLike(k("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(k("shape",t,e,n),k("dtype",t,e,n),k("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(k("shape",t,e,n),k("minval",t,e,n),k("maxval",t,e,n),k("dtype",t,e,n))];case"RandomUniformInt":return[r.randomUniformInt(k("shape",t,e,n),k("minval",t,e,n),k("maxval",t,e,n),k("seed",t,e,n))];case"Range":{const s=k("start",t,e,n),i=k("stop",t,e,n),o=k("step",t,e,n);return[r.range(s,i,o,k("dtype",t,e,n))]}case"TruncatedNormal":{const s=k("shape",t,e,n),i=k("mean",t,e,n),o=k("stdDev",t,e,n),a=k("seed",t,e,n);return[r.truncatedNormal(s,i,o,k("dtype",t,e,n),a)]}case"Zeros":return[r.zeros(k("shape",t,e,n),k("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(k("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iw(t,e,n){const r=k("boxes",t,e,n),s=k("scores",t,e,n),i=k("maxOutputSize",t,e,n),o=k("iouThreshold",t,e,n),a=k("scoreThreshold",t,e,n),l=k("softNmsSigma",t,e,n);return{boxes:r,scores:s,maxOutputSize:i,iouThreshold:o,scoreThreshold:a,softNmsSigma:l}}const wwe=async(t,e,n,r,s=Vr)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:i,scores:o,maxOutputSize:a,iouThreshold:l,scoreThreshold:u,softNmsSigma:c}=iw(t,e,n),d=await s.image.nonMaxSuppressionWithScoreAsync(i,o,a,l,u,c);return[d.selectedIndices,d.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:i,scores:o,maxOutputSize:a,iouThreshold:l,scoreThreshold:u}=iw(t,e,n),c=k("padToMaxOutputSize",t,e,n),d=await s.image.nonMaxSuppressionPaddedAsync(i,o,a,l,u,c);return[d.selectedIndices,d.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:i,scores:o,maxOutputSize:a,iouThreshold:l,scoreThreshold:u}=iw(t,e,n);return[await s.image.nonMaxSuppressionAsync(i,o,a,l,u)]}case"Where":{const i=s.cast(k("condition",t,e,n),"bool"),o=[await s.whereAsync(i)];return i.dispose(),o}case"ListDiff":return s.setdiff1dAsync(k("x",t,e,n),k("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _we=(t,e,n,r=Vr)=>{switch(t.op){case"LowerBound":{const s=k("sortedSequence",t,e,n),i=k("values",t,e,n);return[r.lowerBound(s,i)]}case"TopKV2":{const s=k("x",t,e,n),i=k("k",t,e,n),o=k("sorted",t,e,n),a=r.topk(s,i,o);return[a.values,a.indices]}case"UpperBound":{const s=k("sortedSequence",t,e,n),i=k("values",t,e,n);return[r.upperBound(s,i)]}case"Unique":{const s=k("x",t,e,n),i=r.unique(s);return[i.values,i.indices]}case"UniqueV2":{const s=k("x",t,e,n),i=k("axis",t,e,n),o=r.unique(s,i);return[o.values,o.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kwe=(t,e,n,r=Vr)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const s=k("default",t,e,n);return[$r(t.name,e,n)||s];case"Placeholder":return[$r(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const c=k("x",t,e,n);return[Sl(c)]}case"IdentityN":return k("x",t,e,n).map(c=>Sl(c));case"Snapshot":const i=k("x",t,e,n);return[Sl(i)];case"Shape":return[r.tensor1d(k("x",t,e,n).shape,"int32")];case"ShapeN":return k("x",t,e,n).map(c=>r.tensor1d(c.shape));case"Size":return[r.scalar(k("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(k("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const o=k("x",t,e,n),a=k("data",t,e,n),l=k("message",t,e,n),u=k("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let c=0;c<a.length;c++)console.log(Array.prototype.slice.call(a[c].dataSync()).slice(0,u));return[o];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Iwe{get id(){return this.handle.id}constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=We(0),this.tensorMap=new Map,lr(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return We(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return this.tensorMap.forEach(s=>s.dispose()),this.tensorMap.clear(),J(()=>{const s=Ui(n),i=r.length,o=s.length;D(i===o,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${o} elements.`);for(let a=0;a<i;a++){const l=r[a],u=s[a];lr(u),this.tensorMap.set(l,u)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return J(()=>{const s=[];for(let i=0;i<r.length;i++){const o=r[i],a=this.findWithDefault(o,n);s.push(a)}return Ws(s)})}findWithDefault(e,n){const r=this.tensorMap.get(e);return r??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nwe=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const s=r.getHashTableHandleByName(t.name);if(s!=null)return[s];{const i=k("keyDType",t,e,n),o=k("valueDType",t,e,n),a=new Iwe(i,o);return r.addHashTable(t.name,a),[a.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const s=k("tableHandle",t,e,n,r),i=k("keys",t,e,n),o=k("values",t,e,n);return[await r.getHashTableById(s.id).import(i,o)]}case"LookupTableFind":case"LookupTableFindV2":{const s=k("tableHandle",t,e,n,r),i=k("keys",t,e,n),o=k("defaultValue",t,e,n);return[await r.getHashTableById(s.id).find(i,o)]}case"LookupTableSize":case"LookupTableSizeV2":{const s=k("tableHandle",t,e,n,r);return[r.getHashTableById(s.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Awe=(t,e,n,r=Vr)=>{switch(t.op){case"ResizeBilinear":{const s=k("images",t,e,n),i=k("size",t,e,n),o=k("alignCorners",t,e,n),a=k("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(s,[i[0],i[1]],o,a)]}case"ResizeNearestNeighbor":{const s=k("images",t,e,n),i=k("size",t,e,n),o=k("alignCorners",t,e,n),a=k("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(s,[i[0],i[1]],o,a)]}case"CropAndResize":{const s=k("image",t,e,n),i=k("boxes",t,e,n),o=k("boxInd",t,e,n),a=k("cropSize",t,e,n),l=k("method",t,e,n),u=k("extrapolationValue",t,e,n);return[r.image.cropAndResize(s,i,o,a,l,u)]}case"ImageProjectiveTransformV3":{const s=k("images",t,e,n),i=k("transforms",t,e,n),o=k("outputShape",t,e,n),a=k("fillValue",t,e,n),l=k("interpolation",t,e,n),u=k("fillMode",t,e,n);return[r.image.transform(s,i,l.toLowerCase(),u.toLowerCase(),a,o)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dwe=(t,e,n,r=Vr)=>{switch(t.op){case"Equal":return[r.equal(k("a",t,e,n),k("b",t,e,n))];case"NotEqual":return[r.notEqual(k("a",t,e,n),k("b",t,e,n))];case"Greater":return[r.greater(k("a",t,e,n),k("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(k("a",t,e,n),k("b",t,e,n))];case"Less":return[r.less(k("a",t,e,n),k("b",t,e,n))];case"LessEqual":return[r.lessEqual(k("a",t,e,n),k("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(k("a",t,e,n),k("b",t,e,n))];case"LogicalNot":return[r.logicalNot(k("a",t,e,n))];case"LogicalOr":return[r.logicalOr(k("a",t,e,n),k("b",t,e,n))];case"Select":case"SelectV2":return[r.where(k("condition",t,e,n),k("a",t,e,n),k("b",t,e,n))];case"BitwiseAnd":return[r.bitwiseAnd(k("a",t,e,n),k("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rwe=(t,e,n,r=Vr)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(k("a",t,e,n),k("b",t,e,n),k("transposeA",t,e,n),k("transposeB",t,e,n))];case"Einsum":return[r.einsum(k("equation",t,e,n),...k("tensors",t,e,n))];case"Transpose":return[r.transpose(k("x",t,e,n),k("perm",t,e,n))];case"_FusedMatMul":const[s,i]=k("fusedOps",t,e,n),o=s==="biasadd",a=i==="prelu",l=k("numArgs",t,e,n),u=k("leakyreluAlpha",t,e,n);if(o){if(a&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[c,d]=k("args",t,e,n);return[r.fused.matMul({a:k("a",t,e,n),b:k("b",t,e,n),transposeA:k("transposeA",t,e,n),transposeB:k("transposeB",t,e,n),bias:c,activation:i,preluActivationWeights:d,leakyreluAlpha:u})];case"MatrixBandPart":return[r.linalg.bandPart(k("a",t,e,n),k("numLower",t,e,n),k("numUpper",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fwe=(t,e,n,r=Vr)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(k("x",t,e,n),k("axis",t,e,n),k("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(k("x",t,e,n),k("mean",t,e,n),k("variance",t,e,n),k("offset",t,e,n),k("scale",t,e,n),k("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm(k("x",t,e,n),k("mean",t,e,n),k("variance",t,e,n),k("offset",t,e,n),k("scale",t,e,n),k("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(k("x",t,e,n),k("radius",t,e,n),k("bias",t,e,n),k("alpha",t,e,n),k("beta",t,e,n))];case"Softmax":return[r.softmax(k("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(k("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Owe=(t,e,n,r=Vr)=>{switch(t.op){case"RaggedGather":{const{outputNestedSplits:s,outputDenseValues:i}=r.raggedGather(k("paramsNestedSplits",t,e,n),k("paramsDenseValues",t,e,n),k("indices",t,e,n),k("outputRaggedRank",t,e,n));return s.concat(i)}case"RaggedRange":{const{rtNestedSplits:s,rtDenseValues:i}=r.raggedRange(k("starts",t,e,n),k("limits",t,e,n),k("splits",t,e,n));return[s,i]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(k("shape",t,e,n),k("values",t,e,n),k("defaultValue",t,e,n),k("rowPartitionTensors",t,e,n),k("rowPartitionTypes",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $we=(t,e,n,r=Vr)=>{switch(t.op){case"Max":{const a=k("axis",t,e,n),l=k("keepDims",t,e,n);return[r.max(k("x",t,e,n),a,l)]}case"Mean":{const a=k("axis",t,e,n),l=k("keepDims",t,e,n);return[r.mean(k("x",t,e,n),a,l)]}case"Min":{const a=k("axis",t,e,n),l=k("keepDims",t,e,n);return[r.min(k("x",t,e,n),a,l)]}case"Sum":{const a=k("axis",t,e,n),l=k("keepDims",t,e,n);return[r.sum(k("x",t,e,n),a,l)]}case"All":{const a=k("axis",t,e,n),l=k("keepDims",t,e,n);return[r.all(k("x",t,e,n),a,l)]}case"Any":{const a=k("axis",t,e,n),l=k("keepDims",t,e,n);return[r.any(k("x",t,e,n),a,l)]}case"ArgMax":{const a=k("axis",t,e,n);return[r.argMax(k("x",t,e,n),a)]}case"ArgMin":{const a=k("axis",t,e,n);return[r.argMin(k("x",t,e,n),a)]}case"Prod":{const a=k("axis",t,e,n),l=k("keepDims",t,e,n);return[r.prod(k("x",t,e,n),a,l)]}case"Cumprod":{const a=k("axis",t,e,n),l=k("exclusive",t,e,n),u=k("reverse",t,e,n);return[r.cumprod(k("x",t,e,n),a,l,u)]}case"Cumsum":{const a=k("axis",t,e,n),l=k("exclusive",t,e,n),u=k("reverse",t,e,n);return[r.cumsum(k("x",t,e,n),a,l,u)]}case"Bincount":const s=k("x",t,e,n),i=k("weights",t,e,n),o=k("size",t,e,n);return[r.bincount(s,i,o)];case"DenseBincount":{const a=k("x",t,e,n),l=k("weights",t,e,n),u=k("size",t,e,n),c=k("binaryOutput",t,e,n);return[r.denseBincount(a,l,u,c)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lwe=(t,e,n,r=Vr)=>{switch(t.op){case"ConcatV2":case"Concat":{const s=k("n",t,e,n),i=k("axis",t,e,n);let o=k("tensors",t,e,n);return o=o.slice(0,s),[r.concat(o,i)]}case"Gather":{const s=k("x",t,e,n),i=k("indices",t,e,n);return[r.gather(s,r.cast(i,"int32"),0)]}case"GatherV2":{const s=k("axis",t,e,n),i=k("batchDims",t,e,n),o=k("x",t,e,n),a=k("indices",t,e,n);return[r.gather(o,r.cast(a,"int32"),s,i)]}case"Reverse":{const s=k("dims",t,e,n),i=[];for(let a=0;a<s.length;a++)s[a]&&i.push(a);const o=k("x",t,e,n);return[r.reverse(o,i)]}case"ReverseV2":{const s=k("axis",t,e,n),i=k("x",t,e,n);return[r.reverse(i,s)]}case"Slice":{const s=k("begin",t,e,n),i=k("size",t,e,n);return[r.slice(k("x",t,e,n),s,i)]}case"StridedSlice":{const s=k("begin",t,e,n),i=k("end",t,e,n),o=k("strides",t,e,n),a=k("beginMask",t,e,n),l=k("endMask",t,e,n),u=k("ellipsisMask",t,e,n),c=k("newAxisMask",t,e,n),d=k("shrinkAxisMask",t,e,n),h=k("x",t,e,n);return[r.stridedSlice(h,s,i,o,a,l,u,c,d)]}case"Pack":return J(()=>{const s=k("axis",t,e,n),i=k("tensors",t,e,n),o=i[0].shape,a=r.squeeze(i[0]).shape,l=i.map(u=>{const c=Et(u.shape,o);if(!c&&!Et(r.squeeze(u).shape,a))throw new Error("the input tensors shape does not match");return c?u:r.reshape(u,o)});return[r.stack(l,s)]});case"Unpack":{const s=k("axis",t,e,n),i=k("tensor",t,e,n);return r.unstack(i,s)}case"Tile":{const s=k("reps",t,e,n);return[r.tile(k("x",t,e,n),s)]}case"Split":case"SplitV":{const s=k("axis",t,e,n),i=k("numOrSizeSplits",t,e,n),o=k("x",t,e,n);return r.split(o,i,s)}case"ScatterNd":{const s=k("indices",t,e,n),i=k("values",t,e,n),o=k("shape",t,e,n);return[r.scatterND(s,i,o)]}case"GatherNd":{const s=k("x",t,e,n),i=k("indices",t,e,n);return[r.gatherND(s,i)]}case"SparseToDense":{const s=k("sparseIndices",t,e,n),i=k("outputShape",t,e,n),o=k("sparseValues",t,e,n),a=k("defaultValue",t,e,n);return[r.sparseToDense(s,o,i,o.dtype===a.dtype?a:r.cast(a,o.dtype))]}case"TensorScatterUpdate":{const s=k("indices",t,e,n),i=k("values",t,e,n),o=k("tensor",t,e,n);return[r.tensorScatterUpdate(o,s,i)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pwe=(t,e,n,r=Vr)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:s,outputValues:i,emptyRowIndicator:o,reverseIndexMap:a}=r.sparse.sparseFillEmptyRows(k("indices",t,e,n),k("values",t,e,n),k("denseShape",t,e,n),k("defaultValue",t,e,n));return[s,i,o,a]}case"SparseReshape":{const{outputIndices:s,outputShape:i}=r.sparse.sparseReshape(k("inputIndices",t,e,n),k("inputShape",t,e,n),k("newShape",t,e,n));return[s,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(k("data",t,e,n),k("indices",t,e,n),k("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(k("data",t,e,n),k("indices",t,e,n),k("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mwe=(t,e,n,r=Vr)=>{switch(t.op){case"FFT":return[r.fft(k("x",t,e,n))];case"IFFT":return[r.ifft(k("x",t,e,n))];case"RFFT":return[r.rfft(k("x",t,e,n))];case"IRFFT":return[r.irfft(k("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bwe=(t,e,n,r=Vr)=>{switch(t.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(k("input",t,e,n),k("pattern",t,e,n),k("rewrite",t,e,n),k("replaceGlobal",t,e,n))];case"StringNGrams":{const{nGrams:s,nGramsSplits:i}=r.string.stringNGrams(k("data",t,e,n),k("dataSplits",t,e,n),k("separator",t,e,n),k("nGramWidths",t,e,n),k("leftPad",t,e,n),k("rightPad",t,e,n),k("padWidth",t,e,n),k("preserveShortSequences",t,e,n));return[s,i]}case"StringSplit":{const{indices:s,values:i,shape:o}=r.string.stringSplit(k("input",t,e,n),k("delimiter",t,e,n),k("skipEmpty",t,e,n));return[s,i,o]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(k("input",t,e,n),k("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zwe=(t,e,n,r=Vr)=>{switch(t.op){case"Cast":return[r.cast(k("x",t,e,n),k("dtype",t,e,n))];case"ExpandDims":{const s=k("axis",t,e,n);return[r.expandDims(k("x",t,e,n),s)]}case"Squeeze":{const s=k("axis",t,e,n);return[r.squeeze(k("x",t,e,n),s)]}case"Reshape":return[r.reshape(k("x",t,e,n),k("shape",t,e,n))];case"EnsureShape":return[r.ensureShape(k("x",t,e,n),k("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(k("x",t,e,n),k("padding",t,e,n),k("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(k("x",t,e,n),k("padding",t,e,n),k("constantValue",t,e,n))];case"SpaceToBatchND":{const s=k("blockShape",t,e,n),i=k("paddings",t,e,n);return[r.spaceToBatchND(k("x",t,e,n),s,i)]}case"BatchToSpaceND":{const s=k("blockShape",t,e,n),i=k("crops",t,e,n);return[r.batchToSpaceND(k("x",t,e,n),s,i)]}case"DepthToSpace":{const s=k("blockSize",t,e,n),i=k("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(k("x",t,e,n),s,i)]}case"BroadcastTo":return[r.broadcastTo(k("x",t,e,n),k("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(k("s0",t,e,n),k("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TO(t,e,n,r,s=J){const i=((o,a,l)=>{switch(o.category){case"arithmetic":return s(()=>mwe(o,a,l));case"basic_math":return s(()=>gwe(o,a,l));case"control":return xwe(o,a,l);case"convolution":return s(()=>Cwe(o,a,l));case"creation":return s(()=>Swe(o,a,l));case"dynamic":return wwe(o,a,l);case"evaluation":return s(()=>_we(o,a,l));case"image":return s(()=>Awe(o,a,l));case"graph":return s(()=>kwe(o,a,l));case"logical":return s(()=>Dwe(o,a,l));case"matrices":return s(()=>Rwe(o,a,l));case"normalization":return s(()=>Fwe(o,a,l));case"ragged":return s(()=>Owe(o,a,l));case"reduction":return s(()=>$we(o,a,l));case"slice_join":return s(()=>Lwe(o,a,l));case"sparse":return s(()=>Pwe(o,a,l));case"spectral":return s(()=>Mwe(o,a,l));case"string":return s(()=>Bwe(o,a,l));case"transformation":return s(()=>zwe(o,a,l));case"hash_table":return Nwe(o,a,l,r);case"custom":const u=BH(o.op);if(u&&u.customExecutor)return u.customExecutor(new pwe(o,a,l));throw TypeError(`Custom op ${o.op} is not registered.`);default:throw TypeError(`Unknown op '${o.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return Qu(i)?i.then(o=>[].concat(o)):[].concat(i)}class xO{constructor(e={},n={},r={},s={},i){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=s,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CO(t,e,n,r){const s=new Set,i=[];let o=null,a=null;const l=new Set,u=new Set(Object.keys(t).map(h=>ni(h)[0]));r=r||[];const c=new Set(r.map(h=>ni(h.name)[0])),d=[...e];for(;d.length>0;){const h=d.pop();if((Qc(h)||qwe(h)||Xwe(h))&&o==null&&(o=h,a=o.children.map(f=>f.name).filter(f=>s.has(f))),s.add(h.name),n[h.name]==null&&!u.has(h.name)&&!c.has(h.name)){if(h.inputs.length===0){i.push(h.name);continue}h.inputs.forEach(f=>{l.has(f.name)||(l.add(f.name),d.push(f))})}}return{inputs:t,outputs:e,usedNodes:s,missingInputs:i,dynamicNode:o,syncInputs:a}}function Hwe(t,e){const{usedNodes:n,inputs:r}=e,s=Object.keys(r).map(y=>ni(y)[0]).map(y=>t.nodes[y]),i=t.initNodes||[],o=y=>n.has(typeof y=="string"?y:y.name);function a(y){return[...new Map(y.map(g=>[g.name,g])).values()]}const l=a([...s,...t.weights,...i]).filter(o),u=a([...l,...Object.values(t.nodes)]).filter(o),c=new Map(u.map(y=>[y.name,y])),d={};for(const y of u){d[y.name]=d[y.name]||0;for(const g of y.children)o(g)||(d[g.name]=Number.POSITIVE_INFINITY),d[g.name]=(d[g.name]||0)+1}const h=Object.entries(d).filter(([,y])=>y===0).map(([y])=>y),f=[...h];for(;h.length>0;){const y=h.pop(),g=c.get(y);for(const v of g.children.filter(o))--d[v.name]===0&&(f.push(v.name),h.push(v.name))}const p=f.map(y=>c.get(y)),m=Uwe(p,l);return Wwe(m,l),m}function Uwe(t,e){const n=new Map(t.map(o=>[o.name,o])),r=e.map(o=>o.name),s=new Set(r);for(;r.length>0;){const o=r.pop(),a=n.get(o);for(const l of a.children)!n.has(l.name)||s.has(l.name)||(s.add(l.name),r.push(l.name))}return t.filter(o=>s.has(o.name))}class Wv extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function Wwe(t,e){const n=new Map(t.map((a,l)=>[a.name,l])),r=new Set(e.map(a=>a.name)),s=a=>r.has(typeof a=="string"?a:a.name),i=new Set(t.map(a=>a.name)),o=a=>i.has(typeof a=="string"?a:a.name);for(const a of t){for(const l of a.children.filter(o)){if(!n.has(l.name))throw new Wv(`Child ${l.name} of node ${a.name} is unreachable.`);if(n.get(a.name)>n.get(l.name))throw new Wv(`Node ${a.name} is scheduled to run after its child ${l.name}.`)}if(!s(a))for(const l of a.inputs){if(!n.has(l.name))throw new Wv(`Input ${l.name} of node ${a.name} is unreachable.`);if(n.get(l.name)>n.get(a.name))throw new Wv(`Node ${a.name} is scheduled to run before its input ${l.name}.`)}}}function Vwe(t){const e=new Map(t.map((a,l)=>[a.name,l])),n=Number.MAX_SAFE_INTEGER,r=t.map((a,l)=>Qc(a)?n:l),s=a=>{const l=r[e.get(a.name)];return l??-1},i=t.map((a,l)=>a.children.map(s).reduce((u,c)=>Math.max(u,c),r[l])),o=new Map;for(let a=0;a<t.length;++a){const l=i[a];if(l===n)continue;const u=t[a],c=t[l];o.has(c.name)||o.set(c.name,[]),o.get(c.name).push(u)}return o}const Gwe=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),jwe=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),Kwe=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function Qc(t){return Gwe.has(t.op)}function qwe(t){return jwe.has(t.op)}function Xwe(t){return Kwe.has(t.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PE{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(r=>e[r].map(s=>s.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new PE(e.functions[r],this)})}getCompilationKey(e,n){const r=e.map(i=>i.name).sort(),s=n.map(i=>i.name).sort();return r.join(this.SEPARATOR)+"--"+s.join(this.SEPARATOR)}compile(e,n){const r=CO(e,n,this.weightMap,this._initNodes),{missingInputs:s,dynamicNode:i,syncInputs:o}=r;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(s.length>0){const u=n.map(d=>d.name),c=Object.keys(e);throw new Error(`Cannot compute the outputs [${u}] from the provided inputs [${c}]. Missing the following inputs: [${s}]`)}const a=Hwe(this.graph,r),l=Vwe(a);return{orderedNodes:a,nodeLiveUntilMap:l}}cloneAndKeepTensor(e){if(e==null)return null;const n=e.clone();return lr(n),n}cloneTensorList(e){return e?e.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(e,n){this.disposeIntermediateTensors(),e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const s=r.map(h=>this.graph.nodes[ni(h)[0]]),i=n.map(h=>ni(h)[0]),o=new Set(i);let a=i.map(h=>this.graph.nodes[h]);a.length===0&&(a=this._outputs);const l=this.getCompilationKey(s,a);let u=this.compiledMap.get(l);u==null&&(u=this.compile(e,a),this.compiledMap.set(l,u));try{this.keepIntermediateTensors=ee().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(h){this.keepIntermediateTensors=!1,console.warn(h.message)}const c={},d={};return J(()=>{const h=new xO(this.weightMap,c,d,this.functionExecutorMap,this.parseNodeNameCache),f=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(g=>{const[v,E]=ni(g,h),b=[];b[E]=e[g],f[v]=b,this.keepIntermediateTensors&&(this.clonedTensorsMap[v]=this.cloneTensorList(b))});const p=this.getFrozenTensorIds(f),{orderedNodes:m,nodeLiveUntilMap:y}=u;for(const g of m){if(f[g.name])continue;const v=TO(g,f,h,this._resourceManager);if(Qu(v))throw new Error(`The execution of the op '${g.op}' returned a promise. Please use model.executeAsync() instead.`);f[g.name]=v,this.keepIntermediateTensors&&(this.clonedTensorsMap[g.name]=this.cloneTensorList(v)),this.checkTensorForDisposalWithNodeLiveUntilInfo(g,f,h,p,o,y.get(g.name))}return this.parent==null&&h.dispose(p),n.map(g=>$r(g,f,h))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(s=>s.id)));return new Set(n)}checkTensorForDisposal(e,n,r,s,i,o,a){if(!(Qc(n)||o.has(e))){for(const l of r[e])l!=null&&(a[l.id]=(a[l.id]||0)+n.children.length);for(const l of n.inputs){if(Qc(l))continue;const u=gO(l.name,r,s);if(u!=null)for(const c of u){if(!c||c.kept||i.has(c.id))continue;const d=a[c.id];d===1?(c.dispose(),delete a[c.id]):d!=null&&a[c.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,n,r,s,i,o){function a(l){return Qc(l)||i.has(l.name)}if(!(Qc(e)||o==null))for(const l of o){if(a(l))continue;const u=gO(l.name,n,r);for(const c of u)!c||c.kept||s.has(c.id)||c.dispose()}}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const n of e)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,n,r=!1,s={},i={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=ee().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(h){this.keepIntermediateTensors=!1,console.warn(h.message)}const o=new xO(this.weightMap,s,i,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const a=await this.executeWithControlFlow(e,o,n,r),l=n.map(h=>$r(h,a,o)),u=l.map(h=>h.id),c=Object.keys(e).map(h=>e[h].id),d=new Set([...u,...c,...this.weightIds]);return Object.values(a).forEach(h=>{h.forEach(f=>{f&&!f.isDisposed&&!d.has(f.id)&&f.dispose()})}),this.parent==null&&o.dispose(d),l}async executeFunctionAsync(e,n,r){const s=e.reduce((i,o,a)=>(i[this.inputs[a].name]=o,i),{});return this._executeAsync(s,this.outputNodes,!0,n,r)}async executeWithControlFlow(e,n,r,s){const i=Object.keys(e),o=i.map(b=>this.graph.nodes[ni(b)[0]]),a=r.map(b=>ni(b)[0]),l=new Set(a);let u=a.map(b=>this.graph.nodes[b]);u.length===0&&(u=this._outputs);const{usedNodes:c,missingInputs:d,dynamicNode:h,syncInputs:f}=CO(e,u,this.weightMap,this._initNodes),p=[...o,...this.graph.weights,...this._initNodes||[]].map(b=>({node:b,contexts:n.currentContext})),m=Object.assign({},this.weightMap);Object.keys(e).forEach(b=>{const[T,x]=ni(b),C=[];C[x]=e[b],m[T]=C});const y={},g=this.getFrozenTensorIds(m),v={};for(;p.length>0;){const b=this.processStack(o,p,n,m,v,g,l,y,c);await Promise.all(b)}h==null&&!s&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const E=u.filter(b=>!Qc(b)&&!$r(b.name,m,n)).map(b=>b.name);if(E.length>0){let b="";throw h!=null&&(b=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${f}]`),new Error(`Cannot compute the outputs [${E}] from the provided inputs [${i}]. Consider providing the following inputs: [${d}]. ${b}`)}return m}processStack(e,n,r,s,i,o,a,l,u){const c=[];for(;n.length>0;){const d=n.pop();r.currentContext=d.contexts;let h="";if(d.node.op==="Enter"&&k("isConstant",d.node,s,r)&&([h]=Cl(d.node.name,r)),s[d.node.name]==null){const f=TO(d.node,s,r,this._resourceManager);h||([h]=Cl(d.node.name,r));const p=r.currentContext;Qu(f)?c.push(f.then(m=>(s[h]=m,this.keepIntermediateTensors&&(this.clonedTensorsMap[h]=this.cloneTensorList(m)),r.currentContext=p,this.checkTensorForDisposal(h,d.node,s,r,o,a,l),this.processChildNodes(d.node,n,r,s,i,u),m))):(s[h]=f,this.keepIntermediateTensors&&(this.clonedTensorsMap[h]=this.cloneTensorList(f)),this.checkTensorForDisposal(h,d.node,s,r,o,a,l),this.processChildNodes(d.node,n,r,s,i,u))}else this.processChildNodes(d.node,n,r,s,i,u)}return c}processChildNodes(e,n,r,s,i,o){e.children.forEach(a=>{const[l]=Cl(a.name,r);i[l]||!o.has(a.name)||(a.op==="Merge"?a.inputNames.some(u=>!!$r(u,s,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:a})):a.inputNames.every(u=>!!$r(u,s,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:a})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const r=e[n],[s]=ni(n),i=this.graph.nodes[s];if(i.attrParams.shape&&i.attrParams.shape.value){const o=i.attrParams.shape.value,a=o.length===r.shape.length&&r.shape.every((l,u)=>o[u]===-1||o[u]===l);D(a,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${o}], but was [${r.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&D(r.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){var n,r;const s={};for(const i in e){const o=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[i];o!=null?s[o.name]=e[i]:s[i]=e[i]}return s}checkInputs(e){const n=Object.keys(e).filter(r=>{const[s]=ni(r);return this.graph.nodes[s]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>{var r,s;const i=(s=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||s===void 0?void 0:s[n];return i!=null?i.name:n},{})}checkOutputs(e){e.forEach(n=>{const[r]=ni(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class Ywe{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qwe="?tfjs-format=file",Zwe="model.json";class t5{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,n={},r=kA){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new Ywe}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return Qu(e)?e.then(n=>n.getWeightStream==null?this.loadSync(n):this.loadStreaming(n)):this.loadSync(e)}loadSync(e){const n=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,n)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const n=await LB(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,n)}loadWithWeightMap(e,n){this.artifacts=e;const r=this.artifacts.modelTopology;let s=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const i=this.artifacts.userDefinedMetadata;i.signature!=null&&(s=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}if(this.signature=s,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new PE(yO.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const i=yO.Instance.transformGraph(e.modelInitializer);this.initializer=new PE(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,n){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const n=e instanceof Ut?[e]:e,r={};return n.forEach((s,i)=>r[this.structuredOutputKeys[i]]=s),r}return e}predict(e,n){const r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(e,n){const r=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(e){var n;if(!(e instanceof Ut)&&!Array.isArray(e)){const i=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(i!=null)for(const o in i){const a=i[o];a.resourceId!=null&&(e[o]=this.resourceIdToCapturedInput[a.resourceId])}return e}e=Array.isArray(e)?e:[e];const r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let s=0;return this.inputNodes.reduce((i,o)=>{var a,l,u;const c=(u=(l=(a=this.signature)===null||a===void 0?void 0:a.inputs)===null||l===void 0?void 0:l[o])===null||u===void 0?void 0:u.resourceId;return c!=null?i[o]=this.resourceIdToCapturedInput[c]:i[o]=e[s++],i},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const n=this.initializerSignature.outputs,r=Object.keys(n);for(let s=0;s<r.length;s++){const i=r[s],o=n[i];this.resourceIdToCapturedInput[o.resourceId]=e[s]}}}execute(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=this.executor.execute(e,n);return r.length>1?r:r[0]}async executeAsync(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(e,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&gt(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function Jwe(t,e={},n=kA){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=t_e(t));const r=new t5(t,e,n);return await r.load(),r}function e_e(t){if(t==null)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");let e;if(t instanceof Array){const[r,s]=t;if(!r)throw new Error("modelJSON must be the first element of the array");if(!s||!(s instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in r))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in r))throw new Error("Model JSON is missing 'weightsManifest'");const i=FE(r.weightsManifest),o=h9(r,i,s);e=$E(o)}else if("load"in t)e=t;else if("modelTopology"in t&&"weightSpecs"in t&&"weightData"in t)e=$E(t);else throw new Error("Unknown model format");const n=new t5(e);return n.load(),n}function t_e(t){return t.endsWith("/")||(t=t+"/"),`${t}${Zwe}${Qwe}`}/** @license See the LICENSE file. */const n_e="4.20.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r_e=Object.freeze(Object.defineProperty({__proto__:null,GraphModel:t5,deregisterOp:ISe,loadGraphModel:Jwe,loadGraphModelSync:e_e,registerOp:kSe,version_converter:n_e},Symbol.toStringTag,{value:"Module"})),s_e=Zk(r_e),i_e=Zk(wSe);/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(function(t,e){(function(n,r){r(e,s_e,i_e)})(ac,function(n,r,s){const i={1:{name:"/m/01g317",id:1,displayName:"person"},2:{name:"/m/0199g",id:2,displayName:"bicycle"},3:{name:"/m/0k4j",id:3,displayName:"car"},4:{name:"/m/04_sv",id:4,displayName:"motorcycle"},5:{name:"/m/05czz6l",id:5,displayName:"airplane"},6:{name:"/m/01bjv",id:6,displayName:"bus"},7:{name:"/m/07jdr",id:7,displayName:"train"},8:{name:"/m/07r04",id:8,displayName:"truck"},9:{name:"/m/019jd",id:9,displayName:"boat"},10:{name:"/m/015qff",id:10,displayName:"traffic light"},11:{name:"/m/01pns0",id:11,displayName:"fire hydrant"},13:{name:"/m/02pv19",id:13,displayName:"stop sign"},14:{name:"/m/015qbp",id:14,displayName:"parking meter"},15:{name:"/m/0cvnqh",id:15,displayName:"bench"},16:{name:"/m/015p6",id:16,displayName:"bird"},17:{name:"/m/01yrx",id:17,displayName:"cat"},18:{name:"/m/0bt9lr",id:18,displayName:"dog"},19:{name:"/m/03k3r",id:19,displayName:"horse"},20:{name:"/m/07bgp",id:20,displayName:"sheep"},21:{name:"/m/01xq0k1",id:21,displayName:"cow"},22:{name:"/m/0bwd_0j",id:22,displayName:"elephant"},23:{name:"/m/01dws",id:23,displayName:"bear"},24:{name:"/m/0898b",id:24,displayName:"zebra"},25:{name:"/m/03bk1",id:25,displayName:"giraffe"},27:{name:"/m/01940j",id:27,displayName:"backpack"},28:{name:"/m/0hnnb",id:28,displayName:"umbrella"},31:{name:"/m/080hkjn",id:31,displayName:"handbag"},32:{name:"/m/01rkbr",id:32,displayName:"tie"},33:{name:"/m/01s55n",id:33,displayName:"suitcase"},34:{name:"/m/02wmf",id:34,displayName:"frisbee"},35:{name:"/m/071p9",id:35,displayName:"skis"},36:{name:"/m/06__v",id:36,displayName:"snowboard"},37:{name:"/m/018xm",id:37,displayName:"sports ball"},38:{name:"/m/02zt3",id:38,displayName:"kite"},39:{name:"/m/03g8mr",id:39,displayName:"baseball bat"},40:{name:"/m/03grzl",id:40,displayName:"baseball glove"},41:{name:"/m/06_fw",id:41,displayName:"skateboard"},42:{name:"/m/019w40",id:42,displayName:"surfboard"},43:{name:"/m/0dv9c",id:43,displayName:"tennis racket"},44:{name:"/m/04dr76w",id:44,displayName:"bottle"},46:{name:"/m/09tvcd",id:46,displayName:"wine glass"},47:{name:"/m/08gqpm",id:47,displayName:"cup"},48:{name:"/m/0dt3t",id:48,displayName:"fork"},49:{name:"/m/04ctx",id:49,displayName:"knife"},50:{name:"/m/0cmx8",id:50,displayName:"spoon"},51:{name:"/m/04kkgm",id:51,displayName:"bowl"},52:{name:"/m/09qck",id:52,displayName:"banana"},53:{name:"/m/014j1m",id:53,displayName:"apple"},54:{name:"/m/0l515",id:54,displayName:"sandwich"},55:{name:"/m/0cyhj_",id:55,displayName:"orange"},56:{name:"/m/0hkxq",id:56,displayName:"broccoli"},57:{name:"/m/0fj52s",id:57,displayName:"carrot"},58:{name:"/m/01b9xk",id:58,displayName:"hot dog"},59:{name:"/m/0663v",id:59,displayName:"pizza"},60:{name:"/m/0jy4k",id:60,displayName:"donut"},61:{name:"/m/0fszt",id:61,displayName:"cake"},62:{name:"/m/01mzpv",id:62,displayName:"chair"},63:{name:"/m/02crq1",id:63,displayName:"couch"},64:{name:"/m/03fp41",id:64,displayName:"potted plant"},65:{name:"/m/03ssj5",id:65,displayName:"bed"},67:{name:"/m/04bcr3",id:67,displayName:"dining table"},70:{name:"/m/09g1w",id:70,displayName:"toilet"},72:{name:"/m/07c52",id:72,displayName:"tv"},73:{name:"/m/01c648",id:73,displayName:"laptop"},74:{name:"/m/020lf",id:74,displayName:"mouse"},75:{name:"/m/0qjjc",id:75,displayName:"remote"},76:{name:"/m/01m2v",id:76,displayName:"keyboard"},77:{name:"/m/050k8",id:77,displayName:"cell phone"},78:{name:"/m/0fx9l",id:78,displayName:"microwave"},79:{name:"/m/029bxz",id:79,displayName:"oven"},80:{name:"/m/01k6s3",id:80,displayName:"toaster"},81:{name:"/m/0130jx",id:81,displayName:"sink"},82:{name:"/m/040b_t",id:82,displayName:"refrigerator"},84:{name:"/m/0bt_c3",id:84,displayName:"book"},85:{name:"/m/01x3z",id:85,displayName:"clock"},86:{name:"/m/02s195",id:86,displayName:"vase"},87:{name:"/m/01lsmm",id:87,displayName:"scissors"},88:{name:"/m/0kmg4",id:88,displayName:"teddy bear"},89:{name:"/m/03wvsk",id:89,displayName:"hair drier"},90:{name:"/m/012xff",id:90,displayName:"toothbrush"}};class o{constructor(l,u){this.modelPath=u||`https://storage.googleapis.com/tfjs-models/savedmodel/${this.getPrefix(l)}/model.json`}getPrefix(l){return l==="lite_mobilenet_v2"?`ssd${l}`:`ssd_${l}`}async load(){this.model=await r.loadGraphModel(this.modelPath);const l=s.zeros([1,300,300,3],"int32"),u=await this.model.executeAsync(l);await Promise.all(u.map(c=>c.data())),u.map(c=>c.dispose()),l.dispose()}async infer(l,u,c){const d=s.tidy(()=>(l instanceof s.Tensor||(l=s.browser.fromPixels(l)),s.expandDims(l))),h=d.shape[1],f=d.shape[2],p=await this.model.executeAsync(d),m=p[0].dataSync(),y=p[1].dataSync();d.dispose(),s.dispose(p);const[g,v]=this.calculateMaxScores(m,p[0].shape[1],p[0].shape[2]),E=s.getBackend();s.getBackend()==="webgl"&&s.setBackend("cpu");const b=s.tidy(()=>{const x=s.tensor2d(y,[p[1].shape[1],p[1].shape[3]]);return s.image.nonMaxSuppression(x,g,u,c,c)}),T=b.dataSync();return b.dispose(),E!==s.getBackend()&&s.setBackend(E),this.buildDetectedObjects(f,h,y,g,T,v)}buildDetectedObjects(l,u,c,d,h,f){const p=h.length,m=[];for(let y=0;y<p;y++){const g=[];for(let x=0;x<4;x++)g[x]=c[4*h[y]+x];const v=g[0]*u,E=g[1]*l,b=g[2]*u,T=g[3]*l;g[0]=E,g[1]=v,g[2]=T-E,g[3]=b-v,m.push({bbox:g,class:i[f[h[y]]+1].displayName,score:d[h[y]]})}return m}calculateMaxScores(l,u,c){const d=[],h=[];for(let f=0;f<u;f++){let p=Number.MIN_VALUE,m=-1;for(let y=0;y<c;y++)l[f*c+y]>p&&(p=l[f*c+y],m=y);d[f]=p,h[f]=m}return[d,h]}async detect(l,u=20,c=.5){return this.infer(l,u,c)}dispose(){this.model!=null&&this.model.dispose()}}n.ObjectDetection=o,n.load=async function(a={}){if(s==null)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");const l=a.base||"lite_mobilenet_v2",u=a.modelUrl;if(["mobilenet_v1","mobilenet_v2","lite_mobilenet_v2"].indexOf(l)===-1)throw new Error(`ObjectDetection constructed with invalid base model ${l}. Valid names are 'mobilenet_v1', 'mobilenet_v2' and 'lite_mobilenet_v2'.`);const c=new o(l,u);return await c.load(),c},n.version="2.2.3",Object.defineProperty(n,"__esModule",{value:!0})})})(Y0e,CE);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UH={kernelName:o0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>q(t,ih(Ce(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o_e={kernelName:op,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=qt(Ce(n,"float32")),s=Cr(Re(We(1),r));return an(ze(t,s))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a_e={kernelName:ap,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Cr(Re(qt(Ce(n,"float32")),1));return ze(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l_e={kernelName:eh,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=it(n.shape,r.shape);return{a:()=>{let a=t;const l=sr(n.shape,s);return l.length>0&&(a=Le(a,l)),Q(a,n.shape)},b:()=>{let a=t;const l=sr(r.shape,s);return l.length>0&&(a=Le(a,l)),Q(a,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u_e={kernelName:a0,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,s)=>{n[s]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c_e={kernelName:l0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>At(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d_e={kernelName:u0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>At(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h_e={kernelName:lp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,Cr(Re(We(1),qt(Ce(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f_e={kernelName:up,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Cr(he(We(1),qt(Ce(n,"float32"))));return ze(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p_e={kernelName:hp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=it(n.shape,r.shape);return{a:()=>{const a=he(qt(n),qt(r));let l=q(t,ze(r,a));const u=sr(n.shape,s);return u.length>0&&(l=Le(l,u)),Q(l,n.shape)},b:()=>{const a=he(qt(n),qt(r));let l=an(q(t,ze(n,a)));const u=sr(r.shape,s);return u.length>0&&(l=Le(l,u)),Q(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m_e={kernelName:cp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,he(qt(Ce(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g_e={kernelName:dp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,Re(We(1),qt(Ce(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y_e(t,e,n,r,s,i){const o=R(t,"dy","avgPool3dGrad"),a=R(e,"input","avgPool3dGrad");let l=o,u=a,c=!1;a.rank===4&&(c=!0,l=Q(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),u=Q(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),D(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),D(u.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),bs("avgPool3dGrad",s,i);const d={dy:l,input:u},h={filterSize:n,strides:r,pad:s,dimRoundingMode:i},f=W.runKernel(ix,d,h);return c?Q(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const v_e=V({avgPool3dGrad_:y_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b_e={kernelName:d0,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:i,pad:o,dimRoundingMode:a}=n;return{x:()=>v_e(t,r,s,i,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E_e(t,e,n,r,s){const i=R(t,"dy","avgPoolGrad"),o=R(e,"input","avgPoolGrad");D(o.rank===i.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${i.rank})`);let a=o,l=i,u=!1;o.rank===3&&(u=!0,a=Q(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=Q(i,[1,i.shape[0],i.shape[1],i.shape[2]])),D(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),D(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const c={dy:l,input:a},d={filterSize:n,strides:r,pad:s},h=W.runKernel(sx,c,d);return u?Q(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const T_e=V({avgPoolGrad_:E_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x_e={kernelName:c0,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:i,pad:o}=n;return{x:()=>T_e(t,r,s,i,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C_e={kernelName:h0,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,s]=e,{transposeA:i,transposeB:o}=n;return!i&&!o?{a:()=>mt(t,s,!1,!0),b:()=>mt(r,t,!0,!1)}:!i&&o?{a:()=>mt(t,s,!1,!1),b:()=>mt(t,r,!0,!1)}:i&&!o?{a:()=>mt(s,t,!1,!0),b:()=>mt(r,t,!1,!1)}:{a:()=>mt(s,t,!0,!0),b:()=>mt(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S_e={kernelName:f0,gradFunc:(t,e,n)=>{const{blockShape:r,crops:s}=n;return{x:()=>xy(t,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w_e={kernelName:mB,gradFunc:(t,e,n)=>{const r=n,s=r.inputShape,i=r.shape,o=Array.from(i);for(let l=s.length-1;l>=0;l--)if(s[l]===i[l])o[l]=1;else if(s[l]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${i}].`);const a=[];for(let l=0;l<o.length;l++)o[l]>1&&a.push(l);return{x:()=>Le(t,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const __e={kernelName:fp,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k_e={kernelName:pp,gradFunc:t=>({x:()=>At(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I_e={kernelName:mp,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:s,clipValueMax:i}=n;return{x:()=>Br(aa(ru(r,s),bc(r,i)),t,At(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N_e={kernelName:m0,inputsToSave:["x"],gradFunc:UH.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A_e={kernelName:g0,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:s}=n,i=yt(s,e[0].shape)[0],o=r.map(l=>l[i]);return Ls(t,o,i).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D_e={kernelName:y0,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{dilations:i,strides:o,pad:a,dataFormat:l}=n;return D(Ju(i),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`),{x:()=>O9(r.shape,t,s,o,a,l),filter:()=>gA(r,t,s.shape,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R_e={kernelName:v0,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{strides:i,pad:o,dataFormat:a,dimRoundingMode:l}=n;return{dy:()=>Wl(t,s,i,o,a,1,l),filter:()=>gA(t,r,s.shape,i,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F_e(t,e,n,r,s){let i=t;t.rank===4&&(i=Q(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let o=e;o.rank===4&&(o=Q(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),D(i.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${i.shape}.`),D(o.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`),D(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),D(i.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${i.shape[4]}) must match input depth in filter (${n[3]}.`),D(o.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${n[4]}).`);const a={x:i,dy:o},l={strides:r,pad:s,filterShape:n};return W.runKernel(cx,a,l)}const O_e=V({conv3DBackpropFilter_:F_e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $_e={kernelName:b0,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:i}=n;D(Ju(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[o,a]=e;return{x:()=>QB(o.shape,t,a,s,i),filter:()=>O_e(o,t,a.shape,s,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L_e={kernelName:gp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>q(an(IC(Ce(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P_e={kernelName:yp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>q(NC(Ce(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M_e={kernelName:E0,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s,exclusive:i,reverse:o}=n;return{x:()=>{const a=$n([s],r.rank);let l=pC(t,s,i,!o);return a!=null&&(l=wt(l,a)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B_e={kernelName:T0,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:i,dimRoundingMode:o}=n,a=r??[1,1];D(Ju(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,u]=e;return D(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),D(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),D(l.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),D(Ur(s,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${s} and dilations '${a}'.`),bs("depthwiseConv2d",i,o),{x:()=>Hz(l.shape,t,u,s,i,a,o),filter:()=>zz(l,t,u.shape,s,i,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z_e={kernelName:x0,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,i={x:r,filter:s,dy:t},o={x:r,filter:s,dy:t};return{x:()=>W.runKernel(kE,i,n),filter:()=>W.runKernel(IE,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H_e={kernelName:bp,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>W.runKernel(Tx,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const U_e={kernelName:Ep,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=q(Us(an(qt(n))),2/Math.sqrt(Math.PI));return{x:()=>q(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W_e={kernelName:Tp,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>q(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V_e={kernelName:S0,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>Q(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G_e={kernelName:xp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>q(t,Us(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j_e={kernelName:Cp,gradFunc:t=>({x:()=>At(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K_e={kernelName:Sp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=it(n.shape,r.shape);return{a:()=>{const a=ze(t,Ce(r,"float32")),l=sr(n.shape,s);return l.length>0?Q(Le(a,l),n.shape):a},b:()=>{let a=q(t,Ce(n,"float32"));const l=sr(r.shape,s);l.length>0&&(a=Q(Le(a,l),r.shape));const u=qt(r);return an(ze(a,Ce(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q_e={kernelName:w0,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[s,i,o,a]=e,l=a??We(1),u=sr(i.shape,s.shape),c=[];if(i.rank===1){for(let b=0;b<s.shape.length-1;++b)c.push(s.shape[b]);c.push(1)}const d=Re(s,i),h=q(t,l),f=wC(he(o,We(r))),p=q(q(q(f,f),f),We(-.5));return{x:()=>i.rank===1?Q(q(q(t,Ri(Q(f,[1,1,1,i.shape[0]]),c)),l),s.shape):Q(q(q(t,f),l),s.shape),mean:()=>{let b=q(q(f,We(-1)),h);return i.rank===1&&(b=Le(b,u)),Q(b,i.shape)},variance:()=>{let b=q(q(p,d),h);return i.rank===1&&(b=Le(b,u)),Q(b,i.shape)},scale:()=>{const b=q(d,f);let T=q(t,b);return i.rank===1&&(T=Le(T,u)),Q(T,i.shape)},offset:()=>{let b=t;return i.rank===1&&(b=Le(b,u)),Q(b,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X_e={kernelName:_0,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,s]=e,{axis:i,batchDims:o}=n,a=yt(i,r.shape)[0],l=(u,c,d)=>()=>{const h=u.shape,f=c.size,p=h.slice(0,a),m=p.length,y=h.slice(i,h.length).slice(1),g=y.length,v=SO(0,m),E=SO(m+1,m+1+g),b=wO([p,[f],y]),T=Q(d,b),x=Q(c,[f]),C=wO([[m],v,E]),S=wt(T,C);let N=$C(S,x,u.shape[a]);const I=vc(C);return N=wt(N,I),N};if(o===1){const u=r.shape[0],c=r.split(u,0);return{x:()=>Ws(c.map((f,p)=>l(f,s.slice(p,1),t.slice(p,1))())).reshape(r.shape),indices:()=>s}}else return{x:l(r,s,t),indices:()=>s}}};function SO(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function wO(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y_e={kernelName:wp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>At(n),b:()=>At(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q_e={kernelName:_p,gradFunc:t=>({x:()=>Ce(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z_e={kernelName:kp,gradFunc:t=>({x:()=>At(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J_e={kernelName:Ip,gradFunc:t=>({x:()=>At(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eke={kernelName:Np,gradFunc:t=>({x:()=>At(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tke={kernelName:I0,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:s}=n,i=qs(r,0);return{x:()=>Br(i,t,q(t,s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nke={kernelName:Dp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,he(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rke={kernelName:Ap,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,Ce(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ske={kernelName:gB,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;return{logits:()=>{const o=Us(r);return Re(t,q(Le(t,s,!0),o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ike(t,e,n,r=5,s=1,i=1,o=.5){const a={x:t,y:e,dy:n},l={depthRadius:r,bias:s,alpha:i,beta:o};return W.runKernel(Nx,a,l)}const oke=V({localResponseNormalizationBackprop_:ike});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ake={kernelName:O0,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{depthRadius:i,bias:o,alpha:a,beta:l}=n;return{x:()=>oke(r,s,t,i,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WH(t,e,n,r){return e.rank<n.rank&&(e=Q(e,Kn(e.shape,r))),t.rank<n.rank&&(t=Q(t,Kn(t.shape,r))),{x:()=>q(t,Ce(So(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _O={kernelName:$0,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:s}=r,i=e[0],o=e[1],a=yt(s,i.shape),l=WH(t,o,i,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lke={kernelName:Rp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>q(t,Ce(ru(n,r),"float32")),b:()=>q(t,Ce(Of(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uke(t,e,n,r,s,i,o){const a=R(t,"dy","maxPool3dGrad"),l=R(e,"input","maxPool3dGrad"),u=R(n,"output","maxPool3dGrad");let c=a,d=l,h=u,f=!1;l.rank===4&&(f=!0,c=Q(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),d=Q(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),h=Q(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),D(c.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),D(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),D(h.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${h.rank}.`),bs("maxPool3dGrad",i,o);const p={dy:c,input:d,output:h},m={filterSize:r,strides:s,pad:i,dimRoundingMode:o},y=W.runKernel(Dx,p,m);return f?Q(y,[y.shape[1],y.shape[2],y.shape[3],y.shape[4]]):y}const cke=V({maxPool3dGrad_:uke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dke={kernelName:P0,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=n;return{x:()=>cke(t,r,s,i,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hke(t,e,n,r,s,i,o){const a=R(t,"dy","maxPoolGrad"),l=R(e,"input","maxPoolGrad"),u=R(n,"output","maxPoolGrad");D(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),D(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),D(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),bs("maxPoolGrad",i,o);const c={dy:a,input:l,output:u},d={filterSize:r,strides:s,pad:i,dimRoundingMode:o};return W.runKernel(Ax,c,d)}const fke=V({maxPoolGrad_:hke});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pke={kernelName:L0,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:i,strides:o,pad:a}=n;return{x:()=>fke(t,r,s,i,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mke={kernelName:M0,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n,i=yt(s,r.shape),a=Ir(r.shape,i)[1],l=re(a);return{x:()=>{const c=r.shape.slice();i.forEach(f=>{c[f]=1});const d=Q(t,c);return ze(q(d,Os(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gke={kernelName:B0,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:s}=r,[i,o]=e,a=yt(s,i.shape),l=WH(t,o,i,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yke={kernelName:Fp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>q(t,Ce(bc(n,r),"float32")),b:()=>q(t,Ce(qs(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vke={kernelName:z0,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,i=s.map(o=>o[0]);return{x:()=>Nt(t,i,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bke={kernelName:Op,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=it(n.shape,r.shape);return{a:()=>{const a=sr(n.shape,s);return a.length>0?Q(Le(t,a),n.shape):t},b:()=>{const a=q(t,an(i1(ze(n,r)))),l=sr(r.shape,s);return l.length>0?Q(Le(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eke={kernelName:$p,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=it(n.shape,r.shape);return{a:()=>{const a=q(t,Ce(r,"float32")),l=sr(n.shape,s);return l.length>0?Q(Le(a,l),n.shape):a},b:()=>{const a=q(t,Ce(n,"float32")),l=sr(r.shape,s);return l.length>0?Q(Le(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tke={kernelName:H0,gradFunc:t=>({x:()=>an(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xke={kernelName:V0,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>nr(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cke={kernelName:W0,gradFunc:t=>({x:()=>At(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ske={kernelName:G0,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return Ui(t,r).map(i=>()=>i)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kO={kernelName:j0,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,i=s.map(o=>o[0]);return{x:()=>Nt(t,i,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wke={kernelName:Lp,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,s]=e,i=n,o=r,a=it(i.shape,o.shape);return{a:()=>{const c=Ce(o,"float32");let d=q(t,q(c,Ja(i,Re(c,We(1)))));const h=sr(i.shape,a);return h.length>0&&(d=Le(d,h)),Q(d,i.shape)},b:()=>{const c=qs(i,0),d=Br(c,pi(i),At(i));let h=q(t,q(s,d));const f=sr(o.shape,a);return f.length>0&&(h=Le(h,f)),Q(h,o.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ke={kernelName:K0,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,s=qs(n,0);return{x:()=>Br(s,t,q(t,r)),alpha:()=>{let i=Br(s,At(t),q(t,n));const o=sr(r.shape,t.shape);return o.length>0&&(i=Le(i,o)),Q(i,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kke(t,e,n){const r=t.shape.slice();r[n]=1;const s=Q(e,r),i=xg(t,n,!0,!1),o=xg(t,n,!0,!0),a=q(i,o);return q(s,a)}function Ike(t,e,n){const r=t.shape.length,s=r-n.length,i=$n(n,r);let o=t;i!=null&&(o=wt(t,i));const a=o.shape.slice(),u=a.splice(r-n.length,n.length).reduce((h,f)=>h*f,1);a.push(u);const c=o.reshape(a);let d=kke(c,e,s);if(d=d.reshape(o.shape),i!=null){const h=vc(i);d=wt(d,h)}return d}const Nke={kernelName:q0,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;let i=[];return s==null?i=r.shape.map((o,a)=>a):typeof s=="number"?i=[s]:i=s,{x:()=>Ike(r,t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ake={kernelName:vp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=it(n.shape,r.shape);return{a:()=>{const a=ze(t,Ce(r,"float32")),l=sr(n.shape,s);return l.length>0?Q(Le(a,l),n.shape):a},b:()=>{let a=q(t,Ce(n,"float32"));const l=sr(r.shape,s);l.length>0&&(a=Q(Le(a,l),r.shape));const u=qt(r);return an(ze(a,Ce(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dke={kernelName:Pp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,an(qt(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rke={kernelName:Bp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=q(bc(n,6),ih(n));return{x:()=>q(t,Ce(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fke={kernelName:Mp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>q(t,Ce(ih(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oke={kernelName:X0,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Q(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ke={kernelName:Q0,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>W.runKernel(Wx,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lke={kernelName:Y0,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>W.runKernel(Ux,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pke={kernelName:Z0,gradFunc:(t,e,n)=>{const{dims:r}=n,s=yt(r,t.shape);return{x:()=>Hi(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mke={kernelName:zp,gradFunc:t=>({x:()=>At(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bke={kernelName:Hp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>an(ze(t,q(Ja(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zke={kernelName:J0,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>Ce(At(n),"float32"),t:()=>q(t,Ce(n,t.dtype)),e:()=>q(t,Ce(by(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hke={kernelName:Up,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=qs(n,We(0)),s=We(XC),i=We(YC),o=q(t,i),a=q(q(t,s),Us(Ce(n,"float32")));return Br(r,o,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uke={kernelName:jp,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>q(t,q(n,Re(We(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wke={kernelName:Gp,gradFunc:t=>({x:()=>At(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vke={kernelName:Wp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>q(py(Ce(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gke={kernelName:Vp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>q(fC(Ce(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jke={kernelName:ey,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:s,size:i}=n,o=r.shape,[a,l]=KC(r,s,i),u=[];for(let c=0;c<t.rank;c++)u.push([a[c],o[c]-a[c]-l[c]]);return{x:()=>su(t,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kke={kernelName:sy,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:s}=n,i=!0,o=q(t,r);return{logits:()=>Re(o,q(Le(o,[s],i),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qke={kernelName:Kp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>q(t,na(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IO={kernelName:ny,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:s}=n;return{x:()=>fy(t,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NO={kernelName:ry,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>jn(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xke={kernelName:qp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,q(Cr(Ce(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yke={kernelName:Zx,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>q(t,q(Ce(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qke={kernelName:Xp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=We(2);return{a:()=>q(t,q(s,Re(n,r))),b:()=>q(t,q(s,Re(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zke={kernelName:e1,gradFunc:t=>({x:()=>At(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jke={kernelName:Yp,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=it(n.shape,r.shape);return{a:()=>{let a=t;const l=sr(n.shape,s);return l.length>0&&(a=Le(a,l)),Q(a,n.shape)},b:()=>{let a=t;const l=sr(r.shape,s);return l.length>0&&(a=Le(a,l)),Q(an(a),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eIe={kernelName:ty,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,s=r.shape.slice(),{axis:i}=n;yt(i,r.shape).forEach(u=>{s[u]=1});const a=Q(t,s),l=q(a,Os(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tIe={kernelName:Qp,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ze(t,qt(py(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nIe={kernelName:Zp,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>q(Re(We(1),qt(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rIe={kernelName:Jp,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:s}=n;return{x:()=>{let o=At(r);if(r.rank===1)for(let a=0;a<s[0];++a)o=he(o,Nt(t,[a*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)o=he(o,Nt(t,[a*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)for(let u=0;u<s[2];++u)o=he(o,Nt(t,[a*r.shape[0],l*r.shape[1],u*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)for(let u=0;u<s[2];++u)for(let c=0;c<s[3];++c)o=he(o,Nt(t,[a*r.shape[0],l*r.shape[1],u*r.shape[2],c*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sIe={kernelName:fd,gradFunc:(t,e,n)=>{const r=n,{perm:s}=r,i=vc(s);return{x:()=>wt(t,i)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iIe={kernelName:oy,gradFunc:(t,e,n)=>{const r=n,{axis:s}=r;return{value:()=>Ws(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oIe={kernelName:ay,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>aIe(t,n)}}};function aIe(t,e){const n=al(e,At(e)),r=o1(t,n);let s=ru(e,We(0,"int32"));const i=r.rank-s.rank;for(let a=0;a<i;++a)s=Xr(s,a+1);s=aa(s,Os(r.shape,"bool"));const o=At(r);return Br(s,r,o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lIe={kernelName:ly,gradFunc:t=>({x:()=>At(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uIe=[UH,o_e,a_e,l_e,u_e,c_e,d_e,h_e,f_e,p_e,m_e,g_e,b_e,x_e,C_e,S_e,w_e,__e,k_e,I_e,N_e,A_e,R_e,D_e,$_e,L_e,P_e,M_e,B_e,z_e,Ake,H_e,U_e,W_e,V_e,G_e,K_e,j_e,q_e,X_e,Y_e,Q_e,Z_e,J_e,eke,tke,nke,rke,ske,ake,_O,_O,lke,dke,pke,mke,gke,yke,vke,bke,Eke,Tke,xke,Cke,Ske,kO,kO,wke,_ke,Nke,Dke,Rke,Fke,Oke,$ke,Lke,Pke,Mke,Bke,zke,Hke,Uke,Wke,Vke,Gke,jke,Kke,qke,IO,IO,NO,NO,Xke,Qke,Yke,Zke,Jke,eIe,tIe,nIe,rIe,sIe,iIe,oIe,lIe];for(const t of uIe)yB(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.abs=function(){return this.throwIfDisposed(),er(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.acos=function(){return this.throwIfDisposed(),m9(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.acosh=function(){return this.throwIfDisposed(),g9(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.add=function(t){return this.throwIfDisposed(),he(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.all=function(t,e){return this.throwIfDisposed(),cC(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.any=function(t,e){return this.throwIfDisposed(),bg(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.argMax=function(t){return this.throwIfDisposed(),Dd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.argMin=function(t){return this.throwIfDisposed(),y9(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.asScalar=function(){return this.throwIfDisposed(),D(this.size===1,()=>"The array must have only 1 element."),Q(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.asType=function(t){return this.throwIfDisposed(),Ce(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.as1D=function(){return this.throwIfDisposed(),Q(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.as2D=function(t,e){return this.throwIfDisposed(),Q(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),Q(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),Q(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.as5D=function(t,e,n,r,s){return this.throwIfDisposed(),Q(this,[t,e,n,r,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.asin=function(){return this.throwIfDisposed(),v9(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.asinh=function(){return this.throwIfDisposed(),b9(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.atan=function(){return this.throwIfDisposed(),E9(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.atan2=function(t){return this.throwIfDisposed(),T9(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.atanh=function(){return this.throwIfDisposed(),x9(this)};ie().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),hy(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),fy(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.batchNorm=function(t,e,n,r,s){return this.throwIfDisposed(),t1(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.broadcastTo=function(t){return this.throwIfDisposed(),pd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.cast=function(t){return this.throwIfDisposed(),Ce(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.ceil=function(){return this.throwIfDisposed(),N9(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),Hs(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof Ut&&(t=[t]),jn([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.conv1d=function(t,e,n,r,s,i){return this.throwIfDisposed(),dC(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.conv2dTranspose=function(t,e,n,r,s){return this.throwIfDisposed(),hC(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.conv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),Wl(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.cos=function(){return this.throwIfDisposed(),py(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.cosh=function(){return this.throwIfDisposed(),fC(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),xg(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),pC(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),P9(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.depthwiseConv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),n1(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.dilation2d=function(t,e,n,r,s){return this.throwIfDisposed(),M9(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.divNoNan=function(t){return this.throwIfDisposed(),B9(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.div=function(t){return this.throwIfDisposed(),ze(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.dot=function(t){return this.throwIfDisposed(),z9(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.elu=function(){return this.throwIfDisposed(),r1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.equal=function(t){return this.throwIfDisposed(),So(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.erf=function(){return this.throwIfDisposed(),mC(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),U9(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.exp=function(){return this.throwIfDisposed(),Us(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.expandDims=function(t){return this.throwIfDisposed(),Xr(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.expm1=function(){return this.throwIfDisposed(),W9(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.fft=function(){return this.throwIfDisposed(),ky(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.flatten=function(){return this.throwIfDisposed(),Q(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.floor=function(){return this.throwIfDisposed(),i1(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.floorDiv=function(t){return this.throwIfDisposed(),uC(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.gather=function(t,e,n){return this.throwIfDisposed(),o1(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.greaterEqual=function(t){return this.throwIfDisposed(),ru(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.greater=function(t){return this.throwIfDisposed(),qs(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.ifft=function(){return this.throwIfDisposed(),Mf(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.irfft=function(){return this.throwIfDisposed(),DC(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.isFinite=function(){return this.throwIfDisposed(),V9(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.isInf=function(){return this.throwIfDisposed(),G9(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.isNaN=function(){return this.throwIfDisposed(),j9(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.leakyRelu=function(t){return this.throwIfDisposed(),gy(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.lessEqual=function(t){return this.throwIfDisposed(),bc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.less=function(t){return this.throwIfDisposed(),Of(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),K9(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.logSigmoid=function(){return this.throwIfDisposed(),q9(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.logSoftmax=function(t){return this.throwIfDisposed(),vC(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),vy(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.log=function(){return this.throwIfDisposed(),pi(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.log1p=function(){return this.throwIfDisposed(),yy(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.logicalAnd=function(t){return this.throwIfDisposed(),aa(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.logicalNot=function(){return this.throwIfDisposed(),by(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.logicalOr=function(t){return this.throwIfDisposed(),bC(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.logicalXor=function(t){return this.throwIfDisposed(),X9(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),mt(this,t,e,n)};ie().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),Ey(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.max=function(t,e){return this.throwIfDisposed(),Bi(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.maximum=function(t){return this.throwIfDisposed(),al(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.mean=function(t,e){return this.throwIfDisposed(),Rn(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.min=function(t,e){return this.throwIfDisposed(),Ff(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.minimum=function(t){return this.throwIfDisposed(),tc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),Q9(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.mod=function(t){return this.throwIfDisposed(),Z9(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.mul=function(t){return this.throwIfDisposed(),q(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.neg=function(){return this.throwIfDisposed(),an(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.norm=function(t,e,n){return this.throwIfDisposed(),s1(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.notEqual=function(t){return this.throwIfDisposed(),Od(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),$f(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.onesLike=function(){return this.throwIfDisposed(),mi(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.pad=function(t,e){return this.throwIfDisposed(),su(this,t,e)};ie().prototype.pool=function(t,e,n,r,s,i){return this.throwIfDisposed(),J9(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.pow=function(t){return this.throwIfDisposed(),Ja(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.prelu=function(t){return this.throwIfDisposed(),Cy(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.prod=function(t,e){return this.throwIfDisposed(),eA(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.reciprocal=function(){return this.throwIfDisposed(),sA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.relu=function(){return this.throwIfDisposed(),ga(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.relu6=function(){return this.throwIfDisposed(),CC(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.reshapeAs=function(t){return this.throwIfDisposed(),Q(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.reshape=function(t){return this.throwIfDisposed(),Q(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),Gz(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),jz(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.reverse=function(t){return this.throwIfDisposed(),Hi(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.rfft=function(){return this.throwIfDisposed(),Iy(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.round=function(){return this.throwIfDisposed(),SC(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.rsqrt=function(){return this.throwIfDisposed(),wC(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.selu=function(){return this.throwIfDisposed(),_C(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.separableConv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),kC(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.sigmoid=function(){return this.throwIfDisposed(),na(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.sign=function(){return this.throwIfDisposed(),iA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.sin=function(){return this.throwIfDisposed(),IC(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.sinh=function(){return this.throwIfDisposed(),NC(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.slice=function(t,e){return this.throwIfDisposed(),Nt(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.softmax=function(t){return this.throwIfDisposed(),_y(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.softplus=function(){return this.throwIfDisposed(),rh(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),xy(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.split=function(t,e){return this.throwIfDisposed(),Ls(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.sqrt=function(){return this.throwIfDisposed(),Cr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.square=function(){return this.throwIfDisposed(),qt(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.squaredDifference=function(t){return this.throwIfDisposed(),RC(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.squeeze=function(t){return this.throwIfDisposed(),Tc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof Ut?[this,t]:[this,...t];return Ws(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.step=function(t){return this.throwIfDisposed(),ih(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.stridedSlice=function(t,e,n,r,s,i,o,a){return this.throwIfDisposed(),oA(this,t,e,n,r,s,i,o,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.sub=function(t){return this.throwIfDisposed(),Re(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.sum=function(t,e){return this.throwIfDisposed(),Le(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.tan=function(){return this.throwIfDisposed(),aA(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.tanh=function(){return this.throwIfDisposed(),ec(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.tile=function(t){return this.throwIfDisposed(),Ri(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.toBool=function(){return this.throwIfDisposed(),Ce(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.toFloat=function(){return this.throwIfDisposed(),Ce(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.toInt=function(){return this.throwIfDisposed(),Ce(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.topk=function(t,e){return this.throwIfDisposed(),cA(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.transpose=function(t){return this.throwIfDisposed(),wt(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.unique=function(t){return this.throwIfDisposed(),dA(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),$C(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.unstack=function(t){return this.throwIfDisposed(),Ui(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.where=function(t,e){return this.throwIfDisposed(),Br(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */ie().prototype.zerosLike=function(){return this.throwIfDisposed(),At(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ia extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ia.prototype)}}class fo extends Error{constructor(e){super(e),Object.setPrototypeOf(this,fo.prototype)}}class Z extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Z.prototype)}}class ut extends Error{constructor(e){super(e),Object.setPrototypeOf(this,ut.prototype)}}class n5 extends Error{constructor(e){super(e),Object.setPrototypeOf(this,n5.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class VH{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Md(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function Na(t,e){if(!t)throw new n5(e)}function AO(t,e){let n=0;for(const r of t)r===e&&n++;return n}function Ns(t){return t.length===1?t[0]:t}function Vt(t){return Array.isArray(t)?t:[t]}function wl(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Zc(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let Qi={};function r5(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function $k(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>$k(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:$k(r))}}}function Ry(t,e={},n={},r="object",s=!1){if(typeof t=="string"){const i=t;let o;if(i in n)o=n[i];else if(i in Qi)o=Qi[i];else if(o=e[i],o==null)throw new Z(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return o}else{const i=t;if(i.className==null||i.config==null)throw new Z(`${r}: Improper config format: ${JSON.stringify(i)}.
'className' and 'config' must set.`);const o=i.className;let a,l;if(o in n?[a,l]=n[o]:o in Qi?[a,l]=Qi.className:o in e&&([a,l]=e[o]),a==null)throw new Z(`Unknown ${r}: ${o}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const u={};for(const f of Object.keys(Qi))u[f]=Qi[f];for(const f of Object.keys(n))u[f]=n[f];const c=i.config;c.customObjects=u;const d=Object.assign({},Qi);for(const f of Object.keys(n))Qi[f]=n[f];$k(i.config);const h=l(a,i.config,n,s);return Qi=Object.assign({},d),h}else{const u=Object.assign({},Qi);for(const d of Object.keys(n))Qi[d]=n[d];const c=new a(i.config);return Qi=Object.assign({},u),c}}}function cIe(t,e){return t<e?-1:t>e?1:0}function Vv(t,e){return-1*cIe(t,e)}function Gu(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function dIe(t){if(t==null)throw new Z(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function ah(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new Z(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function s5(t,e,n=0,r=1/0){return Na(n>=0),Na(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(s=>typeof s===e)}function Er(t,e){Array.isArray(t)?(D(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>Er(n,`element ${r+1} of ${e}`))):D(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${GH(t)}.`)}function GH(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>GH(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function hIe(t,e,n){let r=n!=null?n():ls(),s;return(...o)=>{const a=n!=null?n():ls();return a-r<e||(r=a,s=t(...o)),s}}function jH(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let fIe=0;function KH(){return fIe++}const Gv={};function QC(t=""){return t in Gv||(Gv[t]=0),Gv[t]+=1,t+Gv[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const pIe=["channelsFirst","channelsLast"],mIe=["nearest","bilinear"],gIe=["valid","same","causal"],yIe=["max","avg"],vIe=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const wh=new Map;function Yn(t){ah(pIe,"DataFormat",t)}function bIe(t){ah(mIe,"InterpolationFormat",t)}function ji(t){ah(gIe,"PaddingMode",t)}function qH(t){ah(yIe,"PoolMode",t)}const Dm=[],DO="/";function md(t,e){Dm.push(t);try{const n=e();return Dm.pop(),n}catch(n){throw Dm.pop(),n}}function EIe(){return Dm.length===0?"":Dm.join(DO)+DO}function XH(t){if(!QH(t))throw new Error("Not a valid tensor name: '"+t+"'");return EIe()+t}function YH(t){if(!QH(t))throw new Error("Not a valid tensor name: '"+t+"'");wh.has(t)||wh.set(t,0);const e=wh.get(t);if(wh.set(t,wh.get(t)+1),e>0){const n=`${t}_${e}`;return wh.set(n,1),n}else return t}const TIe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function QH(t){return!!t.match(TIe)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function xIe(t){return t===parseInt(t.toString(),10)}function ju(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let s=e;s<n;++s)r*=t[s];return r}function Bf(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function nc(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function la(t,e){if(e<t)throw new Z(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let ow;function ur(){return ow==null&&(ow=c9().epsilon()),ow}function ua(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ka(t,e){return Ce(t,e)}function Fy(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),Q(t,n)}function CIe(t,e){return J(()=>{if(t.shape.length!==2)throw new Z(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=Fy(t,1);return Lk(n,[1,e,1])})}function SIe(t){const e=[ju(t.shape)];return Q(t,e)}function wIe(t){if(t.rank<=1)throw new Z(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],ju(t.shape,1)];return Q(t,e)}function gd(t,e,n){return J(()=>{switch(t.rank){case 1:return Sy(t,e,n);case 2:return AC(t,[e,0],[n,t.shape[1]]);case 3:return wy(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return Pf(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return Nt(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return Nt(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new Z(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function aw(t,e,n){return J(()=>{switch(t.rank){case 1:return Sy(t,e,n);case 2:return AC(t,[0,e],[t.shape[0],n]);case 3:return wy(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return Pf(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new Z(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function jv(t,e,n,r){return J(()=>{switch(t.rank){case 1:return Sy(t,e,n);case 2:switch(r){case 1:return gd(t,e,n);case 2:return aw(t,e,n);default:throw new Z(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return gd(t,e,n);case 2:return wy(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return aw(t,e,n);default:throw new Z(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return gd(t,e,n);case 2:return Pf(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return Pf(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return aw(t,e,n);default:throw new Z(`The axis is not within the rank of the tensor ${r}`)}default:throw new Z(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function i5(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),jn(t,e)}function RO(t,e){switch(t.rank){case 1:return A9([t,e]);case 2:return D9([t,e],0);case 3:return R9([t,e],0);case 4:return F9([t,e],0);default:throw new Z(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function Lk(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new Z(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return Ri(t,e)}function ZC(t,e=0,n=1,r,s){return xC(t,e,n,r,s)}function qa(t,e,n,r){if(t.rank<2||e.rank<2)throw new ut(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const s=t.shape.slice(-1)[0],i=e.shape.slice(-2)[0];if(s!==i)throw new ut(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return bk({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?Pk(t.rank,r,ua()):null,activation:n});{const s=t.shape.slice(),i=s.pop();t=Q(t,[-1,i]);const o=e.shape.slice(),a=o.pop(),l=o.pop(),u=[...o,a],c=Array.from({length:e.rank},(p,m)=>m===0?e.rank-2:m<=e.rank-2?m-1:m);e=Q(wt(e,c),[l,-1]);const d=[...s,...u];return Q(bk({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?Pk(t.rank,r,ua()):null,activation:n}),d)}}function ZH(t,e,n){return J(()=>(Array.isArray(e)?e=Yr(e,"int32"):e=Ce(e,"int32"),o1(t,e,n)))}function Oy(t){return q(t,t)}function Pk(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new Z(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?Q(e,[1,r[0],1,1,1]):Q(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?Q(e,[1,1,1,1,r[0]]):Q(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?Q(e,[1,r[0],1,1]):Q(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?Q(e,[1,1,1,r[0]]):Q(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?Q(e,[1,r[0],1]):Q(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?Q(e,[1,1,r[0]]):Q(e,[1].concat(r))}else if(t<3)return e;throw new Z(`Unsupported input rank by biasAdd: ${e.rank}`)}function ya(t,e,n){return J(()=>(n==null&&(n=ua()),Yn(n),he(t,Pk(t.rank,e,n))))}function _Ie(t,e=1){if(e!==1)throw new ut(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return r1(t)}function kIe(t){return J(()=>ze(t,he(er(t),1)))}function JH(t,e,n,r){return J(()=>pA(t,e,n,r))}function IIe(t){return J(()=>{const e=he(.5,q(.2,t));return Hs(e,0,1)})}function $y(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const NIe=["fanIn","fanOut","fanAvg"],AIe=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function DIe(t){ah(NIe,"FanMode",t)}function RIe(t){ah(AIe,"Distribution",t)}class No extends oh{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class eU extends No{apply(e,n){return nr(e,n)}}eU.className="Zeros";pe(eU);class o5 extends No{apply(e,n){return Os(e,n)}}o5.className="Ones";pe(o5);class tU extends No{constructor(e){if(super(),typeof e!="object")throw new Z(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new Z(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return J(()=>q(We(this.value),Os(e,n)))}getConfig(){return{value:this.value}}}tU.className="Constant";pe(tU);class nU extends No{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return Ec(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}nU.className="RandomUniform";pe(nU);class rU extends No{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new ut(`randomNormal does not support dType ${n}.`);return ZC(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}rU.className="RandomNormal";pe(rU);class sU extends No{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new ut(`truncatedNormal does not support dType ${n}.`);return OC(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}sU.className="TruncatedNormal";pe(sU);class iU extends No{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return J(()=>{if(e.length!==2||e[0]!==e[1])throw new Z("Identity matrix initializer can only be used for 2D square matrices.");return q(this.gain,gC(e[0]))})}getConfig(){return{gain:this.gain}}}iU.className="Identity";pe(iU);function FIe(t,e="channelsLast"){let n,r;if(Yn(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const s=ju(t,2);n=t[1]*s,r=t[0]*s}else if(e==="channelsLast"){const s=ju(t,0,t.length-2);n=t[t.length-2]*s,r=t[t.length-1]*s}}else{const s=ju(t);n=Math.sqrt(s),r=Math.sqrt(s)}return[n,r]}class gi extends No{constructor(e){if(super(),e.scale<0)throw new Z(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,DIe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,RIe(this.distribution),this.seed=e.seed}apply(e,n){const r=FIe(e),s=r[0],i=r[1];let o=this.scale;if(this.mode==="fanIn"?o/=Math.max(1,s):this.mode==="fanOut"?o/=Math.max(1,i):o/=Math.max(1,(s+i)/2),this.distribution==="normal"){const a=Math.sqrt(o);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new ut(`${this.getClassName()} does not support dType ${n}.`);return OC(e,0,a,n,this.seed)}else{const a=Math.sqrt(3*o);return Ec(e,-a,a,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}gi.className="VarianceScaling";pe(gi);class a5 extends gi{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return gi.className}}a5.className="GlorotUniform";pe(a5);class l5 extends gi{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return gi.className}}l5.className="GlorotNormal";pe(l5);class u5 extends gi{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return gi.className}}u5.className="HeNormal";pe(u5);class c5 extends gi{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return gi.className}}c5.className="HeUniform";pe(c5);class d5 extends gi{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return gi.className}}d5.className="LeCunNormal";pe(d5);class h5 extends gi{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return gi.className}}h5.className="LeCunUniform";pe(h5);class oU extends No{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return J(()=>{if(e.length<2)throw new ut("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=re(e.slice(0,-1)),s=e[e.length-1],i=r*s;i>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${i}) elements: Slowness may result.`);const o=[Math.max(s,r),Math.min(s,r)],a=ZC(o,0,1,n,this.seed),l=vA.qr(a,!1);let u=l[0];const d=l[1].flatten().stridedSlice([0],[Math.min(s,r)*Math.min(s,r)],[Math.min(s,r)+1]);return u=q(u,d.sign()),r<s&&(u=u.transpose()),q(We(this.gain),u.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}oU.className="Orthogonal";pe(oU);const FO={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function OO(t,e={}){return Ry(t,Ii.getMap().classNameMap,e,"initializer")}function Fn(t){return r5(t)}function _n(t){if(typeof t=="string"){const e=t in FO?FO[t]:t;if(e==="GlorotNormal")return new l5;if(e==="GlorotUniform")return new a5;if(e==="HeNormal")return new u5;if(e==="HeUniform")return new c5;if(e==="LeCunNormal")return new d5;if(e==="LeCunUniform")return new h5;{const n={};return n.className=e,n.config={},OO(n)}}else return t instanceof No?t:OO(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Mk(t){return Array.isArray(t)&&Array.isArray(t[0])}function ME(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function Je(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new Z(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function Lt(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new Z(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function BE(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,s)=>r*s);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const $O="Variable";class OIe{constructor(e,n="float32",r=$O,s=!0,i=null){this.dtype=n??"float32",this.shape=e.shape,this.id=KH(),r=r??$O,this.originalName=XH(r),this.name=YH(this.originalName),this.trainable_=s,this.constraint=i,this.val=hA(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),$Ie(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function $Ie(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function Bk(t){return t.map(e=>e.read())}function f5(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class cr{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class tl{constructor(e,n,r,s,i,o,a){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=s,this.callArgs=i,this.outputTensorIndex=a,this.id=KH(),o!=null&&(this.originalName=XH(o),this.name=YH(this.originalName)),this.rank=n.length}}let LIe=0;class JC{constructor(e,n){this.callArgs=n,this.id=LIe++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let PIe=0;class bt extends oh{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=PIe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=wl(r)+"_"+QC(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let i=null;e.batchSize!=null&&(i=e.batchSize),r=[i].concat(e.inputShape)}this.batchInputShape=r;let s=e.dtype;s==null&&(s=e.inputDType),s==null&&(s="float32"),this.dtype=s}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new fo(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new Z(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return Ns(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Ns(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Ia(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Ia(`Layer ${this.name} is not connected, no input to return.`);return Ns(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Ia(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Ia(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Ns(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=Vt(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=Vt(this.inputSpec);if(n.length!==r.length)throw new Z(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let s=0;s<n.length;s++){const i=n[s],o=r[s];if(o==null)continue;const a=i.rank;if(o.ndim!=null&&a!==o.ndim)throw new Z(`Input ${s} is incompatible with layer ${this.name}: expected ndim=${o.ndim}, found ndim=${a}`);if(o.maxNDim!=null&&a>o.maxNDim)throw new Z(`Input ${s} is incompatible with layer ${this.name}: expected max_ndim=${o.maxNDim}, found ndim=${a}`);if(o.minNDim!=null&&a<o.minNDim)throw new Z(`Input ${s} is incompatible with layer ${this.name}: expected min_ndim=${o.minNDim}, found ndim=${a}.`);if(o.dtype!=null&&i.dtype!==o.dtype)throw new Z(`Input ${s} is incompatible with layer ${this.name} : expected dtype=${o.dtype}, found dtype=${i.dtype}.`);if(o.axes){const l=i.shape;for(const u in o.axes){const c=Number(u),d=o.axes[u],h=c>=0?l[c]:l[l.length+c];if(d!=null&&[d,null].indexOf(h)===-1)throw new Z(`Input ${s} is incompatible with layer ${this.name}: expected axis ${c} of input shape to have value ${d} but got shape ${l}.`)}}if(o.shape!=null)for(let l=0;l<o.shape.length;++l){const u=o.shape[l],c=i.shape[l];if(u!=null&&c!=null&&u!==c)throw new Z(`Input ${s} is incompatible with layer ${this.name}: expected shape=${o.shape}, found shape=${i.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=Vt(e),s=zIe(e),i=HIe(e);if(s===i)throw new Z("Arguments to apply() must be all SymbolicTensors or all Tensors");return md(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const o=[];for(const a of Vt(e))o.push(a.shape);this.build(Ns(o)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&i&&(this._refCount=1)}if(this.assertInputCompatibility(e),i){let o=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,o);const a=Vt(o),l=[];for(let u of a)r.indexOf(u)!==-1&&(u=u.clone()),l.push(u);if(o=Ns(l),this.activityRegularizer!=null)throw new ut("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}else{const o=MIe(e),a=this.computeOutputShape(o);let l;const u=BIe(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?o[0]:o),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((c,d)=>new tl(u,c,this,Vt(e),n,this.name,d)):l=new tl(u,a,this,Vt(e),n,this.name),this.addInboundNode(e,l,null,null,o,a,n),this._refCount++,this.activityRegularizer!=null)throw new ut("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,s)=>{r!=null&&e[s]!=null&&e[s]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Ia(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new Ia(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new fo(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return BE(this.weights)}build(e){this.built=!0}getWeights(e=!1){return Bk(e?this.trainableWeights:this.weights)}setWeights(e){J(()=>{const n=this.weights;if(n.length!==e.length)throw new Z(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],s=Bk(n);for(let i=0;i<s.length;++i){const o=s[i],a=n[i],l=e[i];if(!Et(o.shape,l.shape))throw new Z(`Layer weight shape ${o.shape} not compatible with provided weight shape ${l.shape}`);r.push([a,l])}f5(r)})}addWeight(e,n,r,s,i,o,a,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new Z(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(s=l!=null?l():_n("zeros"));const u=s.apply(n,r),c=new OIe(u,r,e,o,a);return u.dispose(),i!=null&&this.addLoss(()=>i.apply(c.read())),o==null&&(o=!0),o?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=Vt(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const s=this.computeMask(e,r),i=Vt(n),o=Vt(s);if(i.length!==o.length)throw new Error(`${this.name} outputs ${i.length} tensors but ${i.length} masks for those tensors`);for(let a=0;a<i.length;a++)i[a].kerasMask=o[a]}addInboundNode(e,n,r,s,i,o,a=null){const l=Vt(e);n=Vt(n),r=Vt(r),s=Vt(s),i=ME(i),o=ME(o);const u=[],c=[],d=[];for(const h of l)u.push(h.sourceLayer),c.push(h.nodeIndex),d.push(h.tensorIndex);new JC({outboundLayer:this,inboundLayers:u,nodeIndices:c,tensorIndices:d,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:s,inputShapes:i,outputShapes:o},a);for(let h=0;h<n.length;h++)n[h].sourceLayer=this,n[h].nodeIndex=this.inboundNodes.length-1,n[h].tensorIndex=h}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function MIe(t){t=Vt(t);const e=[];for(const n of t)e.push(n.shape);return Ns(e)}function BIe(t){return"float32"}function aU(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const s=[];for(let i=0;i<r.inboundLayers.length;i++){const o=r.inputTensors[i],a=r.inboundLayers[i],l=r.nodeIndices[i],u=aU(o,a,l);for(const c of u)s.indexOf(c)===-1&&s.push(c)}return s}}}function zIe(t){let e=!0;for(const n of Vt(t))if(!(n instanceof tl)){e=!1;break}return e}function HIe(t){let e=!0;for(const n of Vt(t))if(n instanceof tl){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Ly extends bt{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:QC("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new Z("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new Z("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new Z("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const s=new tl(this.dtype,this.batchInputShape,this,[],{},this.name);s.nodeIndex=0,s.tensorIndex=0,new JC({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[s],outputTensors:[s],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new Z(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}Ly.className="InputLayer";pe(Ly);function UIe(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new Z("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new Ly({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function WIe(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return Ce(e,t.dtype)}catch{throw new Z(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class Fu{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Fu)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=WIe(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new Z(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof tl){if(this.id2Value[e.id]==null)throw new Z(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new Z(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof tl){if(this.id2Value[e.id]==null)throw new Z(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new Z(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&gt(this.id2Mask)}}const zE=new VH,HE=new VH;function VIe(t){zE!=null&&zE.setMaxEntries(t),HE!=null&&HE.setMaxEntries(t)}function im(t,e,n,r){const s=n==null?!1:n.training,i=Array.isArray(t),o=i?t:[t],a=o.map(p=>p.name),l=[],u=e.names();for(const p of a)u.indexOf(p)!==-1?l.push(e.getValue(p)):l.push(null);r!=null&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);const c=a.join(",")+"|"+e.names().sort().join(",");let d=zE.get(c),h;if(d==null){const p=GIe(o,e);d=p.sorted,h=p.recipientCounts,zE.put(c,d),HE.put(c,h)}h={},s||Object.assign(h,HE.get(c));const f=new Fu(e);for(let p=0;p<d.length;++p){if(r!=null){const N=RE().numTensors;N>r.maxNumTensors&&(r.maxNumTensors=N),N<r.minNumTensors&&(r.minNumTensors=N)}const m=d[p],y=m.sourceLayer;if(y instanceof Ly)continue;const g=[],v=[],E=[];let b=!1;for(const N of m.inputs){const I=f.getValue(N),F=f.getMask(N);g.push(I),v.push(F),F!=null&&(b=!0),s||(h[N.name]--,h[N.name]===0&&!e.hasKey(N)&&a.indexOf(N.name)===-1&&!I.isDisposed&&N.sourceLayer.stateful!==!0&&E.push(I))}b&&(n=n||{},n.mask=v[0]);const T=Vt(y.apply(g,n));let x=null;y.supportsMasking&&(x=y.computeMask(g,v));const C=KIe(m),S=Array.isArray(C)?C:[C];for(let N=0;N<S.length;++N){f.hasKey(S[N])||f.add(S[N],T[N],Array.isArray(x)?x[0]:x);const I=a.indexOf(S[N].name);I!==-1&&(l[I]=T[N])}s||gt(E)}return f.disposeMasks(),i?l:l[0]}function GIe(t,e){D(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const s=LO(t[0],e);n=s.sorted,r=s.recipientMap}else{const s=new Set;for(const i of t){const{sorted:o,recipientMap:a}=LO(i,e);for(const l of o)s.has(l.name)||(n.push(l),s.add(l.name));for(const l in a)r[l]==null&&(r[l]=new Set),a[l].forEach(u=>r[l].add(u))}}return{sorted:n,recipientCounts:jIe(r)}}function jIe(t){const e={};for(const n in t)e[n]=t[n].size;return e}function LO(t,e){const n=new Set,r=[],s={};for(const a of e.names())n.add(a);const i=[],o=[];for(i.push(t);i.length>0;){const a=i[i.length-1];if(n.has(a.name)){i.pop();continue}const l=o[o.length-1]===i.length-1;if(a.inputs.length===0||l)i.pop(),r.push(a),n.add(a.name),l&&o.pop();else{o.push(i.length-1);for(const u of a.inputs)s[u.name]==null&&(s[u.name]=new Set),s[u.name].add(a.name),!n.has(u.name)&&i.push(u)}}return{sorted:r,recipientMap:s}}function KIe(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const s of t.sourceLayer.inboundNodes[r].outputTensors)if(s.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qIe=ee();qIe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,VIe);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function p5(t,e){return J(()=>Cr(Le(q(t,t),e,!0)))}class Py extends oh{getConfig(){return{}}}class lU extends Py{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return J(()=>{const n=p5(e,this.axis),r=Hs(n,0,this.maxValue);return q(e,ze(r,he(ur(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}lU.className="MaxNorm";pe(lU);class uU extends Py{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return J(()=>ze(e,he(ur(),p5(e,this.axis))))}getConfig(){return{axis:this.axis}}}uU.className="UnitNorm";pe(uU);class cU extends Py{apply(e){return ga(e)}}cU.className="NonNeg";pe(cU);class dU extends Py{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return J(()=>{const n=p5(e,this.axis),r=he(q(this.rate,Hs(n,this.minValue,this.maxValue)),q(1-this.rate,n));return q(e,ze(r,he(ur(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}dU.className="MinMaxNorm";pe(dU);const PO={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function dr(t){return r5(t)}function MO(t,e={}){return Ry(t,Ii.getMap().classNameMap,e,"constraint")}function hr(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in PO?PO[t]:t,config:{}};return MO(n)}else return t instanceof Py?t:MO(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function Pc(t){if(t==null)return;const e=[],n=[],r=[];for(const s in t){const i=t[s];if(typeof i!="number"){const o=i;e.push(o.data()),n.push(s),r.push(o)}}if(e.length>0){const s=await Promise.all(e);for(let i=0;i<s.length;++i)t[n[i]]=s[i][0];gt(r)}}function hU(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var BO;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(BO||(BO={}));const XIe=125;class Cg{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class YIe{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class QIe extends Cg{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const s in n){const i=n[s];if(typeof i=="number")this.totals.hasOwnProperty(s)||(this.totals[s]=0),this.totals[s]=this.totals[s]+i*r;else{let o;s in this.totals?o=this.totals[s]:this.totals[s]=0;const a=J(()=>he(this.totals[s],q(i,r)));this.totals[s]=a,o!=null&&o.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:J(()=>{const s=q(ze(1,this.seen),this.totals[r]);n[r]=s,this.totals[r].dispose(),lr(n[r])}))}}class ZIe extends Cg{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const i in this.history){const o=this.history[i];for(let a=0;a<o.length;++a)if(typeof o[a]!="number"){const l=o[a];e.push(l.data()),n.push(i),r.push(a)}}const s=await Promise.all(e);for(let i=0;i<s.length;++i)this.history[n[i]][r[i]].dispose(),this.history[n[i]][r[i]]=s[i][0]}}class JIe extends Cg{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||FA,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=XIe),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");wE(this.yieldEvery)&&(this.maybeWait=hIe(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const s=[];this.yield!=null&&(await Pc(r),s.push(this.yield(e,n,r))),s.push(this.nextFrameFunc()),await Promise.all(s)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await Pc(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await Pc(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await Pc(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await Pc(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):wE(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await Pc(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await Pc(e),await this.trainEnd(e))}}function fU(t,e){return t==null&&(t={}),t instanceof Cg?[t]:Array.isArray(t)&&t[0]instanceof Cg?t:Vt(t).map(r=>new JIe(r,e))}class Ji{constructor(){}static registerCallbackConstructor(e,n){D(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),Ji.checkForDuplicate(n),Ji.constructors[e]==null&&(Ji.constructors[e]=[]),Ji.constructors[e].push(n)}static checkForDuplicate(e){for(const n in Ji.constructors)Ji.constructors[+n].forEach(s=>{if(s===e)throw new Z("Duplicate callback constructor.")})}static clear(){Ji.constructors={}}static createCallbacks(e){const n=[];for(const r in Ji.constructors){const s=+r;e>=s&&n.push(...Ji.constructors[s])}return n.map(r=>new r)}}Ji.constructors={};function pU(t,e,n,r,s,i,o,a,l){const u=new ZIe,c=[new QIe,...Ji.createCallbacks(e)];t!=null&&c.push(...t),c.push(u);const d=new YIe(c);return d.setParams({epochs:n,initialEpoch:r,samples:s,steps:i,batchSize:o,verbose:e,doValidation:a,metrics:l}),{callbackList:d,history:u}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Fl(t,e={},n=!1){return Ry(t,Ii.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function UE(t,e){return J(()=>{t.dtype!=="float32"&&(t=Ce(t,"float32"));const n=Le(Oy(t),e,!0),r=nh(n.shape,ur()),s=Cr(al(n,r));return ze(t,s)})}function e2(t,e){return J(()=>Rn(Oy(Re(e,t)),-1))}function m5(t,e){return J(()=>Rn(er(Re(e,t)),-1))}function g5(t,e){return J(()=>{const n=Re(t,e),r=Hs(er(t),ur(),Number.MAX_VALUE),s=er(ze(n,r));return q(100,Rn(s,-1))})}function eNe(t,e){return J(()=>{const n=Hs(e,ur(),Number.MAX_VALUE),r=pi(he(1,n)),s=Hs(t,ur(),Number.MAX_VALUE),i=pi(he(1,s));return Rn(Oy(Re(r,i)),-1)})}function tNe(t,e){return J(()=>{const n=al(0,Re(1,q(t,e)));return Rn(Oy(n),-1)})}function nNe(t,e){return J(()=>{const n=al(0,Re(1,q(t,e)));return Rn(n,-1)})}function rNe(t,e){return J(()=>{const n=Le(q(t,e),-1),r=Bi(q(Re(1,t),e),-1);return al(0,he(1,Re(r,n)))})}function sNe(t,e){return J(()=>{const n=Math.log(2),r=Re(e,t),s=Re(he(r,rh(q(-2,r))),n);return Rn(s,-1)})}function Sg(t,e,n=!1){return J(()=>{if(n)e=_y(e);else{const r=Le(e,e.shape.length-1,!0);e=ze(e,r)}return e=Hs(e,ur(),1-ur()),an(Le(q(Ce(t,"float32"),pi(e)),e.shape.length-1))})}function WE(t,e,n=!1){return J(()=>{const r=Ce(i1(SIe(t)),"int32");e=Hs(e,ur(),1-ur());const s=e.shape,i=Q($f(r,s[s.length-1]),s);return Sg(i,e,n)})}function iNe(t,e){if(!Et(t.shape,e.shape))throw new Z(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return J(()=>{const n=ga(e),r=an(er(e));return he(Re(n,q(e,t)),yy(Us(r)))})}function t2(t,e){return J(()=>{let n;return n=Hs(e,ur(),1-ur()),n=pi(ze(n,Re(1,n))),Rn(iNe(t,n),-1)})}function oNe(t,e){return J(()=>{const n=Hs(t,ur(),1),r=Hs(e,ur(),1);return Le(q(t,pi(ze(n,r))),-1)})}function aNe(t,e){return J(()=>{const n=pi(he(ur(),e));return Rn(Re(e,q(t,n)),-1)})}function mU(t,e){return J(()=>{const n=UE(t,-1),r=UE(e,-1),s=q(n,r);return an(Le(s,-1))})}const VE={meanSquaredError:e2,meanAbsoluteError:m5,meanAbsolutePercentageError:g5,meanSquaredLogarithmicError:eNe,squaredHinge:tNe,hinge:nNe,categoricalHinge:rNe,logcosh:sNe,categoricalCrossentropy:Sg,sparseCategoricalCrossentropy:WE,binaryCrossentropy:t2,kullbackLeiblerDivergence:oNe,poisson:aNe,cosineProximity:mU};function lw(t){if(typeof t=="string"){if(t in VE)return VE[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new Z(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function gU(t,e){return J(()=>{const n=q(.5,mi(e)),r=Ka(qs(e,n),t.dtype);return Rn(So(t,r),-1)})}function yU(t,e){return J(()=>Ka(So(Dd(t,-1),Dd(e,-1)),"float32"))}function lNe(t,e){return J(()=>Ce(Le(aa(So(t,1),So(e,1))),"float32"))}function uNe(t,e){return J(()=>Ce(Le(aa(So(t,0),So(e,1))),"float32"))}function cNe(t,e){return J(()=>{const n=lNe(t,e),r=uNe(t,e),s=he(n,r);return Ce(Br(qs(s,0),ze(n,s),0),"float32")})}function dNe(t,e){return t2(t,e)}function hNe(t,e){return t.rank===e.rank&&(t=Tc(t,[t.rank-1])),e=Dd(e,-1),e.dtype!==t.dtype&&(e=Ce(e,t.dtype)),Ce(So(t,e),"float32")}const fNe=e2,pNe=e2,mNe=m5,gNe=m5,yNe=g5,vNe=g5,vU=Sg,bNe=mU,bU=WE,GE={binaryAccuracy:gU,categoricalAccuracy:yU,precision:cNe,categoricalCrossentropy:vU,sparseCategoricalCrossentropy:bU,mse:fNe,MSE:pNe,mae:mNe,MAE:gNe,mape:yNe,MAPE:vNe,cosine:bNe};function ENe(t){if(typeof t=="string"&&t in GE)return GE[t];if(typeof t!="string"&&t!=null)return t;throw new Z(`Unknown metric ${t}`)}function Kv(t){if(Na(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(VE))if(VE[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(GE))if(GE[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function TNe(t){const e={Adagrad:()=>Gc.adagrad(.01),Adadelta:()=>Gc.adadelta(1,.95,ur()),Adam:()=>Gc.adam(.001,.9,.999,ur()),Adamax:()=>Gc.adamax(.002,.9,.999,ur(),0),RMSProp:()=>Gc.rmsprop(.001,.9,0,ur()),SGD:()=>Gc.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new Z(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const zO=1*1024*1024;function HO(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!zk(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>zO&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${zO}.`)}}function zk(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!zk(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!zk(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function xNe(t,e,n,r=console.log){const s=SNe(t),i=["Layer (type)","Input Shape","Output shape","Param #"];s?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(c=>Math.floor(e*c)));let o;if(!s){i.push("Receives inputs"),o=[];for(const c in t.nodesByDepth)o.push(...t.nodesByDepth[c])}r("_".repeat(e)),jE(i,n,r),r("=".repeat(e));const a=t.layers;for(let c=0;c<a.length;++c)s?wNe(a[c],n,r):_Ne(a[c],n,o,r),r((c===a.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=CNe(t),u=BE(t.nonTrainableWeights);r(`Total params: ${l+u}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${u}`),r("_".repeat(e))}function CNe(t){let e;return t.collectedTrainableWeights!=null?e=BE(t.collectedTrainableWeights):e=BE(t.trainableWeights),e}function SNe(t){let e=!0;const n=[],r=[];for(const s in t.nodesByDepth)n.push(t.nodesByDepth[s]);for(const s of n){if(s.length>1||s.length===1&&s[0].inboundLayers.length>1){e=!1;break}r.push(...s)}if(e)for(const s of t.layers){let i=!1;for(const o of s.inboundNodes)if(r.indexOf(o)!==-1)if(i){e=!1;break}else i=!0;if(!e)break}return e}function jE(t,e,n=console.log){let r="";for(let s=0;s<t.length;++s)s>0&&(r=r.slice(0,r.length-1)+" "),r+=t[s],r=r.slice(0,e[s]),r+=" ".repeat(e[s]-r.length);n(r)}function wNe(t,e,n){let r,s;try{s=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{s="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const i=t.name,o=t.getClassName(),a=[`${i} (${o})`,s,r,t.countParams().toString()];jE(a,e,n)}function _Ne(t,e,n,r){let s,i;try{i=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{i="multiple"}try{s=JSON.stringify(t.outputShape)}catch{s="multiple"}const o=[];for(const d of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let h=0;h<d.inboundLayers.length;++h){const f=d.inboundLayers[h].name,p=d.nodeIndices[h],m=d.tensorIndices[h];o.push(`${f}[${p}][${m}]`)}const a=t.name,l=t.getClassName(),u=o.length===0?"":o[0],c=[`${a} (${l})`,i,s,t.countParams().toString(),u];jE(c,e,r);for(let d=1;d<o.length;++d)jE(["","","","",o[d]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function EU(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function Hk(t,e){if(t===null)return null;if(typeof t=="string")return Zc(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const i=t[s];EU(e,s,i)?n.push(i):n.push(Hk(i,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r];if(r==="name"&&typeof s=="string")n[r]=s;else{const i=Zc(r);n[i]=Hk(s,i)}}return n}}function Uk(t,e){if(t==null)return null;if(typeof t=="string")return wl(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const i=t[s];EU(e,s,i)?n.push(i):n.push(Uk(i,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r],i=wl(r);(r==="name"||r==="className")&&typeof s=="string"?n[i]=s:n[i]=Uk(s,r)}return n}}/** @license See the LICENSE file. */const TU="4.20.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const kNe=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};class Ho extends bt{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const v=this.getClassName().toLowerCase();this.name=QC(v)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],Gu(this.inputs).length!==this.inputs.length)throw new Z(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(v=>v.name)}`);Gu(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(v=>v.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const v of this.outputs){const E=v.sourceLayer,b=v.nodeIndex,T=v.tensorIndex;this.outputLayers.push(E),this.outputLayersNodeIndices.push(b),this.outputLayersTensorIndices.push(T)}for(const v of this.inputs){const E=v.sourceLayer,b=v.nodeIndex,T=v.tensorIndex;Na(b===0,"input layer has >1 nodes"),Na(T===0,"input layer has >1 tensors"),this.inputLayers.push(E),this.inputLayersNodeIndices.push(b),this.inputLayersTensorIndices.push(T)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let v=0;v<this.inputLayers.length;v++){const E=this.inputLayers[v];if(!(E instanceof Ly))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${v} (0-based) originates from layer type ${E.getClassName()}.`);this.inputNames.push(E.name),this.feedInputShapes.push(E.batchInputShape),this.feedInputNames.push(E.name)}for(const v of this.outputLayers)this.outputNames.push(v.name);this.internalInputShapes=this.inputs.map(v=>v.shape),this.internalOutputShapes=this.outputs.map(v=>v.shape);const n={},r={},s={},i={},o={},a=[],l=(v,E,b,T,x,C)=>{(T==null||x==null||C==null)&&(T=v.sourceLayer,x=v.nodeIndex,C=v.tensorIndex);const S=T.inboundNodes[x];if(b.indexOf(S)!==-1)throw new fo(`The tensor ${v.name} at layer "${T.name}" is part of a cycle.`);if(E.indexOf(S)!==-1)return;this.containerNodes.add(Ho.nodeKey(T,x)),T.id in o||(o[T.id]=Object.keys(o).length),b.indexOf(S)===-1&&b.push(S);const N=S.inboundLayers.length;for(let I=0;I<N;I++){const F=S.inputTensors[I],L=S.inboundLayers[I],z=S.nodeIndices[I],H=S.tensorIndices[I];l(F,E,b,L,z,H)}for(E.push(S);b.indexOf(S)>=0;)b.splice(b.indexOf(S),1);a.push(S)},u=[],c=[];for(const v of this.outputs)l(v,u,c);const d=a.slice().reverse();for(const v of d){r[v.id]=v,v.id in n||(n[v.id]=0);let E=n[v.id];const b=s[v.outboundLayer.id]==null?0:s[v.outboundLayer.id];E=Math.max(E,b),s[v.outboundLayer.id]=E,i[v.outboundLayer.id]=v.outboundLayer,n[v.id]=E;for(let T=0;T<v.inboundLayers.length;T++){const x=v.inboundLayers[T],C=v.nodeIndices[T],S=x.inboundNodes[C],N=n[S.id]==null?0:n[S.id];n[S.id]=Math.max(E+1,N),r[S.id]=S}}const h={};for(const v in n){const E=n[v];E in h||(h[E]=[]),h[E].push(r[v])}const f={};for(const v in s){const E=s[v];E in f||(f[E]=[]),f[E].push(i[v])}let p=Object.keys(f).map(v=>parseInt(v,10)).sort(Vv);this.layers=[];for(const v of p){const E=f[v];E.sort((b,T)=>{const x=o[b.id],C=o[T.id];return x<C?-1:x>C?1:0});for(const b of E)b instanceof Ho&&this.internalContainerRefs.push(b),this.layers.push(b)}this.layersByDepth=f,p=Object.keys(h).map(v=>parseInt(v,10)).sort(Vv);const m=this.inputs.slice(),y=[];for(const v of p)for(const E of h[v]){const b=E.outboundLayer;if(b!=null){for(const T of E.inputTensors)if(m.indexOf(T)===-1)throw new fo(`Graph disconnected: cannot obtain value for tensor ${T} at layer "${b.name}". The following previous layers were accessed without issue: ${y}`);for(const T of E.outputTensors)m.push(T);y.push(b.name)}}this.nodesByDepth=h;const g=this.layers.map(v=>v.name);for(const v of g){const E=g.filter(b=>b===v).length;if(E!==1)throw new fo(`The name "${v}" is used ${E} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new JC({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(v=>null),outputMasks:this.outputs.map(v=>null),inputShapes:this.inputs.map(v=>v.shape),outputShapes:this.outputs.map(v=>v.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new Z("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let s=0;const i=kNe(e);i&&this.parseWeights(e);for(const a of this.layers)for(const[l,u]of a.weights.entries()){const c=i?`${u.name.split("/").slice(0,-1).join("/")+"/"}${l}`:u.originalName;if(r[c]!=null)throw new Z(`Duplicate weight name: ${c}`);r[c]=u,s++}const o=[];for(const a in e){let l=a;if(r[a]==null){const u=a.split("/");l=u.slice(0,-2).concat([u[u.length-1]]).join("/")}if(r[l]!=null)o.push([r[l],e[a]]);else if(n)throw new Z(`Provided weight data has no target variable: ${a}`);delete r[l]}if(n){const a=[];for(const l in r)a.push(l);if(a.length>0)throw new Z(`${a.length} of ${s} weights are not set: ${a}`)}f5(o)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),s=["vars","layer_checkpoint_dependencies"],i=r.map(o=>o.startsWith("_")?o.slice(1):o).filter(o=>!s.includes(o)).join("/");i!==n&&(e[i]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${TU}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=Uk(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return J(()=>{e=Vt(e);const r=new Fu;for(let s=0;s<this.inputs.length;++s)r.add(this.inputs[s],e[s]);return im(this.outputs,r,n)})}computeMask(e,n){return J(()=>{e=Vt(e);let r;return n==null?r=Md(null,e.length):r=Vt(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=ME(e);if(n.length!==this.inputLayers.length)throw new Z(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let a=0;a<n.length;a++){const l=this.inputLayers[a],u=n[a],c=l.name+"_0_0";r[c]=u}const s=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(Vv);if(s.length>1)for(const a of s){const l=this.nodesByDepth[a];for(const u of l){const c=u.outboundLayer;if(this.inputLayers.map(m=>m.id).indexOf(c.id)!==-1)continue;const d=[];for(let m=0;m<u.inboundLayers.length;m++){const y=u.inboundLayers[m],g=u.nodeIndices[m],v=u.tensorIndices[m],E=`${y.name}_${g}_${v}`,b=r[E];d.push(b)}const h=c.computeOutputShape(Ns(d)),f=ME(h),p=c.inboundNodes.indexOf(u);for(let m=0;m<f.length;m++){const y=`${c.name}_${p}_${m}`;r[y]=f[m]}}}const i=[],o=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],u=this.outputLayersNodeIndices[a],c=this.outputLayersTensorIndices[a],d=`${l.name}_${u}_${c}`;o.push(d)}for(let a=0;a<o.length;a++){const l=o[a];Na(l in r),i.push(r[l])}return Ns(i)}runInternalGraph(e,n){n==null&&(n=Md(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const u=this.inputs[l],c=e[l],d=n[l];r[u.id]=[c,d]}const s=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(Vv);for(const l of s){const u=this.nodesByDepth[l];for(const c of u){const d=c.outboundLayer,h=c.inputTensors,f=c.outputTensors,p=new Array;for(const m of h)m.id in r&&p.push(r[m.id]);if(p.length===h.length){let m={},y,g,v,E;if(c.callArgs!=null&&(m=c.callArgs),p.length===1){const[b,T]=p[0];m.mask==null&&(m.mask=T),v=Vt(d.call(b,m)),E=Vt(d.computeMask(b,T)),y=[b],g=[T]}else y=p.map(b=>b[0]),g=p.map(b=>b[1]),m.mask==null&&(m.mask=g),v=Vt(d.call(y,m)),E=Vt(d.computeMask(y,g));if(d.activityRegularizer)throw new ut("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let b=0;b<f.length;++b){const T=f[b],x=v[b],C=E[b];r[T.id]=[x,C]}}}}const i=[],o=[],a=[];for(const l of this.outputs){Na(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[u,c]=r[l.id];a.push(u.shape),i.push(u),o.push(c)}return[i,o,a]}buildNodeConversionMap(e){const n={};let r;for(const s of this.layers){r=s instanceof Ho?1:0;for(let i=0;i<s.inboundNodes.length;i++){const o=Ho.nodeKey(s,i);this.containerNodes.has(o)&&(n[o]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new Z("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new Z(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new Z(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return J(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const s=Ho.nodeKey(n,r);this.containerNodes.has(s)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const o of this.layers){const a=o.getClassName(),l=o.getConfig(),u=[];for(let d=0;d<o.inboundNodes.length;d++){const h=o.inboundNodes[d],f=Ho.nodeKey(o,d);let p={};if(this.containerNodes.has(f)){if(h.callArgs)try{JSON.stringify(h.callArgs),p=h.callArgs}catch{console.warn(`Layer ${o.name} was passed non-serializable keyword arguments: ${h.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),p={}}if(h.inboundLayers.length>0){const m=[];for(let y=0;y<h.inboundLayers.length;y++){const g=h.inboundLayers[y],v=h.nodeIndices[y],E=h.tensorIndices[y],b=Ho.nodeKey(g,v);let T=n[b];T==null&&(T=0),m.push([g.name,T,E,p])}u.push(m)}}}const c={};c.name=o.name,c.className=a,c.config=l,c.inboundNodes=u,r.push(c)}e.layers=r;const s=[];for(let o=0;o<this.inputLayers.length;o++){const a=this.inputLayers[o],l=this.inputLayersNodeIndices[o],u=Ho.nodeKey(a,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const d=this.inputLayersTensorIndices[o];s.push([a.name,c,d])}e.inputLayers=s;const i=[];for(let o=0;o<this.outputLayers.length;o++){const a=this.outputLayers[o],l=this.outputLayersNodeIndices[o],u=Ho.nodeKey(a,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const d=this.outputLayersTensorIndices[o];i.push([a.name,c,d])}return e.outputLayers=i,e}static fromConfig(e,n,r={},s=!1){const i={},o={};function a(y,g){y.name in o?o[y.name].push(g):o[y.name]=[g]}function l(y,g){const v=[];let E;for(const b of g){const T=b[0],x=b[1],C=b[2];if(E=b[3]==null?{}:b[3],!(T in i)){a(y,g);return}const S=i[T];if(S.inboundNodes.length<=x){a(y,g);return}const N=S.inboundNodes[x];v.push(N.outputTensors[C])}v.length>0&&y.apply(Ns(v),E)}function u(y){const g=y.name,v=Fl(y,n.customObjects!=null?n.customObjects:{});v.setFastWeightInitDuringBuild(s),i[g]=v,y.inboundNodes.forEach(b=>{if(!(b instanceof Array))throw new Z(`Corrupted configuration, expected array for nodeData: ${b}`);a(v,b)})}const c=n.name,d=n.layers;for(const y of d)u(y);for(;!dIe(o);)for(const y of d){const g=i[y.name];if(g.name in o){const v=o[g.name];delete o[g.name];for(const E of v)l(g,E)}}const h=[],f=[],p=n.inputLayers;for(const y of p){const g=y[0],v=y[1],E=y[2];Na(g in i);const T=i[g].inboundNodes[v].outputTensors;h.push(T[E])}const m=n.outputLayers;for(const y of m){const g=y[0],v=y[1],E=y[2];Na(g in i);const T=i[g].inboundNodes[v].outputTensors;f.push(T[E])}return new e({inputs:h,outputs:f,name:c})}get stateful(){if(this._stateful)throw new Z("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){J(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function INe(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(s=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const s=[];return e.forEach(i=>{i in t?s.push(t[i]):s.push(null)}),s}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function xU(t,e){return INe(t,e,"classWeight")}async function CU(t,e,n,r){if(e!=null||r!=null)throw new Error("Support sampleWeight is not implemented yet");if(n!=null){const s=J(()=>{if(t.shape.length===1)return Ga(t);if(t.shape.length===2){if(t.shape[1]>1)return Dd(t,1);if(t.shape[1]===1)return Q(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),i=Array.from(await s.data());gt(s);const o=[];return i.forEach(a=>{if(n[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);o.push(n[a])}),Yr(o,"float32")}else return null}function NNe(t,e){return q(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const ANe=32;function SU(t,e){let n,r;const s=e;n=s.xs,r=s.ys,D(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const i=UO("input",t.inputNames,n),o=UO("output",t.outputNames,r),a=i[0].shape[0];D(i.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${i.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),D(o.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<i.length;l++)D(i[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${i[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<o.length;l++)D(o[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${o[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:i,ys:o}}function UO(t,e,n){if(n instanceof Ut)return[n];if(Array.isArray(n))return D(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const s of e){if(n[s]==null)throw new Z(`The feature data generated by the dataset lacks the required ${t} key '${s}'.`);r.push(n[s])}return r}}function DNe(t){if(t.length===3)throw new ut("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function RNe(t,e,n){const r=n.batchesPerEpoch!=null;if(D(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),D(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),D(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),D(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),D(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const s=n.validationData!=null;let i,o;if(s)if(WO(n.validationData))D(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const y=DNe(n.validationData);i=y.xs,o=y.ys}const a=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let u;s?u=l.slice().concat(l.map(y=>"val_"+y)):u=l.slice();const c=fU(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:h,history:f}=pU(c,d,n.epochs,null,null,FNe(e,n),null,s,u);h.setModel(t),t.history=f,await h.onTrainBegin(),t.stopTraining_=!1;let p=n.initialEpoch==null?0:n.initialEpoch,m=await e.iterator();for(;p<n.epochs;){const y={};await h.onEpochBegin(p);let g=0,v=0;for(r||(m=await e.iterator());!r||g<n.batchesPerEpoch;){const E=await m.next();if(r&&E.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${g} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(E.value!=null){const{xs:b,ys:T}=SU(t,E.value),x={};x.batch=v,x.size=b[0].shape[0],await h.onBatchBegin(v,x);const C=[];if(n.classWeight!=null){const I=xU(n.classWeight,t.outputNames);for(let F=0;F<I.length;++F)C.push(await CU(T[F],null,I[F]))}const S=b.concat(T).concat(C),N=a(S);gt(S);for(let I=0;I<l.length;++I){const F=l[I],L=N[I];x[F]=L,lr(L)}await h.onBatchEnd(v,x),hU(x),v++,g++}if(r?g>=n.batchesPerEpoch:E.done){if(s){let b;WO(n.validationData)?b=Vt(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):b=Vt(t.evaluate(i,o,{batchSize:n.validationBatchSize==null?ANe:n.validationBatchSize,verbose:0}));for(let T=0;T<t.metricsNames.length;++T)y[`val_${t.metricsNames[T]}`]=b[T]}break}if(t.stopTraining_)break}if(await h.onEpochEnd(p,y),p++,t.stopTraining_)break}return await h.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function FNe(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function WO(t){return typeof t.iterator=="function"}function ONe(t){return typeof t.next=="function"}async function $Ne(t,e,n){n=n||{};const r=n.batches!=null,s=t.testFunction;let i=[];if(n.verbose>0)throw new ut("Verbose mode is not implemented yet.");D(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const o=ONe(e)?e:await e.iterator();let a=0,l=0;for(;!r||l<n.batches;){const u=await o.next();if(i=J(()=>{if(u.value){const{xs:c,ys:d}=SU(t,u.value),h=c.concat(d),f=J(()=>s(h));if(gt(h),l===0)for(let m=0;m<f.length;++m)i.push(We(0));const p=h[0].shape[0];for(let m=0;m<f.length;++m){const y=f[m],g=i[m];i[m]=J(()=>he(i[m],q(p,y))),l>0&&gt(g)}gt(f),a+=p,++l}return i}),u.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<i.length;++u){const c=i[u];i[u]=ze(i[u],a),gt(c)}return Ns(i)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function uw(t){D(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function X1(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>gd(r,e,n-e)):gd(t,e,n-e)}function Wk(t,e){return J(()=>t==null?null:Array.isArray(t)?t.map(n=>Wk(n,e)):ZH(t,e.dtype==="int32"?e:Ce(e,"int32")))}function cw(t,e){const n=[];let r=0,s=null;for(;r<t;)s=r+e,s>=t&&(s=t),n.push([r,s]),r=s;return n}function wU(t){const e=[];t instanceof Ut&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push(Fy(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function Po(t,e){if(t==null)return;const n=[];if(e instanceof Ut)n.push(e.id);else if(Array.isArray(e))e.forEach(s=>n.push(s.id));else if(e!=null)for(const s in e){const i=e[s];n.push(i.id)}const r=[];if(t instanceof Ut)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(s=>{n.indexOf(s.id)===-1&&r.push(s)});else if(t!=null)for(const s in t){const i=t[s];n.indexOf(i.id)===-1&&r.push(i)}r.forEach(s=>{s.isDisposed||s.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function LNe(t){return t instanceof Ut}function Vk(t){return Array.isArray(t)}function VO(t){return!LNe(t)&&!Vk(t)}function GO(t,e,n,r=!0,s=""){if(e==null||e.length===0){if(t!=null){let o=!1;if(Vk(t)&&t.length>0)o=!0;else if(VO(t)){for(const a in t)if(t.hasOwnProperty(a)){o=!0;break}}else o=!0;if(o)throw new Z(`Error when checking model ${s} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(o=>null);let i;if(VO(t)){t=t,i=[];for(const o of e){if(t[o]==null)throw new Z(`No data provided for "${o}". Need data for each key in: ${e}`);i.push(t[o])}}else if(Vk(t)){if(t=t,t.length!==e.length)throw new Z(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);i=t}else{if(t=t,e.length>1)throw new Z(`The model ${s} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);i=[t]}if(i=wU(i),n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const a=i[o];if(a.shape.length!==n[o].length)throw new Z(`Error when checking ${s}: expected ${e[o]} to have ${n[o].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const u=a.shape[l],c=n[o][l];if(c!=null&&c>=0&&u!==c)throw new Z(`${s} expected a batch of elements where each example has shape [${n[o].slice(1,n[o].length)}] (i.e.,tensor shape [*,${n[o].slice(1,n[o].length)}]) but the ${s} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return i}function PNe(t,e,n){const r=Gu(t.map(i=>i.shape[0]));r.sort();const s=Gu(e.map(i=>i.shape[0]));if(s.sort(),r.length>1)throw new Z(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(i=>i.shape))}`);if(s.length>1)throw new Z(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(i=>i.shape))}`);if(r.length>0&&s.length>0&&!Et(r,s))throw new Z(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${s[0]} target sample(s).`)}function MNe(t,e,n){const r=[e2,t2,Sg];for(let s=0;s<t.length;++s){const i=t[s],o=e[s],a=n[s];if(o!=null){if(o===Sg&&i.shape[i.shape.length-1]===1)throw new Z(`You are passing a target array of shape ${i.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(o)!==-1){const l=i.shape.slice(1),u=a.slice(1);for(let c=0;c<l.length;++c){const d=l[c],h=u[c];if(h!=null&&d!==h)throw new Z(`A target Tensor with shape ${i.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function jO(t,e,n,r=!0,s=""){let i;if(Array.isArray(t)){if(t.length!==e.length)throw new Z(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);i=t}else{if(e.length>1)throw new Z(`The model expects ${e.length} ${s} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);i=[t]}if(n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const a=i[o];if(a.shape.length!==n[o].length)throw new Z(`Error when checking ${s}: expected ${e[o]} to have ${n[o].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const u=a.shape[l],c=n[o][l];if(c!=null&&c!==u)throw new Z(`Error when checking ${s}: expected ${e[o]} to have shape ${JSON.stringify(n[o])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function BNe(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const s of e){let i=n.hasOwnProperty(s)?n[s]:[];Array.isArray(i)||(i=[i]),r.push(i)}return r}}const zNe="layers-model";class ff extends Ho{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new Z("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");xNe(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=TNe(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof ou))throw new Z("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const o in e.loss)if(this.outputNames.indexOf(o)===-1)throw new Z(`Unknown entry in loss dictionary: "${o}". Only expected the following keys: ${this.outputNames}`);for(const o of this.outputNames)e.loss[o]==null&&console.warn(`Output "${o}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${o} during training`),n.push(lw(e.loss[o]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new Z(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(a=>lw(a))}else{const o=lw(e.loss);this.outputs.forEach(a=>{n.push(o)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let o=0;o<this.outputs.length;++o){const a=this.internalOutputShapes[o],l=this.outputNames[o];this.feedOutputNames.push(l),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[o])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],md("loss",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const a=this.lossFunctions[o];this.outputs.length>1&&(this.metricsTensors.push([a,o]),this.metricsNames.push(this.outputNames[o]+"_loss"))}});const s=BNe(e.metrics,this.outputNames),i=(o,a,l)=>{this.outputNames.length>1&&(a=this.outputNames[o]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([l,o])};md("metric",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const a=s[o];(u=>{const c="";let d,h,f;for(const p of u){if(typeof p=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(p)!==-1){const y=this.internalOutputShapes[o];y[y.length-1]===1||this.lossFunctions[o]===t2?["accuracy","acc"].indexOf(p)!==-1?h=gU:["crossentropy","ce"].indexOf(p)!==-1&&(h=dNe):this.lossFunctions[o]===WE?["accuracy","acc"].indexOf(p)!==-1?h=hNe:["crossentropy","ce"].indexOf(p)!==-1&&(h=bU):["accuracy","acc"].indexOf(p)!==-1?h=yU:["crossentropy","ce"].indexOf(p)!==-1&&(h=vU);let g;["accuracy","acc"].indexOf(p)!==-1?g="acc":["crossentropy","ce"].indexOf(p)!==-1&&(g="ce"),f=h,d=c+g}else f=ENe(p),d=c+Kv(p);let m;md(d,()=>{m=f}),i(o,d,m)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const s=r.batchSize==null?32:r.batchSize;uw(s);const i=!0,o=this.standardizeUserDataXY(e,n,i,s);try{const a=o[0].concat(o[1]);this.makeTestFunction();const l=this.testFunction,u=this.testLoop(l,a,s,r.verbose,r.steps);return Ns(u)}finally{Po(o[0],e),Po(o[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),$Ne(this,e,n)}checkNumSamples(e,n,r,s="steps"){let i;if(r!=null){if(i=null,n!=null)throw new Z(`If ${s} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?i=e[0].shape[0]:i=e.shape[0];else throw new Z(`Either the input data should have a defined shape, or ${s} shoud be specified.`);return i}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new Z("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),s=r?n:[n],i=this.retrieveSymbolicTensors(s),o=new Fu;if(e instanceof Ut&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new Z(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)o.add(this.inputs[l],e[l])}else for(const l of this.inputs){const u=e[l.name];if(u==null)throw new Z(`No value is provided for the model's input ${l.name}`);o.add(l,u)}const a=im(i,o);return r?a:a[0]}retrieveSymbolicTensors(e){const n=Md(null,e.length);let r=e.length;for(const s of this.layers){const i=Array.isArray(s.output)?s.output:[s.output],o=i.map(a=>a.name);for(let a=0;a<e.length;++a){const l=o.indexOf(e[a]);if(l!==-1&&(n[a]=i[l],r--),r===0)break}if(r===0)break}if(r>0){const s=[];throw n.forEach((i,o)=>{i==null&&s.push(e[o])}),new Z(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(s)}`)}return n}predictLoop(e,n=32,r=!1){return J(()=>{const s=this.checkNumSamples(e);if(r)throw new ut("Verbose predictLoop() is not implemented yet.");const i=cw(s,n),o=this.outputs.map(a=>[]);for(let a=0;a<i.length;++a)J(()=>{const u=i[a][0],c=i[a][1],d=X1(e,u,c),h=[];if(Array.isArray(d))for(let p=0;p<d.length;++p)h.push({key:this.inputs[p],value:d[p]});else h.push({key:this.inputs[0],value:d});const f=new Fu(h);return im(this.outputs,f)}).forEach((u,c)=>o[c].push(u));return Ns(o.map(a=>jn(a,0)))})}predict(e,n={}){const r=wU(e);jO(r,this.inputNames,this.feedInputShapes,!1);try{const s=n.batchSize==null?32:n.batchSize;return uw(s),this.predictLoop(r,s)}finally{Po(r,e)}}predictOnBatch(e){jO(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,s){if(this.optimizer_==null)throw new fo("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const i=[];for(let o=0;o<this.feedOutputShapes.length;++o){const a=this.feedOutputShapes[o];this.feedLossFns[o]===WE?i.push(a.slice(0,a.length-1).concat([1])):i.push(a)}if(e=GO(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=GO(n,this.feedOutputNames,i,!1,"target"),PNe(e,n),MNe(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&s!=null&&s>0&&e[0].shape[0]%s!==0)throw new Z(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${s}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,s,i=!0,o){const[a,l]=this.standardizeUserDataXY(e,n,i,o);if(r!=null)throw new Error("sample weight is not supported yet.");let u=null;if(s!=null){const c=xU(s,this.outputNames);u=[];for(let d=0;d<c.length;++d)u.push(await CU(l[d],null,c[d]))}return[a,l,u]}testLoop(e,n,r,s=0,i){return J(()=>{const o=this.checkNumSamples(n,r,i,"steps"),a=[];if(s>0)throw new ut("Verbose mode is not implemented yet.");if(i!=null)throw new ut("steps mode in testLoop() is not implemented yet");{const l=cw(o,r),u=Yr(la(0,o));for(let c=0;c<l.length;++c){const d=l[c][0],h=l[c][1],f=gd(u,d,h-d),p=Wk(n,f),m=e(p);if(c===0)for(let y=0;y<m.length;++y)a.push(We(0));for(let y=0;y<m.length;++y){const g=m[y];a[y]=he(a[y],q(h-d,g))}}for(let c=0;c<a.length;++c)a[c]=ze(a[c],o)}return a})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const s=e[r];let i=s;if(AO(e,s)>1){const o=AO(e.slice(0,r),s);i+=`_${o}`}n.push(i)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),o=[],a=()=>{const d=[];for(let m=0;m<this.inputs.length;++m)d.push({key:this.inputs[m],value:r[m]});const h=new Fu(d),f=im(this.outputs,h,{training:!0});let p;for(let m=0;m<this.lossFunctions.length;++m){const y=this.lossFunctions[m];let g=y(s[m],f[m]);i[m]!=null&&(g=NNe(g,i[m]));const v=Rn(g);n.push(v),m===0?p=g:p=he(p,g)}for(let m=0;m<this.metricsTensors.length;++m){let y;if(this.outputs.length>1&&m<this.outputs.length)y=n[m];else{const g=this.metricsTensors[m][0],v=this.metricsTensors[m][1];y=Rn(g(s[v],f[v]))}lr(y),o.push(y)}return p=Rn(p),this.calculateLosses().forEach(m=>{p=he(p,m)}),p},l=this.collectedTrainableWeights.map(d=>d.read()),u=!0;return[this.optimizer_.minimize(a,u,l)].concat(o)}}makeTestFunction(){this.testFunction=e=>J(()=>{const n=[];let r;const s=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let u=0;u<this.inputs.length;++u)o.push({key:this.inputs[u],value:s[u]});const a=new Fu(o),l=im(this.outputs,a);for(let u=0;u<this.lossFunctions.length;++u){const c=this.lossFunctions[u],d=Rn(c(i[u],l[u]));u===0?r=d:r=he(r,d),n.push(r)}for(let u=0;u<this.metricsTensors.length;++u){const c=this.metricsTensors[u][0],d=this.metricsTensors[u][1],h=Rn(c(i[d],l[d]));n.push(h)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let s,i,o,a,l,u,c,d,h;try{const f=r.batchSize==null?32:r.batchSize;uw(f);const p=!1,m=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,p,f);s=m[0],i=m[1],h=m[2];let y=!1,g;if(r.validationData!=null&&r.validationData.length>0){if(y=!0,r.validationData.length===2)l=r.validationData[0],u=r.validationData[1];else throw r.validationData.length===3?new ut("validationData including sample weights is not supported yet."):new Z(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const N=!0,I=await this.standardizeUserData(l,u,null,null,N,f);c=I[0],d=I[1],g=c.concat(d)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){y=!0;const N=Math.floor(s[0].shape[0]*(1-r.validationSplit)),I=s[0].shape[0];c=X1(s,N,I),o=s,s=X1(s,0,N),d=X1(i,N,I),a=i,i=X1(i,0,N),g=c.concat(d)}else r.validationSteps!=null&&(y=!0);const v=s.concat(i).concat(h);this.checkTrainableWeightsConsistency();const E=this.makeTrainFunction(),b=this.getDedupedMetricsNames();let T,x;y?(this.makeTestFunction(),T=this.testFunction,x=b.slice().concat(b.map(N=>"val_"+N))):(T=null,g=[],x=b.slice());const C=fU(r.callbacks,r.yieldEvery);return await this.fitLoop(E,v,b,f,r.epochs,r.verbose,C,T,g,r.shuffle,x,r.initialEpoch,null,null)}finally{this.isTraining=!1,Po(s,e),Po(i,n),Po(o,e),Po(a,n),Po(c,l),Po(d,u),h!=null&&gt(h)}}async fitLoop(e,n,r,s,i,o,a,l,u,c,d,h,f,p){s==null&&(s=32),i==null&&(i=1),c==null&&(c=!0),h==null&&(h=0);let m=!1;if(l!=null&&u!=null&&(m=!0),p!=null&&(m=!0,f==null))throw new Z("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const y=this.checkNumSamples(n,s,f,"steps_per_epoch");let g;y!=null&&(g=la(0,y)),o==null&&(o=1);const{callbackList:v,history:E}=pU(a,o,i,h,y,f,s,m,d);v.setModel(this),this.history=E,await v.onTrainBegin(),this.stopTraining_=!1;for(let b=h;b<i;++b){await v.onEpochBegin(b);const T={};if(f!=null)throw new ut("stepsPerEpoch mode is not implemented yet.");{if(c==="batch")throw new ut("batch shuffling is not implemneted yet");c&&QN(g);const x=Yr(g),C=cw(y,s);for(let S=0;S<C.length;++S){const N={};if(await v.onBatchBegin(S,N),J(()=>{const I=C[S][0],F=C[S][1],L=gd(x,I,F-I);N.batch=S,N.size=F-I;const z=Wk(n,L),H=e(z);for(let $=0;$<r.length;++$){const M=r[$],j=H[$];N[M]=j,lr(j)}if(S===C.length-1&&m){const $=this.testLoop(l,u,s);for(let M=0;M<r.length;++M){const j=r[M],P=$[M];lr(P),T["val_"+j]=P}}}),await v.onBatchEnd(S,N),hU(N),this.stopTraining_)break}x.dispose()}if(await v.onEpochEnd(b,T),this.stopTraining_)break}return await v.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return RNe(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),s=r[0],i=r[1],a=this.makeTrainFunction()(s.concat(i)),l=[];for(const u of a){const c=await u.data();l.push(c[0])}return gt(a),Po(r[0],e),Po(r[1],n),Ns(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,s=r?this.trainableWeights:this.weights,i=this.getWeights(r);for(let o=0;o<s.length;++o)r&&!s[o].trainable||n.push({name:s[o].originalName,tensor:i[o]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=RE().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-RE().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=wl(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>wl(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const s of n)if(typeof r[s]=="string")e[s]=wl(r[s]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[wl(Kv(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>wl(Kv(e)));{const e={};for(const n in this.metrics)e[n]=wl(Kv(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=Hk(e.optimizer_config),r=Fl(n);let s;if(typeof e.loss=="string")s=Zc(e.loss);else if(Array.isArray(e.loss))s=e.loss.map(o=>Zc(o));else if(e.loss!=null){s={};for(const o in e.loss)s[o]=Zc(e.loss[o])}let i;if(Array.isArray(e.metrics))i=e.metrics.map(o=>Zc(o));else if(e.metrics!=null){i={};for(const o in e.metrics)i[o]=Zc(e.metrics[o])}this.compile({loss:s,metrics:i,optimizer:r})}async save(e,n){if(typeof e=="string"){const u=BB(e);if(u.length===0)throw new Z(`Cannot find any save handlers for URL '${e}'`);if(u.length>1)throw new Z(`Found more than one (${u.length}) save handlers for URL '${e}'`);e=u[0]}if(e.save==null)throw new Z("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await ok(this.getNamedWeights(n)),s=!1,i=null,a={modelTopology:this.toJSON(i,s),format:zNe,generatedBy:`TensorFlow.js tfjs-layers v${TU}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const u="optimizer",{data:c,specs:d}=await ok(await this.optimizer.getWeights(),u);r.specs.push(...d),r.data=PB([r.data,c])}return this.userDefinedMetadata!=null&&(HO(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=r.data,a.weightSpecs=r.specs,e.save(a)}setUserDefinedMetadata(e){HO(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}ff.className="Model";pe(ff);class _U extends ff{}_U.className="Functional";pe(_U);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class wg extends ff{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:QC("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new Z(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof wg||e instanceof ff;let r;if(n){if(r=e,r.outputs.length!==1)throw new Z("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new Z("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new Z("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const s=UIe({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(s)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new Z(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new Z("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=aU(this.outputs[0])}this.inboundNodes=[],new JC({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:Md(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(s=>s.shape),outputShapes:this.outputs[0].shape})}else{const s=e.apply(this.outputs[0]);if(Array.isArray(s))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[s],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(Lt(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new ff({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new fo("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new fo("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new fo("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new fo("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},s=!1){let i,o={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new Z("Legacy serialization format not supported yet.");i=n}else D(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),i=n.layers,delete n.layers,o=n;const a=new e(o);if(!(a instanceof wg))throw new ut(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const l of i){const c=Fl(l,void 0,s);s&&c.setFastWeightInitDuringBuild(!0),a.add(c)}return a}set stopTraining(e){if(this.model==null)throw new Z("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new Z("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}wg.className="Sequential";pe(wg);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let ts=class extends oh{getConfig(){return{}}};class kU extends ts{apply(e,n=1){return _Ie(e,n)}}kU.className="elu";pe(kU);class IU extends ts{apply(e){return _C(e)}}IU.className="selu";pe(IU);class NU extends ts{apply(e){return ga(e)}}NU.className="relu";pe(NU);class AU extends ts{apply(e){return J(()=>tc(6,ga(e)))}}AU.className="relu6";pe(AU);class DU extends ts{apply(e){return e}}DU.className="linear";pe(DU);class RU extends ts{apply(e){return na(e)}}RU.className="sigmoid";pe(RU);class FU extends ts{apply(e){return IIe(e)}}FU.className="hardSigmoid";pe(FU);class OU extends ts{apply(e){return rh(e)}}OU.className="softplus";pe(OU);class $U extends ts{apply(e){return kIe(e)}}$U.className="softsign";pe($U);class LU extends ts{apply(e){return ec(e)}}LU.className="tanh";pe(LU);let y5=class extends ts{apply(e,n=-1){return _y(e,n)}};y5.className="softmax";pe(y5);class PU extends ts{apply(e,n=-1){return vC(e,n)}}PU.className="logSoftmax";pe(PU);class MU extends ts{apply(e){return J(()=>J(()=>{const n=Math.sqrt(2),r=q(.5,he(1,mC(ze(e,n))));return q(e,r)}))}}MU.className="gelu";pe(MU);class BU extends ts{apply(e){return J(()=>q(.5,q(e,he(1,ec(q(Cr(ze(2,Math.PI)),he(e,q(.044715,Ja(e,3)))))))))}}BU.className="gelu_new";pe(BU);class zU extends ts{apply(e){return J(()=>q(e,ec(rh(e))))}}zU.className="mish";pe(zU);class HU extends ts{apply(e,n=1){return J(()=>q(na(q(e,n)),e))}}HU.className="swish";pe(HU);function rc(t){return t.getClassName()}function dw(t,e={}){return Ry(t,Ii.getMap().classNameMap,e,"activation")}function sc(t){if(t==null){const e={};return e.className="linear",e.config={},dw(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},dw(e)}else return t instanceof ts?t:dw(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function HNe(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class UU extends oh{}class WU extends UU{constructor(e){super(),HNe(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return J(()=>{let n=nr([1]);return this.hasL1&&(n=he(n,Le(q(this.l1,er(e))))),this.hasL2&&(n=he(n,Le(q(this.l2,Oy(e))))),Q(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}WU.className="L1L2";pe(WU);const KO={l1l2:"L1L2"};function nn(t){return r5(t)}function qO(t,e={}){return Ry(t,Ii.getMap().classNameMap,e,"regularizer")}function In(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in KO?KO[t]:t,config:{}};return qO(n)}else return t instanceof UU?t:qO(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class VU extends bt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=Je(e);let r=ga(e);return this.maxValue!=null&&(r=Hs(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}VU.className="ReLU";pe(VU);class GU extends bt{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Je(e);return gy(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}GU.className="LeakyReLU";pe(GU);class jU extends bt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=_n(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=In(e.alphaRegularizer),this.alphaConstraint=hr(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new Z(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=Lt(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const s of this.sharedAxes)n[s-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let s=1;s<e.length;++s)r[s]=e[s];this.inputSpec=[new cr({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=Je(e),Cy(e,this.alpha.read())}getConfig(){const e={alphaInitializer:Fn(this.alphaInitializer),alphaRegularizer:nn(this.alphaRegularizer),alphaConstraint:dr(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}jU.className="PReLU";pe(jU);let KU=class extends bt{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new ut(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=Je(e);return r1(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};KU.className="ELU";pe(KU);class qU extends bt{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=Je(e);return q(r,Ce(qs(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}qU.className="ThresholdedReLU";pe(qU);class XU extends bt{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new y5().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return J(()=>{let r=Je(e);const s=n.mask;if(s!=null){const i=q(Re(Os(r.shape),Ce(s,r.dtype)),We(-1e9));r=he(r,i)}return this.axis instanceof Array?this.axis.length>1?Us(Re(r,vy(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}XU.className="Softmax";pe(XU);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pf(t,e,n){if(typeof t=="number")return Md(t,e);if(t.length!==e)throw new Z(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const s=t[r];if(!xIe(s))throw new Z(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${s}`)}return t}function ra(t,e,n,r,s=1){if(t==null)return t;const i=e+(e-1)*(s-1);let o;return n==="same"?o=t:o=t-i+1,Math.floor((o+r-1)/r)}function Aa(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+nc([n-e,0]);else if(r==="same")t=t*e;else throw new Z(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function v5(t,e){return J(()=>(Yn(e),e==="channelsFirst"?wt(t,[0,2,3,1]):t))}function YU(t,e){return J(()=>(Yn(e),e==="channelsFirst"?wt(t,[0,2,3,4,1]):t))}function UNe(t,e,n,r=1,s="valid",i,o=1){return J(()=>{if(i==null&&(i=ua()),Yn(i),t.shape.length!==3)throw new Z(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new Z(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new Z(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(i==="channelsFirst"&&(t=wt(t,[0,2,1])),s==="causal")throw new ut("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=dC(t,e,r,s==="same"?"same":"valid","NWC",o);return n!=null&&(a=ya(a,n)),a})}function XO(t,e,n,r=[1,1],s="valid",i,o,a=null){return J(()=>{if(i==null&&(i=ua()),Yn(i),t.rank!==3&&t.rank!==4)throw new Z(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new Z(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=v5(t,i);if(s==="causal")throw new ut("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=Bz({x:l,filter:e,strides:r,pad:s==="same"?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:a}),i==="channelsFirst"&&(l=wt(l,[0,3,1,2])),l})}function WNe(t,e,n,r=[1,1,1],s="valid",i,o){return J(()=>{if(i==null&&(i=ua()),Yn(i),t.rank!==4&&t.rank!==5)throw new Z(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new Z(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=YU(t,i);if(s==="causal")throw new ut("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=$9(a,e,r,s==="same"?"same":"valid","NDHWC",o),n!=null&&(a=ya(a,n)),i==="channelsFirst"&&(a=wt(a,[0,4,1,2,3])),a})}class n2 extends bt{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",n2.verifyArgs(n),this.rank=e,Er(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new ut(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=pf(n.kernelSize,e,"kernelSize"),this.strides=pf(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,ji(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,Yn(this.dataFormat),this.activation=sc(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=_n(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=hr(n.biasConstraint),this.biasRegularizer=In(n.biasRegularizer),this.activityRegularizer=In(n.activityRegularizer),this.dilationRate=pf(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new Z(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new Z(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new Z(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(Na("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!s5(e.kernelSize,"number",1,3))throw new Z(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:rc(this.activation),useBias:this.useBias,biasInitializer:Fn(this.biasInitializer),biasRegularizer:nn(this.biasRegularizer),activityRegularizer:nn(this.activityRegularizer),biasConstraint:dr(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class l1 extends n2{constructor(e,n){super(e,n),this.kernel=null,l1.verifyArgs(n),this.filters=n.filters,Er(this.filters,"filters"),this.kernelInitializer=_n(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=hr(n.kernelConstraint),this.kernelRegularizer=In(n.kernelRegularizer)}build(e){e=Lt(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new Z(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],s=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return J(()=>{e=Je(e);let r;const s=this.bias==null?null:this.bias.read(),i=jH(this.activation.getClassName());if(i!=null&&this.rank===2)r=XO(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate,i);else{if(this.rank===1)r=UNe(e,this.kernel.read(),s,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=XO(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=WNe(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new ut("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=Lt(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let i=0;i<r.length;++i){const o=ra(r[i],this.kernelSize[i],this.padding,this.strides[i],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[i]);n.push(o)}let s=[e[0]];return this.dataFormat==="channelsLast"?(s=s.concat(n),s.push(this.filters)):(s.push(this.filters),s=s.concat(n)),s}getConfig(){const e={filters:this.filters,kernelInitializer:Fn(this.kernelInitializer),kernelRegularizer:nn(this.kernelRegularizer),kernelConstraint:dr(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new Z(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class My extends l1{constructor(e){super(2,e),My.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!s5(e.kernelSize,"number",1,2))throw new Z(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}My.className="Conv2D";pe(My);class By extends l1{constructor(e){super(3,e),By.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new Z(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}By.className="Conv3D";pe(By);class QU extends My{constructor(e){if(super(e),this.inputSpec=[new cr({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new Z(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Lt(e),e.length!==4)throw new Z("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new Z("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new cr({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return J(()=>{let r=Je(e);if(r.shape.length!==4)throw new Z(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,i=s[0];let o,a;this.dataFormat==="channelsFirst"?(o=2,a=3):(o=1,a=2);const l=s[o],u=s[a],c=this.kernelSize[0],d=this.kernelSize[1],h=this.strides[0],f=this.strides[1],p=Aa(l,h,c,this.padding),m=Aa(u,f,d,this.padding),y=[i,p,m,this.filters];this.dataFormat!=="channelsLast"&&(r=wt(r,[0,2,3,1]));let g=hC(r,this.kernel.read(),y,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(g=wt(g,[0,3,1,2])),this.bias!=null&&(g=ya(g,this.bias.read(),this.dataFormat)),this.activation!=null&&(g=this.activation.apply(g)),g})}computeOutputShape(e){e=Lt(e);const n=e.slice();let r,s,i;this.dataFormat==="channelsFirst"?(r=1,s=2,i=3):(r=3,s=1,i=2);const o=this.kernelSize[0],a=this.kernelSize[1],l=this.strides[0],u=this.strides[1];return n[r]=this.filters,n[s]=Aa(n[s],l,o,this.padding),n[i]=Aa(n[i],u,a,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}QU.className="Conv2DTranspose";pe(QU);class ZU extends By{constructor(e){if(super(e),this.inputSpec=[new cr({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new Z(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=Lt(e),e.length!==5)throw new Z("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new Z("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new cr({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return J(()=>{let r=Je(e);if(r.shape.length!==5)throw new Z(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,i=s[0];let o,a,l;this.dataFormat==="channelsFirst"?(l=2,o=3,a=4):(l=1,o=2,a=3);const u=s[l],c=s[o],d=s[a],h=this.kernelSize[0],f=this.kernelSize[1],p=this.kernelSize[2],m=this.strides[0],y=this.strides[1],g=this.strides[2],v=Aa(u,m,h,this.padding),E=Aa(c,y,f,this.padding),b=Aa(d,g,p,this.padding),T=[i,v,E,b,this.filters];this.dataFormat!=="channelsLast"&&(r=wt(r,[0,2,3,4,1]));let x=L9(r,this.kernel.read(),T,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(x=wt(x,[0,4,1,2,3])),this.bias!==null&&(x=ya(x,this.bias.read(),this.dataFormat)),this.activation!==null&&(x=this.activation.apply(x)),x})}computeOutputShape(e){e=Lt(e);const n=e.slice();let r,s,i,o;this.dataFormat==="channelsFirst"?(r=1,s=2,i=3,o=4):(r=4,s=1,i=2,o=3);const a=this.kernelSize[0],l=this.kernelSize[1],u=this.kernelSize[2],c=this.strides[0],d=this.strides[1],h=this.strides[2];return n[r]=this.filters,n[s]=Aa(n[s],c,a,this.padding),n[i]=Aa(n[i],d,l,this.padding),n[o]=Aa(n[o],h,u,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}ZU.className="Conv3DTranspose";pe(ZU);class JU extends l1{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new Z("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new Z("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new Z(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=_n(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=In(n.depthwiseRegularizer),this.depthwiseConstraint=hr(n.depthwiseConstraint),this.pointwiseInitializer=_n(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=In(n.pointwiseRegularizer),this.pointwiseConstraint=hr(n.pointwiseConstraint)}build(e){if(e=Lt(e),e.length<this.rank+2)throw new Z(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new Z(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],s=this.kernelSize.concat([r,this.depthMultiplier]),i=[];for(let a=0;a<this.rank;++a)i.push(1);i.push(r*this.depthMultiplier,this.filters);const o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",s,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new cr({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return J(()=>{e=Je(e);let r;if(this.rank===1)throw new ut("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=wt(e,[0,2,3,1])),r=kC(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=ya(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=wt(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Fn(this.depthwiseInitializer),e.pointwiseInitializer=Fn(this.pointwiseInitializer),e.depthwiseRegularizer=nn(this.depthwiseRegularizer),e.pointwiseRegularizer=nn(this.pointwiseRegularizer),e.depthwiseConstraint=dr(this.depthwiseConstraint),e.pointwiseConstraint=dr(this.pointwiseConstraint),e}}JU.className="SeparableConv";class eW extends JU{constructor(e){super(2,e)}}eW.className="SeparableConv2D";pe(eW);class r2 extends l1{constructor(e){super(1,e),r2.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!s5(e.kernelSize,"number",1,1))throw new Z(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}r2.className="Conv1D";pe(r2);class tW extends bt{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return J(()=>{if(e=Je(e),this.dataFormat==="channelsLast"){const r=jv(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return jv(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=jv(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return jv(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}tW.className="Cropping2D";pe(tW);class nW extends bt{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Yn(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,bIe(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return J(()=>{let r=Je(e);const s=r.shape;if(this.dataFormat==="channelsFirst"){r=wt(r,[0,2,3,1]);const i=this.size[0]*s[2],o=this.size[1]*s[3],a=this.interpolation==="nearest"?Qo.resizeNearestNeighbor(r,[i,o]):Qo.resizeBilinear(r,[i,o]);return wt(a,[0,3,1,2])}else{const i=this.size[0]*s[1],o=this.size[1]*s[2];return this.interpolation==="nearest"?Qo.resizeNearestNeighbor(r,[i,o]):Qo.resizeBilinear(r,[i,o])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}nW.className="UpSampling2D";pe(nW);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function VNe(t,e,n=[1,1],r="valid",s,i){return J(()=>{s==null&&(s=ua()),Yn(s);let o=v5(t,s);if(t.rank!==4)throw new Z(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new Z(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return o=n1(o,e,n,r==="same"?"same":"valid","NHWC",i),s==="channelsFirst"&&(o=wt(o,[0,3,1,2])),o})}class rW extends n2{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=_n(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=hr(e.depthwiseConstraint),this.depthwiseRegularizer=In(e.depthwiseRegularizer)}build(e){if(e=Lt(e),e.length<4)throw new Z(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new Z(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],s=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",s,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return J(()=>{e=Je(e);let r=VNe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=ya(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=Lt(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,i=ra(n,this.kernelSize[0],this.padding,this.strides[0]),o=ra(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],s,i,o]:[e[0],i,o,s]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Fn(this.depthwiseInitializer),e.depthwiseRegularizer=nn(this.depthwiseRegularizer),e.depthwiseConstraint=dr(this.depthwiseRegularizer),e}}rW.className="DepthwiseConv2D";pe(rW);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function sW(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new Z("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function s(i){return i==null||Array.isArray(i)?i:[i]}return e=s(e),n=s(n),{inputs:t,initialState:e,constants:n}}function iW(t,e,n,r=!1,s,i,o=!1,a=!1){return J(()=>{const l=e.shape.length;if(l<3)throw new Z(`Input should be at least 3D, but is ${l}D.`);const u=[1,0].concat(la(2,l));if(e=wt(e,u),i!=null)throw new ut("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),s!=null&&(s=Ce(Ce(s,"bool"),"float32"),s.rank===l-1&&(s=Xr(s,-1)),s=wt(s,u)),r&&(e=Hi(e,0),s!=null&&(s=Hi(s,0)));const c=[];let d,h=n;const f=e.shape[0],p=Ui(e);let m;s!=null&&(m=Ui(s));for(let g=0;g<f;++g){const v=p[g],E=J(()=>t(v,h));if(s==null)d=E[0],h=E[1];else{const b=J(()=>{const T=m[g],x=Re(mi(T),T),C=he(q(E[0],T),q(h[0],x)),S=h.map((N,I)=>he(q(E[1][I],T),q(N,x)));return{output:C,newStates:S}});d=b.output,h=b.newStates}a&&c.push(d)}let y;return a&&(y=Ws(c,1)),[d,y,h]})}class Cc extends bt{constructor(e){super(e);let n;if(e.cell==null)throw new Z("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new T5({cells:e.cell}):n=e.cell,n.stateSize==null)throw new Z("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new cr({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return la(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){Mk(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let s;if(this.returnSequences?s=[e[0],e[1],r]:s=[e[0],r],this.returnState){const i=[];for(const o of n)i.push([e[0],o]);return[s].concat(i)}else return s}computeMask(e,n){return J(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const s=this.states.map(i=>null);return[r].concat(s)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new ut("Constants support is not implemented in RNN yet.");Mk(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new cr({shape:[n,null,...r]});const s=[e[0]].concat(e.slice(2));this.cell.build(s);let i;if(Array.isArray(this.cell.stateSize)?i=this.cell.stateSize:i=[this.cell.stateSize],this.stateSpec!=null){if(!Et(this.stateSpec.map(o=>o.shape[o.shape.length-1]),i))throw new Z(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=i.map(o=>new cr({shape:[null,o]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){J(()=>{if(!this.stateful)throw new Ia("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new Z("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>nr([r,s])):this.states_=[nr([r,this.cell.stateSize])];else if(e==null)gt(this.states_),this.keptStates!=null&&(gt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>nr([r,s])):this.states_[0]=nr([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Z(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):gt(this.states_);for(let s=0;s<this.states_.length;++s){const i=e[s],o=Array.isArray(this.cell.stateSize)?this.cell.stateSize[s]:this.cell.stateSize,a=[r,o];if(!Et(i.shape,a))throw new Z(`State ${s} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${i.shape}`);this.states_[s]=i}}this.states_=this.states_.map(s=>lr(s.clone()))})}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const i=sW(e,r,s,this.numConstants);e=i.inputs,r=i.initialState,s=i.constants;let o=[],a=[];if(r!=null){n.initialState=r,o=o.concat(r),this.stateSpec=[];for(const u of r)this.stateSpec.push(new cr({shape:u.shape}));a=a.concat(this.stateSpec)}if(s!=null&&(n.constants=s,o=o.concat(s),this.numConstants=s.length),o[0]instanceof tl){const u=[e].concat(o),c=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=c;const h=super.apply(u,n);return this.inputSpec=d,h}else return super.apply(e,n)}call(e,n){return J(()=>{const r=n==null?null:n.mask,s=n==null?null:n.training;let i=n==null?null:n.initialState;e=Je(e),i==null&&(this.stateful?i=this.states_:i=this.getInitialState(e));const o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==o)throw new Z(`RNN Layer has ${o} state(s) but was passed ${i.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:s},u=iW((p,m)=>{const y=this.cell.call([p].concat(m),a);return[y[0],y.slice(1)]},e,i,this.goBackwards,r,null,this.unroll,this.returnSequences),c=u[0],d=u[1],h=u[2];this.stateful&&this.resetStates(h,s);const f=this.returnSequences?d:c;return this.returnState?[f].concat(h):f})}getInitialState(e){return J(()=>{let n=nr(e.shape);return n=Le(n,[1,2]),n=Fy(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?Lk(n,[1,r]):n):this.cell.stateSize>1?[Lk(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===Cc.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const s=n.cell,i=Fl(s,r);return new e(Object.assign(n,{cell:i}))}}Cc.className="RNN";pe(Cc);class s2 extends bt{}class b5 extends s2{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Er(this.units,"units"),this.activation=sc(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=_n(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=_n(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=_n(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=In(e.kernelRegularizer),this.recurrentRegularizer=In(e.recurrentRegularizer),this.biasRegularizer=In(e.biasRegularizer),this.kernelConstraint=hr(e.kernelConstraint),this.recurrentConstraint=hr(e.recurrentConstraint),this.biasConstraint=hr(e.biasConstraint),this.dropout=Bf([1,nc([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Bf([1,nc([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Lt(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return J(()=>{if(e=e,e.length!==2)throw new Z(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const s=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ic({ones:()=>mi(e),rate:this.dropout,training:s,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ic({ones:()=>mi(r),rate:this.recurrentDropout,training:s,dropoutFunc:this.dropoutFunc}));let i;const o=this.dropoutMask,a=this.recurrentDropoutMask;o!=null?i=qa(q(e,o),this.kernel.read()):i=qa(e,this.kernel.read()),this.bias!=null&&(i=ya(i,this.bias.read())),a!=null&&(r=q(r,a));let l=he(i,qa(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:rc(this.activation),useBias:this.useBias,kernelInitializer:Fn(this.kernelInitializer),recurrentInitializer:Fn(this.recurrentInitializer),biasInitializer:Fn(this.biasInitializer),kernelRegularizer:nn(this.kernelRegularizer),recurrentRegularizer:nn(this.recurrentRegularizer),biasRegularizer:nn(this.biasRegularizer),activityRegularizer:nn(this.activityRegularizer),kernelConstraint:dr(this.kernelConstraint),recurrentConstraint:dr(this.recurrentConstraint),biasConstraint:dr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}b5.className="SimpleRNNCell";pe(b5);class oW extends Cc{constructor(e){e.cell=new b5(e),super(e)}call(e,n){return J(()=>{this.cell.dropoutMask!=null&&(gt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(gt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return new e(n)}}oW.className="SimpleRNN";pe(oW);class E5 extends s2{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new Z("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Er(this.units,"units"),this.activation=sc(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=sc(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=_n(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=_n(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=_n(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=In(e.kernelRegularizer),this.recurrentRegularizer=In(e.recurrentRegularizer),this.biasRegularizer=In(e.biasRegularizer),this.kernelConstraint=hr(e.kernelConstraint),this.recurrentConstraint=hr(e.recurrentConstraint),this.biasConstraint=hr(e.biasConstraint),this.dropout=Bf([1,nc([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Bf([1,nc([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Lt(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return J(()=>{if(e=e,e.length!==2)throw new Z(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let s=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ic({ones:()=>mi(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ic({ones:()=>mi(s),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,o=this.recurrentDropoutMask;let a,l,u;0<this.dropout&&this.dropout<1&&(e=q(e,i[0]));let c=qa(e,this.kernel.read());this.useBias&&(c=ya(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(s=q(s,o[0]));const d=this.recurrentKernel.read(),[h,f]=Ls(d,[2*this.units,this.units],d.rank-1),p=qa(s,h),[m,y,g]=Ls(c,3,c.rank-1),[v,E]=Ls(p,2,p.rank-1);a=this.recurrentActivation.apply(he(m,v)),l=this.recurrentActivation.apply(he(y,E));const b=qa(q(l,s),f);u=this.activation.apply(he(g,b));const T=he(q(a,s),q(he(1,an(a)),u));return[T,T]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:rc(this.activation),recurrentActivation:rc(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Fn(this.kernelInitializer),recurrentInitializer:Fn(this.recurrentInitializer),biasInitializer:Fn(this.biasInitializer),kernelRegularizer:nn(this.kernelRegularizer),recurrentRegularizer:nn(this.recurrentRegularizer),biasRegularizer:nn(this.biasRegularizer),activityRegularizer:nn(this.activityRegularizer),kernelConstraint:dr(this.kernelConstraint),recurrentConstraint:dr(this.recurrentConstraint),biasConstraint:dr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}E5.className="GRUCell";pe(E5);class aW extends Cc{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new E5(e),super(e)}call(e,n){return J(()=>{this.cell.dropoutMask!=null&&(gt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(gt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}aW.className="GRU";pe(aW);class i2 extends s2{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Er(this.units,"units"),this.activation=sc(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=sc(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=_n(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=_n(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=_n(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=In(e.kernelRegularizer),this.recurrentRegularizer=In(e.recurrentRegularizer),this.biasRegularizer=In(e.biasRegularizer),this.kernelConstraint=hr(e.kernelConstraint),this.recurrentConstraint=hr(e.recurrentConstraint),this.biasConstraint=hr(e.biasConstraint),this.dropout=Bf([1,nc([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Bf([1,nc([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=Lt(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let s;if(this.useBias){if(this.unitForgetBias){const i=this.biasInitializer,o=this.units;s=new(n=class extends No{apply(l,u){const c=i.apply([o]),d=new o5().apply([o]),h=i.apply([o*2]);return RO(RO(c,d),h)}},n.className="CustomInit",n)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,s,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return J(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new Z(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let s=e[1];const i=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ic({ones:()=>mi(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ic({ones:()=>mi(s),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,a=this.recurrentDropoutMask;let l,u,c,d;0<this.dropout&&this.dropout<1&&(e=q(e,o[0]));let h=qa(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(s=q(s,a[0])),h=he(h,qa(s,this.recurrentKernel.read())),this.useBias&&(h=ya(h,this.bias.read()));const[f,p,m,y]=Ls(h,4,h.rank-1);l=this.recurrentActivation.apply(f),u=this.recurrentActivation.apply(p),c=he(q(u,i),q(l,this.activation.apply(m))),d=this.recurrentActivation.apply(y);const g=q(d,this.activation.apply(c));return[g,g,c]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:rc(this.activation),recurrentActivation:rc(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Fn(this.kernelInitializer),recurrentInitializer:Fn(this.recurrentInitializer),biasInitializer:Fn(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:nn(this.kernelRegularizer),recurrentRegularizer:nn(this.recurrentRegularizer),biasRegularizer:nn(this.biasRegularizer),activityRegularizer:nn(this.activityRegularizer),kernelConstraint:dr(this.kernelConstraint),recurrentConstraint:dr(this.recurrentConstraint),biasConstraint:dr(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}i2.className="LSTMCell";pe(i2);class lW extends Cc{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new i2(e),super(e)}call(e,n){return J(()=>{this.cell.dropoutMask!=null&&(gt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(gt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}lW.className="LSTM";pe(lW);class T5 extends s2{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return J(()=>{e=e;let r=e.slice(1);const s=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?s.push(r.splice(0,a.stateSize.length)):s.push(r.splice(0,1));s.reverse();const i=[];let o;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];r=s[a],a===0?o=[e[0]].concat(r):o=[o[0]].concat(r),o=l.call(o,n),i.push(o.slice(1))}r=[];for(const a of i.slice().reverse())r.push(...a);return[o[0]].concat(r)})}build(e){Mk(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,s)=>{md(`RNNCell_${s}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=i=>({className:i.getClassName(),config:i.getConfig()}),s={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),s)}static fromConfig(e,n,r={}){const s=[];for(const i of n.cells)s.push(Fl(i,r));return new e({cells:s})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return Bk(e)}setWeights(e){const n=[];for(const r of this.cells){const s=r.weights.length,i=e.splice(s);for(let o=0;o<r.weights.length;++o)n.push([r.weights[o],i[o]])}f5(n)}}T5.className="StackedRNNCells";pe(T5);function ic(t){const{ones:e,rate:n,training:r=!1,count:s=1,dropoutFunc:i}=t,o=()=>i!=null?i(e(),n):JH(e(),n),a=()=>$y(o,e,r);return!s||s<=1?lr(a().clone()):Array(s).fill(void 0).map(a).map(u=>lr(u.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var GNe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class uW extends Cc{constructor(e){if(e.unroll)throw new ut("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new ut("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new cr({ndim:5})]}call(e,n){return J(()=>{if(this.cell.dropoutMask!=null&&(gt(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(gt(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new Z("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return J(()=>{const{stateSize:n}=this.cell,r=e.shape,s=this.computeSingleOutputShape(r),i=[s[0],...s.slice(2)],o=nr(i);return Array.isArray(n)?Array(n.length).fill(o):[o]})}resetStates(e,n=!1){J(()=>{if(!this.stateful)throw new Ia("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,s=this.computeSingleOutputShape(r),i=[s[0],...s.slice(2)];if(r[0]==null)throw new Z("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>nr(i)):this.states_=[nr(i)];else if(e==null)gt(this.states_),this.keptStates!=null&&(gt(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>nr(i)):this.states_[0]=nr(i);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Z(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):gt(this.states_);for(let a=0;a<this.states_.length;++a){const l=e[a],u=i;if(!Et(l.shape,u))throw new Z(`State ${a} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${l.shape}`);this.states_[a]=l}}this.states_=this.states_.map(a=>lr(a.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:s,padding:i,strides:o,dilationRate:a}=this.cell,l=n==="channelsFirst",u=e[l?3:2],c=e[l?4:3],d=ra(u,s[0],i,o[0],a[0]),h=ra(c,s[1],i,o[1],a[1]);return[...e.slice(0,2),...l?[r,d,h]:[d,h,r]]}}uW.className="ConvRNN2D";class x5 extends i2{constructor(e){const{filters:n,kernelSize:r,strides:s,padding:i,dataFormat:o,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,Er(this.filters,"filters"),this.kernelSize=pf(r,2,"kernelSize"),this.kernelSize.forEach(l=>Er(l,"kernelSize")),this.strides=pf(s||1,2,"strides"),this.strides.forEach(l=>Er(l,"strides")),this.padding=i||"valid",ji(this.padding),this.dataFormat=o||"channelsLast",Yn(this.dataFormat),this.dilationRate=pf(a||1,2,"dilationRate"),this.dilationRate.forEach(l=>Er(l,"dilationRate"))}build(e){var n;e=Lt(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new Z(`The channel dimension of the input should be defined. Found ${e[r]}`);const s=e[r],i=4,o=this.kernelSize.concat([s,this.filters*i]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*i]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const u=this.biasInitializer,c=this.filters;l=new(n=class extends No{apply(h,f){const p=u.apply([c]),m=Os([c]),y=u.apply([c*2]);return i5([p,m,y])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*i],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return J(()=>{if(e.length!==3)throw new Z(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,s=e[0],i=e[1],o=e[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=ic({ones:()=>mi(s),rate:this.dropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,u=(K,A,O)=>!A||!A[O]?K:q(A[O],K);let c=u(s,l,0),d=u(s,l,1),h=u(s,l,2),f=u(s,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=ic({ones:()=>mi(i),rate:this.recurrentDropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const p=this.recurrentDropoutMask;let m=u(i,p,0),y=u(i,p,1),g=u(i,p,2),v=u(i,p,3);const E=3,[b,T,x,C]=Ls(this.kernel.read(),a,E),[S,N,I,F]=this.useBias?Ls(this.bias.read(),a):[null,null,null,null];c=this.inputConv(c,b,S,this.padding),d=this.inputConv(d,T,N,this.padding),h=this.inputConv(h,x,I,this.padding),f=this.inputConv(f,C,F,this.padding);const[L,z,H,$]=Ls(this.recurrentKernel.read(),a,E);m=this.recurrentConv(m,L),y=this.recurrentConv(y,z),g=this.recurrentConv(g,H),v=this.recurrentConv(v,$);const M=this.recurrentActivation.apply(he(c,m)),j=this.recurrentActivation.apply(he(d,y)),P=he(q(j,o),q(M,this.activation.apply(he(h,g)))),B=q(this.recurrentActivation.apply(he(f,v)),this.activation.apply(P));return[B,B,P]})}getConfig(){const e=super.getConfig(),n=GNe(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,n,r,s){const i=Wl(e,n,this.strides,s||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?ya(i,r,this.dataFormat):i}recurrentConv(e,n){return Wl(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}x5.className="ConvLSTM2DCell";pe(x5);class cW extends uW{constructor(e){const n=new x5(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}cW.className="ConvLSTM2D";pe(cW);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class C5 extends bt{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let s=0;s<this.noiseShape.length;++s)r.push(this.noiseShape[s]==null?n[s]:this.noiseShape[s]);return r}call(e,n){return J(()=>{this.invokeCallHook(e,n);const r=Je(e);if(0<this.rate&&this.rate<1){const s=n.training==null?!1:n.training,i=this.getNoiseShape(r);return $y(()=>JH(r,this.rate,i,this.seed),()=>r,s)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}C5.className="Dropout";pe(C5);class dW extends C5{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}dW.className="SpatialDropout1D";pe(dW);class hW extends bt{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,Er(this.units,"units"),this.activation=sc(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=_n(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=_n(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=hr(e.kernelConstraint),this.biasConstraint=hr(e.biasConstraint),this.kernelRegularizer=In(e.kernelRegularizer),this.biasRegularizer=In(e.biasRegularizer),this.activityRegularizer=In(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=Lt(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=Lt(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return J(()=>{this.invokeCallHook(e,n);const r=Je(e),s=jH(this.activation.getClassName());let i;return s!=null?i=qa(r,this.kernel.read(),s,this.bias?this.bias.read():null):(i=qa(r,this.kernel.read()),this.bias!=null&&(i=ya(i,this.bias.read())),this.activation!=null&&(i=this.activation.apply(i))),i})}getConfig(){const e={units:this.units,activation:rc(this.activation),useBias:this.useBias,kernelInitializer:Fn(this.kernelInitializer),biasInitializer:Fn(this.biasInitializer),kernelRegularizer:nn(this.kernelRegularizer),biasRegularizer:nn(this.biasRegularizer),activityRegularizer:nn(this.activityRegularizer),kernelConstraint:dr(this.kernelConstraint),biasConstraint:dr(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}hW.className="Dense";pe(hW);class fW extends bt{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=Lt(e);for(const n of e.slice(1))if(n==null)throw new Z(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],ju(e,1)]}call(e,n){return J(()=>{this.invokeCallHook(e,n);let r=Je(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const s=[0];for(let i=2;i<r.rank;++i)s.push(i);s.push(1),r=wt(r,s)}return wIe(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}fW.className="Flatten";pe(fW);class pW extends bt{constructor(e){super(e),this.supportsMasking=!0,this.activation=sc(e.activation)}call(e,n){return J(()=>{this.invokeCallHook(e,n);const r=Je(e);return this.activation.apply(r)})}getConfig(){const e={activation:rc(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}pW.className="Activation";pe(pW);class mW extends bt{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return J(()=>(e=Je(e),CIe(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}mW.className="RepeatVector";pe(mW);class gW extends bt{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",s=n.slice();let i=1,o=null;for(let l=0;l<s.length;++l){const u=s[l];if(this.isUnknown(u))if(o===null)o=l;else throw new Z("Can only specifiy one unknown dimension.");else i*=u}const a=ju(e);if(o!==null){if(i===0||a%i!==0)throw new Z(r);s[o]=a/i}else if(a!==i)throw new Z(r);return s}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return J(()=>{this.invokeCallHook(e,n);const r=Je(e),s=r.shape,i=s.slice(0,1).concat(this.fixUnknownDimension(s.slice(1),this.targetShape));return Q(r,i)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}gW.className="Reshape";pe(gW);class yW extends bt{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=la(1,e.dims.length+1);if(!Et(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new cr({ndim:this.dims.length+1})]}computeOutputShape(e){e=Lt(e);const n=e.slice();return this.dims.forEach((r,s)=>{n[s+1]=e[r]}),n}call(e,n){return wt(Je(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}yW.className="Permute";pe(yW);class vW extends bt{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=Je(e),s=-1;return bg(Od(r,this.maskValue),s)}call(e,n){return J(()=>{this.invokeCallHook(e,n);const r=Je(e),s=-1,i=!0,o=bg(Od(r,this.maskValue),s,i);return q(r,Ce(o,r.dtype))})}}vW.className="Masking";pe(vW);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class bW extends bt{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(Vt(e.inputLength))}this.inputDim=e.inputDim,Er(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Er(this.outputDim,"outputDim"),this.embeddingsInitializer=_n(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=In(e.embeddingsRegularizer),this.activityRegularizer=In(e.activityRegularizer),this.embeddingsConstraint=hr(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return J(()=>this.maskZero?(e=Je(e),Od(e,At(e))):null)}computeOutputShape(e){if(e=Lt(e),this.inputLength==null)return[...e,this.outputDim];const n=Vt(this.inputLength);if(n.length!==e.length-1)throw new Z(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let s=0;s<n.length;++s){const i=n[s],o=e[s+1];if(i!=null&&o!=null&&i!==o)throw new Z(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);i==null&&(n[r]=o),r++}}return[e[0],...n,this.outputDim]}call(e,n){return J(()=>{this.invokeCallHook(e,n);let r=Je(e);r.dtype!=="int32"&&(r=Ka(r,"int32"));const s=ZH(this.embeddings.read(),Q(r,[r.size]));return Q(s,Lt(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Fn(this.embeddingsInitializer),embeddingsRegularizer:nn(this.embeddingsRegularizer),activityRegularizer:nn(this.activityRegularizer),embeddingsConstraint:dr(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}bW.className="Embedding";pe(bW);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class lh extends bt{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new ut}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let s=0;s<n.length;++s){const i=e[e.length-n.length+s],o=n[s];if(i==null||o==null||i<0||o<0)r.push(null);else if(i===1)r.push(o);else if(o===1)r.push(i);else{if(i!==o)throw new Z("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(i)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Lt(e)]),e=e,e.length<2)throw new Z(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const i of e)i!=null&&i[0]!==null&&n.push(i[0]);if(n=Gu(n),n.length>1)throw new Z(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let i=1;i<e.length;++i){const o=e[i]==null?null:e[i].slice(1);r=this.computeElementwiseOpOutputShape(r,o)}const s=e.map(i=>i.length);e.indexOf(null)===-1&&Gu(s).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return J(()=>{if(e=e,this.reshapeRequired){const r=[],s=e.map(i=>i.rank);if(s.indexOf(null)===-1){const i=nc(s);for(let o of e){const a=o.rank;for(let l=0;l<i-a;++l)o=Fy(o,1);r.push(o)}return this.mergeFunction(r)}else{let i=!1;for(const l of e){const u=l.rank;if(u==null){const c=l.shape,d=c[0],h=c.slice(1).concat([d]);let f=Q(l,[d].concat(ju(c.slice(1))));f=wt(f,[1,0]),f=Q(f,h),r.push(f),i=!0}else if(u>1){const c=la(1,u).concat([0]);r.push(wt(l,c)),i=!0}else r.push(l)}let o=this.mergeFunction(r);const a=o.rank;if(i){if(a==null){const l=o.shape,u=l.length,c=l[u-1],d=[c].concat(l.slice(0,l.length-1));o=Q(wt(Q(o,[-1,c]),[1,0]),d)}else if(a>1){const l=[a-1].concat(la(0,a-1));o=wt(o,l)}}return o}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let s=1;s<e.length;++s){const i=e[s]==null?null:e[s].slice(1);n=this.computeElementwiseOpOutputShape(n,i)}let r=[];for(const s of e)s!=null&&s[0]!==null&&r.push(s[0]);return r=Gu(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return J(()=>{if(n==null)return null;if(!Array.isArray(n))throw new Z("`mask` should be an Array");if(!Array.isArray(e))throw new Z("`inputs` should be an Array");if(n.length!==e.length)throw new Z(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(s=>s==null))return null;n=n.map(s=>s==null?s:Xr(s,0));let r=n[0];for(let s=1;s<n.length-1;++s)r=aa(r,n[s]);return r})}}class EW extends lh{constructor(e){super(e)}mergeFunction(e){return J(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=he(n,e[r]);return n})}}EW.className="Add";pe(EW);class TW extends lh{constructor(e){super(e)}mergeFunction(e){return J(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=q(n,e[r]);return n})}}TW.className="Multiply";pe(TW);class xW extends lh{constructor(e){super(e)}mergeFunction(e){return J(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=he(n,e[r]);return q(1/e.length,n)})}}xW.className="Average";pe(xW);class CW extends lh{constructor(e){super(e)}mergeFunction(e){return J(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=al(n,e[r]);return n})}}CW.className="Maximum";pe(CW);class SW extends lh{constructor(e){super(e)}mergeFunction(e){return J(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=tc(n,e[r]);return n})}}SW.className="Minimum";pe(SW);class wW extends lh{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new Z("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const s of e)if(s!=null){n=!1;break}if(n)return;const r=[];for(let s=0;s<e.length;++s){const i=e[s].slice();i.splice(this.axis,1);let o=!1;for(const a of r)if(Et(a,i)){o=!0;break}o||r.push(i)}if(r.length>1)throw new Z("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return J(()=>i5(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new Z("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),s=this.axis<0?r.length+this.axis:this.axis;for(const i of n.slice(1)){if(r[s]==null||i[s]==null){r[s]=null;break}r[s]+=i[s]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new Z("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new Z("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new Z(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return J(()=>{let r=!0;if(n.forEach(o=>{if(o!=null){r=!1;return}}),r)return null;const s=[];for(let o=0;o<e.length;++o)n[o]==null?s.push(Ce(mi(e[o]),"bool")):n[o].rank<e[o].rank?s.push(Xr(n[o],-1)):s.push(n[o]);const i=jn(s,this.axis);return cC(i,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}wW.className="Concatenate";pe(wW);function Y1(t,e){for(;t<0;)t+=e;return t}function jNe(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new ut("batchDot is not implemented for tensors of 4D or higher rank yet");if(D(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),D(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new ut("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,s=e.shape.length;n==null&&(n=[r-1,s-2]);const i=n;return J(()=>{let o;if(r>s){o=r-s;const l=[];for(let u=0;u<o;++u)l.push(1);e=Q(e,e.shape.concat(l))}else if(s>r){o=s-r;const l=[];for(let u=0;u<o;++u)l.push(1);t=Q(t,t.shape.concat(l))}else o=0;let a;if(t.shape.length===2&&e.shape.length===2)i[0]===i[1]?a=Le(q(t,e),i[0]):a=Le(q(wt(t,[1,0]),e),i[1]);else{const l=i[0]!==t.shape.length-1,u=i[1]===e.shape.length-1;a=mt(t,e,l,u)}if(o>0){let l;r>s?l=r+s-3:l=r-1;const u=[];for(let c=l;c<l+o;++c)u.push(c);a=Tc(a,u)}return a.shape.length===1&&(a=Xr(a,1)),a})}class _W extends lh{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){D(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new ut("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);if(n[s[0]]!==r[s[1]])throw new Z(`Dimension incompatibility: ${n[s[0]]} !== ${r[s[1]]}`)}mergeFunction(e){if(e.length!==2)throw new Z(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],s;return Array.isArray(this.axes)?s=this.axes.map((i,o)=>Y1(i,e[o].shape.length)):s=[Y1(this.axes,n.shape.length),Y1(this.axes,r.shape.length)],this.normalize&&(n=UE(n,s[0]),r=UE(r,s[1])),jNe(n,r,s)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[Y1(this.axes,e.length),Y1(this.axes,n.length)],r}computeOutputShape(e){D(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new ut("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);n.splice(s[0],1),r.splice(s[1],1),r.splice(0,1);const i=n.concat(r);return i.length===1&&i.push(1),i}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}_W.className="Dot";pe(_W);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class kW extends bt{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return J(()=>{this.invokeCallHook(e,n);const r=Je(e);return $y(()=>he(ZC(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}kW.className="GaussianNoise";pe(kW);class IW extends bt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return J(()=>{this.invokeCallHook(e,n);const r=Je(e);return this.rate>0&&this.rate<1?$y(()=>{const i=Math.sqrt(this.rate/(1-this.rate));return q(r,ZC(r.shape,1,i))},()=>r,n.training||!1):r})}}IW.className="GaussianDropout";pe(IW);class NW extends bt{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Je(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return J(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return $y(()=>{const i=Je(e),o=1.6732632423543772,a=1.0507009873554805,l=-o*a;let u=ru(Ec(r),this.rate);u=Ka(u,"float32");const c=((1-this.rate)*(1+this.rate*l**2))**-.5,d=-c*l*this.rate,h=he(q(i,u),q(he(u,-1),l));return he(q(h,c),d)},()=>Je(e),n.training||!1)}return e})}}NW.className="AlphaDropout";pe(NW);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function _g(t,e,n,r,s,i=.001){let o;if(t.rank===2)o=w9(t,e,n,r,s,i);else if(t.rank===3)o=_9(t,e,n,r,s,i);else if(t.rank===4)o=k9(t,e,n,r,s,i);else throw new ut(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return o}function KNe(t,e,n,r,s=.001){return J(()=>{const i=Ty(t,r),o=i.mean,a=i.variance;return[_g(t,o,a,n,e,s),o,a]})}function qNe(t,e,n,r,s=.001){return J(()=>{const i=Ty(t,r),o=i.mean,a=i.variance,l=[];for(const p of la(0,t.rank))r.indexOf(p)!==-1?l.push(1):l.push(t.shape[p]);const u=Q(o,l),c=Q(a,l),d=e==null?null:Q(e,l),h=n==null?null:Q(n,l);return[_g(t,u,c,h,d,s),o,a]})}function XNe(t,e,n,r,s=.001){return Et(r.slice().sort(),la(0,t.rank-1))?KNe(t,e,n,r,s):qNe(t,e,n,r,s)}class AW extends bt{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=_n(e.betaInitializer||"zeros"),this.gammaInitializer=_n(e.gammaInitializer||"ones"),this.movingMeanInitializer=_n(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=_n(e.movingVarianceInitializer||"ones"),this.betaConstraint=hr(e.betaConstraint),this.gammaConstraint=hr(e.gammaConstraint),this.betaRegularizer=In(e.betaRegularizer),this.gammaRegularizer=In(e.gammaRegularizer)}build(e){e=Lt(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new Z(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new cr({ndim:e.length,axes:{[n]:r}})];const s=[r];this.scale&&(this.gamma=this.addWeight("gamma",s,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",s,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",s,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",s,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return J(()=>{const r=n.training==null?!1:n.training,s=Je(e),i=s.shape,o=i.length,a=la(0,o),l=this.axis>=0?this.axis:this.axis+o;a.splice(l,1);const u=Md(1,o);u[l]=i[l];const c=a.slice();c.sort();const d=!Et(c,la(0,o).slice(0,o-1)),h=()=>{if(d){const v=Q(this.movingMean.read(),u),E=Q(this.movingVariance.read(),u),b=this.center?Q(this.beta.read(),u):null,T=this.scale?Q(this.gamma.read(),u):null;return _g(s,v,E,b,T,this.epsilon)}else return _g(s,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return h();const[f,p,m]=XNe(s,this.gamma.read(),this.beta.read(),a,this.epsilon),y=(v,E,b)=>{J(()=>{const T=1-b,x=v.read(),C=q(Re(x,E),T);v.write(Re(x,C))})};return(()=>{y(this.movingMean,p,this.momentum),y(this.movingVariance,m,this.momentum)})(),f})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Fn(this.betaInitializer),gammaInitializer:Fn(this.gammaInitializer),movingMeanInitializer:Fn(this.movingMeanInitializer),movingVarianceInitializer:Fn(this.movingVarianceInitializer),betaRegularizer:nn(this.betaRegularizer),gammaRegularizer:nn(this.gammaRegularizer),betaConstraint:dr(this.betaConstraint),gammaConstraint:dr(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}AW.className="BatchNormalization";pe(AW);class DW extends bt{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=_n(e.betaInitializer||"zeros"),this.gammaInitializer=_n(e.gammaInitializer||"ones"),this.betaRegularizer=In(e.betaRegularizer),this.gammaRegularizer=In(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=Lt(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=n);for(const i of this.axis)if(i<0||i>=n)throw new Error(`Invalid axis: ${i}`);if(this.axis.length!==Gu(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(i=>e[i]),s=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,s):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,s):this.beta=null,this.built=!0}call(e,n){const r=Je(e),s=r.shape,i=s.length;return J(()=>{let{mean:a,variance:l}=Ty(r,this.axis,!0);const u=Md(1,i);for(const m of this.axis)u[m]=s[m];const c=m=>m!=null&&m.shape.length!==i?Q(m,u):m;let d=this.scale?c(this.gamma.read()):null,h=this.center?c(this.beta.read()):null;const f=[],p=[];for(let m=0;m<i;++m)this.axis.indexOf(m)!==-1?(f.push(s[m]),p.push(1)):(f.push(1),p.push(s[m]));return a=Ri(a,f),l=Ri(l,f),d!=null&&(d=Ri(d,p)),h!=null&&(h=Ri(h,p)),_g(r,a,l,h,d,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Fn(this.betaInitializer),gammaInitializer:Fn(this.gammaInitializer),betaRegularizer:nn(this.betaRegularizer),gammaRegularizer:nn(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}DW.className="LayerNormalization";pe(DW);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function YNe(t,e,n){return J(()=>{if(t.rank!==4)throw new Z(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new Z("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=ua()),n!=="channelsLast"&&n!=="channelsFirst")throw new Z(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],su(t,r)})}class RW extends bt{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?ua():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new Z(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new Z(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new Z(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new cr({ndim:4})]}computeOutputShape(e){e=Lt(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return J(()=>YNe(Je(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}RW.className="ZeroPadding2D";pe(RW);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function o2(t,e,n,r,s,i){return J(()=>{Yn(s),qH(i),ji(r),n==null&&(n=[1,1]),r==null&&(r="valid"),s==null&&(s=ua()),i==null&&(i="max"),t=v5(t,s);let o;const a=r==="same"?"same":"valid";return i==="max"?o=Ey(t,e,n,a):o=hy(t,e,n,a),s==="channelsFirst"&&(o=wt(o,[0,3,1,2])),o})}function FW(t,e,n,r,s,i){return J(()=>{Yn(s),qH(i),ji(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),s==null&&(s=ua()),i==null&&(i="max"),t=YU(t,s);let o;const a=r==="same"?"same":"valid";return i==="max"?o=Y9(t,e,n,a):o=S9(t,e,n,a),s==="channelsFirst"&&(o=wt(o,[0,4,1,2,3])),o})}class OW extends bt{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new Z(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(Er(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new Z(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);Er(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,ji(this.padding),this.inputSpec=[new cr({ndim:3})]}computeOutputShape(e){e=Lt(e);const n=ra(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return J(()=>{this.invokeCallHook(e,n),e=Fy(Je(e),2);const r=this.poolingFunction(Je(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Tc(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class $W extends OW{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return Yn(i),ji(s),o2(e,n,r,s,i,"max")}}$W.className="MaxPooling1D";pe($W);class LW extends OW{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return Yn(i),ji(s),o2(e,n,r,s,i,"avg")}}LW.className="AveragePooling1D";pe(LW);class PW extends bt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new Z(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Er(this.poolSize,"poolSize"),Er(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Yn(this.dataFormat),ji(this.padding),this.inputSpec=[new cr({ndim:4})]}computeOutputShape(e){e=Lt(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=ra(n,this.poolSize[0],this.padding,this.strides[0]),r=ra(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return J(()=>(this.invokeCallHook(e,n),this.poolingFunction(Je(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class MW extends PW{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return Yn(i),ji(s),o2(e,n,r,s,i,"max")}}MW.className="MaxPooling2D";pe(MW);class BW extends PW{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return Yn(i),ji(s),o2(e,n,r,s,i,"avg")}}BW.className="AveragePooling2D";pe(BW);class zW extends bt{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new Z(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Er(this.poolSize,"poolSize"),Er(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Yn(this.dataFormat),ji(this.padding),this.inputSpec=[new cr({ndim:5})]}computeOutputShape(e){e=Lt(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=ra(n,this.poolSize[0],this.padding,this.strides[0]),r=ra(r,this.poolSize[1],this.padding,this.strides[1]),s=ra(s,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,s]:[e[0],n,r,s,e[4]]}call(e,n){return J(()=>(this.invokeCallHook(e,n),this.poolingFunction(Je(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class HW extends zW{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return Yn(i),ji(s),FW(e,n,r,s,i,"max")}}HW.className="MaxPooling3D";pe(HW);class UW extends zW{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return Yn(i),ji(s),FW(e,n,r,s,i,"avg")}}UW.className="AveragePooling3D";pe(UW);class WW extends bt{constructor(e){super(e),this.inputSpec=[new cr({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new ut}}class VW extends WW{constructor(e){super(e||{})}call(e,n){return J(()=>{const r=Je(e);return Rn(r,1)})}}VW.className="GlobalAveragePooling1D";pe(VW);class GW extends WW{constructor(e){super(e||{})}call(e,n){return J(()=>{const r=Je(e);return Bi(r,1)})}}GW.className="GlobalMaxPooling1D";pe(GW);class jW extends bt{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,Yn(this.dataFormat),this.inputSpec=[new cr({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new ut}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class KW extends jW{call(e,n){return J(()=>{const r=Je(e);return this.dataFormat==="channelsLast"?Rn(r,[1,2]):Rn(r,[2,3])})}}KW.className="GlobalAveragePooling2D";pe(KW);class qW extends jW{call(e,n){return J(()=>{const r=Je(e);return this.dataFormat==="channelsLast"?Bi(r,[1,2]):Bi(r,[2,3])})}}qW.className="GlobalMaxPooling2D";pe(qW);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class XW extends bt{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const s=n.layer,i=Fl(s,r);delete n.layer;const o={layer:i};return Object.assign(o,n),new e(o)}}class YW extends XW{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=Lt(e),e.length<3)throw new Z(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=Lt(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),s=e[1];return[r[0],s].concat(r.slice(1))}call(e,n){return J(()=>(e=Je(e),iW((o,a)=>[Je(this.layer.call(o,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}YW.className="TimeDistributed";pe(YW);function QNe(t){ah(vIe,"BidirectionalMergeMode",t)}const ZNe="concat";class QW extends XW{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=Fl(r),n.goBackwards=n.goBackwards!==!0;const s={};if(s.className=e.layer.getClassName(),s.config=n,this.backwardLayer=Fl(s),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?ZNe:e.mergeMode,QNe(this.mergeMode),e.weights)throw new ut("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,s,i;return this.returnState&&(i=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,s=[r]):this.mergeMode==null?s=[r,r.slice()]:s=[r],this.returnState?this.mergeMode==null?s.concat(i).concat(i.slice()):[r].concat(i).concat(i.slice()):Ns(s)}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const i=sW(e,r,s,this.numConstants);if(e=i.inputs,r=i.initialState,s=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&s==null)return super.apply(e,n);const o=[],a=[];if(r!=null){const u=r.length;if(u%2>0)throw new Z("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,o.push(...r);const c=r.map(d=>new cr({shape:d.shape}));this.forwardLayer.stateSpec=c.slice(0,u/2),this.backwardLayer.stateSpec=c.slice(u/2),a.push(...c)}if(s!=null)throw new ut("Support for constants in Bidirectional layers is not implemented yet.");const l=o[0]instanceof tl;for(const u of o)if(u instanceof tl!==l)throw new Z("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const u=[e].concat(o),c=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=c;const h=super.apply(u,n);return this.inputSpec=d,h}else return super.apply(e,n)}call(e,n){return J(()=>{const r=n.initialState;let s,i;if(r==null)s=this.forwardLayer.call(e,n),i=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),u=r.slice(r.length/2);s=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),i=this.backwardLayer.call(e,Object.assign(n,{initialState:u}))}let o;this.returnState&&(Array.isArray(s)&&(o=s.slice(1).concat(i.slice(1))),s=s[0],i=i[0]),this.returnSequences&&(i=Hi(i,1));let a;return this.mergeMode==="concat"?a=i5([s,i]):this.mergeMode==="sum"?a=he(s,i):this.mergeMode==="ave"?a=q(.5,he(s,i)):this.mergeMode==="mul"?a=q(s,i):this.mergeMode==null&&(a=[s,i]),this.returnState?this.mergeMode==null?a.concat(o):[a].concat(o):a})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){md(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),md(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const i=this.forwardLayer.states.map(o=>null);return Array.isArray(r)?r.concat(i).concat(i):[r].concat(i).concat(i)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=Fl(n.layer);if(delete n.layer,n.numConstants!=null)throw new ut("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const s=n;return s.layer=r,new e(s)}}QW.className="Bidirectional";pe(QW);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ZW extends bt{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return J(()=>(e=Je(e),e.dtype!=="float32"&&(e=Ka(e,"float32")),he(q(e,this.scale),this.offset)))}}ZW.className="Rescaling";pe(ZW);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:JNe,cropAndResize:e9e}=Qo;class JW extends bt{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,s,i,o,a,l){return J(()=>{let u,c=!1;const d=n/o,h=r/a,f=(s+n)/o,p=(i+r)/a,m=[d,h,f,p],y=[];e.rank===3?(c=!0,u=Ws([e])):u=e;for(let T=0;T<u.shape[0];T++)y.push(m);const g=bo(y,[y.length,4]),v=$d(0,y.length,1,"int32"),b=e9e(u,g,v,[s,i],"nearest");return Ka(c?Je(Ui(b)):b,l)})}upsize(e,n,r,s){return J(()=>{const i=JNe(e,[n,r]);return Ka(i,s)})}call(e,n){return J(()=>{const r=Je(e),s=r.dtype,i=r.shape,o=i[i.length-3],a=i[i.length-2];let l=0;o!==this.height&&(l=Math.floor((o-this.height)/2));let u=0;return a!==this.width&&(u=Math.floor((a-this.width)/2),u===0&&(u=1)),l>=0&&u>=0?this.centerCrop(r,l,u,this.height,this.width,o,a,s):this.upsize(e,this.height,this.width,s)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Lt(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}JW.className="CenterCrop";pe(JW);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function t9e(t,e,n,r){let s=Je(t);if(s.dtype!=="int32"&&(s=Ka(s,"int32")),e==="int")return s;const i=s.shape;if(s.rank===0&&(s=Xr(s,-1)),e==="oneHot"&&s.shape[s.shape.length-1]!==1&&(s=Xr(s,-1)),s.rank>2)throw new Z(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${i} which would result in output rank ${s.rank}.`);const o=["multiHot","oneHot"].includes(e),a=s;let l;if(typeof r<"u"&&e==="count"?l=OE(a,r,n,o):l=OE(a,[],n,o),e!=="tfIdf")return l;if(r)return q(l,r);throw new Z("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class eV extends bt{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=Lt(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return J(()=>{e=Je(e),e.dtype!=="int32"&&(e=Ka(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new Z(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=Je(n.countWeights)}const s=Bi(e),i=Ff(e),o=qs(this.numTokens,s).bufferSync().get(0),a=ru(i,0).bufferSync().get(0);if(!(o&&a))throw new Z(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return t9e(e,this.outputMode,this.numTokens,r)})}}eV.className="CategoryEncoding";pe(eV);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const n9e=["bilinear","nearest"],YO=new Set(n9e);class tV extends bt{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(YO.has(e.interpolation))this.interpolation=e.interpolation;else throw new Z(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=Boolean(e.cropToAspectRatio)}computeOutputShape(e){e=Lt(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return J(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return Qo.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return Qo.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...YO]} are supported`)})}}tV.className="Resizing";pe(tV);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class nV{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}nV.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class rV extends bt{constructor(e){super(e),this.randomGenerator=new nV(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}rV.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const r9e=["bilinear","nearest"],QO=new Set(r9e);class sV extends rV{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new Z(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new Z(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new Z(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(QO.has(r))this.interpolation=r;else throw new Z(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=Lt(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return J(()=>{const r=Je(e);this.imgHeight=r.shape[r.shape.length-3];const s=r.shape[r.shape.length-2];this.widthFactor=Ec([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let i=this.widthFactor.dataSync()[0]*s;i=Math.round(i);const o=[this.imgHeight,i];switch(this.interpolation){case"bilinear":return Qo.resizeBilinear(e,o);case"nearest":return Qo.resizeNearestNeighbor(e,o);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...QO]} are supported`)}})}}sV.className="RandomWidth";pe(sV);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var ZO;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(ZO||(ZO={}));/** @license See the LICENSE file. *//**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Me(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&D(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s9e=LC;class a2 extends JT{nextDataId(){return a2.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new YN(this,Wo())}write(e,n,r){this.firstUse&&(this.firstUse=!1,ee().get("IS_NODE")&&ki(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const s={id:this.nextDataId()};return this.data.set(s,{values:e,dtype:r,refCount:1}),s}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&Pa(r[0])){const i=r.map(o=>Va(o));s=this.write(i,e,n)}else s=this.write(r,e,n);return{dataId:s,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,s,i){this.data.set(e,{values:n,dtype:s,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const s=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return Vl(s,i)}return hB(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>Hl(s));return ct(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return ct(e.shape,e.dtype,n)}makeOutput(e,n,r){return Wo().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=ls();return e(),{kernelMs:ls()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Me([e],"where");const n=this.readSync(e.dataId);return s9e(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}a2.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iV(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const i9e=t=>{const{x:e}=t.inputs,n=t.backend;Me(e,"abs");let r=new Float32Array(re(e.shape));const s=n.data.get(e.dataId).values;return r=iV(s),n.makeOutput(r,e.shape,e.dtype)},o9e={kernelName:o0,backendName:"cpu",kernelFunc:i9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qn(t){return(e,n,r,s,i)=>{const o=it(e,n),a=o.length,l=Ue(o),u=re(o),c=xr(i,u),d=e.length,h=n.length,f=Ue(e),p=Ue(n),m=Fd(e,o),y=Fd(n,o);if(m.length+y.length===0)for(let g=0;g<c.length;++g)c[g]=t(r[g%r.length],s[g%s.length]);else for(let g=0;g<c.length;++g){const v=Jd(g,a,l),E=v.slice(-d);m.forEach(C=>E[C]=0);const b=ta(E,d,f),T=v.slice(-h);y.forEach(C=>T[C]=0);const x=ta(T,h,p);c[g]=t(r[b],s[x])}return[c,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ai(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,a=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(a.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(s.shape,"float32",o)},a}const a9e={kernelName:lx,backendName:"cpu",kernelFunc:ai};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KE(t,e,n="float32"){if(n==="complex64"){const s=KE(t,e,"float32"),i=KE(t,e,"float32");return ai({inputs:{real:s,imag:i},backend:t})}const r=zr(re(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nl(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const l9e={kernelName:_p,backendName:"cpu",kernelFunc:nl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bd(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,i)}const u9e={kernelName:Hx,backendName:"cpu",kernelFunc:Bd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oV(t,e,n,r){if(r==="int32"){const s=Int32Array.from(t);return[e,"int32",s]}if(r==="bool"){const s=mc([0],n),[i,o]=Qn((a,l)=>a!==l?1:0)(e,[],t,s,"bool");return[o,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function oc(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:i}=r;if(i==="complex64"){if(s.dtype==="complex64")return nl({inputs:{x:s},backend:n});const c=KE(n,s.shape,s.dtype),d=oc({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),h=ai({inputs:{real:d,imag:c},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),h}if(s.dtype==="complex64"){const c=Bd({inputs:{input:s},backend:n}),d=oc({inputs:{x:c},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(c),d}if(!JN(s.dtype,i)){const c=nl({inputs:{x:s},backend:n});return{dataId:c.dataId,shape:c.shape,dtype:i}}const o=n.data.get(s.dataId).values,[a,l,u]=oV(o,s.shape,s.dtype,i);return n.makeTensorInfo(a,l,u)}const c9e={kernelName:fp,backendName:"cpu",kernelFunc:oc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fr(t,e,n,r){return n==null?({inputs:s,backend:i})=>{const{a:o,b:a}=s,l=i;Me([o,a],t);const u=l.data.get(o.dataId).values,c=l.data.get(a.dataId).values,d=o.dtype==="string"?Gl(u):u,h=o.dtype==="string"?Gl(c):c,f=r||o.dtype,[p,m]=e(o.shape,a.shape,d,h,f);return l.makeTensorInfo(m,f,p)}:({inputs:s,backend:i})=>{const{a:o,b:a}=s,l=i;if(o.dtype==="complex64"||a.dtype==="complex64"){const u=oc({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),c=l.data.get(u.dataId),d=c.complexTensorInfos.real,h=c.complexTensorInfos.imag,f=l.data.get(d.dataId).values,p=l.data.get(h.dataId).values,m=oc({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),y=l.data.get(m.dataId),g=y.complexTensorInfos.real,v=y.complexTensorInfos.imag,E=l.data.get(g.dataId).values,b=l.data.get(v.dataId).values,[T,x,C]=n(o.shape,a.shape,f,p,E,b),S=l.makeTensorInfo(C,"float32",T),N=l.makeTensorInfo(C,"float32",x),I=ai({inputs:{real:S,imag:N},backend:l});return l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(m),l.disposeIntermediateTensorInfo(S),l.disposeIntermediateTensorInfo(N),I}else{const u=l.data.get(o.dataId).values,c=l.data.get(a.dataId).values,d=r||o.dtype,[h,f]=e(o.shape,a.shape,u,c,d);return l.makeTensorInfo(f,d,h)}}}function S5(t){return(e,n,r,s,i,o)=>{const a=it(e,n),l=re(a),u=a.length,c=Ue(a),d=xr("float32",l),h=xr("float32",l),f=Fd(e,a),p=Fd(n,a),m=Vl(r,s),y=Vl(i,o),g=e.length,v=Ue(e),E=n.length,b=Ue(n);if(f.length+p.length===0)for(let T=0;T<d.length;T++){const x=T%m.length,C=T%y.length,S=t(m[x*2],m[x*2+1],y[C*2],y[C*2+1]);d[T]=S.real,h[T]=S.imag}else for(let T=0;T<d.length;T++){const x=Jd(T,u,c),C=x.slice(-g);f.forEach(L=>C[L]=0);const S=ta(C,g,v),N=x.slice(-E);p.forEach(L=>N[L]=0);const I=ta(N,E,b),F=t(m[S*2],m[S*2+1],y[I*2],y[I*2+1]);d[T]=F.real,h[T]=F.imag}return[d,h,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aV=Qn((t,e)=>t+e),d9e=S5((t,e,n,r)=>({real:t+n,imag:e+r})),zf=fr(eh,aV,d9e),h9e={kernelName:eh,backendName:"cpu",kernelFunc:zf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w5(t,e,n,r,s){const i=re(r),o=zr(s,n);for(let a=0;a<t.length;a++){const l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=s||(i>0?o[l]+=e[a]:o[l]+=1)}return o}function lV(t,e,n,r=!1){const s=t.shape[0],i=t.shape[1],o=ct([s,n],e.dtype);for(let a=0;a<s;a++)for(let l=0;l<i;l++){const u=t.get(a,l);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(r?o.set(1,a,u):e.size>0?o.set(o.get(a,u)+e.get(a,l),a,u):o.set(o.get(a,u)+1,a,u))}return o}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uV=Qn((t,e)=>t&e),f9e=fr(p0,uV),p9e={kernelName:p0,backendName:"cpu",kernelFunc:f9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ll(t){return(e,n,r)=>{const s=Bn(n,e.length);for(let i=0;i<e.length;++i)s[i]=t(e[i],r);return s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gt(t,e,n){const r=ll(e);return Sc(t,r,n)}function Sc(t,e,n){return({inputs:r,attrs:s,backend:i})=>{const{x:o}=r;Me(o,t);const a=i,l=a.data.get(o.dataId).values;let u;if(o.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");u=Gl(l)}else u=l;const c=n||o.dtype,d=e(u,c,s);return a.makeTensorInfo(o.shape,c,d)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cV=ll(t=>Math.ceil(t)),m9e=Sc(pp,cV),g9e={kernelName:pp,backendName:"cpu",kernelFunc:m9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dV(t,e,n,r){const s=Bn(n,re(e));if(r&&n!=="string"){let i=0;t.forEach(o=>{const a=re(o.shape);s.set(o.vals,i),i+=a})}else{let i=0;t.forEach(o=>{const a=n==="string"?Gl(o.vals):o.vals;let l=0;for(let u=0;u<o.shape[0];++u){const c=u*e[1]+i;for(let d=0;d<o.shape[1];++d)s[c+d]=a[l++]}i+=o.shape[1]})}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hV=Qn((t,e)=>t===e?1:0),fV=fr(C0,hV,null,"bool"),y9e={kernelName:C0,backendName:"cpu",kernelFunc:fV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pV=ll(t=>Math.exp(t)),mV=Sc(Tp,pV,"float32"),v9e={kernelName:Tp,backendName:"cpu",kernelFunc:mV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gV=ll(t=>Math.expm1(t)),b9e=Sc(xp,gV),E9e={kernelName:xp,backendName:"cpu",kernelFunc:b9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yV=ll(t=>Math.floor(t)),T9e=Sc(Cp,yV),x9e={kernelName:Cp,backendName:"cpu",kernelFunc:T9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vV=Qn((t,e)=>Math.floor(t/e)),C9e=fr(Sp,vV,null,"int32"),S9e={kernelName:Sp,backendName:"cpu",kernelFunc:C9e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bV(t,e,n,r,s,i,o,a,l){const u=ct([r,i],n);for(let c=0;c<r;c++){const d=[];let h=0;for(let f=0;f<s;f++){const p=t[c*s+f];h+=p*o[f],d.push(p)}if(h<0||h>=l/i)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let f=0;f<i;f++)u.values[c*i+f]=e.get(...e.indexToLoc(h*i+f))}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EV(t,e,n){const r=ct(n,t.dtype);for(let s=0;s<r.size;++s){const o=r.indexToLoc(s).slice(),a=o[0],l=o[2],u=e.locToIndex([a,l]);o[2]=e.values[u];const c=t.locToIndex(o);0<=c&&c<t.values.length&&(r.values[s]=t.values[c])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TV=Qn((t,e)=>t>e?1:0),w9e=fr(k0,TV,null,"bool"),_9e={kernelName:k0,backendName:"cpu",kernelFunc:w9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xV=Qn((t,e)=>t>=e?1:0),k9e=fr(wp,xV,null,"bool"),I9e={kernelName:wp,backendName:"cpu",kernelFunc:k9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CV=Qn((t,e)=>t<e?1:0),N9e=fr(N0,CV,null,"bool"),A9e={kernelName:N0,backendName:"cpu",kernelFunc:N9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SV=Qn((t,e)=>t<=e?1:0),D9e=fr(A0,SV,null,"bool"),R9e={kernelName:A0,backendName:"cpu",kernelFunc:D9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wV(t,e,n){const r=(e-t)/(n-1),s=zr(n,"float32");s[0]=t;for(let i=1;i<s.length;i++)s[i]=s[i-1]+r;return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _V=ll(t=>Math.log(t)),F9e=Sc(Ap,_V),O9e={kernelName:Ap,backendName:"cpu",kernelFunc:F9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kV(t,e,n,r){const s=xr(r,re(n));for(let i=0;i<s.length;++i){const o=i*e;let a=t[o];for(let l=0;l<e;++l){const u=t[o+l];(Number.isNaN(u)||u>a)&&(a=u)}s[i]=a}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IV=Qn((t,e)=>Math.max(t,e)),$9e=fr(Rp,IV),L9e={kernelName:Rp,backendName:"cpu",kernelFunc:$9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NV=Qn((t,e)=>Math.min(t,e)),P9e=fr(Fp,NV),M9e={kernelName:Fp,backendName:"cpu",kernelFunc:P9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _5=Qn((t,e)=>t*e),B9e=S5((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),l2=fr($p,_5,B9e),z9e={kernelName:$p,backendName:"cpu",kernelFunc:l2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AV(t,e,n){const r=eu(-1,n);return _5([],e,r,t,n)}function H9e(t){const{inputs:e,backend:n}=t,{x:r}=e;Me(r,"neg");const s=n.data.get(r.dataId).values,[i,o]=AV(s,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,i)}const U9e={kernelName:H0,backendName:"cpu",kernelFunc:H9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DV=Qn((t,e)=>t!==e?1:0),W9e=fr(U0,DV,null,"bool"),V9e={kernelName:U0,backendName:"cpu",kernelFunc:W9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k5(t,e,n,r,s){const i=e.length,o=re(e),a=Ue(e),l=Ue(s),u=xr(n,re(s));for(let c=0;c<o;++c){const d=Jd(c,i,a),h=new Array(d.length);for(let p=0;p<h.length;p++)h[p]=d[r[p]];const f=ta(h,i,l);u[f]=t[c]}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vs(t){const{inputs:e,attrs:n,backend:r}=t,{x:s}=e,{perm:i}=n;Me(s,"transpose");const o=s.shape.length,a=new Array(o);for(let d=0;d<a.length;d++)a[d]=s.shape[i[d]];const l=r.data.get(s.dataId).values,u=k5(l,s.shape,s.dtype,i,a);return{dataId:r.write(u,a,s.dtype),shape:a,dtype:s.dtype}}const G9e={kernelName:fd,backendName:"cpu",kernelFunc:Vs};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RV(t,e,n,r){const[s,i]=Ir(t,r),o=Bs(e,"int32"),a=zr(re(s),o),l=re(i);for(let u=0;u<a.length;++u){const c=u*l;let d=1;for(let h=0;h<l;++h)d*=n[c+h];a[u]=d}return{outVals:a,outShape:s,outDtype:o}}function j9e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;Me(s,"prod");const a=s.shape.length,l=yt(i,s.shape),u=$n(l,a);let c=l,d=s;const h=[];u!=null&&(d=Vs({inputs:{x:s},backend:n,attrs:{perm:u}}),h.push(d),c=Xn(c.length,a));const f=n.data.get(d.dataId).values,{outVals:p,outShape:m,outDtype:y}=RV(d.shape,d.dtype,f,c);let g=m;return o&&(g=Kn(m,l)),h.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.makeTensorInfo(g,y,p)}const K9e={kernelName:q0,backendName:"cpu",kernelFunc:j9e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q9e(t,e,n){t.forEach((r,s)=>{if(r<0||r>=n){const i=Jd(s,e.length,Ue(e)).join(",");throw new Error(`indices[${i}] = ${r} is not in [0, ${n})`)}})}function X9e(t,e){for(let n=0;n<t.length;++n){const r=t[n],s=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>s)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function Y9e(t,e,n,r){const s=[];let i=0;const o=e.length-1+n.length,a=new Array(o).fill(null).map(()=>[0]);X9e(n,r);let l=1;for(let u=0;u<e.length-1;++u){l*=e[u];const c=e[u+1];for(let d=1;d<l+1;++d)a[u].push(d*c)}for(let u=0;u<t.length;++u){let c=t[u],d=t[u]+1;for(let h=0;h<n.length;++h){const f=n[h],p=h+e.length-1;if(p>=0){const m=a[p],y=m[m.length-1]-f[c];for(let g=c;g<d;++g)a[p].push(f[g+1]+y)}c=f[c],d=f[d]}d!==c&&(s.push([c,d]),i+=d-c)}return{outSplits:a,valueSlices:s,numValues:i}}function Q9e(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,s=Bn("int32",r);e.push(s),t[n].forEach((i,o)=>s[o]=i)}return e}function JO(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function Z9e(t,e,n,r,s,i){const o=JO(e,2)[1],a=JO(i,2)[1];let l=0;for(const u of n)for(let c=u[0];c<u[1];++c){for(let d=0;d<r;++d)s[l*a+d]=t[c*o+d];++l}}function J9e(t,e,n,r,s){const i=e.slice();i[0]=s;const o=Bn(n,re(i)),a=t.length,l=a===0?0:a/e[0];return Z9e(t,e,r,l,o,i),[o,i]}function FV(t,e,n,r,s,i,o,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(q9e(i,o,l),r.length===0)throw new Error("params.rank must be nonzero");const u=r[0],{outSplits:c,valueSlices:d,numValues:h}=Y9e(i,o,t,u),f=Q9e(c),p=J9e(n,r,s,d,h);return[f,p[0],p[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e8=2147483647;function OV(t,e,n,r,s,i,o){if(e.length>1)throw new Error("starts must be a scalar or vector");if(s.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const a=e.length===0,l=s.length===0,u=o.length===0,c=[];a||c.push(e[0]),l||c.push(s[0]),u||c.push(o[0]);for(let y=1;y<c.length;++y)if(c[y]!==c[y-1])throw new Error("starts, limits, and deltas must have the same shape");const d=c.length===0?1:c[0],h=Bn("int32",d+1);h[0]=0;for(let y=0;y<d;++y){const g=a?t[0]:t[y],v=l?r[0]:r[y],E=u?i[0]:i[y];if(E===0)throw new Error("Requires delta != 0");let b;if(E>0&&v<g||E<0&&v>g)b=0;else if(b=Math.ceil(Math.abs((v-g)/E)),b>e8)throw new Error(`Requires ((limit - start) / delta) <= ${e8}`);h[y+1]=h[y]+b}const f=h[d],p=Bn(n,f);let m=0;for(let y=0;y<d;++y){const g=h[y+1]-h[y];let v=a?t[0]:t[y];const E=u?i[0]:i[y];for(let b=0;b<g;++b)p[m++]=v,v+=E}return[h,p]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Zi=Xo;class qE{constructor(e,n,r,s,i,o,a,l,u,c){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=s,this.valuesDType=i,this.defaultValue=o,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=u,this.rowPartitionTypes=mH(c),this.raggedRank=gH(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===Zi.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===Zi.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case Zi.VALUE_ROWIDS:return qE.getMaxWidthValueRowID(n);case Zi.ROW_SPLITS:return qE.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${Zi[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let s=0;s<n-1;++s){const i=e[s+1]-e[s];i>r&&(r=i)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,s=e[0],i=0;for(let o=1;o<n;++o){const a=e[o];a!==s&&(s=a,i=Math.max(o-r,i),r=o)}return Math.max(n-r,i)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return n8(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;yH(r,n);const s=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=pH(this.raggedRank,s,n);o[0]<0&&(o[0]=e);for(let a=1;a<=this.raggedRank;++a)o[a]<0&&(o[a]=this.getMaxWidth(a));return o}calculateFirstParentOutputIndex(e,n,r){const s=Math.min(e,r),i=[];let o=0;for(let a=0;a<s;++a,o+=n)i.push(o);for(let a=s;a<e;++a)i.push(-1);return D(i.length===e,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(e,n,r,s){const i=e.length,o=[];for(let a=0;a<i-1;++a){const l=e[a+1]-e[a];let u=Math.min(s,l),c=n[a];c===-1&&(u=0);for(let d=0;d<u;++d)o.push(c),c+=r;for(let d=0;d<l-u;++d)o.push(-1)}if(i>0&&o.length!==e[i-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,n,r,s){const i=e.length,o=[];if(i===0)return[];let a=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let u=n[l];o.push(u);for(let c=1;c<i;++c){const d=e[c];if(d===l)u>=0&&(++a,a<s?u+=r:u=-1);else{if(a=0,l=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);u=n[d]}o.push(u)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,n,r,s){const i=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case Zi.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,n,r,s);case Zi.ROW_SPLITS:if(i.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(i,n,r,s);default:throw new Error(`Unsupported partition type: ${Zi[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case Zi.FIRST_DIM_SIZE:return e[0];case Zi.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Zi.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Zi[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),s=new Array(this.raggedRank+1);s[s.length-1]=1;for(let l=s.length-2;l>=0;--l)s[l]=s[l+1]*r[l+1];const i=n8(r,!1),o=Bn(this.valuesDType,re(i));if(s[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,s[0],r[0]);for(let u=1;u<=this.raggedRank;++u)l=this.calculateOutputIndex(u-1,l,s[u],r[u]);this.setOutput(this.raggedRank,l,o,i)}return[i,o]}setOutput(e,n,r,s){if(r.length===0)return;const i=this.values,o=r;let a=s.slice();a=a.slice(e+1);const l=re(a),u=n.length;let c=this.defaultValue;if(c.length!==l&&c.length!==1){const p=this.defaultValueShape;J(()=>{const m=Q(c,p);c=pd(m,a).dataSync()})}let d=0,h=0,f=0;for(let p=0;p<=u;++p){let m=p<u?n[p]:-1;if(m===f){++f;continue}if(h<f){const y=i.subarray(d*l),g=o.subarray(h*l),v=(f-h)*l;t8(g,y,v)}if(p>=u){const y=r.length;m=Math.floor(y/l)}if(m>f)if(this.defaultValue.length===1)o.subarray(f*l,m*l).fill(this.defaultValue[0]),f=m;else for(;m>f;){const y=o.slice(f*l);t8(y,c,l),++f}m<0?(d=p+1,h=f):(d=p,h=f,f=h+1)}}}function t8(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function n8(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function $V(t,e,n,r,s,i,o,a,l,u){return new qE(t,e,n,r,s,i,o,a,l,u).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LV(t,e,n,r){const s=t===e,i=t<e&&n<0,o=e<t&&n>1;if(s||i||o)return zr(0,r);const a=Math.abs(Math.ceil((e-t)/n)),l=zr(a,r);e<t&&n===1&&(n=-1),l[0]=t;for(let u=1;u<l.length;u++)l[u]=l[u-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PV=ll(t=>1/Math.sqrt(t)),eAe=Sc(Hp,PV),tAe={kernelName:Hp,backendName:"cpu",kernelFunc:eAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ad(t,e,n,r,s,i,o,a,l,u){const c=[r/s,s],d=t.values,h=e.values;if(r===0)return ct(n,e.dtype);const f=l instanceof rr?l:ct(c,e.dtype);typeof l=="string"||typeof l=="number"?f.values.fill(l):typeof l=="boolean"&&f.values.fill(+l);for(let p=0;p<i;p++){const m=[];let y=0;for(let g=0;g<o;g++){const v=d[p*o+g];m.push(v),y+=v*a[g]}if(y<0||y>=r/s)throw new Error(`Invalid indices: ${m} does not index into ${n}`);for(let g=0;g<s;g++)u?f.values[y*s+g]+=h[p*s+g]:f.values[y*s+g]=e.rank===0?h[0]:h[p*s+g]}return f}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nAe=ll(t=>1/(1+Math.exp(-t))),MV=Gt(jp,t=>1/(1+Math.exp(-t))),rAe={kernelName:jp,backendName:"cpu",kernelFunc:MV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BV(t,e,n,r,s){const i=AA(r,e,n),o=re(n),a=Ue(r);if(i){const d=DA(e,a);return s==="string"?t.slice(d,d+o):t.subarray(d,d+o)}const l=s==="string"?Gl(t):t,u=ct(r,s,l),c=ct(n,s);for(let d=0;d<c.size;++d){const h=c.indexToLoc(d),f=h.map((p,m)=>p+e[m]);c.set(u.get(...f),...h)}return s==="string"?PH(c.values):c.values}function zd(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,size:o}=r;Me(s,"slice");const[a,l]=KC(s,i,o);IA(s,a,l);const u=n.data.get(s.dataId).values,c=BV(u,a,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,c)}const sAe={kernelName:ey,backendName:"cpu",kernelFunc:zd};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zV(t,e,n,r,s,i,o){const a=e[0],l=i[0],u=new Array(l),c=new Array(a),d=e[1];if(l===0){if(a!==0)throw new Error(SH(a));const y=Bn(n,0),g=Bn(s,0);return[y,[0,d],g,u,c]}let h=!0,f=0;const p=new Array(l).fill(0);for(let y=0;y<a;++y){const g=t[y*d];if(g<0)throw new Error(wH(y,g));if(g>=l)throw new Error(_H(y,g,l));++p[g],h=h&&g>=f,f=g}let m=!0;for(let y=0;y<l;++y){const g=p[y]===0;u[y]=g,m=m&&!g,p[y]=Math.max(p[y],1),y>0&&(p[y]+=p[y-1])}if(m&&h){const y=t,g=r;for(let v=0;v<a;++v)c[v]=v;return[y,[a,d],g,u,c]}else{const y=p[l-1],g=Bn(n,y*d),v=Bn(s,y),E=new Array(l).fill(0);for(let b=0;b<a;++b){const T=t[b*d],x=E[T],C=(T===0?0:p[T-1])+x;E[T]++;for(let S=0;S<d;++S)g[C*d+S]=t[b*d+S];v[C]=r[b],c[b]=C}for(let b=0;b<l;++b)if(E[b]===0){const x=b===0?0:p[b-1];g[x*d+0]=b;for(let C=1;C<d;++C)g[x*d+C]=0;v[x]=o}return[g,[y,d],v,u,c]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HV(t,e,n,r,s){const i=re(r),o=e[0],a=s.length,l=[];let u=1,c=-1;for(let y=0;y<a;++y){const g=s[y];if(g===-1){if(c!==-1)throw new Error(kH(c,y));c=y,l.push(1)}else{if(g<0)throw new Error(IH(y,g));u*=g,l.push(g)}}if(c!==-1){if(u<=0)throw new Error(NH());const y=Math.trunc(i/u);if(u*y!==i)throw new Error(AH(r,l));l[c]=y}if(re(l)!==i)throw new Error(DH(r,l));const h=r.length,f=[];if(h>0){f[h-1]=1;for(let y=h-2;y>=0;--y)f[y]=f[y+1]*r[y+1]}const p=[];if(a>0){p[a-1]=1;for(let y=a-2;y>=0;--y)p[y]=p[y+1]*l[y+1]}const m=Bn(n,o*a);for(let y=0;y<o;++y){let g=0;for(let v=0;v<h;++v)g+=t[y*h+v]*f[v];for(let v=0;v<a;++v)m[y*a+v]=Math.trunc(g/p[v]),g%=p[v]}return[m,[o,a],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I5(t,e,n,r,s,i=!1,o=0){const a=r.length,l=[e[0],t.length/e[0]],u=l[1],d=a>0?s[a-1]+1:0;if(d<0)throw new Error(Ck());const h=e.slice();h[0]=d;const f=h.reduce((E,b)=>E*b,1),p=Bn(n,f);if(a===0)return d>0&&p.fill(o),[p,h];if(d<=0)throw new Error(Ck());let m=0,y=1,g=0,v=s[m];for(;;){let E=0;if(y<a){if(E=s[y],v===E){++y;continue}if(v>=E)throw new Error(RH())}if(v<0||v>=d)throw new Error(FH(v,d));v>g&&p.fill(o,g*u,v*u);for(let b=m;b<y;++b){const T=r[b];if(T<0||T>=l[0])throw new Error(OH(b,r[b],l[0]));for(let x=0;x<u;x++)p[v*u+x]+=t[T*u+x]}if(i)for(let b=0;b<u;b++)p[v*u+b]/=y-m;if(m=y,++y,g=v+1,v=E,y>a)break}return g<d&&p.fill(o,g*u,d*u),[p,h]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iAe=ll(t=>Math.sqrt(t)),oAe=Gt(qp,t=>Math.sqrt(t)),aAe={kernelName:qp,backendName:"cpu",kernelFunc:oAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UV=Qn((t,e)=>{const n=t-e;return n*n}),lAe=fr(Xp,UV),uAe={kernelName:Xp,backendName:"cpu",kernelFunc:lAe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WV=ll((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:s}=e;return t.replace(new RegExp(n,r?"g":""),s)}),cAe=Sc(iy,WV),dAe={kernelName:iy,backendName:"cpu",kernelFunc:cAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VV(t,e,n,r){const s=ct(t,e.dtype);for(let i=0;i<s.size;i++){const o=s.indexToLoc(i),a=new Array(o.length);for(let l=0;l<a.length;l++)a[l]=o[l]*n[l]+r[l];s.set(e.get(...a),...o)}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hAe{constructor(e,n,r,s,i,o){this.separator=Va(e),this.nGramWidths=n,this.leftPad=Va(r),this.rightPad=Va(s),this.padWidth=i,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,s,i,o){for(let a=0;a<i;++a){const l=this.getPadWidth(o),u=Math.max(0,l-a),c=Math.max(0,l-(i-(a+1))),d=o-(u+c),h=n+(u>0?0:a-l);let f=0;f+=u*this.leftPad.length;for(let v=0;v<d;++v)f+=e[h+v].length;f+=c*this.rightPad.length;const p=u+c+d-1;f+=p*this.separator.length,r[s+a]=new Uint8Array(f);const m=r[s+a];let y=0;const g=v=>v.forEach(E=>m[y++]=E);for(let v=0;v<u;++v)g(this.leftPad),g(this.separator);for(let v=0;v<d-1;++v)g(e[h+v]),g(this.separator);if(d>0){g(e[h+d-1]);for(let v=0;v<c;++v)g(this.separator),g(this.rightPad)}else{for(let v=0;v<c-1;++v)g(this.rightPad),g(this.separator);g(this.rightPad)}}}compute(e,n){const r=e.length,s=n.length;if(s>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let u=1;u<s;++u){let c=n[u]>=l;if(c=c&&n[u]<=r,!c)throw new Error(`Invalid split value ${n[u]}, must be in [${l}, ${r}]`);l=n[u]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const i=s-1,o=Bn("int32",s);if(r===0||s===0){const l=new Array(r);for(let u=0;u<=i;++u)o[u]=0;return[l,o]}o[0]=0;for(let l=1;l<=i;++l){const u=n[l]-n[l-1];let c=0;this.nGramWidths.forEach(d=>{c+=this.getNumNGrams(u,d)}),this.preserveShort&&u>0&&c===0&&(c=1),o[l]=o[l-1]+c}const a=new Array(o[i]);for(let l=0;l<i;++l){const u=n[l];let c=o[l];if(this.nGramWidths.forEach(d=>{const h=n[l+1]-n[l],f=this.getNumNGrams(h,d);this.createNGrams(e,u,a,c,f,d),c+=f}),this.preserveShort&&c===o[l]){const d=n[l+1]-n[l];if(d===0)continue;const h=d+2*this.padWidth,f=1;this.createNGrams(e,u,a,c,f,h)}}return[a,o]}}function GV(t,e,n,r,s,i,o,a){return new hAe(n,r,s,i,o,a).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fAe(t,e,n,r){if(!t.length)return;if(e.length===0){for(let i=0;i<t.length;++i)r.push(t.subarray(i,i+1));return}if(e.length===1){const i=e[0];let o=t.indexOf(i);for(;o!==-1;){const a=t.subarray(0,o);(!n||a.length!==0)&&r.push(a),t=t.subarray(o+1),o=t.indexOf(i)}(!n||t.length!==0)&&r.push(t);return}let s=0;for(let i=0;i<t.length+1;i++)if(i===t.length||e.indexOf(t[i])!==-1){const o=t.subarray(s,i);(!n||o.length!==0)&&r.push(o),s=i+1}}function jV(t,e,n){const r=t.length,s=[];let i=0,o=0;const a=new Array(r);for(let h=0;h<r;++h){const f=s.length;fAe(t[h],e,n,s);const p=s.length-f;a[h]=p,i+=p,o=Math.max(o,p)}const l=Bn("int32",i*2),u=new Array(i),c=[r,o];let d=0;for(let h=0;h<r;++h)for(let f=0;f<a[h];++f)l[d*2]=h,l[d*2+1]=f,u[d]=s[d],++d;return[l,u,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KV(t,e){const n=Bn("int32",t.length);for(let r=0;r<t.length;++r)n[r]=wB(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qV=Qn((t,e)=>t-e),pAe=S5((t,e,n,r)=>({real:t-n,imag:e-r})),N5=fr(Yp,qV,pAe),mAe={kernelName:Yp,backendName:"cpu",kernelFunc:N5};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XV(t,e){const n=new Array(t.rank);for(let s=0;s<n.length;s++)n[s]=t.shape[s]*e[s];const r=ct(n,t.dtype);for(let s=0;s<r.values.length;++s){const i=r.indexToLoc(s),o=new Array(t.rank);for(let l=0;l<o.length;l++)o[l]=i[l]%t.shape[l];const a=t.locToIndex(o);r.values[s]=t.values[a]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const om=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function YV(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const a=r-n+1,l=e-n+1,u=Math.log(a),c=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*c*(a-c)/a)*Math.sign(l-a/2),h=Math.max(n,Math.floor(e-l*c/a+d)),f=Math.min(r,Math.floor(e+(a-l)*c/a+d));YV(t,e,h,f)}const s=t[e];let i=n,o=r;for(_l(t,n,e),om(t[r],s)>0&&_l(t,n,r);i<o;){for(_l(t,i,o),i++,o--;om(t[i],s)<0;)i=i+1;for(;om(t[o],s)>0;)o=o-1}om(t[n],s)===0?_l(t,n,o):(o=o+1,_l(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}}function QV(t,e,n,r,s){const i=e[e.length-1],[o,a]=[t.length/i,i],l=xr(n,o*r),u=xr("int32",o*r);for(let d=0;d<o;d++){const h=d*a,f=t.subarray(h,h+a);let p=new Array(f.length);f.forEach((v,E)=>p[E]={value:v,index:E}),r<p.length&&(YV(p,r),p=p.slice(0,r)),s&&p.sort(om);const m=d*r,y=l.subarray(m,m+r),g=u.subarray(m,m+r);for(let v=0;v<r;v++)y[v]=p[v].value,g[v]=p[v].index}const c=e.slice();return c[c.length-1]=r,[ct(c,n,l),ct(c,"int32",u)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZV(t,e,n,r){const s=yt(e,n)[0],i=[1,n[0],1];for(let p=0;p<s;p++)i[0]*=n[p];i[1]=n[s];for(let p=s+1;p<n.length;p++)i[2]*=n[p];const o=new Map,a=new Int32Array(n[s]),l=new rr(i,r,t),u=[],c=i[0]===1&&i[2]===1;for(let p=0;p<n[s];p++){let m;if(c)m=t[p].toString();else{const g=[];for(let v=0;v<i[0];v++)for(let E=0;E<i[2];E++)g.push(l.get(v,p,E));m=g.join(",")}const y=o.get(m);if(y!=null)a[p]=y;else{const g=o.size;o.set(m,g),a[p]=g,u.push(p)}}const d=i.slice();d[1]=o.size;const h=new rr(d,r);u.forEach((p,m)=>{for(let y=0;y<i[0];y++)for(let g=0;g<i[2];g++)h.set(l.get(y,p,g),y,m,g)});const f=n.slice();return f[s]=d[1],{outputValues:h.values,outputShape:f,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gAe=Object.freeze(Object.defineProperty({__proto__:null,addImpl:aV,bincountImpl:w5,bincountReduceImpl:lV,bitwiseAndImpl:uV,castImpl:oV,ceilImpl:cV,concatImpl:dV,equalImpl:hV,expImpl:pV,expm1Impl:gV,floorDivImpl:vV,floorImpl:yV,gatherNdImpl:bV,gatherV2Impl:EV,greaterEqualImpl:xV,greaterImpl:TV,lessEqualImpl:SV,lessImpl:CV,linSpaceImpl:wV,logImpl:_V,maxImpl:kV,maximumImpl:IV,minimumImpl:NV,multiplyImpl:_5,negImpl:AV,notEqualImpl:DV,prodImpl:RV,raggedGatherImpl:FV,raggedRangeImpl:OV,raggedTensorToTensorImpl:$V,rangeImpl:LV,rsqrtImpl:PV,scatterImpl:ad,sigmoidImpl:nAe,simpleAbsImpl:iV,sliceImpl:BV,sparseFillEmptyRowsImpl:zV,sparseReshapeImpl:HV,sparseSegmentReductionImpl:I5,sqrtImpl:iAe,squaredDifferenceImpl:UV,staticRegexReplaceImpl:WV,stridedSliceImpl:VV,stringNGramsImpl:GV,stringSplitImpl:jV,stringToHashBucketFastImpl:KV,subImpl:qV,tileImpl:XV,topKImpl:QV,transposeImpl:k5,uniqueImpl:ZV},Symbol.toStringTag,{value:"Module"}));/** @license See the LICENSE file. *//**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */u9("cpu",()=>new a2,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JV=Gt(bp,t=>t>=0?t:Math.exp(t)-1),yAe={kernelName:bp,backendName:"cpu",kernelFunc:JV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eG(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:i}=r;Me([s],"leakyRelu");const o=re(s.shape),a=n.data.get(s.dataId).values,l=xr("float32",o);for(let u=0;u<a.length;u++)l[u]=a[u]<0?i*a[u]:a[u];return n.makeTensorInfo(s.shape,"float32",l)}const vAe={kernelName:I0,backendName:"cpu",kernelFunc:eG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bAe=Qn((t,e)=>t<0?e*t:t);function tG(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e;Me([r,s],"prelu");const i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,[a,l]=bAe(r.shape,s.shape,i,o,"float32");return n.makeTensorInfo(l,"float32",a)}const EAe={kernelName:K0,backendName:"cpu",kernelFunc:tG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nG=Gt(Mp,t=>Math.max(0,t)),TAe={kernelName:Mp,backendName:"cpu",kernelFunc:nG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rG=Gt(Bp,t=>Math.min(Math.max(0,t),6)),xAe={kernelName:Bp,backendName:"cpu",kernelFunc:rG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XE(t,e,n,r,s){if(n==="linear")return nl({inputs:{x:e},backend:t});if(n==="relu")return nG({inputs:{x:e},backend:t});if(n==="elu")return JV({inputs:{x:e},backend:t});if(n==="relu6")return rG({inputs:{x:e},backend:t});if(n==="prelu")return tG({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return eG({inputs:{x:e},backend:t,attrs:{alpha:s}});if(n==="sigmoid")return MV({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ln(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:i}=r,o=re(s.shape),a=ZN(i,o),l=re(a);D(o===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${s.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),n.incRef(s.dataId);const u=n.data.get(s.dataId);if(u.complexTensorInfos!=null){const c=u.complexTensorInfos.real,d=u.complexTensorInfos.imag;c.shape=a,d.shape=a}return{dataId:s.dataId,shape:a,dtype:s.dtype}}const CAe={kernelName:X0,backendName:"cpu",kernelFunc:ln};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sG(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i}=e,{transposeA:o,transposeB:a}=r;Me([s,i],"matMul");const l=s.shape.length,u=i.shape.length,c=o?s.shape[l-2]:s.shape[l-1],d=a?i.shape[u-1]:i.shape[u-2],h=o?s.shape[l-1]:s.shape[l-2],f=a?i.shape[u-2]:i.shape[u-1],p=s.shape.slice(0,-2),m=i.shape.slice(0,-2),y=re(p),g=re(m),E=it(s.shape.slice(0,-2),i.shape.slice(0,-2)).concat([h,f]);D(c===d,()=>`Error in matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${s.shape} and ${i.shape} and transposeA=${o} and transposeB=${a} must match.`);const b=o?[y,c,h]:[y,h,c],T=a?[g,f,d]:[g,d,f],x=ln({inputs:{x:s},backend:n,attrs:{shape:b}}),C=ln({inputs:{x:i},backend:n,attrs:{shape:T}}),S=o?x.shape[1]:x.shape[2],N=o?x.shape[2]:x.shape[1],I=a?C.shape[1]:C.shape[2],F=Math.max(y,g),L=n.data.get(x.dataId).values,z=n.data.get(C.dataId).values,H=Ue(x.shape),$=Ue(C.shape),[M,j,P]=o?[H[0],1,H[1]]:[H[0],H[1],1],[B,K,A]=a?[1,$[1],$[0]]:[$[1],1,$[0]],O=N*I,se=ct([F,N,I],x.dtype),ae=se.values,de=n.blockSize;for(let le=0;le<F;le++){const ve=le%y,Ne=le%g;for(let _e=0;_e<N;_e+=de){const Se=Math.min(_e+de,N);for(let Fe=0;Fe<I;Fe+=de){const et=Math.min(Fe+de,I);for(let ot=0;ot<S;ot+=de){const dt=Math.min(ot+de,S);for(let at=_e;at<Se;at++)for(let nt=Fe;nt<et;nt++){let me=0;for(let Oe=ot;Oe<dt;Oe++){const Ge=L[ve*M+at*j+Oe*P],Ye=z[Oe*B+nt*K+Ne*A];me+=Ge*Ye}ae[le*O+(at*I+nt)]+=me}}}}}return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(C),n.makeTensorInfo(E,se.dtype,se.values)}const SAe={kernelName:h0,backendName:"cpu",kernelFunc:sG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wAe(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=r;let h,f,p;const m=[];h=sG({inputs:{a:s,b:i},attrs:{transposeA:l,transposeB:u},backend:n}),o&&(f=zf({inputs:{a:h,b:o},backend:n}),m.push(h),h=f),c&&(p=XE(n,h,c,a,d),m.push(h),h=p);for(const g of m)n.disposeIntermediateTensorInfo(g);return h}const _Ae={kernelName:hg,backendName:"cpu",kernelFunc:wAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kAe=Gt(op,t=>Math.acos(t)),IAe={kernelName:op,backendName:"cpu",kernelFunc:kAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NAe=Gt(ap,t=>Math.acosh(t)),AAe={kernelName:ap,backendName:"cpu",kernelFunc:NAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DAe(t){const{inputs:e,backend:n}=t,r=e;Me(e,"addN");const s=r.map(a=>n.data.get(a.dataId).values),i=ct(r[0].shape,r[0].dtype),o=i.values;for(let a=0;a<r.length;a++){const l=s[a];for(let u=0;u<o.length;u++)o[u]+=l[u]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}const RAe={kernelName:a0,backendName:"cpu",kernelFunc:DAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;Me(s,"all");const a=yt(i,s.shape);let l=a;const u=$n(l,s.shape.length);let c=s;u!=null&&(c=Vs({inputs:{x:s},backend:n,attrs:{perm:u}}),l=Xn(l.length,s.shape.length)),Wr("all",l,c.shape.length);const[d,h]=Ir(c.shape,l),f=re(h),p=zr(re(d),c.dtype),m=n.data.get(c.dataId).values;for(let g=0;g<p.length;++g){const v=g*f;let E=m[v];for(let b=0;b<f;++b){const T=m[v+b];E=E&&T}p[g]=E}u!=null&&n.disposeIntermediateTensorInfo(c);const y=n.makeTensorInfo(d,c.dtype,p);if(o){const g=Kn(d,a),v=ln({inputs:{x:y},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(y),v}return y}const OAe={kernelName:nx,backendName:"cpu",kernelFunc:FAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Ae(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;Me(s,"any");const a=yt(i,s.shape);let l=a;const u=$n(l,s.shape.length);let c=s;u!=null&&(c=Vs({inputs:{x:s},backend:n,attrs:{perm:u}}),l=Xn(l.length,s.shape.length)),Wr("any",l,c.shape.length);const[d,h]=Ir(c.shape,l),f=re(h),p=zr(re(d),c.dtype),m=n.data.get(c.dataId).values;for(let g=0;g<p.length;++g){const v=g*f;let E=m[v];for(let b=0;b<f;++b){const T=m[v+b];E=E||T}p[g]=E}u!=null&&n.disposeIntermediateTensorInfo(c);const y=n.makeTensorInfo(d,c.dtype,p);if(o){const g=Kn(d,a),v=ln({inputs:{x:y},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(y),v}return y}const LAe={kernelName:rx,backendName:"cpu",kernelFunc:$Ae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;Me(s,"argMax");let o=yt(i,s.shape);const a=$n(o,s.shape.length);let l=s;const u=[];a!=null&&(l=Vs({inputs:{x:s},backend:n,attrs:{perm:a}}),u.push(l),o=Xn(o.length,l.shape.length)),o=[o[0]],Wr("argMax",o,l.shape.length);const[c,d]=Ir(l.shape,o),h=re(c),f=zr(h,"int32"),p=re(d),m=n.data.get(l.dataId).values;for(let y=0;y<f.length;++y){const g=y*p;let v=m[g],E=0;for(let b=0;b<p;++b){const T=m[g+b];T>v&&(v=T,E=b)}f[y]=E}return u.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(c,"int32",f)}const MAe={kernelName:l0,backendName:"cpu",kernelFunc:PAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;Me(s,"argMin");let o=yt(i,s.shape);const a=$n(o,s.shape.length);let l=s;const u=[];a!=null&&(l=Vs({inputs:{x:s},backend:n,attrs:{perm:a}}),u.push(l),o=Xn(o.length,l.shape.length)),o=[o[0]],Wr("argMin",o,l.shape.length);const[c,d]=Ir(l.shape,o),h=re(c),f=zr(h,"int32"),p=re(d),m=n.data.get(l.dataId).values;for(let y=0;y<f.length;++y){const g=y*p;let v=m[g],E=0;for(let b=0;b<p;++b){const T=m[g+b];T<v&&(v=T,E=b)}f[y]=E}return u.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(c,"int32",f)}const zAe={kernelName:u0,backendName:"cpu",kernelFunc:BAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HAe=Gt(lp,t=>Math.asin(t)),UAe={kernelName:lp,backendName:"cpu",kernelFunc:HAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WAe=Gt(up,t=>Math.asinh(t)),VAe={kernelName:up,backendName:"cpu",kernelFunc:WAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GAe=Gt(cp,t=>Math.atan(t)),jAe={kernelName:cp,backendName:"cpu",kernelFunc:GAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KAe=Qn((t,e)=>Math.atan2(t,e)),qAe=fr(hp,KAe),XAe={kernelName:hp,backendName:"cpu",kernelFunc:qAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YAe=Gt(dp,t=>Math.atanh(t)),QAe={kernelName:dp,backendName:"cpu",kernelFunc:YAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A5(t,e,n,r,s,i){const o=s.strideHeight,a=s.strideWidth,l=s.dilationHeight,u=s.dilationWidth,c=s.effectiveFilterHeight,d=s.effectiveFilterWidth,h=s.padInfo.top,f=s.padInfo.left,p=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=ct(s.outShape,n),y=m.values,g=s.outShape[1]*s.outShape[2]*s.outShape[3],v=s.outShape[2]*s.outShape[3],E=s.outShape[3];for(let b=0;b<s.batchSize;++b){const T=b*g,x=b*r[0];for(let C=0;C<s.inChannels;++C)for(let S=0;S<s.outHeight;++S){const N=S*o-h,I=Math.max(0,N),F=Math.min(s.inHeight,c+N),L=T+S*v;for(let z=0;z<s.outWidth;++z){const H=z*a-f,$=Math.max(0,H),M=Math.min(s.inWidth,d+H);let j=p,P=0,B=0;for(let A=I;A<F;A+=l){const O=x+A*r[1];for(let se=$;se<M;se+=u){const ae=O+se*r[2],de=t[ae+C];i==="max"&&de>j?j=de:i==="avg"&&(P+=de,B++)}if(isNaN(j))break}const K=L+z*E+C;y[K]=i==="avg"?P/B:j}}}return m}function iG(t,e,n,r,s=!1,i=!1){const o=ct(r.outShape,"int32"),a=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,f=r.padInfo.top,p=r.padInfo.left,m=ct(e,n,t);for(let y=0;y<r.batchSize;++y)for(let g=0;g<r.inChannels;++g)for(let v=0;v<r.outHeight;++v){const E=v*a-f;let b=E;for(;b<0;)b+=u;const T=Math.min(r.inHeight,d+E);for(let x=0;x<r.outWidth;++x){const C=x*l-p;let S=C;for(;S<0;)S+=c;const N=Math.min(r.inWidth,h+C);let I=Number.NEGATIVE_INFINITY,F=-1;for(let L=b;L<T;L+=u){const z=L-E;for(let H=S;H<N;H+=c){const $=H-C,M=m.get(y,L,H,g);M>I&&(I=M,s?F=i?((y*r.inHeight+L)*r.inWidth+H)*r.inChannels+g:(L*r.inWidth+H)*r.inChannels+g:F=z*h+$)}}o.set(F,y,v,x,g)}}return o}function oG(t,e,n,r,s,i){const o=s.strideDepth,a=s.strideHeight,l=s.strideWidth,u=s.dilationDepth,c=s.dilationHeight,d=s.dilationWidth,h=s.effectiveFilterDepth,f=s.effectiveFilterHeight,p=s.effectiveFilterWidth,m=s.padInfo.front,y=s.padInfo.top,g=s.padInfo.left,v=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,E=ct(s.outShape,n),b=E.values,T=s.outShape[1]*s.outShape[2]*s.outShape[3]*s.outShape[4],x=s.outShape[2]*s.outShape[3]*s.outShape[4],C=s.outShape[3]*s.outShape[4],S=s.outShape[4];for(let N=0;N<s.batchSize;++N){const I=N*T,F=N*r[0];for(let L=0;L<s.inChannels;++L)for(let z=0;z<s.outDepth;++z){const H=z*o-m;let $=H;for(;$<0;)$+=u;const M=Math.min(s.inDepth,h+H),j=I+z*x;for(let P=0;P<s.outHeight;++P){const B=P*a-y;let K=B;for(;K<0;)K+=c;const A=Math.min(s.inHeight,f+B),O=j+P*C;for(let se=0;se<s.outWidth;++se){const ae=se*l-g;let de=ae;for(;de<0;)de+=d;const le=Math.min(s.inWidth,p+ae),ve=O+se*S;let Ne=v,_e=0,Se=0;for(let et=$;et<M;et+=u){const ot=F+et*r[1];for(let dt=K;dt<A;dt+=c){const at=ot+dt*r[2];for(let nt=de;nt<le;nt+=d){const me=at+nt*r[3],Oe=t[me+L];if(i==="max"&&Oe>Ne?Ne=Oe:i==="avg"&&(_e+=Oe,Se++),isNaN(Ne))break}if(isNaN(Ne))break}if(isNaN(Ne))break}const Fe=ve+L;b[Fe]=i==="avg"?_e/Math.max(Se,1):Ne}}}}return E}function ZAe(t,e){const n=ct(e.outShape,"int32"),r=e.strideDepth,s=e.strideHeight,i=e.strideWidth,o=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,u=e.effectiveFilterDepth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=e.padInfo.front,f=e.padInfo.top,p=e.padInfo.left;for(let m=0;m<e.batchSize;++m)for(let y=0;y<e.inChannels;++y)for(let g=0;g<e.outDepth;++g){const v=g*r-h;let E=v;for(;E<0;)E+=o;const b=Math.min(e.inDepth,u+v);for(let T=0;T<e.outHeight;++T){const x=T*s-f;let C=x;for(;C<0;)C+=a;const S=Math.min(e.inHeight,c+x);for(let N=0;N<e.outWidth;++N){const I=N*i-p;let F=I;for(;F<0;)F+=l;const L=Math.min(e.inWidth,d+I);let z=Number.NEGATIVE_INFINITY,H=-1;for(let $=E;$<b;$+=o){const M=$-v;for(let j=C;j<S;j+=a){const P=j-x;for(let B=F;B<L;B+=l){const K=B-I,A=t.get(m,$,j,B,y);A>=z&&(z=A,H=M*c*d+P*c+K)}}}n.set(H,m,g,T,N,y)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;Me(s,"avgPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,u=1;D(Ur(o,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=Io(s.shape,i,o,u,a,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&Et(c.inShape,c.outShape))d=nl({inputs:{x:s},backend:n});else{const h=n.data.get(s.dataId).values,f=Ue(s.shape),p=A5(h,s.shape,s.dtype,f,c,"avg");d=n.makeTensorInfo(c.outShape,s.dtype,p.values)}return d}const e5e={kernelName:c0,backendName:"cpu",kernelFunc:JAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l,dataFormat:u}=r;Me(s,"avgPool3d");const c=tu(s.shape,i,o,1,a,l,u),d=n.data.get(s.dataId).values,h=oG(d,s.shape,s.dtype,Ue(s.shape),c,"avg");return n.makeTensorInfo(h.shape,"float32",h.values)}const n5e={kernelName:d0,backendName:"cpu",kernelFunc:t5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r5e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:u}=r;Me([s,i],"avgPool3DGrad");const c=tu(i.shape,o,a,1,l,u),d=c.strideDepth,h=c.strideHeight,f=c.strideWidth,p=c.filterDepth,m=c.filterHeight,y=c.filterWidth,g=c.dilationDepth,v=c.dilationHeight,E=c.dilationWidth,b=c.effectiveFilterDepth,T=c.effectiveFilterHeight,x=c.effectiveFilterWidth,C=b-1-c.padInfo.front,S=x-1-c.padInfo.left,N=T-1-c.padInfo.top,I=ct(i.shape,"float32"),F=1/(p*m*y),L=n.bufferSync(s);for(let z=0;z<c.batchSize;++z)for(let H=0;H<c.inChannels;++H)for(let $=0;$<c.inDepth;++$)for(let M=0;M<c.inHeight;++M)for(let j=0;j<c.inWidth;++j){const P=$-C,B=M-N,K=j-S;let A=0;for(let O=0;O<b;O+=g){const se=(P+O)/d;if(!(se<0||se>=c.outDepth||Math.floor(se)!==se))for(let ae=0;ae<T;ae+=v){const de=(B+ae)/h;if(!(de<0||de>=c.outHeight||Math.floor(de)!==de))for(let le=0;le<x;le+=E){const ve=(K+le)/f;if(ve<0||ve>=c.outWidth||Math.floor(ve)!==ve)continue;const Ne=L.get(z,se,de,ve,H);A+=Ne}}}I.set(A*F,z,$,M,j,H)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const s5e={kernelName:ix,backendName:"cpu",kernelFunc:r5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i5e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i;Me([s,i],"avgPoolGrad");const{filterSize:a,strides:l,pad:u}=r,c=Io(o.shape,a,l,1,u),d=c.strideHeight,h=c.strideWidth,f=c.filterHeight,p=c.filterWidth,m=c.dilationHeight,y=c.dilationWidth,g=c.effectiveFilterHeight,v=c.effectiveFilterWidth,E=v-1-c.padInfo.left,b=g-1-c.padInfo.top,T=ct(o.shape,"float32"),x=1/(f*p),C=n.data.get(s.dataId).values,S=ct(s.shape,"float32",C);for(let N=0;N<c.batchSize;++N)for(let I=0;I<c.inChannels;++I)for(let F=0;F<c.inHeight;++F)for(let L=0;L<c.inWidth;++L){const z=F-b,H=L-E;let $=0;for(let M=0;M<g;M+=m){const j=(z+M)/d;if(!(j<0||j>=c.outHeight||Math.floor(j)!==j))for(let P=0;P<v;P+=y){const B=(H+P)/h;if(B<0||B>=c.outWidth||Math.floor(B)!==B)continue;const K=S.get(N,j,B,I);$+=K}}T.set($*x,N,F,L,I)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}const o5e={kernelName:sx,backendName:"cpu",kernelFunc:i5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,scale:i,offset:o,mean:a,variance:l}=e;D(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),D(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),D(i==null||a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Me([s,a,l,i,o],"batchNorm");let{varianceEpsilon:u}=r;u==null&&(u=.001);const c=n.data.get(s.dataId).values,d=n.data.get(a.dataId).values,h=n.data.get(l.dataId).values,f=i?n.data.get(i.dataId).values:new Float32Array([1]),p=o?n.data.get(o.dataId).values:new Float32Array([0]),m=new Float32Array(c.length),y=p.length,g=f.length,v=h.length,E=d.length;let b=0,T=0,x=0,C=0;for(let S=0;S<c.length;++S)m[S]=p[b++]+(c[S]-d[T++])*f[x++]/Math.sqrt(h[C++]+u),b>=y&&(b=0),T>=E&&(T=0),x>=g&&(x=0),C>=v&&(C=0);return n.makeTensorInfo(s.shape,s.dtype,m)}const l5e={kernelName:w0,backendName:"cpu",kernelFunc:a5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,crops:o}=r;Me([s],"batchToSpaceND");const a=i.reduce((g,v)=>g*v),l=Ny(s.shape,i,a),u=Ay(l.length,i.length),c=Dy(s.shape,i,a),d=PA(o,i.length),h=MA(c,o,i.length),f=ln({inputs:{x:s},backend:n,attrs:{shape:l}}),p=Vs({inputs:{x:f},backend:n,attrs:{perm:u}}),m=ln({inputs:{x:p},backend:n,attrs:{shape:c}}),y=zd({inputs:{x:m},backend:n,attrs:{begin:d,size:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),y}const c5e={kernelName:f0,backendName:"cpu",kernelFunc:u5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o}=r,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,u=w5(a,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}const h5e={kernelName:ox,backendName:"cpu",kernelFunc:d5e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f5e(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,a=it(Array.from(i),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const p5e={kernelName:ax,backendName:"cpu",kernelFunc:f5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m5e=Gt(mp,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),g5e={kernelName:mp,backendName:"cpu",kernelFunc:m5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y5e=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(re(e.shape)),s=n.data.get(e.dataId),i=s.complexTensorInfos.real,o=s.complexTensorInfos.imag,a=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values;for(let u=0;u<a.length;u++){const c=a[u],d=l[u];r[u]=Math.hypot(c,d)}return n.makeOutput(r,e.shape,"float32")},v5e={kernelName:m0,backendName:"cpu",kernelFunc:y5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hf(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,i)}const b5e={kernelName:kx,backendName:"cpu",kernelFunc:Hf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uf(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,i=yt(s,e[0].shape)[0],o=e.map(m=>m.shape);OA(o,i);let a=ja(e.map(m=>m.shape),i);if(re(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(m=>re(m.shape)>0);if(l.length===1)return nl({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const m=l.map(b=>Bd({inputs:{input:b},backend:n})),y=l.map(b=>Hf({inputs:{input:b},backend:n})),g=Uf({inputs:m,backend:n,attrs:{axis:i}}),v=Uf({inputs:y,backend:n,attrs:{axis:i}}),E=ai({inputs:{real:g,imag:v},backend:n});return m.forEach(b=>n.disposeIntermediateTensorInfo(b)),y.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),E}const u=l.map(m=>{const g=[-1,re(m.shape.slice(i))];return ln({inputs:{x:m},backend:n,attrs:{shape:g}})}),c=u.map(m=>({vals:n.data.get(m.dataId).values,shape:m.shape}));a=ja(u.map(m=>m.shape),1);const d=u[0].shape[0]===1,h=dV(c,a,e[0].dtype,d),f=ja(l.map(m=>m.shape),i),p=n.makeTensorInfo(f,e[0].dtype,h);return u.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const E5e={kernelName:g0,backendName:"cpu",kernelFunc:Uf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aG(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dataFormat:l,dilations:u,dimRoundingMode:c}=r;Me([s,i],"conv2d");const d=nu(l),h=kr(s.shape,i.shape,o,u,a,c,!1,d),f=h.filterHeight,p=h.filterWidth,m=h.dilationHeight,y=h.dilationWidth,g=h.padInfo.left,v=h.padInfo.top,E=h.dataFormat==="channelsLast",b=new rr(h.outShape,s.dtype),T=Ue(s.shape),x=Ue(i.shape),C=T[0],S=E?T[1]:T[2],N=E?T[2]:1,I=E?1:T[1],F=b.strides[0],L=E?b.strides[1]:b.strides[2],z=E?b.strides[2]:1,H=E?1:b.strides[1],$=n.data.get(s.dataId).values,M=n.data.get(i.dataId).values,j=b.values;for(let P=0;P<h.batchSize;++P){const B=P*C,K=P*F;for(let A=0;A<h.outHeight;++A){const O=K+A*L,se=A*h.strideHeight-v;for(let ae=0;ae<f;++ae){const de=se+ae*m;if(de<0||de>=h.inHeight)continue;const le=ae*x[0],ve=B+de*S;for(let Ne=0;Ne<h.outWidth;++Ne){const _e=O+Ne*z,Se=Ne*h.strideWidth-g;for(let Fe=0;Fe<p;++Fe){const et=Se+Fe*y;if(et<0||et>=h.inWidth)continue;const ot=le+Fe*x[1],dt=ve+et*N;let at=ot;for(let nt=0;nt<h.inChannels;++nt){const me=$[dt+nt*I];for(let Oe=0;Oe<h.outChannels;++Oe)j[_e+Oe*H]+=me*M[at+Oe];at+=h.outChannels}}}}}}return n.makeTensorInfo(b.shape,b.dtype,j)}const T5e={kernelName:y0,backendName:"cpu",kernelFunc:aG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:c}=r;Me([s,i],"conv2dBackpropFilter");const d=nu(l),h=kr(s.shape,c,o,1,a,u,!1,d),{strideHeight:f,strideWidth:p,filterHeight:m,filterWidth:y}=h,g=h.dataFormat==="channelsLast",v=new rr(h.filterShape,"float32"),E=h.padInfo.left,b=h.padInfo.top,T=n.data.get(s.dataId).values,x=n.data.get(i.dataId).values,C=new rr(s.shape,s.dtype,T),S=new rr(i.shape,i.dtype,x);for(let N=0;N<m;++N){const I=Math.max(0,Math.ceil((b-N)/f)),F=Math.min(h.outHeight,(h.inHeight+b-N)/f);for(let L=0;L<y;++L){const z=Math.max(0,Math.ceil((E-L)/p)),H=Math.min(h.outWidth,(h.inWidth+E-L)/p);for(let $=0;$<h.inChannels;++$)for(let M=0;M<h.outChannels;++M){let j=0;for(let P=0;P<h.batchSize;++P)for(let B=I;B<F;++B){const K=N+B*f-b;for(let A=z;A<H;++A){const O=L+A*p-E;g?j+=C.get(P,K,O,$)*S.get(P,B,A,M):j+=C.get(P,$,K,O)*S.get(P,M,B,A)}}v.set(j,N,L,$,M)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const C5e={kernelName:ux,backendName:"cpu",kernelFunc:x5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S5e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{inputShape:o,strides:a,pad:l,dataFormat:u,dimRoundingMode:c}=r;Me([s,i],"conv2dBackpropInput");const d=Ue(i.shape),h=Ue(s.shape);let f=nu(u);const p=kr(o,i.shape,a,1,l,c,!1,f),m=new rr(p.inShape,"float32"),y=m.values,g=n.data.get(s.dataId).values,v=n.data.get(i.dataId).values,[E,b,T]=d,{batchSize:x,filterHeight:C,filterWidth:S,inChannels:N,inHeight:I,inWidth:F,outChannels:L,outHeight:z,outWidth:H,strideHeight:$,strideWidth:M}=p;f=p.dataFormat;const j=C-1-p.padInfo.top,P=S-1-p.padInfo.left,B=f==="channelsLast",K=m.strides[0],A=B?m.strides[1]:m.strides[2],O=B?m.strides[2]:1,se=B?1:m.strides[1],ae=h[0],de=B?h[1]:h[2],le=B?h[2]:1,ve=B?1:h[1];for(let Ne=0;Ne<x;++Ne)for(let _e=0;_e<N;++_e)for(let Se=0;Se<I;++Se){const Fe=Se-j,et=Math.max(0,Math.ceil(Fe/$)),ot=Math.min(z,(C+Fe)/$);for(let dt=0;dt<F;++dt){const at=dt-P,nt=Math.max(0,Math.ceil(at/M)),me=Math.min(H,(S+at)/M);let Oe=0;for(let Ye=et;Ye<ot;++Ye){const lt=Ye*$-Fe;for(let ft=nt;ft<me;++ft){const Ve=ft*M-at,dn=ae*Ne+de*Ye+le*ft,Ln=E*(C-1-lt)+b*(S-1-Ve)+T*_e;for(let Nn=0;Nn<L;++Nn){const ne=g[dn+ve*Nn],fe=v[Ln+Nn];Oe+=ne*fe}}}const Ge=K*Ne+A*Se+O*dt+se*_e;y[Ge]=Oe}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const w5e={kernelName:v0,backendName:"cpu",kernelFunc:S5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l}=r;Me([s,i],"conv3d");const u=yc(s.shape,i.shape,o,l,a),{filterDepth:c,filterHeight:d,filterWidth:h,dilationDepth:f,dilationHeight:p,dilationWidth:m,padInfo:y}=u,g=y.front,v=y.left,E=y.top,b=new rr(u.outShape,s.dtype),T=n.data.get(s.dataId).values,x=n.data.get(i.dataId).values,C=b.values,S=Ue(s.shape),N=Ue(i.shape);for(let I=0;I<u.batchSize;++I){const F=I*S[0],L=I*b.strides[0];for(let z=0;z<u.outDepth;++z){const H=L+z*b.strides[1],$=z*u.strideDepth-g;for(let M=0;M<c;++M){const j=$+M*f;if(j<0||j>=u.inDepth)continue;const P=M*N[0],B=F+j*S[1];for(let K=0;K<u.outHeight;++K){const A=H+K*b.strides[2],O=K*u.strideHeight-E;for(let se=0;se<d;++se){const ae=O+se*p;if(ae<0||ae>=u.inHeight)continue;const de=P+se*N[1],le=B+ae*S[2];for(let ve=0;ve<u.outWidth;++ve){const Ne=A+ve*u.outChannels,_e=ve*u.strideWidth-v;for(let Se=0;Se<h;++Se){const Fe=_e+Se*m;if(Fe<0||Fe>=u.inWidth)continue;const et=de+Se*N[2],ot=le+Fe*u.inChannels;let dt=et;for(let at=0;at<u.inChannels;++at){const nt=T[ot+at];for(let me=0;me<u.outChannels;++me)C[Ne+me]+=nt*x[dt+me];dt+=u.outChannels}}}}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const k5e={kernelName:b0,backendName:"cpu",kernelFunc:_5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,filterShape:l}=r;Me([s,i],"conv3dBackpropFilterV2");const u=Ue(s.shape),c=Ue(i.shape),d=yc(s.shape,l,o,1,a),h=d.strideDepth,f=d.strideHeight,p=d.strideWidth,m=d.filterDepth,y=d.filterHeight,g=d.filterWidth,v=new rr(d.filterShape,"float32"),E=v.values,[b,T,x,C]=v.strides,S=n.data.get(i.dataId).values,[N,I,F,L]=c,z=n.data.get(s.dataId).values,[H,$,M,j]=u,P=d.padInfo.front,B=d.padInfo.left,K=d.padInfo.top;for(let A=0;A<m;++A){const O=Math.max(0,Math.ceil((P-A)/h)),se=Math.min(d.outDepth,(d.inDepth+P-A)/h),ae=A*b;for(let de=0;de<y;++de){const le=Math.max(0,Math.ceil((K-de)/f)),ve=Math.min(d.outHeight,(d.inHeight+K-de)/f),Ne=de*T+ae;for(let _e=0;_e<g;++_e){const Se=Math.max(0,Math.ceil((B-_e)/p)),Fe=Math.min(d.outWidth,(d.inWidth+B-_e)/p),et=_e*x+Ne;for(let ot=0;ot<d.inChannels;++ot){const dt=ot*C+et;for(let at=0;at<d.outChannels;++at){let nt=0;for(let me=0;me<d.batchSize;++me){const Oe=me*H,Ge=me*N;for(let Ye=O;Ye<se;++Ye){const ft=(A+Ye*h-P)*$+Oe,Ve=Ye*I+Ge;for(let dn=le;dn<ve;++dn){const Nn=(de+dn*f-K)*M+ft,ne=dn*F+Ve;for(let fe=Se;fe<Fe;++fe){const Qe=(_e+fe*p-B)*j+Nn,ge=fe*L+ne;nt+=z[Qe+ot]*S[ge+at]}}}}E[dt+at]=nt}}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const N5e={kernelName:cx,backendName:"cpu",kernelFunc:I5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A5e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{pad:o,strides:a,inputShape:l}=r;Me([s],"conv3dBackpropInputV2");const u=Ue(s.shape),c=Ue(i.shape),d=yc(l,i.shape,a,1,o),h=new rr(d.inShape,"float32"),f=h.values,[p,m,y,g]=h.strides,v=n.data.get(s.dataId).values,[E,b,T,x]=u,C=n.data.get(i.dataId).values,[S,N,I,F]=c,{batchSize:L,filterDepth:z,filterHeight:H,filterWidth:$,inChannels:M,inDepth:j,inHeight:P,inWidth:B,outChannels:K,outDepth:A,outHeight:O,outWidth:se,strideDepth:ae,strideHeight:de,strideWidth:le}=d,ve=z-1-d.padInfo.front,Ne=H-1-d.padInfo.top,_e=$-1-d.padInfo.left;for(let Se=0;Se<L;++Se)for(let Fe=0;Fe<M;++Fe)for(let et=0;et<j;++et){const ot=et-ve,dt=Math.max(0,Math.ceil(ot/ae)),at=Math.min(A,(z+ot)/ae);for(let nt=0;nt<P;++nt){const me=nt-Ne,Oe=Math.max(0,Math.ceil(me/de)),Ge=Math.min(O,(H+me)/de);for(let Ye=0;Ye<B;++Ye){const lt=Ye-_e,ft=Math.max(0,Math.ceil(lt/le)),Ve=Math.min(se,($+lt)/le);let dn=0;for(let Ln=dt;Ln<at;++Ln){const Nn=Ln*ae-ot;for(let ne=Oe;ne<Ge;++ne){const fe=ne*de-me;for(let De=ft;De<Ve;++De){const Qe=De*le-lt,ge=E*Se+b*Ln+T*ne+x*De,Bt=S*(z-1-Nn)+N*(H-1-fe)+I*($-1-Qe)+F*Fe;for(let Qt=0;Qt<K;++Qt){const vn=v[ge+Qt],pt=C[Bt+Qt];dn+=vn*pt}}}}f[p*Se+m*et+y*nt+g*Ye+Fe]=dn}}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}const D5e={kernelName:dx,backendName:"cpu",kernelFunc:A5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R5e=Gt(gp,t=>Math.cos(t)),F5e={kernelName:gp,backendName:"cpu",kernelFunc:R5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O5e=Gt(yp,t=>Math.cosh(t)),$5e={kernelName:yp,backendName:"cpu",kernelFunc:O5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L5e(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:i,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:u}=r,[c,d,h,f]=s.shape,p=i.shape[0],[m,y]=a,g=ct([p,m,y,f],"float32"),v=n.data.get(i.dataId).values,E=n.data.get(o.dataId).values,b=n.data.get(s.dataId).values,T=Ue(s.shape),x=Ue(g.shape);for(let C=0;C<p;C++){const S=C*4,N=v[S],I=v[S+1],F=v[S+2],L=v[S+3],z=E[C];if(z>=c)continue;const H=m>1?(F-N)*(d-1)/(m-1):0,$=y>1?(L-I)*(h-1)/(y-1):0;for(let M=0;M<m;M++){const j=m>1?N*(d-1)+M*H:.5*(N+F)*(d-1);if(j<0||j>d-1){for(let P=0;P<y;P++)for(let B=0;B<f;B++){const K=B+P*x[2]+M*x[1]+C*x[0];g.values[K]=u}continue}if(l==="bilinear"){const P=Math.floor(j),B=Math.ceil(j),K=j-P;for(let A=0;A<y;A++){const O=y>1?I*(h-1)+A*$:.5*(I+L)*(h-1);if(O<0||O>h-1){for(let le=0;le<f;le++){const ve=le+A*x[2]+M*x[1]+C*x[0];g.values[ve]=u}continue}const se=Math.floor(O),ae=Math.ceil(O),de=O-se;for(let le=0;le<f;le++){let ve=le+se*T[2]+P*T[1]+z*T[0];const Ne=b[ve];ve=le+ae*T[2]+P*T[1]+z*T[0];const _e=b[ve];ve=le+se*T[2]+B*T[1]+z*T[0];const Se=b[ve];ve=le+ae*T[2]+B*T[1]+z*T[0];const Fe=b[ve],et=Ne+(_e-Ne)*de,ot=Se+(Fe-Se)*de;ve=le+A*x[2]+M*x[1]+C*x[0],g.values[ve]=et+(ot-et)*K}}}else for(let P=0;P<y;++P){const B=y>1?I*(h-1)+P*$:.5*(I+L)*(h-1);if(B<0||B>h-1){for(let O=0;O<f;O++){const se=O+P*x[2]+M*x[1]+C*x[0];g.values[se]=u}continue}const K=Math.round(B),A=Math.round(j);for(let O=0;O<f;O++){const se=O+K*T[2]+A*T[1]+z*T[0],ae=O+P*x[2]+M*x[1]+C*x[0];g.values[ae]=b[se]}}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const P5e={kernelName:fx,backendName:"cpu",kernelFunc:L5e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;Me(s,"cumprod");const l=$n([i],s.shape.length);let u=s;l!=null&&(u=Vs({inputs:{x:s},backend:n,attrs:{perm:l}}));const c=Xn(1,s.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=Bs(u.dtype,"int32"),h=tx(re(u.shape),d),f=n.data.get(u.dataId).values,p=u.shape[u.shape.length-1],m=a?(g,v)=>g+p-v-1:(g,v)=>g+v;for(let g=0;g<f.length;g+=p)for(let v=0;v<p;v++){const E=m(g,v);if(v===0)h[E]=o?1:f[E];else{const b=m(g,v-1);h[E]=o?f[b]*h[b]:f[E]*h[b]}}const y=n.makeTensorInfo(u.shape,d,h);if(l!=null){const g=vc(l),v=Vs({inputs:{x:y},backend:n,attrs:{perm:g}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(u),v}return y}const B5e={kernelName:hx,backendName:"cpu",kernelFunc:M5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;Me(s,"cumsum");const l=$n([i],s.shape.length);let u=s;l!=null&&(u=Vs({inputs:{x:s},backend:n,attrs:{perm:l}}));const c=Xn(1,s.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=Bs(u.dtype,"int32"),h=zr(re(u.shape),d),f=n.data.get(u.dataId).values,p=u.shape[u.shape.length-1],m=a?(g,v)=>g+p-v-1:(g,v)=>g+v;for(let g=0;g<f.length;g+=p)for(let v=0;v<p;v++){const E=m(g,v);if(v===0)h[E]=o?0:f[E];else{const b=m(g,v-1);h[E]=o?f[b]+h[b]:f[E]+h[b]}}const y=n.makeTensorInfo(u.shape,d,h);if(l!=null){const g=vc(l),v=Vs({inputs:{x:y},backend:n,attrs:{perm:g}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(u),v}return y}const H5e={kernelName:E0,backendName:"cpu",kernelFunc:z5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o,binaryOutput:a}=r;if(s.shape.length===1){const l=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values,c=w5(l,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}else if(s.shape.length===2){const l=n.bufferSync(s),u=n.bufferSync(i),c=lV(l,u,o,a);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const W5e={kernelName:px,backendName:"cpu",kernelFunc:U5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:i,dataFormat:o}=r;D(o==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const a=s.shape[0],l=s.shape[1],u=s.shape[2],c=s.shape[3],d=l*i,h=u*i,f=c/(i*i),p=n.data.get(s.dataId).values,m=new Float32Array(a*d*h*f);let y=0;for(let g=0;g<a;++g)for(let v=0;v<d;++v){const E=Math.floor(v/i),b=v%i;for(let T=0;T<h;++T){const x=Math.floor(T/i),C=T%i,S=(b*i+C)*f;for(let N=0;N<f;++N){const F=N+S+c*(x+u*(E+l*g));m[y++]=p[F]}}}return n.makeTensorInfo([a,d,h,f],s.dtype,m)}const G5e={kernelName:mx,backendName:"cpu",kernelFunc:V5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lG(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:u}=r;Me([s,i],"depthwiseConv2DNative");const c=Ue(s.shape),d=Ue(i.shape);let h=l;h==null&&(h=[1,1]),D(Ur(o,h),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${h}'`);const f=kr(s.shape,i.shape,o,h,a,u,!0),{filterHeight:p,filterWidth:m,dilationHeight:y,dilationWidth:g,padInfo:v}=f,E=v.left,b=v.top,T=f.outChannels/f.inChannels,x=new rr(f.outShape,s.dtype),C=n.data.get(s.dataId).values,S=n.data.get(i.dataId).values,N=x.values;for(let I=0;I<f.batchSize;++I){const F=I*c[0],L=I*x.strides[0];for(let z=0;z<f.outHeight;++z){const H=L+z*x.strides[1],$=z*f.strideHeight-b;for(let M=0;M<p;++M){const j=$+M*y;if(j<0||j>=f.inHeight)continue;const P=M*d[0],B=F+j*c[1];for(let K=0;K<f.outWidth;++K){const A=H+K*x.strides[2],O=K*f.strideWidth-E;for(let se=0;se<m;++se){const ae=O+se*g;if(ae<0||ae>=f.inWidth)continue;const de=P+se*d[1],le=B+ae*f.inChannels;let ve=A,Ne=de;for(let _e=0;_e<f.inChannels;++_e){const Se=C[le+_e];for(let Fe=0;Fe<T;++Fe)N[ve+Fe]+=Se*S[Ne+Fe];ve+=T,Ne+=T}}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const j5e={kernelName:T0,backendName:"cpu",kernelFunc:lG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K5e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:u,filterShape:c}=r;Me([s,i],"depthwiseConv2dNativeBackpropFilter");const d=kr(s.shape,c,o,a,l,u,!0),{strideHeight:h,strideWidth:f,filterHeight:p,filterWidth:m}=d,y=new rr(d.filterShape,"float32"),g=d.padInfo.left,v=d.padInfo.top,E=d.outChannels/d.inChannels,b=n.data.get(s.dataId).values,T=new rr(s.shape,s.dtype,b),x=n.data.get(i.dataId).values,C=new rr(i.shape,i.dtype,x);for(let S=0;S<p;++S){const N=Math.max(0,Math.ceil((v-S)/h)),I=Math.min(d.outHeight,(d.inHeight+v-S)/h);for(let F=0;F<m;++F){const L=Math.max(0,Math.ceil((g-F)/f)),z=Math.min(d.outWidth,(d.inWidth+g-F)/f);for(let H=0;H<d.outChannels;++H){const $=Math.trunc(H/E),M=H%E;let j=0;for(let P=0;P<d.batchSize;++P)for(let B=N;B<I;++B){const K=S+B*h-v;for(let A=L;A<z;++A){const O=F+A*f-g;j+=T.get(P,K,O,$)*C.get(P,B,A,H)}}y.set(j,S,F,$,M)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const q5e={kernelName:gx,backendName:"cpu",kernelFunc:K5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X5e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:u,inputShape:c}=r;Me([s,i],"depthwiseConv2DNativeBackpropInput");const d=Ue(s.shape),h=Ue(i.shape),f=kr(c,i.shape,o,a,l,u,!0),p=new rr(f.inShape,"float32"),m=p.values,[y,g,v]=p.strides,E=n.data.get(s.dataId).values,[b,T,x]=d,C=n.data.get(i.dataId).values,[S,N,I]=h,{batchSize:F,filterHeight:L,filterWidth:z,inChannels:H,inHeight:$,inWidth:M,outChannels:j,outHeight:P,outWidth:B,strideHeight:K,strideWidth:A}=f,O=L-1-f.padInfo.top,se=z-1-f.padInfo.left,ae=j/H;for(let de=0;de<F;++de)for(let le=0;le<H;++le)for(let ve=0;ve<$;++ve){const Ne=ve-O,_e=Math.max(0,Math.ceil(Ne/K)),Se=Math.min(P,(L+Ne)/K);for(let Fe=0;Fe<M;++Fe){const et=Fe-se,ot=Math.max(0,Math.ceil(et/A)),dt=Math.min(B,(z+et)/A);let at=0;for(let nt=_e;nt<Se;++nt){const me=nt*K-Ne;for(let Oe=ot;Oe<dt;++Oe){const Ge=Oe*A-et,Ye=b*de+T*nt+x*Oe,lt=S*(L-1-me)+N*(z-1-Ge)+I*le;for(let ft=0;ft<ae;++ft){const Ve=le*ae+ft,dn=E[Ye+Ve],Ln=C[lt+ft];at+=dn*Ln}}}m[y*de+g*ve+v*Fe+le]=at}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const Y5e={kernelName:yx,backendName:"cpu",kernelFunc:X5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q5e(t){const{inputs:e,backend:n}=t,{x:r}=e,s=re(r.shape),i=n.data.get(r.dataId).values,o=ct([s,s],r.dtype),a=o.values;for(let u=0;u<i.length;u++)a[u*s+u]=i[u];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,o.dtype,o.values)}const Z5e={kernelName:vx,backendName:"cpu",kernelFunc:Q5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J5e={kernelName:x0,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s}=t,{strides:i,pad:o,dilations:a}=n,l=e,u=l.data.get(r.dataId).values,c=r.shape.length,d=l.data.get(s.dataId).values,h=s.shape.length,{batchSize:f,inHeight:p,inWidth:m,inChannels:y,outHeight:g,outWidth:v,padInfo:E,strideHeight:b,strideWidth:T,filterHeight:x,filterWidth:C,dilationHeight:S,dilationWidth:N,outShape:I}=dy(r.shape,s.shape,i,o,"NHWC",a),F=re(I),L=I.length,z=Bn(r.dtype,F);for(let $=0;$<f;++$)for(let M=0;M<g;++M){const j=M*b-E.top;for(let P=0;P<v;++P){const B=P*T-E.left;for(let K=0;K<y;++K){let A=Number.MIN_SAFE_INTEGER;for(let se=0;se<x;++se){const ae=j+se*S;if(ae>=0&&ae<p)for(let de=0;de<C;++de){const le=B+de*N;if(le>=0&&le<m){const ve=ta([$,ae,le,K],c,Ue(r.shape)),Ne=ta([se,de,K],h,Ue(s.shape)),_e=u[ve]+d[Ne];_e>A&&(A=_e)}}}const O=ta([$,M,P,K],L,Ue(I));z[O]=A}}}return{dataId:l.write(mc(z,r.dtype),I,r.dtype),shape:I,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e4e={kernelName:IE,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:i}=t,{strides:o,pad:a,dilations:l}=n,u=e,c=Mi(r.shape,u.data.get(r.dataId).values),d=Mi(s.shape,u.data.get(s.dataId).values),{batchSize:h,inHeight:f,inWidth:p,inChannels:m,outHeight:y,outWidth:g,padInfo:v,strideHeight:E,strideWidth:b,filterHeight:T,filterWidth:x,dilationHeight:C,dilationWidth:S,outShape:N}=dy(r.shape,s.shape,o,a,"NHWC",l);D(i.rank===N.length,()=>`Error in ${IE}, dy must have the same rank as output ${N.length}, but got ${i.rank}`);const I=Mi(N,u.data.get(i.dataId).values),F=e9(s.shape,s.dtype);for(let z=0;z<h;++z)for(let H=0;H<y;++H){const $=H*E-v.top;for(let M=0;M<g;++M){const j=M*b-v.left;for(let P=0;P<m;++P){let B=Number.MIN_SAFE_INTEGER,K=0,A=0;for(let O=0;O<T;++O){const se=$+O*C;if(se>=0&&se<f)for(let ae=0;ae<x;++ae){const de=j+ae*S;if(de>=0&&de<p){const le=c[z][se][de][P]+d[O][ae][P];le>B&&(B=le,K=O,A=ae)}}}F[K][A][P]+=I[z][H][M][P]}}}return{dataId:u.write(mc(F,r.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t4e={kernelName:kE,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:i}=t,{strides:o,pad:a,dilations:l}=n,u=e,c=Mi(r.shape,u.data.get(r.dataId).values),d=Mi(s.shape,u.data.get(s.dataId).values),{batchSize:h,inHeight:f,inWidth:p,inChannels:m,outHeight:y,outWidth:g,padInfo:v,strideHeight:E,strideWidth:b,filterHeight:T,filterWidth:x,dilationHeight:C,dilationWidth:S,outShape:N}=dy(r.shape,s.shape,o,a,"NHWC",l);D(i.rank===N.length,()=>`Error in ${kE}, dy must have the same rank as output ${N.length}, but got ${i.rank}`);const I=Mi(N,u.data.get(i.dataId).values),F=e9(r.shape,r.dtype);for(let z=0;z<h;++z)for(let H=0;H<y;++H){const $=H*E-v.top;for(let M=0;M<g;++M){const j=M*b-v.left;for(let P=0;P<m;++P){let B=Number.MIN_SAFE_INTEGER,K=$<0?0:$,A=j<0?0:j;for(let O=0;O<T;++O){const se=$+O*C;if(se>=0&&se<f)for(let ae=0;ae<x;++ae){const de=j+ae*S;if(de>=0&&de<p){const le=c[z][se][de][P]+d[O][ae][P];le>B&&(B=le,K=se,A=de)}}}F[z][K][A][P]+=I[z][H][M][P]}}}return{dataId:u.write(mc(F,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n4e(t){const{inputs:e,backend:n,attrs:r}=t,{image:s}=e,{canvas:i,options:o}=r,{contextOptions:a,imageOptions:l}=o||{},u=(l==null?void 0:l.alpha)||1,c=(a==null?void 0:a.contextType)||"2d";if(c!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);const d=i.getContext(c,(a==null?void 0:a.contextAttributes)||{});if(d==null)throw new Error(`Could not get the context with ${c} type.`);const[h,f]=s.shape.slice(0,2),p=s.shape.length===2?1:s.shape[2],m=n.data.get(s.dataId).values,y=s.dtype==="float32"?255:1,g=new Uint8ClampedArray(f*h*4);for(let E=0;E<h*f;++E){const b=[0,0,0,255*u];for(let x=0;x<p;x++){const C=m[E*p+x];if(s.dtype==="float32"){if(C<0||C>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${C}.`)}else if(s.dtype==="int32"&&(C<0||C>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${C}.`);p===1?(b[0]=C*y,b[1]=C*y,b[2]=C*y):b[x]=C*y}const T=E*4;g[T+0]=Math.round(b[0]),g[T+1]=Math.round(b[1]),g[T+2]=Math.round(b[2]),g[T+3]=Math.round(b[3])}i.width=f,i.height=h;const v=new ImageData(g,f,h);return d.putImageData(v,0,0),s}const r4e={kernelName:bx,backendName:"cpu",kernelFunc:n4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zy(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;Me(s,"sum");let a;s.dtype==="bool"?a=oc({inputs:{x:s},backend:n,attrs:{dtype:"int32"}}):a=nl({inputs:{x:s},backend:n});const l=a.shape.length,u=yt(i,a.shape),c=$n(u,l);let d=u,h=a;c!=null&&(h=Vs({inputs:{x:a},backend:n,attrs:{perm:c}}),d=Xn(d.length,l)),Wr("sum",d,h.shape.length);const[f,p]=Ir(h.shape,d),m=Bs(h.dtype,"int32");let y=KE(n,f,m);const g=re(p),v=n.data.get(y.dataId).values,E=n.data.get(h.dataId).values;for(let b=0;b<v.length;++b){const T=b*g;let x=0;for(let C=0;C<g;++C)x+=E[T+C];v[b]=x}if(o){const b=Kn(y.shape,u),T=y;y=ln({inputs:{x:y},backend:n,attrs:{shape:b}}),n.disposeIntermediateTensorInfo(T)}return n.disposeIntermediateTensorInfo(a),c!=null&&n.disposeIntermediateTensorInfo(h),y}const s4e={kernelName:ty,backendName:"cpu",kernelFunc:zy};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i4e(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,i=e,{allDims:o,summedDims:a,idDims:l}=jA(s,i.length);qA(o.length,l,i);const{path:u,steps:c}=XA(a,l),d=c.length;let h=null,f=o.length;const p=[];for(let m=0;m<d;++m){for(const y of c[m]){const{permutationIndices:g,expandDims:v}=KA(f,l[y]);let E;YA(g)?E=i[y]:(E=Vs({inputs:{x:i[y]},backend:n,attrs:{perm:g}}),p.push(E));const b=E.shape.slice();for(let T=0;T<v.length;++T)b.splice(v[T],0,1);Et(E.shape,b)||(E=ln({inputs:{x:E},backend:n,attrs:{shape:b}}),p.push(E)),h===null?h=E:(h=l2({inputs:{a:E,b:h},backend:n}),p.push(h))}m<d-1&&(u[m]>=0&&(h=zy({inputs:{x:h},backend:n,attrs:{axis:u[m]-(o.length-f),keepDims:!1}}),p.push(h)),f--)}for(const m of p)m!==h&&n.disposeIntermediateTensorInfo(m);return h}const o4e={kernelName:Ex,backendName:"cpu",kernelFunc:i4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a4e(t){const{inputs:e,backend:n}=t,{dy:r,y:s}=e;Me([r,s],"eluGrad");const i=new Float32Array(re(s.shape)),o=n.data.get(s.dataId).values,a=n.data.get(r.dataId).values;for(let l=0;l<o.length;++l){const u=o[l];u>=0?i[l]=a[l]:i[l]=a[l]*(u+1)}return n.makeTensorInfo(s.shape,"float32",i)}const l4e={kernelName:Tx,backendName:"cpu",kernelFunc:a4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u4e=BA,c4e=zA,d4e=HA,h4e=UA,f4e=WA,p4e=VA,m4e=Gt(Ep,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+u4e*n);return e*(1-((((p4e*r+f4e)*r+h4e)*r+d4e)*r+c4e)*r*Math.exp(-n*n))}),g4e={kernelName:Ep,backendName:"cpu",kernelFunc:m4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YE(t){const{inputs:e,backend:n,attrs:r}=t,{input:s}=e,{dim:i}=r,o=s.shape.length,a=s.shape.slice();let l=i;return i<0&&(D(-(o+1)<=i,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+i+1),a.splice(l,0,1),ln({inputs:{x:s},backend:n,attrs:{shape:a}})}const y4e={kernelName:S0,backendName:"cpu",kernelFunc:YE};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v4e=Qn((t,e)=>t/e),D5=fr(vp,v4e),Gk={kernelName:vp,backendName:"cpu",kernelFunc:D5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uG(t,e,n){const r=t.shape,s=r[0],i=r[1],o=n.data.get(t.dataId),a=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,u=[s,i],c=re(u),d=xr("float32",c),h=xr("float32",c);for(let y=0;y<s;y++){const g=zd({inputs:{x:a},backend:n,attrs:{begin:[y,0],size:[1,i]}}),v=zd({inputs:{x:l},backend:n,attrs:{begin:[y,0],size:[1,i]}}),E=ai({inputs:{real:g,imag:v},backend:n}),{real:b,imag:T}=b4e(E,e,n),x=Vl(b,T);for(let C=0;C<i;C++){const S=GA(x,C);d[y*i+C]=S.real,h[y*i+C]=S.imag}n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(E)}const f=n.makeTensorInfo(u,"float32",d),p=n.makeTensorInfo(u,"float32",h),m=ai({inputs:{real:f,imag:p},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),m}function b4e(t,e,n){const r=re(t.shape),s=n.data.get(t.dataId),i=n.data.get(s.complexTensorInfos.real.dataId).values,o=n.data.get(s.complexTensorInfos.imag.dataId).values;if(E4e(r)){const a=jk(i,o,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const u=n.makeTensorInfo(l,"float32",a.real),c=n.makeTensorInfo(l,"float32",a.imag),d=n.makeTensorInfo([],"float32",eu(r,"float32")),h=nl({inputs:{x:d},backend:n}),f=Gk.kernelFunc({inputs:{a:u,b:d},backend:n}),p=Gk.kernelFunc({inputs:{a:c,b:h},backend:n}),m=n.data.get(f.dataId).values,y=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),{real:m,imag:y}}return a}else{const a=Vl(i,o),l=T4e(a,r,e);return vH(l)}}function E4e(t){return(t&t-1)===0}function jk(t,e,n,r,s){if(n===1)return{real:t,imag:e};const i=Vl(t,e),o=n/2,a=bH(i),l=a.real,u=a.imag,c=[l.length],d=s.makeTensorInfo(c,"float32",l),h=s.makeTensorInfo(c,"float32",u),f=ai({inputs:{real:d,imag:h},backend:s}),p=EH(i),m=p.real,y=p.imag,g=[m.length],v=s.makeTensorInfo(g,"float32",m),E=s.makeTensorInfo(g,"float32",y),b=ai({inputs:{real:v,imag:E},backend:s}),T=jk(l,u,o,r,s),x=T.real,C=T.imag,S=[x.length],N=s.makeTensorInfo(S,"float32",x),I=s.makeTensorInfo(S,"float32",C),F=ai({inputs:{real:N,imag:I},backend:s}),L=jk(m,y,o,r,s),z=L.real,H=L.imag,$=[z.length],M=s.makeTensorInfo($,"float32",z),j=s.makeTensorInfo($,"float32",H),P=ai({inputs:{real:M,imag:j},backend:s}),B=xH(n,r),K=[B.real.length],A=s.makeTensorInfo(K,"float32",B.real),O=s.makeTensorInfo(K,"float32",B.imag),se=ai({inputs:{real:A,imag:O},backend:s}),ae=l2({inputs:{a:se,b:P},backend:s}),de=zf({inputs:{a:F,b:ae},backend:s}),le=N5({inputs:{a:F,b:ae},backend:s}),ve=Bd({inputs:{input:de},backend:s}),Ne=Bd({inputs:{input:le},backend:s}),_e=Hf({inputs:{input:de},backend:s}),Se=Hf({inputs:{input:le},backend:s}),Fe=Uf({inputs:[ve,Ne],backend:s,attrs:{axis:0}}),et=Uf({inputs:[_e,Se],backend:s,attrs:{axis:0}}),ot=s.data.get(Fe.dataId).values,dt=s.data.get(et.dataId).values;return s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(h),s.disposeIntermediateTensorInfo(f),s.disposeIntermediateTensorInfo(v),s.disposeIntermediateTensorInfo(E),s.disposeIntermediateTensorInfo(b),s.disposeIntermediateTensorInfo(N),s.disposeIntermediateTensorInfo(I),s.disposeIntermediateTensorInfo(F),s.disposeIntermediateTensorInfo(M),s.disposeIntermediateTensorInfo(j),s.disposeIntermediateTensorInfo(P),s.disposeIntermediateTensorInfo(A),s.disposeIntermediateTensorInfo(O),s.disposeIntermediateTensorInfo(se),s.disposeIntermediateTensorInfo(ae),s.disposeIntermediateTensorInfo(de),s.disposeIntermediateTensorInfo(le),s.disposeIntermediateTensorInfo(ve),s.disposeIntermediateTensorInfo(_e),s.disposeIntermediateTensorInfo(Ne),s.disposeIntermediateTensorInfo(Se),s.disposeIntermediateTensorInfo(Fe),s.disposeIntermediateTensorInfo(et),{real:ot,imag:dt}}function T4e(t,e,n){const r=new Float32Array(e*2);for(let s=0;s<e;s++){let i=0,o=0;for(let a=0;a<e;a++){const l=CH(s*a,e,n),u=GA(t,a);i+=u.real*l.real-u.imag*l.imag,o+=u.real*l.imag+u.imag*l.real}n&&(i/=e,o/=e),TH(r,i,o,s)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x4e(t){const{inputs:e,backend:n}=t,{input:r}=e,s=re(r.shape),i=r.shape[r.shape.length-1],o=s/i,a=ln({inputs:{x:r},backend:n,attrs:{shape:[o,i]}}),l=uG(a,!1,n),u=ln({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}const C4e={kernelName:xx,backendName:"cpu",kernelFunc:x4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R5(t){const{backend:e,attrs:n}=t,{shape:r,value:s,dtype:i}=n,o=i||Zd(s),a=Bn(o,re(r));return w4e(a,s,o),e.makeTensorInfo(r,o,a)}const S4e={kernelName:Cx,backendName:"cpu",kernelFunc:R5};function w4e(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _4e={kernelName:Sx,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,s=n,i=xr(r.dtype,re(r.shape)),[o,a,l,u]=r.shape,c=s.data.get(r.dataId).values;for(let h=0;h<o;h++){const f=h*l*a*u;for(let p=0;p<a;p++){const m=p*(l*u);for(let y=0;y<l;y++){const g=y*u;for(let v=0;v<u;v++){const E=Math.round(l-y-1),b=f+m+g+v;let T=c[b];if(E>=0&&E<l){const x=E*u,C=f+m+x+v;T=c[C]}i[b]=T}}}}return{dataId:s.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:p}=r;let m=aG({inputs:{x:s,filter:i},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h}});if(o){const y=m;if(c==="NCHW"&&o.shape.length===1&&o.shape[0]!==1){const g=ln({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});m=zf({inputs:{a:m,b:g},backend:n}),n.disposeIntermediateTensorInfo(g)}else m=zf({inputs:{a:m,b:o},backend:n});n.disposeIntermediateTensorInfo(y)}if(f){const y=m;if(c==="NCHW"&&f==="prelu"&&a.shape.length===1&&a.shape[0]!==1){const g=ln({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});m=XE(n,m,f,g,p),n.disposeIntermediateTensorInfo(g)}else m=XE(n,m,f,a,p);n.disposeIntermediateTensorInfo(y)}return m}const I4e={kernelName:fg,backendName:"cpu",kernelFunc:k4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:p}=r;let m=lG({inputs:{x:s,filter:i},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h}});if(o){const y=m;m=zf({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(y)}if(f){const y=m;m=XE(n,m,f,a,p),n.disposeIntermediateTensorInfo(y)}return m}const A4e={kernelName:pg,backendName:"cpu",kernelFunc:N4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D4e(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,i=re(r.shape),o=s.shape,a=o[o.length-1],[l,u,c,d]=jC(r,s);if(u===0)return n.makeTensorInfo(l,r.dtype,[]);const h=n.data.get(s.dataId).values,f=n.bufferSync(r),p=bV(h,f,r.dtype,u,a,c,d,r.shape,i);return n.makeTensorInfo(l,r.dtype,p.values)}const R4e={kernelName:wx,backendName:"cpu",kernelFunc:D4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F4e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:i}=e,{axis:o,batchDims:a}=r;Me([s,i],"gatherV2");const l=yt(o,s.shape)[0],u=n.data.get(i.dataId).values,c=s.shape[l];for(let b=0;b<u.length;++b){const T=u[b];D(T<=c-1&&T>=0,()=>`GatherV2: the index value ${T} is not in [0, ${c-1}]`)}let d=a;a==null&&(d=0);const h=re(i.shape),f=ZA(s,i,l,d),p=ln({inputs:{x:s},backend:n,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),m=ln({inputs:{x:i},backend:n,attrs:{shape:[f.batchSize,h/f.batchSize]}}),y=[f.batchSize,f.outerSize,h/f.batchSize,f.sliceSize],g=n.bufferSync(m),v=n.bufferSync(p),E=EV(v,g,y);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(f.outputShape,E.dtype,E.values)}const O4e={kernelName:_0,backendName:"cpu",kernelFunc:F4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $4e(t){const{inputs:e,backend:n}=t,{input:r}=e,s=re(r.shape),i=r.shape[r.shape.length-1],o=s/i,a=ln({inputs:{x:r},backend:n,attrs:{shape:[o,i]}}),l=uG(a,!0,n),u=ln({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}const L4e={kernelName:_x,backendName:"cpu",kernelFunc:$4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P4e=Gt(kp,t=>Number.isFinite(t)?1:0,"bool"),M4e={kernelName:kp,backendName:"cpu",kernelFunc:P4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B4e=Gt(Ip,t=>Math.abs(t)===1/0?1:0,"bool"),z4e={kernelName:Ip,backendName:"cpu",kernelFunc:B4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H4e=Gt(Np,t=>Number.isNaN(t)?1:0,"bool"),U4e={kernelName:Np,backendName:"cpu",kernelFunc:H4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W4e(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:i}=n,o=wV(r,s,i);return e.makeTensorInfo([o.length],"float32",o)}const V4e={kernelName:Ix,backendName:"cpu",kernelFunc:W4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G4e=Gt(Dp,t=>Math.log1p(t)),j4e={kernelName:Dp,backendName:"cpu",kernelFunc:G4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K4e=Qn((t,e)=>t&&e),q4e=fr(D0,K4e,null,"bool"),X4e={kernelName:D0,backendName:"cpu",kernelFunc:q4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y4e=Gt(R0,t=>t?0:1,"bool"),Q4e={kernelName:R0,backendName:"cpu",kernelFunc:Y4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z4e=Qn((t,e)=>t||e),J4e=fr(F0,Z4e,null,"bool"),eDe={kernelName:F0,backendName:"cpu",kernelFunc:J4e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:i,bias:o,alpha:a,beta:l}=r;Me(s,"LRN");const u=s.shape[3],c=u-1,d=n.data.get(s.dataId).values,h=re(s.shape),f=new Float32Array(h);function p(m){const y=m%u;let g=m-y+Math.max(0,y-i);const v=m-y+Math.min(y+i,c);let E=0;for(;g<=v;g++){const b=d[g];E+=b*b}return E}for(let m=0;m<h;m++){const y=p(m),g=d[m]*Math.pow(o+a*y,-l);f[m]=g}return n.makeTensorInfo(s.shape,s.dtype,f)}const nDe={kernelName:O0,backendName:"cpu",kernelFunc:tDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,y:i,dy:o}=e,{depthRadius:a,bias:l,alpha:u,beta:c}=r;Me(o,"LRNGrad");const d=re(o.shape),h=o.shape[3],f=n.data.get(o.dataId).values,p=n.data.get(s.dataId).values,m=n.data.get(i.dataId).values,y=new Float32Array(d),g=d;for(let v=0;v<g;v++){const E=v%h,b=v-E+Math.max(0,E-a),T=v-E+Math.min(h,E+a+1);let x=0;for(let C=b;C<T;C++)x+=Math.pow(p[C],2);x=u*x+l;for(let C=b;C<T;C++){let S=-2*u*c*p[C]*m[v]/x;v===C&&(S+=Math.pow(x,-c)),S*=f[v],y[C]+=S}}return n.makeTensorInfo(o.shape,s.dtype,y)}const sDe={kernelName:Nx,backendName:"cpu",kernelFunc:rDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cG(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:i,keepDims:o}=r,a=n;let l=s.shape;const u=l.length,c=yt(i,l);let d=c;const h=$n(d,u);let f=a.data.get(s.dataId).values;if(h!=null){const b=new Array(u);for(let T=0;T<b.length;T++)b[T]=l[h[T]];f=k5(f,l,s.dtype,h,b),d=Xn(d.length,u),l=b}Me(s,"max"),Wr("max",d,u);const[p,m]=Ir(l,d),y=re(m),g=kV(f,y,p,s.dtype),v=a.write(g,p,s.dtype);let E=p;return o&&(E=Kn(p,c)),{dataId:v,shape:E,dtype:s.dtype}}const iDe={kernelName:$0,backendName:"cpu",kernelFunc:cG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;Me(s,"maxPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,u=1;D(Ur(o,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=Io(s.shape,i,o,u,a,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&Et(c.inShape,c.outShape))d=nl({inputs:{x:s},backend:n});else{const h=n.data.get(s.dataId).values,f=Ue(s.shape),p=A5(h,s.shape,s.dtype,f,c,"max");d=n.makeTensorInfo(c.outShape,s.dtype,p.values)}return d}const aDe={kernelName:L0,backendName:"cpu",kernelFunc:oDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l,dataFormat:u}=r;Me(s,"maxPool3d");const c=tu(s.shape,i,o,1,a,l,u),d=n.data.get(s.dataId).values,h=oG(d,s.shape,s.dtype,Ue(s.shape),c,"max");return n.makeTensorInfo(h.shape,"float32",h.values)}const uDe={kernelName:P0,backendName:"cpu",kernelFunc:lDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cDe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:u}=r;Me([s,i],"maxPool3DGrad");const c=tu(i.shape,o,a,1,l,u),d=n.bufferSync(i),h=ZAe(d,c),f=c.strideDepth,p=c.strideHeight,m=c.strideWidth,y=c.dilationDepth,g=c.dilationHeight,v=c.dilationWidth,E=c.effectiveFilterDepth,b=c.effectiveFilterHeight,T=c.effectiveFilterWidth,x=E-1-c.padInfo.front,C=T-1-c.padInfo.left,S=b-1-c.padInfo.top,N=ct(i.shape,"float32"),I=n.bufferSync(s);for(let F=0;F<c.batchSize;++F)for(let L=0;L<c.inChannels;++L)for(let z=0;z<c.inDepth;++z)for(let H=0;H<c.inHeight;++H)for(let $=0;$<c.inWidth;++$){const M=z-x,j=H-S,P=$-C;let B=0;for(let K=0;K<E;K+=y){const A=(M+K)/f;if(!(A<0||A>=c.outDepth||Math.floor(A)!==A))for(let O=0;O<b;O+=g){const se=(j+O)/p;if(!(se<0||se>=c.outHeight||Math.floor(se)!==se))for(let ae=0;ae<T;ae+=v){const de=(P+ae)/m;if(de<0||de>=c.outWidth||Math.floor(de)!==de)continue;const le=E*b*T-1-h.get(F,A,se,de,L),ve=K*b*T+O*T+ae,Ne=le===ve?1:0;if(Ne===0)continue;const _e=I.get(F,A,se,de,L);B+=_e*Ne}}}N.set(B,F,z,H,$,L)}return n.makeTensorInfo(N.shape,N.dtype,N.values)}const dDe={kernelName:Dx,backendName:"cpu",kernelFunc:cDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hDe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i,output:o}=e,a=i;Me([i,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=r,h=Io(a.shape,l,u,1,c,d),f=n.data.get(a.dataId).values,p=ct(h.outShape,a.dtype,iG(f,a.shape,a.dtype,h).values),m=h.strideHeight,y=h.strideWidth,g=h.dilationHeight,v=h.dilationWidth,E=h.effectiveFilterHeight,b=h.effectiveFilterWidth,T=b-1-h.padInfo.left,x=E-1-h.padInfo.top,C=ct(a.shape,"float32"),S=n.data.get(s.dataId).values,N=ct(s.shape,"float32",S);for(let I=0;I<h.batchSize;++I)for(let F=0;F<h.inChannels;++F)for(let L=0;L<h.inHeight;++L)for(let z=0;z<h.inWidth;++z){const H=L-x,$=z-T;let M=0;for(let j=0;j<E;j+=g){const P=(H+j)/m;if(!(P<0||P>=h.outHeight||Math.floor(P)!==P))for(let B=0;B<b;B+=v){const K=($+B)/y;if(K<0||K>=h.outWidth||Math.floor(K)!==K)continue;const A=E*b-1-p.get(I,P,K,F),O=j*b+B,se=A===O?1:0;if(se===0)continue;const ae=N.get(I,P,K,F);M+=ae*se}}C.set(M,I,L,z,F)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const fDe={kernelName:Ax,backendName:"cpu",kernelFunc:hDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pDe(t,e,n,r,s){const i=Ue(e),o=A5(t,e,n,i,s,"max"),a=iG(t,e,n,s,!0,r);return[o.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mDe={kernelName:Rx,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:i,pad:o,includeBatchInIndex:a}=e,l=n;Me(r,"MaxPoolWithArgmax");const u=l.data.get(r.dataId).values,c=Io(r.shape,s,i,[1,1],o),[d,h]=pDe(u,r.shape,r.dtype,a,c),f=l.write(d,c.outShape,r.dtype),p=l.write(h,c.outShape,r.dtype);return[{dataId:f,shape:c.outShape,dtype:r.dtype},{dataId:p,shape:c.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=yt(i,s.shape),u=Ir(s.shape,a)[1],c=re(u),d=[],h=n.makeTensorInfo([],"float32",new Float32Array([c]));d.push(h);const f=oc({inputs:{x:s},backend:n,attrs:{dtype:"float32"}});d.push(f);const p=D5({inputs:{a:f,b:h},backend:n});d.push(p);const m=zy({inputs:{x:p},backend:n,attrs:{axis:i,keepDims:o}});return d.forEach(y=>n.disposeIntermediateTensorInfo(y)),m}const yDe={kernelName:M0,backendName:"cpu",kernelFunc:gDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;Me(s,"min");const a=yt(i,s.shape);let l=a;const u=$n(l,s.shape.length);let c=s;u!=null&&(c=Vs({inputs:{x:s},backend:n,attrs:{perm:u}}),l=Xn(l.length,s.shape.length)),Wr("min",l,c.shape.length);const[d,h]=Ir(c.shape,l),f=re(h),p=zr(re(d),c.dtype),m=n.data.get(c.dataId).values;for(let g=0;g<p.length;++g){const v=g*f;let E=m[v];for(let b=0;b<f;++b){const T=m[v+b];(Number.isNaN(T)||T<E)&&(E=T)}p[g]=E}u!=null&&n.disposeIntermediateTensorInfo(c);const y=n.makeTensorInfo(d,c.dtype,p);if(o){const g=Kn(d,a),v=ln({inputs:{x:y},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(y),v}return y}const bDe={kernelName:B0,backendName:"cpu",kernelFunc:vDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,mode:o}=r;Me(s,"mirrorPad");const a=i.map((E,b)=>E[0]+s.shape[b]+E[1]),l=i.map(E=>E[0]),u=i.map((E,b)=>E[0]+s.shape[b]),c=o==="reflect"?0:1,d=n.data.get(s.dataId).values,h=s.shape.length,f=Ue(s.shape),p=re(a),m=a.length,y=Ue(a),g=xr(s.dtype,p);for(let E=0;E<p;E++){let b=Jd(E,m,y);for(let x=0;x<m;x++)b[x]<l[x]?b[x]=l[x]*2-b[x]-c:b[x]>=u[x]&&(b[x]=(u[x]-1)*2-b[x]+c);b=b.map((x,C)=>x-l[C]);const T=ta(b,h,f);g[E]=d[T]}return{dataId:n.write(g,a,s.dtype),shape:a,dtype:s.dtype}}const TDe={kernelName:z0,backendName:"cpu",kernelFunc:EDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xDe=Qn((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),CDe=fr(Op,xDe),SDe={kernelName:Op,backendName:"cpu",kernelFunc:CDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dG(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:i}=r,o=s.shape.length;let a=i;if(a===-1&&(a=o-1),a!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${a}`);const l=yt([a],s.shape),u=cG({inputs:{x:s},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=Kn(u.shape,l),d=ln({inputs:{x:u},backend:n,attrs:{shape:c}}),h=N5({inputs:{a:s,b:d},backend:n}),f=mV({inputs:{x:h},backend:n}),p=zy({inputs:{x:f},backend:n,attrs:{axis:l,keepDims:!1}}),m=ln({inputs:{x:p},backend:n,attrs:{shape:c}}),y=D5({inputs:{a:f,b:m},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),y}const wDe={kernelName:sy,backendName:"cpu",kernelFunc:dG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _De(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:i,seed:o,normalized:a}=r;Me(s,"multinomial");const l=a?s:dG({inputs:{logits:s},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],d=n.data.get(l.dataId).values,h=[u,i],f=zr(re(h),"int32");for(let p=0;p<u;++p){const m=p*c,y=new Float32Array(c-1);y[0]=d[m];for(let E=1;E<y.length;++E)y[E]=y[E-1]+d[m+E];const g=TC.alea(o.toString()),v=p*i;for(let E=0;E<i;++E){const b=g();f[v+E]=y.length;for(let T=0;T<y.length;T++)if(b<y[T]){f[v+E]=T;break}}}return a||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(h,"int32",f)}const kDe={kernelName:Fx,backendName:"cpu",kernelFunc:_De};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IDe=UC;function NDe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r;Me(s,"NonMaxSuppression");const u=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,{selectedIndices:d}=IDe(u,c,o,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const ADe={kernelName:Ox,backendName:"cpu",kernelFunc:NDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DDe=WC;function RDe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=r;Me(s,"NonMaxSuppressionPadded");const c=n.data.get(s.dataId).values,d=n.data.get(i.dataId).values,{selectedIndices:h,validOutputs:f}=DDe(c,d,o,a,l,u);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const FDe={kernelName:$x,backendName:"cpu",kernelFunc:RDe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ODe=VC;function $De(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=r;Me(s,"NonMaxSuppressionWithScore");const c=n.data.get(s.dataId).values,d=n.data.get(i.dataId).values,h=o,f=a,p=l,m=u,{selectedIndices:y,selectedScores:g}=ODe(c,d,h,f,p,m);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([g.length],"float32",new Float32Array(g))]}const LDe={kernelName:Lx,backendName:"cpu",kernelFunc:$De};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PDe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:i,depth:o,onValue:a,offValue:l}=r;Me(s,"oneHot");const u=re(s.shape),c=new Float32Array(u*o);c.fill(l);const d=n.data.get(s.dataId).values;for(let h=0;h<u;++h)d[h]>=0&&d[h]<o&&(c[h*o+d[h]]=a);return n.makeTensorInfo([...s.shape,o],i,c)}const MDe={kernelName:V0,backendName:"cpu",kernelFunc:PDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QE(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const s=Bd({inputs:{input:r},backend:n}),i=QE({inputs:{x:s},backend:n}),o=Hf({inputs:{input:r},backend:n}),a=QE({inputs:{x:o},backend:n}),l=ai({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return R5({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const BDe={kernelName:ly,backendName:"cpu",kernelFunc:QE};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hG(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const s=Bd({inputs:{input:r},backend:n}),i=hG({inputs:{x:s},backend:n}),o=Hf({inputs:{input:r},backend:n}),a=QE({inputs:{x:o},backend:n}),l=ai({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return R5({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const zDe={kernelName:W0,backendName:"cpu",kernelFunc:hG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fG(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return YE({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const i=e[0].shape,o=e[0].dtype;e.forEach(c=>{Hr(i,c.shape,"All tensors passed to stack must have matching shapes"),D(o===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(c=>{const d=YE({inputs:{input:c},backend:n,attrs:{dim:s}});return a.push(d),d}),u=Uf({inputs:l,backend:n,attrs:{axis:s}});return a.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const HDe={kernelName:G0,backendName:"cpu",kernelFunc:fG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UDe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,constantValue:o}=r;Me(s,"pad");const a=i.map((v,E)=>v[0]+s.shape[E]+v[1]),l=i.map(v=>v[0]),u=n.data.get(s.dataId).values,c=re(s.shape),d=s.shape.length,h=Ue(s.shape),f=re(a),p=a.length,m=Ue(a),y=xr(s.dtype,f);o!==0&&y.fill(o);for(let v=0;v<c;v++){const b=Jd(v,d,h).map((x,C)=>x+l[C]),T=ta(b,p,m);y[T]=u[v]}return{dataId:n.write(y,a,s.dtype),shape:a,dtype:s.dtype}}const pG={kernelName:j0,backendName:"cpu",kernelFunc:UDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WDe=Qn((t,e)=>Math.pow(t,e)),VDe=fr(Lp,WDe),GDe={kernelName:Lp,backendName:"cpu",kernelFunc:VDe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jDe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:i,indices:o}=e,a=s.map(y=>n.data.get(y.dataId).values),l=s.map(y=>y.shape),u=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values,[d,h,f]=FV(a,l,u,i.shape,i.dtype,c,o.shape),p=d.map(y=>n.makeTensorInfo([y.length],"int32",y)),m=n.makeTensorInfo(f,i.dtype,h);return p.concat([m])}const KDe={kernelName:Px,backendName:"cpu",kernelFunc:jDe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qDe(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:i}=e,o=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[u,c]=OV(o,r.shape,r.dtype,a,s.shape,l,i.shape),d=n.makeTensorInfo([u.length],"int32",u),h=n.makeTensorInfo([c.length],r.dtype,c);return[d,h]}const XDe={kernelName:Mx,backendName:"cpu",kernelFunc:qDe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YDe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:i,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,u=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,d=n.data.get(o.dataId).values,h=a.map(y=>n.data.get(y.dataId).values),f=a.map(y=>y.shape),[p,m]=$V(u,s.shape,c,i.shape,i.dtype,d,o.shape,h,f,l);return n.makeTensorInfo(p,i.dtype,m)}const QDe={kernelName:Bx,backendName:"cpu",kernelFunc:YDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZDe(t){const{backend:e,attrs:n}=t,{start:r,stop:s,dtype:i,step:o}=n,a=LV(r,s,o,i);return e.makeTensorInfo([a.length],i,a)}const JDe={kernelName:zx,backendName:"cpu",kernelFunc:ZDe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e3e=Gt(Pp,t=>1/t),t3e={kernelName:Pp,backendName:"cpu",kernelFunc:e3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n3e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r;Me(s,"resizeBilinear");const l=Ue(s.shape),[u,c]=a,[d,h,f,p]=s.shape,m=n.data.get(s.dataId).values,y=new Float32Array(re([d,u,c,p])),g=[i&&u>1?h-1:h,i&&c>1?f-1:f],v=[i&&u>1?u-1:u,i&&c>1?c-1:c];let E=0;const b=g[0]/v[0],T=g[1]/v[1];for(let x=0;x<d;x++)for(let C=0;C<u;C++){let S;o?S=b*(C+.5)-.5:S=b*C;const N=Math.max(0,Math.floor(S)),I=S-N,F=Math.min(h-1,Math.ceil(S)),L=x*l[0]+N*l[1],z=x*l[0]+F*l[1];for(let H=0;H<c;H++){let $;o?$=T*(H+.5)-.5:$=T*H;const M=Math.max(0,Math.floor($)),j=$-M,P=Math.min(f-1,Math.ceil($)),B=L+M*l[2],K=z+M*l[2],A=L+P*l[2],O=z+P*l[2];for(let se=0;se<p;se++){const ae=m[B+se],de=m[K+se],le=m[A+se],ve=m[O+se],Ne=ae+(le-ae)*j,_e=de+(ve-de)*j,Se=Ne+(_e-Ne)*I;y[E++]=Se}}}return n.makeTensorInfo([d,u,c,p],"float32",y)}const r3e={kernelName:Q0,backendName:"cpu",kernelFunc:n3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s3e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r;Me([i,s],"resizeBilinearGrad");const a=Ue(s.shape),[l,u,c,d]=s.shape,[,h,f]=i.shape,p=new Float32Array(l*u*c*d),m=[o&&h>1?u-1:u,o&&f>1?c-1:c],y=[o&&h>1?h-1:h,o&&f>1?f-1:f],g=m[0]/y[0],v=m[1]/y[1],E=n.data.get(i.dataId).values;let b=0;for(let T=0;T<l;T++){const x=T*a[0];for(let C=0;C<h;C++){const S=C*g,N=Math.floor(S),I=Math.min(Math.ceil(S),u-1),F=x+N*a[1],L=x+I*a[1],z=S-N,H=1-z;for(let $=0;$<f;$++){const M=$*v,j=Math.floor(M),P=Math.min(Math.ceil(M),c-1),B=M-j,K=1-B,A=F+j*a[2],O=F+P*a[2],se=L+j*a[2],ae=L+P*a[2],de=H*K,le=H*B,ve=z*K,Ne=z*B;for(let _e=0;_e<d;_e++){const Se=E[b++];p[A+_e]+=Se*de,p[O+_e]+=Se*le,p[se+_e]+=Se*ve,p[ae+_e]+=Se*Ne}}}}return n.makeTensorInfo([l,c,u,d],"float32",p)}const i3e={kernelName:Wx,backendName:"cpu",kernelFunc:s3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o3e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r;Me(s,"resizeNearestNeighbor");const l=Ue(s.shape),[u,c]=a,[d,h,f,p]=s.shape,m=n.data.get(s.dataId).values,y=new Float32Array(d*u*c*p),g=[i&&u>1?h-1:h,i&&c>1?f-1:f],v=[i&&u>1?u-1:u,i&&c>1?c-1:c],E=g[0]/v[0],b=g[1]/v[1];let T=0;for(let x=0;x<d;x++){const C=x*l[0];for(let S=0;S<u;S++){const N=o?E*(S+.5):E*S;let I=Math.min(h-1,i?Math.round(N):Math.floor(N));o&&(I=Math.max(0,I));const F=C+I*l[1];for(let L=0;L<c;L++){const z=o?b*(L+.5):b*L;let H=Math.min(f-1,i?Math.round(z):Math.floor(z));o&&(H=Math.max(0,H));const $=F+H*l[2];for(let M=0;M<p;M++){const j=m[$+M];y[T++]=j}}}}return n.makeTensorInfo([d,u,c,p],s.dtype,y)}const a3e={kernelName:Y0,backendName:"cpu",kernelFunc:o3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l3e(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r;Me([i,s],"resizeNearestNeighborGrad");const a=Ue(s.shape),l=Ue(i.shape),[u,c,d,h]=s.shape,[,f,p]=i.shape,m=new Float32Array(u*c*d*h),y=n.data.get(i.dataId).values,g=[o&&f>1?c-1:c,o&&p>1?d-1:d],v=[o&&f>1?f-1:f,o&&p>1?p-1:p],E=g[0]/v[0],b=g[1]/v[1],T=1/E,x=1/b,C=Math.ceil(T)*2+2,S=Math.ceil(x)*2+2;for(let N=0;N<u;N++){const I=N*a[0];for(let F=0;F<c;F++){const L=I+F*a[1],z=Math.floor(F*T),H=Math.floor(z-C/2);for(let $=0;$<d;$++){const M=L+$*a[2],j=Math.floor($*x),P=Math.floor(j-S/2);for(let B=0;B<h;B++){let K=0;for(let A=0;A<C;A++){const O=A+H;if(O<0||O>=f)continue;const se=I+O*l[1],ae=O*E,de=Math.min(c-1,o?Math.round(ae):Math.floor(ae));if(F===de)for(let le=0;le<S;le++){const ve=le+P;if(ve<0||ve>=p)continue;const Ne=se+ve*l[2],_e=ve*b,Se=Math.min(d-1,o?Math.round(_e):Math.floor(_e));$===Se&&(K+=y[Ne+B])}}m[M+B]=K}}}}return n.makeTensorInfo(s.shape,s.dtype,m)}const u3e={kernelName:Ux,backendName:"cpu",kernelFunc:l3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:i}=r;Me(s,"reverse");const o=s.shape.length,a=yt(i,s.shape);if(o===0)return nl({inputs:{x:s},backend:n});const l=new rr(s.shape,s.dtype),u=n.bufferSync(s);for(let c=0;c<l.size;c++){const d=l.indexToLoc(c),h=d.slice();a.forEach(f=>h[f]=s.shape[f]-1-h[f]),l.set(u.get(...h),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const d3e={kernelName:Z0,backendName:"cpu",kernelFunc:c3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h3e={kernelName:oC,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:i,center:o}=e,a=n,l=xr(r.dtype,re(r.shape)),[u,c,d,h]=r.shape,[f,p]=LA(o,c,d),m=255,y=Math.sin(s),g=Math.cos(s),v=a.data.get(r.dataId).values;for(let b=0;b<u;b++){const T=b*d*c*h;for(let x=0;x<c;x++){const C=x*(d*h);for(let S=0;S<d;S++){const N=S*h;for(let I=0;I<h;I++){const F=[u,x,S,I],L=F[2],z=F[1];let H=(L-f)*g-(z-p)*y,$=(L-f)*y+(z-p)*g;H=Math.round(H+f),$=Math.round($+p);let M=i;if(typeof i!="number"&&(I===3?M=m:M=i[I]),H>=0&&H<d&&$>=0&&$<c){const P=$*(d*h),B=H*h,K=T+P+B+I;M=v[K]}const j=T+C+N+I;l[j]=M}}}}return{dataId:a.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f3e=Gt(zp,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),p3e={kernelName:zp,backendName:"cpu",kernelFunc:f3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m3e(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:i}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=xc(i,s,o),h=!0,f=n.bufferSync(s),p=n.bufferSync(i),m=ad(f,p,o,d,u,l,a,c,0,h);return n.makeTensorInfo(o,m.dtype,m.values)}const g3e={kernelName:Vx,backendName:"cpu",kernelFunc:m3e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y3e(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<e?n=s+1:r=s;return r}function v3e(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<=e?n=s+1:r=s;return r}function b3e(t,e,n,r,s,i){const o=Bn("int32",n*s);for(let a=0;a<n;++a){const l=t.slice(a*r,(a+1)*r),u=a*s;for(let c=0;c<s;++c)o[u+c]=i==="left"?y3e(l,e[c+u]):v3e(l,e[c+u])}return o}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E3e(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:i}=e,{side:o}=r,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,u=b3e(a,l,s.shape[0],s.shape[1],i.shape[1],o);return n.makeTensorInfo(i.shape,"int32",u)}const T3e={kernelName:jx,backendName:"cpu",kernelFunc:E3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x3e(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:i}=e;Me([r,s,i],"select");const o=r.shape.length,a=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values,c=Bs(s.dtype,i.dtype),d=zr(re(s.shape),c);let h=0;const f=o===0||o>1||s.shape.length===1?1:re(s.shape.slice(1));for(let p=0;p<a.length;p++)for(let m=0;m<f;m++)a[p]===1?d[h++]=l[p]:d[h++]=u[p];return n.makeTensorInfo(s.shape,c,d)}const C3e={kernelName:J0,backendName:"cpu",kernelFunc:x3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S3e=XC,w3e=YC,_3e=Gt(Up,t=>t>=0?w3e*t:S3e*(Math.exp(t)-1)),k3e={kernelName:Up,backendName:"cpu",kernelFunc:_3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I3e=Gt(Gp,t=>t<0?-1:t>0?1:0),N3e={kernelName:Gp,backendName:"cpu",kernelFunc:I3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A3e=Gt(Wp,t=>Math.sin(t)),D3e={kernelName:Wp,backendName:"cpu",kernelFunc:A3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R3e=Gt(Vp,t=>Math.sinh(t)),F3e={kernelName:Vp,backendName:"cpu",kernelFunc:R3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O3e=11920928955078125e-23,r8=Math.log(O3e)+2,$3e=Gt(Kp,t=>{const e=t>-r8,n=t<r8,r=Math.exp(t);let s;return n?s=r:e?s=t:s=Math.log(1+r),s}),L3e={kernelName:Kp,backendName:"cpu",kernelFunc:$3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,paddings:o}=r;Me([s],"spaceToBatchND");const a=re(i),l=[[0,0]];l.push(...o);for(let x=1+i.length;x<s.shape.length;++x)l.push([0,0]);const u=pG.kernelFunc({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),c=Ny(u.shape,i,a,!1),d=Ay(c.length,i.length,!1),h=Dy(u.shape,i,a,!1),m=ln({inputs:{x:u},backend:n,attrs:{shape:c}}),v=Vs({inputs:{x:m},backend:n,attrs:{perm:d}}),T=ln({inputs:{x:v},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),T}const M3e={kernelName:ny,backendName:"cpu",kernelFunc:P3e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B3e(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:i,defaultValue:o}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${s.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values[0],[d,h,f,p,m]=zV(a,r.shape,r.dtype,l,s.dtype,u,c);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],s.dtype,f),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(y=>Number(y)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const z3e={kernelName:Kx,backendName:"cpu",kernelFunc:B3e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H3e(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${s.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.data.get(s.dataId).values),a=n.data.get(r.dataId).values,l=Array.from(n.data.get(i.dataId).values),[u,c,d]=HV(a,r.shape,r.dtype,o,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}const U3e={kernelName:qx,backendName:"cpu",kernelFunc:H3e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W3e(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${i.shape}`);if(s.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[u,c]=I5(o,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const V3e={kernelName:Xx,backendName:"cpu",kernelFunc:W3e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G3e(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${i.shape}`);if(s.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[u,c]=I5(o,r.shape,r.dtype,a,l);return n.makeTensorInfo(c,r.dtype,u)}const j3e={kernelName:Yx,backendName:"cpu",kernelFunc:G3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K3e(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:i,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:h}=xc(i,s,a),f=!1,p=n.bufferSync(s);let m;switch(i.dtype){case"bool":{const y=n.bufferSync(i),g=Boolean(n.data.get(o.dataId).values[0]);m=ad(p,y,a,h,c,u,l,d,g,f);break}case"float32":{const y=n.bufferSync(i),g=n.data.get(o.dataId).values[0];m=ad(p,y,a,h,c,u,l,d,g,f);break}case"int32":{const y=n.bufferSync(i),g=n.data.get(o.dataId).values[0];m=ad(p,y,a,h,c,u,l,d,g,f);break}case"string":{const y=n.bufferSync(i),g=Hl(n.data.get(o.dataId).values[0]);m=ad(p,y,a,h,c,u,l,d,g,f);break}default:throw new Error(`Unsupported type ${i.dtype}`)}return n.makeTensorInfo(a,m.dtype,m.values)}const q3e={kernelName:Qx,backendName:"cpu",kernelFunc:K3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X3e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:i,axis:o}=r,a=yt(o,s.shape)[0],l=QA(s,i,a),u=new Array(s.shape.length).fill(0),c=s.shape.slice();return l.map(d=>{const h=[...c];h[a]=d;const f=zd({inputs:{x:s},backend:n,attrs:{begin:u,size:h}});return u[a]+=d,f})}const Y3e={kernelName:ry,backendName:"cpu",kernelFunc:X3e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q3e={kernelName:Zx,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;Me(n,"square");const s=r.data.get(n.dataId).values,i=new Float32Array(s.length);for(let a=0;a<s.length;++a){const l=s[a];i[a]=l*l}return{dataId:r.write(i,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z3e=Gt(e1,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),J3e={kernelName:e1,backendName:"cpu",kernelFunc:Z3e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,end:o,strides:a,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:h}=r;Me(s,"stridedSlice");const{finalShapeSparse:f,finalShape:p,isIdentity:m,sliceDim0:y,isSimpleSlice:g,begin:v,end:E,strides:b}=RA(s.shape,i,o,a,l,u,c,d,h);let T;if(m)T=ln({inputs:{x:s},backend:n,attrs:{shape:p}});else if(y||g){D(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const x=NA(v,E,b),C=zd({inputs:{x:s},backend:n,attrs:{begin:v,size:x}});T=ln({inputs:{x:C},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(C)}else{const x=n.bufferSync(s),C=VV(f,x,b,v);T=n.makeTensorInfo(p,C.dtype,C.values)}return T}const tRe={kernelName:Jx,backendName:"cpu",kernelFunc:eRe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nRe(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:i,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:d}=e,h=n.data.get(c.dataId).values,f=n.data.get(d.dataId).values,[p,m]=GV(h,f,s,i,o,a,l,u);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",m)]}const rRe={kernelName:eC,backendName:"cpu",kernelFunc:nRe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sRe(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:i,delimiter:o}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values[0],[u,c,d]=jV(a,l,s),h=c.length;return[n.makeTensorInfo([h,2],"int32",u),n.makeTensorInfo([h],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const iRe={kernelName:tC,backendName:"cpu",kernelFunc:sRe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oRe(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const o=n.data.get(i.dataId).values,a=KV(o,s);return n.makeTensorInfo(i.shape,"int32",a)}const aRe={kernelName:nC,backendName:"cpu",kernelFunc:oRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lRe=Gt(Qp,t=>Math.tan(t)),uRe={kernelName:Qp,backendName:"cpu",kernelFunc:lRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cRe=Gt(Zp,t=>Math.tanh(t)),dRe={kernelName:Zp,backendName:"cpu",kernelFunc:cRe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hRe(t){const{inputs:e,backend:n}=t,{tensor:r,indices:s,updates:i}=e,{sliceRank:o,numUpdates:a,sliceSize:l,strides:u,outputSize:c}=xc(i,s,r.shape),d=!1,h=n.bufferSync(s),f=n.bufferSync(i),p=n.bufferSync(r),m=ad(h,f,r.shape,c,l,a,o,u,p,d);return n.makeTensorInfo(r.shape,m.dtype,m.values)}const fRe={kernelName:Gx,backendName:"cpu",kernelFunc:hRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:i}=r;Me(s,"tile");const o=XV(n.bufferSync(s),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}const mRe={kernelName:Jp,backendName:"cpu",kernelFunc:pRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:i,sorted:o}=r;Me(s,"topk");const a=n.data.get(s.dataId).values,[l,u]=QV(a,s.shape,s.dtype,i,o);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}const yRe={kernelName:rC,backendName:"cpu",kernelFunc:gRe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vRe(t){const{inputs:e,attrs:n,backend:r}=t,{image:s,transforms:i}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:u}=n,[c,d,h,f]=s.shape,[p,m]=u??[d,h],y=[c,p,m,f],g=Ue(s.shape),v=g[0],E=g[1],b=g[2],T=Ue(y),x=T[0],C=T[1],S=T[2],N=xr(s.dtype,re(y));N.fill(l);const I=r.data.get(s.dataId).values,F=r.data.get(i.dataId).values;for(let z=0;z<c;++z){const H=i.shape[0]===1?F:F.subarray(z*8,z*8+8);for(let $=0;$<p;++$)for(let M=0;M<m;++M)for(let j=0;j<f;++j){let P;const B=H[6]*M+H[7]*$+1;if(B===0)continue;const K=(H[0]*M+H[1]*$+H[2])/B,A=(H[3]*M+H[4]*$+H[5])/B,O=s8(K,h,a),se=s8(A,d,a);switch(o){case"nearest":P=SRe(I,d,h,v,E,b,z,se,O,j,l);break;case"bilinear":P=wRe(I,d,h,v,E,b,z,se,O,j,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}const ae=z*x+$*C+M*S+j;N[ae]=P}return r.makeTensorInfo(y,s.dtype,N)}return{dataId:r.write(N,y,s.dtype),shape:s.shape,dtype:s.dtype}}const bRe={kernelName:sC,backendName:"cpu",kernelFunc:vRe};function s8(t,e,n){switch(n){case"reflect":return ERe(t,e);case"wrap":return TRe(t,e);case"nearest":return CRe(t,e);case"constant":default:return xRe(t)}}function ERe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return Xu(0,n,e-1)}function TRe(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return Xu(0,n,e-1)}function xRe(t,e){return t}function CRe(t,e){return Xu(0,t,e-1)}function am(t,e,n,r,s,i,o,a,l,u,c){const d=o*r+a*s+l*i+u;return 0<=a&&a<e&&0<=l&&l<n?t[d]:c}function SRe(t,e,n,r,s,i,o,a,l,u,c){const d=Math.round(a),h=Math.round(l);return am(t,e,n,r,s,i,o,d,h,u,c)}function wRe(t,e,n,r,s,i,o,a,l,u,c){const d=Math.floor(a),h=Math.floor(l),f=d+1,p=h+1,m=(p-l)*am(t,e,n,r,s,i,o,d,h,u,c)+(l-h)*am(t,e,n,r,s,i,o,d,p,u,c),y=(p-l)*am(t,e,n,r,s,i,o,f,h,u,c)+(l-h)*am(t,e,n,r,s,i,o,f,p,u,c);return(f-a)*m+(a-d)*y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Re(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:i}=e;Me(i,"unique");const o=r.data.get(i.dataId).values,{outputValues:a,outputShape:l,indices:u}=ZV(o,s,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,a),r.makeTensorInfo([u.length],"int32",u)]}const kRe={kernelName:iC,backendName:"cpu",kernelFunc:_Re};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IRe(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:i}=r;i<0&&(i+=s.shape.length);const o=s.shape.length,a=s.shape[i],l=new Array(o-1);let u=0;for(let f=0;f<o;f++)f!==i&&(l[u++]=s.shape[f]);const c=new Array(o).fill(0),d=s.shape.slice();d[i]=1;const h=new Array(a);for(let f=0;f<h.length;f++){c[i]=f;const p=zd({inputs:{x:s},backend:n,attrs:{begin:c,size:d}});h[f]=ln({inputs:{x:p},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(p)}return h}const NRe={kernelName:oy,backendName:"cpu",kernelFunc:IRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ARe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:i}=e,{numSegments:o}=r;Me(s,"unsortedSegmentSum");const a=s.shape.length,l=i.shape.length,u=[],c=[],d=a-l;let h=i;for(let p=0;p<d;++p){const m=YE({inputs:{input:h},backend:n,attrs:{dim:p+1}});h=m,c.push(m)}for(let p=0;p<o;++p){const m=eu(p,"int32"),y=n.makeTensorInfo([],"int32",m),g=fV({inputs:{a:y,b:h},backend:n}),v=oc({inputs:{x:g},backend:n,attrs:{dtype:"float32"}}),E=l2({inputs:{a:v,b:s},backend:n}),b=zy({inputs:{x:E},backend:n,attrs:{axis:0,keepDims:!1}});u.push(b),c.push(y),c.push(g),c.push(v),c.push(E),c.push(b)}const f=fG({inputs:u,backend:n,attrs:{axis:0}});return c.forEach(p=>n.disposeIntermediateTensorInfo(p)),f}const DRe={kernelName:ay,backendName:"cpu",kernelFunc:ARe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RRe=[_Ae,o9e,IAe,AAe,h9e,RAe,OAe,LAe,MAe,zAe,UAe,VAe,jAe,XAe,QAe,e5e,n5e,s5e,o5e,SAe,l5e,c5e,h5e,p9e,p5e,c9e,g9e,g5e,a9e,v5e,E5e,T5e,C5e,w5e,k5e,N5e,D5e,F5e,$5e,P5e,B5e,H5e,W5e,G5e,j5e,q5e,Y5e,Z5e,J5e,e4e,t4e,r4e,o4e,yAe,l4e,y9e,g4e,v9e,y4e,E9e,C4e,S4e,_4e,x9e,S9e,I4e,A4e,R4e,O4e,_9e,I9e,l9e,L4e,b5e,M4e,z4e,U4e,vAe,A9e,R9e,V4e,O9e,j4e,X4e,Q4e,eDe,nDe,sDe,iDe,L9e,aDe,uDe,dDe,fDe,mDe,yDe,bDe,M9e,TDe,SDe,kDe,z9e,U9e,ADe,FDe,LDe,V9e,MDe,zDe,HDe,pG,GDe,EAe,K9e,KDe,XDe,QDe,JDe,u9e,Gk,t3e,TAe,xAe,CAe,r3e,i3e,a3e,u3e,d3e,h3e,p3e,tAe,g3e,T3e,C3e,k3e,rAe,N3e,D3e,F3e,sAe,wDe,L3e,M3e,z3e,U3e,V3e,j3e,q3e,Y3e,aAe,Q3e,uAe,dAe,J3e,tRe,rRe,iRe,aRe,mAe,s4e,uRe,dRe,fRe,mRe,yRe,bRe,G9e,kRe,NRe,DRe,BDe];for(const t of RRe)aC(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jc={},qv={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function FRe(t,e){Jc[t]=e}function ca(t,e){if(!(t in Jc)||e!=null){const r=$Re(t,e);if(r!==null)Jc[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=Jc[t];return n==null||n.isContextLost()?(delete Jc[t],ca(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Jc[t])}function ORe(t){if(!ee().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function $Re(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??ORe(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Jc[t]},!1),ee().getBool("SOFTWARE_WEBGL_ENABLED")&&(qv.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",qv)||n.getContext("experimental-webgl",qv):n.getContext("webgl2",qv)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var kg;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(kg||(kg={}));var Fi;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(Fi||(Fi={}));var Lr;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Lr||(Lr={}));function Hy(t,e){return[e,t]}function LRe(t,e){return t*e}function Xv(t){const e=re(t),n=Math.ceil(e/4);return SE(n)}function u1(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function PRe(t,e){const[n,r]=u1(t,e);return n*r*4}function F5(t,e){const n=t;let r,s,i,o,a,l,u,c,d,h;return ee().getNumber("WEBGL_VERSION")===2?(r=n.R32F,s=n.R16F,i=n.RGBA16F,o=n.RGBA32F,a=n.RED,u=4,c=1,d=n.HALF_FLOAT,h=n.FLOAT,l=n.RGBA8):(r=t.RGBA,s=t.RGBA,i=t.RGBA,o=n.RGBA,a=t.RGBA,u=4,c=4,d=e!=null?e.HALF_FLOAT_OES:null,h=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:s,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:h}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ae(t,e){const n=e();return ee().getBool("DEBUG")&&MRe(t),n}function MRe(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+URe(t,e))}const BRe=596e-10,zRe=65504;function HRe(t){return!!(ee().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||BRe<Math.abs(t)&&Math.abs(t)<zRe)}function URe(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function Yv(t,e){return au(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function WRe(t,e){const n=au(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Ae(t,()=>t.shaderSource(n,e)),Ae(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function VRe(t,e){const n=au(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Ae(t,()=>t.shaderSource(n,e)),Ae(t,()=>t.compileShader(n)),ee().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw mG(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const GRe=/ERROR: [0-9]+:([0-9]+):/g;function mG(t,e){const n=GRe.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],s=t.split(`
`),i=s.length.toString().length+2,o=s.map((d,h)=>hd((h+1).toString(),i)+d);let a=0;for(let d=0;d<o.length;d++)a=Math.max(o[d].length,a);const l=o.slice(0,r-1),u=o.slice(r-1,r),c=o.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${hd(u[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function jRe(t){return au(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function KRe(t,e){if(Ae(t,()=>t.linkProgram(e)),!ee().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function hw(t,e){if(Ae(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function qRe(t,e){const n=au(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Ae(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Ae(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function XRe(t,e){const n=au(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Ae(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),Ae(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function YRe(t){return au(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function QRe(t,e){const n=ee().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,s=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+s+".")}}function ZRe(t){return au(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function i8(t,e,n,r,s,i,o){const a=t.getAttribLocation(e,n);return a===-1?!1:(Ae(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),Ae(t,()=>t.vertexAttribPointer(a,s,t.FLOAT,!1,i,o)),Ae(t,()=>t.enableVertexAttribArray(a)),!0)}function JRe(t,e,n){sFe(t,n),Ae(t,()=>t.activeTexture(t.TEXTURE0+n)),Ae(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function eFe(t,e,n){return au(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function tFe(t,e,n){return t.getUniformLocation(e,n)}function nFe(t,e,n,r){Ae(t,()=>JRe(t,e,r)),Ae(t,()=>t.uniform1i(n,r))}function fw(t,e,n){Ae(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Ae(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function o8(t,e){Ae(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),Ae(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function Qv(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+rFe(t,e))}function rFe(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function au(t,e,n){const r=Ae(t,()=>e());if(r==null)throw new Error(n);return r}function sFe(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const s=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${s}.`)}}function Wf(t,e=2){return re(t.slice(0,t.length-e))}function Vf(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Zv(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[Wf(t),...Vf(t)]),e}function iFe(t,e=!1){let n=ee().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=ee().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&ee().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((a,l)=>l>=t.length-2?ex(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=Jl(t).newShape);let s=re(t),i=null;t.length<=1&&s<=n?i=[1,s]:t.length===2&&t[0]<=n&&t[1]<=n?i=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?i=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?i=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?i=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(i=[t[0],t[1]*t[2]*t[3]]);const o=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(e?2:1)&&Math.min(...i)>0;if(i==null||o)if(e){const a=Wf(t);let l=2,u=2;t.length&&([l,u]=Vf(t)),s=a*(l/2)*(u/2),i=SE(s).map(c=>c*2)}else i=SE(s);return i}function Jv(t){return t%2===0}function ZE(t,e){if(t=t.slice(-2),e=e.slice(-2),Et(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||Jv(n)&&Jv(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&Jv(t[0])&&Jv(e[0])}let pw,mw;function oFe(t){if(pw==null){const e=ca(t);pw=e.getParameter(e.MAX_TEXTURE_SIZE)}return pw}function aFe(t){if(mw==null){const e=ca(t);mw=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,mw)}function lFe(t){if(t===0)return 0;let e;const n=ca(t);return po(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:po(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function po(t,e){return t.getExtension(e)!=null}function a8(t){try{if(ca(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function uFe(t){if(t===0)return!1;const e=ca(t);if(t===1){if(!po(e,"OES_texture_float"))return!1}else if(!po(e,"EXT_color_buffer_float"))return!1;return Kk(e)}function cFe(t){if(t===0)return!1;const e=ca(t);if(t===1){if(!po(e,"OES_texture_float")||!po(e,"WEBGL_color_buffer_float"))return!1}else{if(po(e,"EXT_color_buffer_float"))return Kk(e);const r="EXT_color_buffer_half_float";if(po(e,r)){const s=e.getExtension(r);return dFe(e,s)}return!1}return Kk(e)}function Kk(t){const e=F5(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n);const r=1,s=1;t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,r,s,0,e.textureFormatFloat,e.textureTypeFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(i),o}function dFe(t,e){const n=F5(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);const s=1,i=1;t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,s,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),a}function hFe(t){return t!==2?!1:ca(t).fenceSync!=null}function Uy(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&D(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Be=ee();Be.registerFlag("HAS_WEBGL",()=>Be.getNumber("WEBGL_VERSION")>0);Be.registerFlag("WEBGL_VERSION",()=>a8(2)?2:a8(1)?1:0);Be.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Be.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Be.get("WEBGL_VERSION")===2);Be.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Be.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Be.registerFlag("WEBGL_PACK",()=>Be.getBool("HAS_WEBGL"));Be.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_PACK_CLIP",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_PACK_REDUCE",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_LAZILY_UNPACK",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_CONV_IM2COL",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Be.getBool("WEBGL_PACK"));Be.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>oFe(Be.getNumber("WEBGL_VERSION")));Be.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>aFe(Be.getNumber("WEBGL_VERSION")));Be.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Be.getNumber("WEBGL_VERSION");return t===0?0:lFe(t)});Be.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Be.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!o9());Be.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>uFe(Be.getNumber("WEBGL_VERSION")));Be.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Be.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Be.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Be.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>cFe(Be.getNumber("WEBGL_VERSION")));Be.registerFlag("WEBGL_FENCE_API_ENABLED",()=>hFe(Be.getNumber("WEBGL_VERSION")));Be.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Be.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Be.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});Be.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>o9()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});Be.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Be.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Be.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Be.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Be.registerFlag("WEBGL_EXP_CONV",()=>!1);Be.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Be.getBool("IS_TEST"));Be.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Be.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Be.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Be.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Es(){let t,e,n,r,s,i,o,a,l,u;return ee().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",s="texture",i="outputColor",o="out vec4 outputColor;",a=ee().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",s="texture2D",i="gl_FragColor",o="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:s,output:i,defineOutput:o,defineSpecialNaN:a,defineSpecialInf:l,defineRound:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uh(t,e,n="index"){const r=Ue(e);return r.map((s,i)=>{const o=`int ${t[i]} = ${n} / ${s}`,a=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${s}`:`index -= ${t[i]} * ${s}`;return`${o}; ${a};`}).join("")}function u2(t,e,n="index"){const r=Ue(e);return r.map((s,i)=>{const o=`int ${t[i]} = ${n} / outShapeStrides[${i}]`,a=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * outShapeStrides[${i}]`:`index -= ${t[i]} * outShapeStrides[${i}]`;return`${o}; ${a};`}).join("")}function fFe(t,e){const n=t.length,r=t.map(i=>`${e}[${i}]`),s=new Array(n-1);s[n-2]=r[n-1];for(let i=n-3;i>=0;--i)s[i]=`(${s[i+1]} * ${r[i+1]})`;return s}function pFe(t,e,n="index"){const r=t.map((i,o)=>o),s=fFe(r,e);return s.map((i,o)=>{const a=`int ${t[o]} = ${n} / ${s[o]}`,l=o===s.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${s[o]}`:`index -= ${t[o]} * ${s[o]}`;return`${a}; ${l};`}).join("")}function O5(t){const e=Ue(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function $5(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const gG=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:yG}=MH;function mFe(t,e,n){const r=[];if(t.forEach(f=>{const p=re(f.shapeInfo.logicalShape);if(f.shapeInfo.isUniform?r.push(`uniform float ${f.name}${p>1?`[${p}]`:""};`):(r.push(`uniform sampler2D ${f.name};`),r.push(`uniform int offset${f.name};`)),n.enableShapeUniforms){const{uniformShape:m}=L5(n.packedInputs,f.shapeInfo.logicalShape,f.shapeInfo.texShape);switch(m.length){case 1:r.push(`uniform int ${f.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${f.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${f.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${f.name}Shape;`);break}r.push(`uniform ivec2 ${f.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(f=>{r.push(`uniform ${f.type} ${f.name}${f.arrayIndex?`[${f.arrayIndex}]`:""};`)});const s=r.join(`
`),i=t.map(f=>gFe(f,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),o=e.texShape,a=Es(),l=bFe(a);let u,c,d=xFe(a);return e.isPacked?(u=yFe(e.logicalShape,o,n.enableShapeUniforms),c=TFe(a)):(u=vFe(e.logicalShape,o,n.enableShapeUniforms),c=EFe(a)),n.packedInputs&&(d+=_Fe),[d,l,c,s,u,i,n.userCode].join(`
`)}function c1(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return MFe(t,e);case 1:return zFe(t,e);case 2:return UFe(t,e);case 3:return VFe(t,e);case 4:return jFe(t,e);case 5:return KFe(t);case 6:return qFe(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function vG(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return PFe(t);case 1:return BFe(t,e);case 2:return HFe(t,e);case 3:return WFe(t,e);default:return GFe(t,e)}}function gFe(t,e,n=!1,r){let s="";n?s+=vG(t,r):s+=c1(t,r);const i=t.shapeInfo.logicalShape,o=e.logicalShape;return i.length<=o.length&&(n?s+=XFe(t,e):s+=YFe(t,e)),s}function yFe(t,e,n){switch(t.length){case 0:return bG();case 1:return kFe(t,e,n);case 2:return $Fe(t,e,n);case 3:return NFe(t,e,n);default:return DFe(t,e,n)}}function vFe(t,e,n){switch(t.length){case 0:return bG();case 1:return IFe(t,e,n);case 2:return LFe(t,e,n);case 3:return AFe(t,e,n);case 4:return RFe(t,e,n);case 5:return FFe(t,e);case 6:return OFe(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function bFe(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function EFe(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function TFe(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function xFe(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${CFe}
    ${SFe}
    ${wFe}
  `}const CFe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,SFe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,wFe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,_Fe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function bG(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function kFe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function IFe(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function NFe(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[2]/2),i=s*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec3(b, r, c);
    }
  `}function AFe(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${u2(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=uh(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function DFe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[t.length-1]/2),i=s*Math.ceil(t[t.length-2]/2);let o=i,a="",l="b, r, c";for(let u=2;u<t.length-1;u++)o*=t[t.length-u-1],a=`
      int b${u} = index / ${o};
      index -= b${u} * ${o};
    `+a,l=`b${u}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec${t.length}(${l});
    }
  `}function RFe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${u2(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=uh(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function FFe(t,e){const n=uh(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function OFe(t,e){const n=uh(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function $Fe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(Et(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const s=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec2(r, c);
    }
  `}function LFe(t,e,n){return Et(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function ch(t){return`offset${t}`}function PFe(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Es();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function MFe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[s,i]=t.shapeInfo.texShape;if(s===1&&i===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=ch(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});
      return sampleTexture(${n}, uv);
    }
  `;const[a,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${o});
      return sampleTexture(${n}, uv);
    }
  `}function BFe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=t.shapeInfo.texShape,i=Es();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${n}, uv);
    }
  `;const o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${i.texture2D}(${n}, uv);
    }
  `}function zFe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${d1(t)}
      }
    `;const s=t.shapeInfo.texShape,i=s[0],o=s[1];if(o===1&&i===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=ch(n);return o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${i}.0);
        return sampleTexture(${n}, uv);
      }
    `:i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${i}, ${o}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function HFe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=i[0],a=i[1],l=Es();if(i!=null&&Et(n,i))return e?`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${o}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${s}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const u=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${s}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function UFe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape;if(i!=null&&Et(n,i)){if(e)return`
      float ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const h=i[0],f=i[1];return`
    float ${s}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${f}.0, ${h}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:o,keptDims:a}=Jl(n),l=o;if(l.length<n.length){const h=h1(t,l),f=["row","col"];return`
      ${c1(h,e)}
      float ${s}(int row, int col) {
        return ${s}(${f1(f,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${d1(t)}
      }
    `;const u=i[0],c=i[1],d=ch(r);return c===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${r}, uv);
    }
  `:u===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${s}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${s}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${u}, ${c}, index);
    return sampleTexture(${r}, uv);
  }
`}function WFe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){const h=n.slice(1),f=[1,2],p=h1(t,h),m=["b","row","col"];return`
        ${vG(p,e)}
        vec4 ${s}(int b, int row, int col) {
          return ${s}(${f1(m,f)});
        }
      `}const a=Es();if(e)return`
    vec4 ${s}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;const l=o[0],u=o[1],c=Math.ceil(n[2]/2),d=c*Math.ceil(n[1]/2);return`
    vec4 ${s}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${u}, ${d}, ${c}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function VFe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],{newShape:a,keptDims:l}=Jl(n),u=a;if(u.length<n.length){const m=h1(t,u),y=["row","col","depth"];return`
        ${c1(m,e)}
        float ${s}(int row, int col, int depth) {
          return ${s}(${f1(y,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${o}, 1)));
        ${d1(t)}
      }
    `;const c=t.shapeInfo.texShape,d=c[0],h=c[1],f=t.shapeInfo.flatOffset;if(h===i&&f==null)return e?`
      float ${s}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${s}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${h}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(h===o&&f==null)return e?`
      float ${s}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const p=ch(r);return e?`
    float ${s}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${p};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${s}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${o} + depth + ${p};
        vec2 uv = uvFromFlat(${d}, ${h}, index);
        return sampleTexture(${r}, uv);
      }
  `}function GFe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=Es();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${s.texture2D}(${n}, uv);
    }
  `;const i=t.shapeInfo.logicalShape,o=i.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],u=l[0],c=l[1],d=Math.ceil(i[o-1]/2);let h=d*Math.ceil(i[o-2]/2),f="int b, int row, int col",p=`b * ${h} + (row / 2) * ${d} + (col / 2)`;for(let m=2;m<o-1;m++)f=`int b${m}, `+f,h*=i[o-m-1],p=`b${m} * ${h} + `+p;return`
    vec4 ${r}(${f}) {
      int index = ${p};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});
      return ${s.texture2D}(${n}, uv);
    }
  `}function jFe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,a=n[1]*o,{newShape:l,keptDims:u}=Jl(n);if(l.length<n.length){const v=h1(t,l),E=["row","col","depth","depth2"];return`
      ${c1(v,e)}
      float ${s}(int row, int col, int depth, int depth2) {
        return ${s}(${f1(E,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${o}, ${i}, 1)));
        ${d1(t)}
      }
    `;const c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],f=d[1],p=`int stride2 = ${r}Shape[3];`,m=`int stride1 = ${r}Shape[2] * stride2;`,y=`int stride0 = ${r}Shape[1] * stride1;`;if(f===a&&c==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        ${p}
        ${m}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(f===i&&c==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;const g=ch(r);return e?`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${p}
      ${m}
      ${y}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${g});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${h}, ${f}, index + ${g});
      return sampleTexture(${r}, uv);
    }
  `}function KFe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=e[4],i=e[3]*s,o=e[2]*i,a=e[1]*o,{newShape:l,keptDims:u}=Jl(e);if(l.length<e.length){const m=h1(t,l),y=["row","col","depth","depth2","depth3"];return`
      ${c1(m)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${f1(y,u)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${o}, ${i}, ${s})) +
          depth3;
        ${d1(t)}
      }
    `;const c=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],f=d[1];if(f===a&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${i}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(f===s&&c==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const p=ch(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} + depth * ${i} +
          depth2 * ${s} + depth3 + ${p};
      vec2 uv = uvFromFlat(${h}, ${f}, index);
      return sampleTexture(${n}, uv);
    }
  `}function qFe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:s,keptDims:i}=Jl(e);if(s.length<e.length){const y=h1(t,s),g=["row","col","depth","depth2","depth3","depth4"];return`
      ${c1(y)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${f1(g,i)});
      }
    `}const o=e[5],a=e[4]*o,l=e[3]*a,u=e[2]*l,c=e[1]*u;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${u}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${d1(t)}
      }
    `;const d=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,f=h[0],p=h[1];if(p===c&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${l}, ${a}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===o&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=ch(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${u} + depth * ${l} +
          depth2 * ${a} + depth3 * ${o} + depth4 + ${m};
      vec2 uv = uvFromFlat(${f}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function d1(t){const e=t.name,n=re(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function XFe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",i=t.shapeInfo.logicalShape.length,o=e.logicalShape.length,a=yG(t.shapeInfo.logicalShape,e.logicalShape),l=Yt(o),u=o-i;let c;const d=["x","y","z","w","u","v"];i===0?c="":o<2&&a.length>=1?c="coords = 0;":c=a.map(v=>`coords.${d[v+u]} = 0;`).join(`
`);let h="";o<2&&i>0?h="coords":h=t.shapeInfo.logicalShape.map((v,E)=>`coords.${d[E+u]}`).join(", ");let f="return outputValue;";const m=re(t.shapeInfo.logicalShape)===1,g=re(e.logicalShape)===1;if(i===1&&!m&&!g)f=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!g)o===1?f=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:f=`
        return vec4(outputValue.x);
      `;else if(a.length){const v=i-2,E=i-1;a.indexOf(v)>-1&&a.indexOf(E)>-1?f="return vec4(outputValue.x);":a.indexOf(v)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(E)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${s}() {
      ${l} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${r}(${h});
      ${f}
    }
  `}function YFe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",i=e.texShape,o=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&Et(o,i))return`
      float ${s}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const u=Yt(l),c=yG(t.shapeInfo.logicalShape,e.logicalShape),d=l-a;let h;const f=["x","y","z","w","u","v"];a===0?h="":l<2&&c.length>=1?h="coords = 0;":h=c.map(m=>`coords.${f[m+d]} = 0;`).join(`
`);let p="";return l<2&&a>0?p="coords":p=t.shapeInfo.logicalShape.map((m,y)=>`coords.${f[y+d]}`).join(", "),`
    float ${s}() {
      ${u} coords = getOutputCoords();
      ${h}
      return get${r}(${p});
    }
  `}function Yt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function L5(t,e,n){const{newShape:r,keptDims:s}=Jl(e),i=e.length,o=t&&i===3&&e[0]===1,a=o?e.slice(1):r,l=!t&&i>1&&!Et(e,n)&&r.length<i||o;return{useSqueezeShape:l,uniformShape:l?a:e,keptDims:s}}function h1(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function f1(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QFe(t,e,n,r){const s=n.map((c,d)=>{const h={logicalShape:c.shape,texShape:c.isUniform?null:c.texData.texShape,isUniform:c.isUniform,isPacked:c.isUniform?!1:c.texData.isPacked,flatOffset:null};return c.texData!=null&&c.texData.slice!=null&&c.texData.slice.flatOffset>0&&(h.flatOffset=c.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:h}}),i=s.map(c=>c.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=mFe(s,o,e),l=VRe(t.gl,a),u=t.createProgram(l);return ee().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:a,webGLProgram:u,inShapeInfos:i,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(u),Object.assign({program:e,fragmentShader:l,source:a,webGLProgram:u,inShapeInfos:i,outShapeInfo:o},EG(t,e,u)))}function EG(t,e,n){const r=[],s=[];let i,o,a,l=null,u=null;u=t.getUniformLocation(n,"NAN",!1),ee().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const c=!1;for(const d of e.variableNames){const h={name:d,uniform:t.getUniformLocation(n,d,c),offset:t.getUniformLocation(n,`offset${d}`,c)};e.enableShapeUniforms&&(h.shape=t.getUniformLocation(n,`${d}Shape`,c),h.texShape=t.getUniformLocation(n,`${d}TexShape`,c)),r.push(h)}if(e.enableShapeUniforms&&(i=t.getUniformLocation(n,"outShape",c),a=t.getUniformLocation(n,"outShapeStrides",c),o=t.getUniformLocation(n,"outTexShape",c)),e.customUniforms)for(const d of e.customUniforms)s.push(t.getUniformLocation(n,d.name,c));return{variablesLocations:r,customUniformLocations:s,infLoc:l,nanLoc:u,outShapeLocation:i,outShapeStridesLocation:a,outTexShapeLocation:o}}function l8(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const s=n.logicalShape,i=e[r],o=i.shape;if(!Et(s,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${s} and ${o} must match`);if(n.isUniform&&i.isUniform)return;const a=n.texShape,l=i.isUniform?null:i.texData.texShape;if(!Et(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function ZFe(t,e,n,r,s){e.program.enableShapeUniforms||(l8(e.inShapeInfos,n),l8([e.outShapeInfo],[r]));const i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):t.setOutputMatrixTexture(i.texture,o[0],o[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),ee().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const u=n[l],{uniform:c,offset:d,shape:h,texShape:f}=e.variablesLocations[l];if(h){const{uniformShape:p}=L5(e.program.packedInputs,u.shape,u.texData.texShape);switch(p.length){case 1:t.gl.uniform1iv(h,new Int32Array(p));break;case 2:t.gl.uniform2iv(h,new Int32Array(p));break;case 3:t.gl.uniform3iv(h,new Int32Array(p));break;case 4:t.gl.uniform4iv(h,new Int32Array(p));break}}if(f&&t.gl.uniform2i(f,u.texData.texShape[0],u.texData.texShape[1]),c!=null){if(u.isUniform){if(re(u.shape)<2)t.gl.uniform1f(c,u.uniformValues[0]);else{let p=u.uniformValues;p instanceof Float32Array||(p=new Float32Array(p)),t.gl.uniform1fv(c,p)}continue}u.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,u.texData.slice.flatOffset),t.setInputMatrixTexture(u.texData.texture.texture,c,l)}}const a=e.outShapeLocation;if(a)switch(r.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=Ue(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&s)for(let l=0;l<e.program.customUniforms.length;++l){const u=e.program.customUniforms[l],c=e.customUniformLocations[l],d=s[l];if(u.type==="float")t.gl.uniform1fv(c,d);else if(u.type==="vec2")t.gl.uniform2fv(c,d);else if(u.type==="vec3")t.gl.uniform3fv(c,d);else if(u.type==="vec4")t.gl.uniform4fv(c,d);else if(u.type==="int")t.gl.uniform1iv(c,d);else if(u.type==="ivec2")t.gl.uniform2iv(c,d);else if(u.type==="ivec3")t.gl.uniform3iv(c,d);else if(u.type==="ivec4")t.gl.uniform4iv(c,d);else throw Error(`uniform type ${u.type} is not supported yet.`)}t.executeProgram()}function JFe(t,e,n){let r="";e.concat(n).forEach(o=>{const a=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!o.isUniform){const l=o.texData.texShape,{useSqueezeShape:u,uniformShape:c,keptDims:d}=L5(t.packedInputs,o.shape,l);let h="",f="",p="";if(c.length===1&&t.packedInputs){const T=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];h=`${T[0]>1}_${T[1]>1}`}else if(c.length===2&&!t.packedInputs)f=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!t.packedInputs){const T=Ue(c);p=`${T[0]===l[1]}_${T[T.length-1]===l[1]}`}const m=o.shape.length,y=c.length===2&&Et(o.shape,l),g=re(o.shape)===1,v=Fd(o.shape,n.shape),E=!t.packedInputs&&m===n.shape.length&&Et(l,n.texData.texShape),b=t.packedInputs||c.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${m}_${E}_${u?d:""}_${c.length}_${g}_${v}_${y}_${h}_${f}_${p}_${b}_${a}`}else{const l=o.isUniform?"uniform":o.texData.texShape;r+=`${o.shape}_${l}_${a}`}});const s=t.userCode;let i=t.constructor.name;return i+="_"+r+"_"+s+`${ee().getNumber("WEBGL_VERSION")}`,i}function ns(t){return ee().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eOe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=kg.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Es();this.outputShape=e,this.enableShapeUniforms=ns(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?u2(["r","c","d"],e):uh(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tOe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=kg.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Es();this.outputShape=e,this.enableShapeUniforms=ns(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?u2(["r","c","d"],e):uh(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nOe{constructor(e){this.variableNames=["A"],this.outTexUsage=Fi.DOWNLOAD;const n=Es();this.outputShape=e,this.userCode=`
      ${gG}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rOe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Fi.DOWNLOAD;const n=Es();this.outputShape=e,this.userCode=`
      ${gG}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sOe={R:0,G:1,B:2,A:3};class u8{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=Es();this.outputShape=e,this.enableShapeUniforms=ns(this.outputShape.length);let i="result";n&&(i="floor(result * 255. + 0.5)");let o="";for(let a=0;a<r.length;a++){const l=r[a];o+=`
          if(offset == ${a}) {
            result = values[${sOe[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?$5():O5(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${s.texture2D}(A, uv);
          ${o}
        }
        ${s.output} = vec4(${i}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iOe{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Es();this.outputShape=e,this.enableShapeUniforms=ns(this.outputShape.length);let s="",i="result";n&&(i="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let a=0;a<=1;a++){const l=o*2+a;s+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?$5():O5(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${s}

          ${r.output} = ${i};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oOe(t){const e=Es(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return WRe(t,n)}function aOe(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return qRe(t,e)}function lOe(t){const e=new Uint16Array([0,1,2,2,1,3]);return XRe(t,e)}function Wy(t,e,n,r,s,i){QRe(e,n);const o=YRe(t),a=t.TEXTURE_2D;return Ae(t,()=>t.bindTexture(a,o)),Ae(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Ae(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Ae(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),Ae(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),ee().getNumber("WEBGL_VERSION")===1?Ae(t,()=>t.texImage2D(a,0,r,e,n,0,s,i,null)):Ae(t,()=>t.texStorage2D(a,1,r,e,n)),Ae(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:o,texShape:[n,e]}}function TG(t){return t.internalFormatFloat}function uOe(t,e,n,r){const[s,i]=Hy(e,n);return Wy(t,s,i,TG(r),r.textureFormatFloat,t.FLOAT)}function xG(t){return t.internalFormatHalfFloat}function cOe(t,e,n,r){const[s,i]=Hy(e,n);return Wy(t,s,i,xG(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function CG(t){return t.downloadTextureFormat}function dOe(t,e,n,r){const[s,i]=Hy(e,n);return Wy(t,s,i,CG(r),t.RGBA,t.UNSIGNED_BYTE)}function SG(t){return t.internalFormatPackedFloat}function hOe(t,e,n,r){const[s,i]=u1(e,n);return Wy(t,s,i,SG(r),t.RGBA,t.FLOAT)}function wG(t){return t.internalFormatPackedHalfFloat}function fOe(t,e,n,r){const[s,i]=u1(e,n);return Wy(t,s,i,wG(r),t.RGBA,r.textureTypeHalfFloat)}function pOe(t,e,n){return Ae(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),i8(t,e,"clipSpacePos",n,3,20,0)&&i8(t,e,"uv",n,2,20,12)}function mOe(t,e,n,r,s,i){Ae(t,()=>t.bindTexture(t.TEXTURE_2D,e));let o,a,l;s instanceof Uint8Array?(o=new Uint8Array(n*r*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(o=new Float32Array(n*r*4),a=t.FLOAT,l=i.internalFormatPackedFloat),o.set(s),ee().getNumber("WEBGL_VERSION")===2?Ae(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,a,o)):Ae(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,a,o)),Ae(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function gOe(t,e,n){Ae(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?ee().getNumber("WEBGL_VERSION")===2?Ae(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):Ae(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):ee().getNumber("WEBGL_VERSION")===2?Ae(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):Ae(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),Ae(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function yOe(t,e,n,r){const s=t.createBuffer();Ae(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,s));const a=4*4*e*n;return Ae(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),Ae(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),Ae(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),s}function vOe(t,e,n){const r=t,s=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,s),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),s}function bOe(t,e,n,r){const[s,i]=Hy(e,n),o=4,a=new Uint8Array(LRe(e*n,o));return Ae(t,()=>t.readPixels(0,0,s,i,r.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function EOe(t,e,n,r,s,i,o,a){const l=t,u=new Float32Array(PRe(i,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function TOe(t,e,n){const r=new Float32Array(e*n*4);return Ae(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gw{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=ee().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,FRe(n,e)):this.gl=ca(n),e=this.gl,ee().getNumber("WEBGL_VERSION")===2){const i=e;this.createVertexArray=()=>Ae(i,()=>i.createVertexArray()),this.bindVertexArray=o=>Ae(i,()=>i.bindVertexArray(o)),this.deleteVertexArray=o=>Ae(i,()=>i.deleteVertexArray(o)),this.getVertexArray=()=>Ae(i,()=>i.getParameter(i.VERTEX_ARRAY_BINDING))}else if(e!=null){const i=e.getExtension("OES_vertex_array_object");if(i==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Ae(e,()=>i.createVertexArrayOES()),this.bindVertexArray=o=>Ae(e,()=>i.bindVertexArrayOES(o)),this.deleteVertexArray=o=>Ae(e,()=>i.deleteVertexArrayOES(o)),this.getVertexArray=()=>Ae(e,()=>e.getParameter(i.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const s="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),ee().getNumber("WEBGL_VERSION")===1){const i="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=Yv(this.gl,i),po(this.gl,o))this.textureHalfFloatExtension=Yv(this.gl,o);else if(ee().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),po(this.gl,s))this.colorBufferHalfFloatExtension=Yv(this.gl,s);else if(ee().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",po(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(po(this.gl,s))this.colorBufferHalfFloatExtension=this.gl.getExtension(s);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=aOe(this.gl),this.indexBuffer=lOe(this.gl),this.framebuffer=ZRe(this.gl),this.textureConfig=F5(this.gl,this.textureHalfFloatExtension)}get debug(){return ee().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;Ae(e,()=>e.finish()),Ae(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),Ae(e,()=>e.deleteFramebuffer(this.framebuffer)),Ae(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),Ae(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),Ae(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),uOe(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),cOe(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),dOe(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),gOe(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,s){this.throwIfDisposed(),mOe(this.gl,e,n,r,s,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),fOe(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),hOe(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(o8(this.gl,this.framebuffer),this.outputTexture=null),Ae(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>bOe(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,s,i,o){return EOe(this.gl,e,n,r,s,i,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return vOe(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const s=yOe(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),s}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(ee().getBool("WEBGL_FENCE_API_ENABLED")){const s=e,i=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const o=s.clientWaitSync(i,0,0);return o===s.ALREADY_SIGNALED||o===s.CONDITION_SATISFIED},n=i}else ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>TOe(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=oOe(n));const r=jRe(n);Ae(n,()=>n.attachShader(r,this.vertexShader)),Ae(n,()=>n.attachShader(r,e)),KRe(n,r);const s=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&hw(n,s),s}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;Ae(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),pOe(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(Ae(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&hw(this.gl,this.program),Ae(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?eFe(this.gl,e,n):tFe(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),Ae(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),nFe(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[s,i]=u1(n,r);this.setOutputMatrixTextureDriver(e,s,i)}setOutputMatrixWriteRegion(e,n,r,s){this.setOutputMatrixWriteRegionDriver(r,e,s,n)}setOutputPackedMatrixWriteRegion(e,n,r,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&hw(this.gl,this.program),Qv(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Ae(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Ae(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Yv(this.gl,ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=r.createQuery();return r.beginQuery(s.TIME_ELAPSED_EXT,i),i}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await X_(()=>this.disposed||this.isQueryAvailable(e,ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),s=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),s&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=xOe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in ee().platform&&(r=ee().platform.setTimeoutCustom.bind(ee().platform)),X_(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),fw(this.gl,e,this.framebuffer),this.debug&&Qv(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(fw(this.gl,this.outputTexture,this.framebuffer),this.debug&&Qv(this.gl)):o8(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const s=this.gl;fw(s,e,this.framebuffer),this.debug&&Qv(s),this.outputTexture=e,Ae(s,()=>s.viewport(0,0,n,r)),Ae(s,()=>s.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,s){this.throwIfDisposed(),Ae(this.gl,()=>this.gl.scissor(e,n,r,s))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function xOe(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:COe,bincountImpl:_G,bincountReduceImpl:SOe,bitwiseAndImpl:wOe,castImpl:_Oe,ceilImpl:kOe,concatImpl:IOe,equalImpl:NOe,expImpl:AOe,expm1Impl:DOe,floorImpl:ROe,gatherNdImpl:FOe,gatherV2Impl:OOe,greaterImpl:$Oe,greaterEqualImpl:LOe,lessImpl:POe,lessEqualImpl:MOe,linSpaceImpl:BOe,logImpl:zOe,maxImpl:HOe,maximumImpl:UOe,minimumImpl:WOe,multiplyImpl:VOe,negImpl:GOe,notEqualImpl:jOe,prodImpl:KOe,raggedGatherImpl:qOe,raggedRangeImpl:XOe,raggedTensorToTensorImpl:YOe,rangeImpl:QOe,rsqrtImpl:ZOe,scatterImpl:JOe,sigmoidImpl:e8e,simpleAbsImpl:kG,sliceImpl:t8e,sparseFillEmptyRowsImpl:n8e,sparseReshapeImpl:r8e,sparseSegmentReductionImpl:IG,sqrtImpl:s8e,staticRegexReplaceImpl:i8e,stridedSliceImpl:o8e,stringNGramsImpl:a8e,stringSplitImpl:l8e,stringToHashBucketFastImpl:u8e,subImpl:c8e,tileImpl:d8e,topKImpl:h8e,transposeImpl:P5,uniqueImpl:f8e}=gAe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NG(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function ms(t,e){return e===1?[t]:NG(t,e)}function p8e(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m8e{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=ns(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=ms("rc",this.rank),r=Yt(this.rank),s=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${s}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let s=0;s<=1;s++){let i=`${r===0?"r":"rp1"}, ${s===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)i=`${e[e.length-1-o]},`+i;n.push(i)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],s=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${s};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AG{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=ns(this.outputShape.length);let r="";for(let s=0;s<4;s++){let i="thisRC = rc;";s%2===1&&(i+="thisRC.z += 1;"),s>1&&(i+="thisRC.y += 1;"),r+=`
        ${i}
        ${s>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${s}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${s>0?"}":""}
      `}this.userCode=`
      ${g8e(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?$5():O5(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function g8e(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?pFe(["r","c","d"],"inputShape"):uh(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y8e{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const s=d8(n,r),i=h8(e,s,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const o=c8(e,s,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const l=this.freeTextures[i].pop();return this.usedTextures[i].push(l),l}let a;return s===Lr.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):s===Lr.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):s===Lr.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):s===Lr.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):s===Lr.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(a),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),a}releaseTexture(e,n,r,s){if(this.freeTextures==null)return;const i=d8(r,s),o=h8(n,i,s);o in this.freeTextures||(this.freeTextures[o]=[]);const a=c8(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,s),l=ee().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const u=this.usedTextures[o],c=u&&u.indexOf(e);if(c==null||c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u[c]=u[u.length-1],u.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function v8e(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function c8(t,e,n,r,s){const i=b8e(e,r);let o;if(s){const[l,u]=u1(t[0],t[1]);o=l*u}else{const[l,u]=Hy(t[0],t[1]);o=l*u}const a=v8e(n,i);return o*a}function b8e(t,e){switch(t){case Lr.PACKED_2X2_FLOAT32:return SG(e);case Lr.PACKED_2X2_FLOAT16:return wG(e);case Lr.UNPACKED_FLOAT32:return TG(e);case Lr.UNPACKED_FLOAT16:return xG(e);case Lr.PACKED_4X1_UNSIGNED_BYTE:return CG(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function E8e(t){return ee().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Lr.PACKED_2X2_FLOAT32:Lr.UNPACKED_FLOAT32:t?Lr.PACKED_2X2_FLOAT16:Lr.UNPACKED_FLOAT16}function d8(t,e){if(t===Fi.UPLOAD)return Lr.PACKED_2X2_FLOAT32;if(t===Fi.RENDER||t==null)return E8e(e);if(t===Fi.DOWNLOAD||t===Fi.PIXELS)return Lr.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function h8(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ma{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=ns(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Ao="if (isnan(x)) return x;",T8e="return x;",f8="return abs(x);",x8e="return (x >= 0.0) ? x : (exp(x) - 1.0);",C8e=Ao+`
  return (x < 0.0) ? 0.0 : x;
`,S8e=Ao+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Cu="return x;",w8e="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _8e="return x;",k8e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,I8e=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,N8e=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,A8e="return 1.0 / (1.0 + exp(-1.0 * x));";class Ou{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=ns(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class D8e{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=ns(this.outputShape.length);const n=e.length,r=ms("rc",n),s=Yt(n),i=p8e(n,r),o=r.slice(-2),a=n<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${s} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R8e=LC,F8e=1e-7,O8e=1e-4,eb={};function $8e(t){return t in eb||(eb[t]={}),eb[t]}const L8e=ee().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),P8e=600;function M8e(){return ee().global.screen==null?1024:ee().global.screen.height*ee().global.screen.width*window.devicePixelRatio*P8e/1024/1024}class c2 extends JT{nextDataId(){return c2.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!ee().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof gw)n=e;else{const r=ca(ee().getNumber("WEBGL_VERSION"),e);n=new gw(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=ca(ee().getNumber("WEBGL_VERSION"));n=new gw(r),this.binaryCache=$8e(ee().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new y8e(this.gpgpu),this.numMBBeforeWarning=M8e(),this.texData=new YN(this,Wo())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,s,i,o){const a=this.makeTensorInfo(n,r),l=this.texData.get(a.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[s,i]},l.texShape=[s,i];const u=Zv(n),c=new u8(u,!1,o),d=this.runWebGLProgram(c,[a],r,[[s,i]]);return d.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(a),d.dataId}write(e,n,r){if((ee().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||ee().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const s={id:this.nextDataId()};return this.texData.set(s,{shape:n,dtype:r,values:e,usage:Fi.UPLOAD,refCount:1}),s}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,s,i){if(ee().getBool("DEBUG")&&this.checkNumericalProblems(n),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:s,values:n,usage:Fi.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:s,complexTensorInfos:i,slice:o,shape:a,isPacked:l}=n;if(o!=null){let h;l?h=new Ou(a,Cu):h=new Ma(a,Cu);const f=this.runWebGLProgram(h,[{dataId:e,shape:a,dtype:s}],s),p=this.readSync(f.dataId);return this.disposeIntermediateTensorInfo(f),p}if(r!=null)return this.convertAndCacheOnCPU(e);if(s==="string")return r;const u=this.activeTimers!=null;let c;u&&(c=ls());let d;if(s==="complex64"){const h=this.readSync(i.real.dataId),f=this.readSync(i.imag.dataId);d=Vl(h,f)}else d=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=ls()-c),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const p=this.pendingRead.get(e);return new Promise(m=>p.push(m))}const n=this.texData.get(e),{values:r,shape:s,slice:i,dtype:o,complexTensorInfos:a,isPacked:l}=n;if(i!=null){let p;l?p=new Ou(s,Cu):p=new Ma(s,Cu);const m=this.runWebGLProgram(p,[{dataId:e,shape:s,dtype:o}],o),y=this.read(m.dataId);return this.disposeIntermediateTensorInfo(m),y}if(r!=null)return this.convertAndCacheOnCPU(e);if(ee().getBool("DEBUG")&&!ee().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&ee().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,c;if(o!=="complex64"&&ee().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(e);const p=this.texData.get(c.dataId);u=this.gpgpu.createBufferFromTexture(p.texture.texture,...Xv(s))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(o==="complex64"){const p=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),m=p[0],y=p[1];d=Vl(m,y)}else if(u==null)d=this.getValuesFromTexture(e);else{const p=re(s);d=this.gpgpu.downloadFloat32MatrixFromBuffer(u,p)}if(c!=null&&this.disposeIntermediateTensorInfo(c),u!=null){const p=this.gpgpu.gl;Ae(p,()=>p.deleteBuffer(u))}const h=this.convertAndCacheOnCPU(e,d),f=this.pendingRead.get(e);return this.pendingRead.delete(e),f.forEach(p=>p(h)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Wo().removeDataId(e,this),this.pendingDeletes--),h}readToGPU(e,n={}){const r=this.texData.get(e),{values:s,shape:i,slice:o,dtype:a,isPacked:l,texture:u}=r;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let f;l?f=new Ou(i,Cu):f=new Ma(i,Cu);const p=this.runWebGLProgram(f,[{dataId:e,shape:i,dtype:a}],a),m=this.readToGPU(p,n);return this.disposeIntermediateTensorInfo(p),m}if(u==null)throw s!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(e,n.customTexShape),d=Wo().makeTensorFromTensorInfo(c),h=this.texData.get(c.dataId);return Object.assign({tensorRef:d},h.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>Hl(s));return ct(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return ct(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!HRe(r))throw ee().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:s}=this.texData.get(e),i=re(n);if(ee().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const h=this.decode(e),f=this.texData.get(h.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(f.texture.texture,...Xv(n)).subarray(0,i);return this.disposeIntermediateTensorInfo(h),p}const o=ee().getBool("WEBGL_PACK")&&s===!0,a=o?Zv(n):n,l=o?new rOe(a):new nOe(a),u=this.runWebGLProgram(l,[{shape:a,dtype:r,dataId:e}],"float32"),c=this.texData.get(u.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(u),d}timerAvailable(){return ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let s=!1;this.programTimersStack==null?(this.programTimersStack=r,s=!0):this.activeTimers.push(r),this.activeTimers=r,e();const i=Qa(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),o=Qa(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,s&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(i);a.kernelMs=iB(l),a.getExtraProfileInfo=()=>l.map((u,c)=>({name:o[c],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:ls(),endMs:null}}endTimer(e){return ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=ls(),e)}async getQueryTime(e){if(ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:s,usage:i,isPacked:o,slice:a}=this.texData.get(e),l=a&&a.origDataId||e,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(s,r),this.textureManager.releaseTexture(n,s,i,o)));const c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=L8e){return ee().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&re(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){ki("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return R8e(e.shape,n)}packedUnaryOp(e,n,r){const s=new Ou(e.shape,n),i=this.compileAndRun(s,[e],r);return Wo().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const s=kG(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,s)}if(ee().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,f8,e.dtype);const n=new Ma(e.shape,f8),r=this.compileAndRun(n,[e]);return Wo().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&Pa(r[0])){const i=r.map(o=>Va(o));s=this.write(i,e,n)}else s=this.write(r,e,n);return this.texData.get(s).usage=null,{dataId:s,shape:e,dtype:n}}makeOutput(e,n,r){return Wo().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new D8e(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new m8e(e.shape),r=!0;return this.runWebGLProgram(n,[e],e.dtype,null,r)}packedReshape(e,n){const r=[Wf(e.shape),...Vf(e.shape)],s={dtype:e.dtype,shape:r,dataId:e.dataId},i=[Wf(n),...Vf(n)],o=new AG(i,r),a=!0,l=[r],u=this.runWebGLProgram(o,[s],e.dtype,l,a);return{dataId:u.dataId,shape:n,dtype:u.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:s,shape:i,dtype:o}=r;if(n!=null){const h=re(i),f=n[0]*n[1]*4;D(h<=f,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=Zv(i);let l;s?l=new tOe(a):l=new eOe(a);const u=!0,c=[n??Xv(a)],d=this.runWebGLProgram(l,[{shape:a,dtype:o,dataId:e}],o,c,u,n);return{dtype:o,shape:i,dataId:d.dataId}}runWebGLProgram(e,n,r,s,i=!1,o){const a=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(a.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===kg.DENSE){const g=o??Xv(e.outputShape);l.texShape=g.map(v=>v*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),re(a.shape)===0)return l.values=xr(a.dtype,0),a;const u=[],c=n.map(g=>{if(g.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let v=this.texData.get(g.dataId);if(v.texture==null){if(!e.packedInputs&&re(g.shape)<=ee().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:g.shape,texData:null,isUniform:!0,uniformValues:v.values};e.packedInputs&&(v.isPacked=!0,v.shape=g.shape)}if(this.uploadToGPU(g.dataId),!!v.isPacked!=!!e.packedInputs)g=v.isPacked?this.unpackTensor(g):this.packTensor(g),u.push(g),v=this.texData.get(g.dataId);else if(v.isPacked&&!ZE(v.shape,g.shape)){const E=g,b=g.shape;g.shape=v.shape,g=this.packedReshape(g,b),u.push(g),v=this.texData.get(g.dataId),E.shape=b}return{shape:g.shape,texData:v,isUniform:!1}});this.uploadToGPU(a.dataId);const d={shape:a.shape,texData:l,isUniform:!1},h=JFe(e,c,d),f=this.getAndSaveBinary(h,()=>QFe(this.gpgpu,e,c,d)),p=this.activeTimers!=null;let m;p&&(m=this.startTimer()),ee().get("ENGINE_COMPILE_ONLY")||ZFe(this.gpgpu,f,c,d,s),u.forEach(g=>this.disposeIntermediateTensorInfo(g)),p&&(m=this.endTimer(m),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(m)}));const y=ee().getNumber("WEBGL_FLUSH_THRESHOLD");if(y>0){const g=ls();g-this.lastGlFlushTime>y&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=g)}if(!ee().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&i===!1){const g=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),g}return a}compileAndRun(e,n,r,s,i=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,s,i)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(ee().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=J(()=>{if(!ee().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=ee().getBool("DEBUG");ee().set("DEBUG",!1);const n=this.abs(We(1e-8)).dataSync()[0];if(ee().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?F8e:O8e}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:s,values:i,texture:o,usage:a,isPacked:l}=n;if(o!=null)return;const u=this.activeTimers!=null;let c;u&&(c=ls());let d=n.texShape;if(d==null&&(d=iFe(r,l),n.texShape=d),i!=null){const h=Zv(r);let f,p=d[1],m=d[0];const y=i instanceof Uint8Array||i instanceof Uint8ClampedArray;(l||!y)&&([p,m]=u1(d[0],d[1])),l?f=new iOe(h,y):f=new u8(h,y);const g=y?[m,p]:d,v=this.makeTensorInfo(g,s),E=this.texData.get(v.dataId);y?E.usage=Fi.PIXELS:E.usage=Fi.UPLOAD,E.texShape=g,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),p,m,i);const b=[[m,p]],T=!0,x=this.runWebGLProgram(f,[v],s,b,T),C=this.texData.get(x.dataId);n.texShape=C.texShape,n.isPacked=C.isPacked,n.usage=C.usage,ee().get("ENGINE_COMPILE_ONLY")?this.disposeData(x.dataId):(n.texture=C.texture,n.values=null,this.texData.delete(x.dataId)),this.disposeIntermediateTensorInfo(v),u&&(this.uploadWaitMs+=ls()-c)}else{const h=this.acquireTexture(d,a,s,l);n.texture=h}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:s}=r;return n!=null&&(r.values=B8e(n,s)),r.values}acquireTexture(e,n,r,s){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${i} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,s)}computeBytes(e,n){return e[0]*e[1]*dg(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(s=>{try{this.checkCompletion_(n),s(!0)}catch(i){throw i}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await FA(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(mG(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:s,nanLoc:i,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:l}=EG(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=s,e.nanLoc=i,e.outShapeLocation=o,e.outShapeStridesLocation=a,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:s,height:i,width:o,channels:a}=e,l=Wo().backend;if(!l.gpgpu.gl.isTexture(s))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const u=l.writeTexture(s,n,r,i,o,a);return Wo().makeTensorFromDataId(u,n,r,l)}}c2.nextDataId=0;function B8e(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/** @license See the LICENSE file. *//**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */a9()&&u9("webgl",()=>new c2,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M5=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Hd{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=it(n,r),this.enableShapeUniforms=ns(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dh=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class p1{constructor(e,n,r,s=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=it(n,r);const i=this.outputShape.length;this.enableShapeUniforms=ns(i);let o="";if(s)if(i===0||re(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${Yt(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=ms("coords",i);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yi(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const z8e={kernelName:_p,backendName:"webgl",kernelFunc:yi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wc(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),a=yi({inputs:{x:r},backend:n}),l=yi({inputs:{x:s},backend:n});return o.complexTensorInfos={real:a,imag:l},i}const H8e={kernelName:lx,backendName:"webgl",kernelFunc:wc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DG="return (a < 0.) ? b * a : a;",RG=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function U8e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:i}=r,o=n.makeTensorInfo([],"float32",eu(i,"float32")),a=ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new p1(RG,s.shape,o.shape):new Hd(DG,s.shape,o.shape),l=n.runWebGLProgram(a,[s,o],"float32");return n.disposeIntermediateTensorInfo(o),l}const W8e={kernelName:I0,backendName:"webgl",kernelFunc:U8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FG="return (a < 0.) ? b * a : a;",OG=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function V8e(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e,i=ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new p1(OG,r.shape,s.shape):new Hd(FG,r.shape,s.shape);return n.runWebGLProgram(i,[r,s],"float32")}const G8e={kernelName:K0,backendName:"webgl",kernelFunc:V8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m1="if (isnan(x)) return x;";function Ot({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:s,backend:i})=>{const{x:o}=s,a=i,l=r||o.dtype;if(a.shouldExecuteOnCPU([o])&&n!=null){const d=a.texData.get(o.dataId),h=n(d.values,l);return a.makeTensorInfo(o.shape,l,h)}const u=ee().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let c;return u?c=new Ou(o.shape,e):c=new Ma(o.shape,t),a.runWebGLProgram(c,[o],l)}}function Gr({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:s,dtype:i}){return({inputs:o,backend:a})=>{const{a:l,b:u}=o,c=a;if(r&&l.dtype==="complex64"){const p=c.texData.get(l.dataId),m=c.texData.get(u.dataId),[y,g]=[[p.complexTensorInfos.real,m.complexTensorInfos.real],[p.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(E=>{const[b,T]=E,x={dataId:b.dataId,dtype:b.dtype,shape:l.shape},C={dataId:T.dataId,dtype:T.dtype,shape:u.shape},S=new Hd(t,l.shape,u.shape);return c.runWebGLProgram(S,[x,C],Bs(b.dtype,T.dtype))}),v=wc({inputs:{real:y,imag:g},backend:c});return c.disposeIntermediateTensorInfo(y),c.disposeIntermediateTensorInfo(g),v}const d=i||Bs(l.dtype,u.dtype);if((l.dtype==="string"||u.dtype==="string"||c.shouldExecuteOnCPU([l,u]))&&s!=null){const p=c.texData.get(l.dataId).values,m=c.texData.get(u.dataId).values,y=l.dtype==="string"?Gl(p):p,g=l.dtype==="string"?Gl(m):m,[v,E]=s(l.shape,u.shape,y,g,d),b=c.makeTensorInfo(E,d),T=c.texData.get(b.dataId);return T.values=v,b}const h=ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let f;return h?f=new p1(e,l.shape,u.shape,n):f=new Hd(t,l.shape,u.shape),c.runWebGLProgram(f,[l,u],d)}}function Ig(t,e=!1){if(t==="linear")return e?_8e:T8e;if(t==="relu")return e?I8e:C8e;if(t==="elu")return e?k8e:x8e;if(t==="relu6")return e?N8e:S8e;if(t==="prelu")return e?OG:FG;if(t==="leakyrelu")return e?RG:DG;if(t==="sigmoid")return e?A8e:w8e;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $G{constructor(e,n,r,s=!1,i=!1,o=!1,a=null,l=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=ns(this.outputShape.length);const c=s?e[1]:e[2],d=Math.ceil(c/2),h=s?"i * 2, rc.y":"rc.y, i * 2",f=i?"rc.z, i * 2":"i * 2, rc.z",p=s?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let y="",g="";a&&(l?y=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:u?y=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:y=`vec4 activation(vec4 x) {
          ${a}
        }`,g="result = activation(result);");const v=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let E="rc.x",b="rc.x";e[0]<n[0]?E=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(b=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${y}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${E};
        int batchB = ${b};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${h});
          vec4 b = getMatrixB(batchB, ${f});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${p[0]} * ${m[0]});
          result += (${p[1]} * ${m[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${v}

        ${g}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p8={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class m8{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=it(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g8="return a * b;";function B5(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,i=Bs(r.dtype,s.dtype);if(r.dtype==="complex64"){const a=n.texData.get(r.dataId),l=n.texData.get(s.dataId),u=new m8(p8.REAL,r.shape,s.shape),c=new m8(p8.IMAG,r.shape,s.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:s.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:s.shape}],h=n.runWebGLProgram(u,d,"float32"),f=n.runWebGLProgram(c,d,"float32"),p=wc({inputs:{real:h,imag:f},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),p}if(n.shouldExecuteOnCPU([r,s])){const a=n.texData.get(r.dataId),l=n.texData.get(s.dataId),[u,c]=VOe(r.shape,s.shape,a.values,l.values,i),d=n.makeTensorInfo(c,i),h=n.texData.get(d.dataId);return h.values=u,d}let o;return ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new p1(g8,r.shape,s.shape):o=new Hd(g8,r.shape,s.shape),n.runWebGLProgram(o,[r,s],i)}const j8e={kernelName:$p,backendName:"webgl",kernelFunc:B5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K8e(t,e,n){const r=[Wf(t.shape),...Vf(t.shape)],s={dtype:t.dtype,shape:r,dataId:t.dataId},i=[Wf(e),...Vf(e)],o=new AG(i,r),a=!0,l=[r],u=n.runWebGLProgram(o,[s],t.dtype,l,a);return{dataId:u.dataId,shape:e,dtype:u.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ke(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:i}=r,o=n,a=re(s.shape),l=ZN(i,a),u=re(l);D(a===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${s.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const c=o.texData.get(s.dataId);return c.isPacked&&!ZE(s.shape,l)&&!(c.texture!==null&&ZE(c.shape,l))?K8e(s,l,o):(o.incRef(s.dataId),{dataId:s.dataId,shape:l,dtype:s.dtype})}const q8e={kernelName:X0,backendName:"webgl",kernelFunc:ke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class y8{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:i,outSize:o}=e;this.outputShape=[s,o];const a=Math.floor(r/4)*4,l=r%4;let u="sumValue += dot(values, ones);";if(n!=null){const d=1/n;u=`sumValue += dot(values * ${kd(d)?d.toPrecision(2):d}, ones);`}let c="";i%r>0&&(c=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class X8e{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:i,outSize:o}=e;this.outputShape=[s,o];let a="0.0",l="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",l="min"):n==="max"&&(a="-1.0 / 1e-20",l="max");let u=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");const c=Math.floor(r/4)*4,d=r%4;let h=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,f="vec4";n==="all"?(a="1.0",h=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,f="bvec4"):n==="any"&&(a="0.0",h=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,f="bvec4");let p="";i%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${h}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${d===2}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${d===3}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${h}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y8e(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=qC(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function hh(t,e,n,r){const s=Y8e(t.shape);let i=t;for(let o=0;o<s.length;o++){const{inSize:a,windowSize:l,outSize:u}=s[o];let c,d;n==="mean"?c=o===0?new y8({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u},a):new y8({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u}):c=new X8e({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:u},n),d=i,i=r.runWebGLProgram(c,[i],e),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return i}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Q8e{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[n[o]];this.outputShape=r,this.rank=r.length;const s=Yt(this.rank),i=Z8e(n);this.userCode=`
    void main() {
      ${s} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}}function Z8e(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let s=0;s<t.length;s++)r[t[s]]=n[s];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class J8e{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let c=0;c<r.length;c++)r[c]=e[n[c]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const s=Yt(this.rank),i=NG("rc",this.rank),o=new Array(this.rank);for(let c=0;c<n.length;c++)o[n[c]]=i[c];const a=`vec2(${o.slice(-2).join()})`,l=`++${i[this.rank-1]} < ${r[this.rank-1]}`,u=`getChannel(getA(${o.join()}), ${a})`;this.userCode=`
    void main() {
      ${s} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${l}) {
        result[1] = ${u};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${u};
        if(${l}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d2(t,e,n){const r=ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new J8e(t.shape,e):new Q8e(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e$e(t,e,n,r){const s=e,i=t.shape.length,o=yt(s,t.shape);let a=o;const l=$n(a,i),u=l!=null;let c=t;u&&(c=d2(t,l,r),a=Xn(a.length,i)),Wr("sum",a,i);const[d,h]=Ir(c.shape,a);let f=d;n&&(f=Kn(d,o));const p=re(h),y=re(t.shape)/p,g=ke({inputs:{x:c},attrs:{shape:[y,p]},backend:r}),v=lC(t.dtype),E=hh(g,v,"sum",r),b=ke({inputs:{x:E},attrs:{shape:f},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(E),u&&r.disposeIntermediateTensorInfo(c),b}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h2(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;return e$e(s,i,o,n)}const t$e={kernelName:ty,backendName:"webgl",kernelFunc:h2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vs(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{perm:i}=r,o=n,a=s.shape.length,l=new Array(a);for(let c=0;c<l.length;c++)l[c]=s.shape[i[c]];let u;if(o.shouldExecuteOnCPU([s])){const d=o.texData.get(s.dataId).values,h=P5(d,s.shape,s.dtype,i,l);u=o.makeTensorInfo(l,s.dtype);const f=o.texData.get(u.dataId);f.values=h}else u=d2(s,i,o);return u}const n$e={kernelName:fd,backendName:"webgl",kernelFunc:vs};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LG=1e3;function JE({a:t,b:e,transposeA:n,transposeB:r,backend:s,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:l=null}){const u=t.shape.length,c=e.shape.length,d=n?t.shape[u-2]:t.shape[u-1],h=r?e.shape[c-1]:e.shape[c-2],f=n?t.shape[u-1]:t.shape[u-2],p=r?e.shape[c-2]:e.shape[c-1],m=t.shape.slice(0,-2),y=e.shape.slice(0,-2),g=re(m),v=re(y),b=it(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([f,p]);D(d===h,()=>`Error in matMul: inner shapes (${d}) and (${h}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const T=n?[g,d,f]:[g,f,d],x=r?[v,p,h]:[v,h,p],C=ke({inputs:{x:t},backend:s,attrs:{shape:T}}),S=ke({inputs:{x:e},backend:s,attrs:{shape:x}}),N=[C,S],I=Math.max(g,v),F=n?C.shape[1]:C.shape[2],L=i!=null,z=o!=null,H=l==="leakyrelu",$=l!=null?Ig(l,!0):null,M=L||z||H||$!=null;let j;if((f===1||p===1)&&F>LG&&M===!1){let B=C,K=S;n&&(B=vs({inputs:{x:C},backend:s,attrs:{perm:[0,2,1]}}),N.push(B)),r&&(K=vs({inputs:{x:S},backend:s,attrs:{perm:[0,2,1]}}),N.push(K));const A=p!==1,O=p===1;let se=B;A&&(se=ke({inputs:{x:B},backend:s,attrs:{shape:[I,F,1]}}),N.push(se));const ae=p===1?2:1;let de=K;O&&(de=ke({inputs:{x:K},backend:s,attrs:{shape:[I,1,F]}}),N.push(de));const le=B5({inputs:{a:se,b:de},backend:s});j=h2({inputs:{x:le},backend:s,attrs:{axis:ae,keepDims:!0}}),N.push(le)}else{const B=Bs(t.dtype,e.dtype),K=new $G(T,x,[I,f,p],n,r,L,$,z,H),A=[C,S];if(i!=null&&A.push(i),z&&A.push(o),H){const O=s.makeTensorInfo([],"float32",eu(a,"float32"));A.push(O),N.push(O)}j=s.runWebGLProgram(K,A,B)}const P=ke({inputs:{x:j},backend:s,attrs:{shape:b}});N.push(j);for(const B of N)s.disposeIntermediateTensorInfo(B);return P}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r$e(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=r;return JE({a:s,b:i,transposeA:l,transposeB:u,backend:n,bias:o,preluActivationWeights:a,leakyreluAlpha:d,activation:c})}const s$e={kernelName:hg,backendName:"webgl",kernelFunc:r$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v8="return abs(x);";function i$e(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const i=n.texData.get(r.dataId),o=kG(i.values);return n.makeTensorInfo(r.shape,r.dtype,o)}let s;return ee().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new Ou(r.shape,v8):s=new Ma(r.shape,v8),n.runWebGLProgram(s,[r],r.dtype)}const o$e={kernelName:o0,backendName:"webgl",kernelFunc:i$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a$e=Ao+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,l$e=Ot({opSnippet:a$e}),u$e={kernelName:op,backendName:"webgl",kernelFunc:l$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c$e=Ao+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,d$e=Ot({opSnippet:c$e}),h$e={kernelName:ap,backendName:"webgl",kernelFunc:d$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b8="return a + b;",f$e=Gr({opSnippet:b8,packedOpSnippet:b8,supportsComplex:!0,cpuKernelImpl:COe}),p$e={kernelName:eh,backendName:"webgl",kernelFunc:f$e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m$e{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`float v${i} = get${i}AtOutCoords();`)});const s=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class g$e{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`vec4 v${i} = get${i}AtOutCoords();`)});const s=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Db(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return yi({inputs:{x:r[0]},backend:n});if(r.length>ee().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),u=Db({inputs:r.slice(0,l),backend:n}),c=Db({inputs:r.slice(l),backend:n});return Db({inputs:[u,c],backend:n})}const s=r.map(l=>l.dtype).reduce((l,u)=>Bs(l,u)),i=r.map(l=>l.shape),a=ee().getBool("WEBGL_PACK")?new g$e(r[0].shape,i):new m$e(r[0].shape,i);return n.runWebGLProgram(a,r,s)}const y$e={kernelName:a0,backendName:"webgl",kernelFunc:Db};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=yt(i,s.shape);let u=l;const c=$n(u,a);let d=s;c!=null&&(d=vs({inputs:{x:s},backend:n,attrs:{perm:c}}),u=Xn(u.length,a)),Wr("all",u,a);const[h,f]=Ir(d.shape,u),p=re(f),m=ke({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),y=hh(m,m.dtype,"all",n);let g;if(o){const v=Kn(h,l);g=ke({inputs:{x:y},backend:n,attrs:{shape:v}})}else g=ke({inputs:{x:y},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),c!=null&&n.disposeIntermediateTensorInfo(d),g}const b$e={kernelName:nx,backendName:"webgl",kernelFunc:v$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=yt(i,s.shape);let u=l;const c=$n(u,a);let d=s;c!=null&&(d=vs({inputs:{x:s},backend:n,attrs:{perm:c}}),u=Xn(u.length,a)),Wr("any",u,a);const[h,f]=Ir(d.shape,u),p=re(f),m=ke({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),y=hh(m,m.dtype,"any",n);let g;if(o){const v=Kn(h,l);g=ke({inputs:{x:y},backend:n,attrs:{shape:v}})}else g=ke({inputs:{x:y},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),c!=null&&n.disposeIntermediateTensorInfo(d),g}const T$e={kernelName:rx,backendName:"webgl",kernelFunc:E$e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x$e{constructor(e,n,r){this.variableNames=["A"];const{windowSize:s,batchSize:i,outSize:o}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];const a=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${s}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class C$e{constructor(e,n,r,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,D(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const i=e[e.length-1],o=Math.ceil(i/n);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),s||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,u=Yt(l),c=ms("coords",l);let d,h;if(o===1){h=l+1;const S=Yt(h);d=`
        ${S} sourceLocR = ${S}(${c.join()}, 0);
        ++${c[l-1]};
        ${S} sourceLocG = ${S}(${c.join()}, 0);
        ++${c[l-2]};
        ${S} sourceLocA = ${S}(${c.join()}, 0);
        --${c[l-1]};
        ${S} sourceLocB = ${S}(${c.join()}, 0);
        --${c[l-2]};`}else h=l,d=`
        ${u} sourceLocR = coords;
        ++${c[l-1]};
        ${u} sourceLocG = coords;
        ++${c[l-2]};
        ${u} sourceLocA = coords;
        --${c[l-1]};
        ${u} sourceLocB = coords;
        --${c[l-2]};`;const f=["x","y","z","w","u","v"].slice(0,h),p="."+f[h-1],m=f.map(S=>"int "+S),y=ms("sourceLocR",h-1).concat("inIdx.r"),g=ms("sourceLocG",h-1).concat("inIdx.g"),v=ms("sourceLocB",h-1).concat("inIdx.b"),E=ms("sourceLocA",h-1).concat("inIdx.a"),b=r==="max"?"greaterThan":"lessThan",T=s?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${E.join()})));`,x=`vec4(
            getAChannel(${y.join()}),
            hasNextCol ? getAChannel(${g.join()}) : 0.,
            hasNextRow ? getAChannel(${v.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${E.join()}) : 0.)`,C=s?"":`
      float getBestIndicesAChannel(${m.join()}) {
        return getChannel(getBestIndicesA(${f.join()}),
                                          vec2(${f.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${m.join()}) {
        return getChannel(getA(${f.join()}),
                               vec2(${f.slice(-2).join()}));
      }
      ${C}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${c[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${c[l-2]} < ${a[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},
          sourceLocB${p}, sourceLocA${p}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${x};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${T}
          vec4 candidate = ${x};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${b}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PG(t,e,n,r=null){let s=e.shape[0],i=e.shape[1];r!=null&&(s=r.shape[0],i=r.shape[1]);const o=qC(i),a={windowSize:o,inSize:i,batchSize:s,outSize:Math.ceil(i/o)},l=new x$e(a,n,r==null),u=[e];r!=null&&u.push(r);const c=t.runWebGLProgram(l,u,"int32");if(c.shape[1]===1)return c;const d=PG(t,e,n,c);return t.disposeIntermediateTensorInfo(c),d}function MG(t,e,n,r=null){const s=r!=null?r.shape:e.shape,i=s[s.length-1],o=qC(i),a=new C$e(s,o,n,r==null),l=r==null?[e]:[e,r],u=t.runWebGLProgram(a,l,"int32");if(u.shape.length===e.shape.length){const c=MG(t,e,n,u);return t.disposeIntermediateTensorInfo(u),c}return u}function BG(t,e,n,r){const s=[n];if(Wr("arg"+r.charAt(0).toUpperCase()+r.slice(1),s,e.shape.length),!ee().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const i=[],o=t.texData.get(e.dataId),a=o!==null&&o.isPacked;let l=e;a&&(l=t.unpackTensor(e),i.push(l));const[u,c]=Ir(l.shape,s),d=re(c),h=ke({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});i.push(h);const f=PG(t,h,r);i.push(f);const p=ke({inputs:{x:f},backend:t,attrs:{shape:u}});return i.forEach(m=>t.disposeIntermediateTensorInfo(m)),p}return MG(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;let o=yt(i,s.shape);const a=$n(o,s.shape.length);let l=s;const u=[];a!=null&&(l=vs({inputs:{x:s},backend:n,attrs:{perm:a}}),u.push(l),o=Xn(o.length,l.shape.length)),Wr("argMax",[o[0]],l.shape.length);const c=BG(n,l,o[0],"max");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const w$e={kernelName:l0,backendName:"webgl",kernelFunc:S$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;let o=yt(i,s.shape);const a=$n(o,s.shape.length);let l=s;const u=[];a!=null&&(l=vs({inputs:{x:s},backend:n,attrs:{perm:a}}),u.push(l),o=Xn(o.length,l.shape.length)),Wr("argMin",[o[0]],l.shape.length);const c=BG(n,l,o[0],"min");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const k$e={kernelName:u0,backendName:"webgl",kernelFunc:_$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I$e=Ao+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,N$e=Ot({opSnippet:I$e}),A$e={kernelName:lp,backendName:"webgl",kernelFunc:N$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D$e=Ao+"return log(x + sqrt(x * x + 1.0));",R$e=Ot({opSnippet:D$e}),F$e={kernelName:up,backendName:"webgl",kernelFunc:R$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O$e=Ao+`
  return atan(x);
`,$$e=Ot({opSnippet:O$e}),L$e={kernelName:cp,backendName:"webgl",kernelFunc:$$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P$e=M5+`
  return atan(a, b);
`,M$e=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+dh+`
  return result;
`,B$e=Gr({opSnippet:P$e,packedOpSnippet:M$e}),z$e={kernelName:hp,backendName:"webgl",kernelFunc:B$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H$e=Ao+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,U$e=Ot({opSnippet:H$e}),W$e={kernelName:dp,backendName:"webgl",kernelFunc:U$e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ng{constructor(e,n,r,s=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,f=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const m=n==="avg",y=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,g=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let v="0.0";if(m||(v="-1.0 / 1e-20"),r){const S=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${f}, ${p});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${S} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${s?i?y:g:`wR * ${h} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const E="max";let b=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(b="avgValue / max(count, 1.0)");const T=Math.floor(o/4)*4,x=o%4,C=`
      if (${m}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${E}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${f}, ${p});
      const float initializationValue = ${v};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${v});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${T}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${C}
          }

          int xC = xCCorner + ${T};
          if (${x===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${C}
          } else if (${x===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${C}
          } else if (${x===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${C}
          }
        }
        setOutput(${b});
      }
    `}}class z5{constructor(e,n,r,s=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideDepth,l=e.strideHeight,u=e.strideWidth,c=e.dilationDepth,d=e.dilationHeight,h=e.dilationWidth,f=e.effectiveFilterDepth,p=e.effectiveFilterHeight,m=e.effectiveFilterWidth,y=e.padInfo.front,g=e.padInfo.top,v=e.padInfo.left;this.outputShape=e.outShape;const E=n==="avg";let b="0.0";if(E||(b="-1.0 / 1e-20"),r){const I=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${u});
        const ivec3 pads = ivec3(${y}, ${g}, ${v});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${f};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${p};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${m};
                  wC += ${h}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${I} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${s?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${m} +
                      wR * ${m} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const T="max";let x=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(x="avgValue / max(count, 1.0)");const C=Math.floor(o/4)*4,S=o%4,N=`
      if (${E}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${T}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${u});
      const ivec3 pads = ivec3(${y}, ${g}, ${v});
      const float initializationValue = ${b};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${b});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${C}; wC += 4) {
              int xC = xCCorner + wC * ${h};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                getValue(batch, xD, xR, xC + 3 * ${h}, ch)
              );

              ${N}
            }

            int xC = xCCorner + ${C};
            if (${S===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${N}
            } else if (${S===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                initializationValue,
                initializationValue
              );

              ${N}
            } else if (${S===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                initializationValue
              );

              ${N}
            }
          }
        }
        setOutput(${x});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;Uy(s,"avgPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,u=1;D(Ur(o,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=Io(s.shape,i,o,u,a,l);if(c.filterWidth===1&&c.filterHeight===1&&Et(c.inShape,c.outShape))return yi({inputs:{x:s},backend:n});const d=new Ng(c,"avg",!1);return n.runWebGLProgram(d,[s],"float32")}const G$e={kernelName:c0,backendName:"webgl",kernelFunc:V$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l,dataFormat:u}=r,c=[1,1,1],d=tu(s.shape,i,o,c,a,l,u),h=new z5(d,"avg",!1);return n.runWebGLProgram(h,[s],"float32")}const K$e={kernelName:d0,backendName:"webgl",kernelFunc:j$e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q$e{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=l-1-e.padInfo.top,d=u-1-e.padInfo.left,h=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${d});
      const float avgMultiplier = float(${h});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class X$e{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,d=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,p=d-1-e.padInfo.front,m=h-1-e.padInfo.top,y=f-1-e.padInfo.left,g=1/(n*r*s);this.userCode=`
      const ivec3 pads = ivec3(${p}, ${m}, ${y});
      const float avgMultiplier = float(${g});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${h};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${f};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y$e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=r,d=[1,1,1],h=tu(o.shape,a,l,d,u,c),f=new X$e(h);return n.runWebGLProgram(f,[s],o.dtype)}const Q$e={kernelName:ix,backendName:"webgl",kernelFunc:Y$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z$e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i;Uy([s,i],"avgPoolGrad");const{filterSize:a,strides:l,pad:u}=r,c=Io(o.shape,a,l,1,u),d=new q$e(c);return n.runWebGLProgram(d,[s],o.dtype)}const J$e={kernelName:sx,backendName:"webgl",kernelFunc:Z$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eLe(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i}=e,{transposeA:o,transposeB:a}=r;return JE({a:s,b:i,transposeA:o,transposeB:a,backend:n})}const tLe={kernelName:h0,backendName:"webgl",kernelFunc:eLe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nLe{constructor(e,n,r,s,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],it(e,n),it(e,r);let a="0.0";s!=null&&(it(e,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";i!=null&&(it(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rLe{constructor(e,n,r,s,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],it(e,n),it(e,r);let a="vec4(0.0)";s!=null&&(it(e,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";i!=null&&(it(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sLe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:s,variance:i,offset:o,scale:a}=t;D(s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),D(o==null||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),D(a==null||s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const u=[r,s,i];let c=null;o!=null&&(c=o.shape,u.push(o));let d=null;a!=null&&(d=a.shape,u.push(a));const h=ee().getBool("WEBGL_PACK_NORMALIZATION")?new rLe(r.shape,s.shape,i.shape,c,d,l):new nLe(r.shape,s.shape,i.shape,c,d,l);return e.runWebGLProgram(h,u,u[0].dtype)},iLe={kernelName:w0,backendName:"webgl",kernelFunc:sLe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oLe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=Yt(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=aLe(this.rank);let s;const i=e.map((o,a)=>`sourceLoc.${qk[a]} = start[${a}] + coords.${qk[a]};`);s=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${s}
        setOutput(getSource(${r}));
      }
    `}}const qk=["x","y","z","w","u","v"];function aLe(t){if(t===1)return"sourceLoc";if(t<=6)return qk.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lLe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Yt(this.rank),r=ms("coords",this.rank),s=ms("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${s.slice(-2).join()})`,o=`getChannel(getSource(${s.join()}), ${i})`,a=`
      result.x = ${o};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${s[this.rank-1]};
        result.y = ${o};
        --${s[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${s[this.rank-2]};
        result.z = ${o};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${s[this.rank-1]};
          result.w = ${o};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((c,d)=>`start[${d}]`).join()});`:e.map((c,d)=>`${s[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uLe(t,e,n,r){const s=r.texData.get(t.dataId),i=r.makeTensorInfo(n,t.dtype),o=r.texData.get(i.dataId);Object.assign(o,s),o.refCount=1,o.shape=n,o.dtype=t.dtype;let a=DA(e,Ue(t.shape));s.slice&&(a+=s.slice.flatOffset),o.slice={flatOffset:a,origDataId:s.slice&&s.slice.origDataId||t.dataId};const l=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,l+1),i}function g1(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,size:o}=r,[a,l]=KC(s,i,o);if(IA(s,a,l),re(l)===0)return n.makeTensorInfo(l,s.dtype,[]);if(n.shouldExecuteOnCPU([s])||s.dtype==="string"){const d=n.texData.get(s.dataId),h=t8e(d.values,a,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,h)}const{isPacked:u}=n.texData.get(s.dataId),c=AA(s.shape,a,l);if(u||!c){const d=ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new lLe(l):new oLe(l),h=[a];return n.runWebGLProgram(d,[s],s.dtype,h)}return n.uploadToGPU(s.dataId),uLe(s,a,l,n)}const cLe={kernelName:ey,backendName:"webgl",kernelFunc:g1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dLe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,crops:o}=r;D(s.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=i.reduce((v,E)=>v*E),l=Ny(s.shape,i,a),u=Ay(l.length,i.length),c=Dy(s.shape,i,a),d=PA(o,i.length),h=MA(c,o,i.length),f=[],p=ke({inputs:{x:s},backend:n,attrs:{shape:l}}),m=vs({inputs:{x:p},backend:n,attrs:{perm:u}}),y=ke({inputs:{x:m},backend:n,attrs:{shape:c}}),g=g1({inputs:{x:y},backend:n,attrs:{begin:d,size:h}});return f.push(p),f.push(m),f.push(y),f.forEach(v=>n.disposeIntermediateTensorInfo(v)),g},hLe={kernelName:f0,backendName:"webgl",kernelFunc:dLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o}=r,a=n.readSync(s.dataId),l=n.readSync(i.dataId),u=_G(a,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}const pLe={kernelName:ox,backendName:"webgl",kernelFunc:fLe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mLe=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,gLe=`
  return float(int(a.r) & int(b.r));
`;function yLe(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,i=ee().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=ee().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,s])||o===1){const l=n.texData.get(r.dataId).values,u=n.texData.get(s.dataId).values,[c,d]=wOe(r.shape,s.shape,l,u,r.dtype),h=n.makeTensorInfo(d,r.dtype),f=n.texData.get(h.dataId);return f.values=c,h}let a;return i?a=new p1(mLe,r.shape,s.shape,!1):a=new Hd(gLe,r.shape,s.shape),n.runWebGLProgram(a,[r,s],r.dtype)}const vLe={kernelName:p0,backendName:"webgl",kernelFunc:yLe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bLe(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,i=n.readSync(r.dataId),o=n.readSync(s.dataId),a=it(Array.from(i),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const ELe={kernelName:ax,backendName:"webgl",kernelFunc:bLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TLe="return float(a != b);",zG=Gr({opSnippet:TLe,cpuKernelImpl:jOe,dtype:"bool"}),xLe={kernelName:U0,backendName:"webgl",kernelFunc:zG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vy(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return yi({inputs:{x:s.complexTensorInfos.real},backend:n})}const CLe={kernelName:Hx,backendName:"webgl",kernelFunc:Vy};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SLe="return float(int(x));";function wLe(t,e){const n=new Ma(t.shape,SLe),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xk(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:i}=r;if(i==="complex64"){if(s.dtype==="complex64")return yi({inputs:{x:s},backend:n});const o=nr(s.shape),a=Xk({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),l=wc({inputs:{real:a,imag:o},backend:n});return o.dispose(),n.disposeIntermediateTensorInfo(a),l}if(s.dtype==="complex64"){const o=Vy({inputs:{input:s},backend:n}),a=Xk({inputs:{x:o},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(o),a}if(!JN(s.dtype,i)){const o=yi({inputs:{x:s},backend:n});return{dataId:o.dataId,shape:o.shape,dtype:i}}if(n.shouldExecuteOnCPU([s])){const o=n.texData.get(s.dataId).values,[a,l,u]=_Oe(o,s.shape,s.dtype,i);return n.makeTensorInfo(a,l,u)}if(i==="int32")return wLe(s,n);if(i==="bool"){const o=n.makeTensorInfo([],"bool",xr("bool",1)),l=zG({inputs:{a:s,b:o},backend:n});return n.disposeIntermediateTensorInfo(o),l}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${i}`)}const _Le={kernelName:fp,backendName:"webgl",kernelFunc:Xk};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const E8="return ceil(x);",kLe=Ot({opSnippet:E8,packedOpSnippet:E8,cpuKernelImpl:kOe}),ILe={kernelName:pp,backendName:"webgl",kernelFunc:kLe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NLe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ALe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{clipValueMin:i,clipValueMax:o}=r;let a;ee().getBool("WEBGL_PACK_CLIP")?a=new ALe(s.shape):a=new NLe(s.shape);const l=[[i],[o]];return n.runWebGLProgram(a,[s],s.dtype,l)}const RLe={kernelName:mp,backendName:"webgl",kernelFunc:DLe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FLe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T8(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function OLe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=n.texData.get(r.dataId),i=new FLe(r.shape),o=[T8(r,s.complexTensorInfos.real),T8(r,s.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}const $Le={kernelName:m0,backendName:"webgl",kernelFunc:OLe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LLe{constructor(e){this.outputShape=[],this.outputShape=ja(e,1),this.variableNames=e.map((o,a)=>`T${a}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let o=1;o<n.length;o++)n[o]=n[o-1]+e[o][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<n.length;o++){const a=n[o-1];r.push(`else if (yC < ${n[o]}) setOutput(getT${o}(yR, yC-${a}));`)}const s=n.length,i=n[n.length-1];r.push(`else setOutput(getT${s}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PLe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=ja(e,n);const r=this.outputShape,s=r.length,i=Yt(s),o=ms("coords",s),a=["x","y","z","w","u","v"].slice(0,s);this.variableNames=e.map((m,y)=>`T${y}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let m=1;m<l.length;m++)l[m]=l[m-1]+e[m][n];const u=a[n],c=a.slice(-2),d=a.join();let h=`if (${u} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${c.join()}));
        }`;for(let m=1;m<l.length;m++){const y=l[m-1];h+=`
        if (${u} < ${l[m]}  && ${u} >= ${l[m-1]}) {
          return getChannel(
            getT${m}(${tb(a,u,y)}),
            vec2(${tb(c,u,y)}));
        }`}const f=l.length,p=l[l.length-1];h+=`
        return getChannel(
          getT${f}(${tb(a,u,p)}),
          vec2(${tb(c,u,p)}));`,this.userCode=`
      float getValue(${a.map(m=>"int "+m)}) {
        ${h}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[s-1]} = ${o[s-1]} + 1;
        if (${o[s-1]} < ${r[s-1]}) {
          result.g = getValue(${o});
        }

        ${o[s-2]} = ${o[s-2]} + 1;
        if (${o[s-2]} < ${r[s-2]}) {
          result.a = getValue(${o});
        }

        ${o[s-1]} = ${o[s-1]} - 1;
        if (${o[s-2]} < ${r[s-2]} &&
            ${o[s-1]} < ${r[s-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function tb(t,e,n){const r=t.indexOf(e);return t.map((i,o)=>o===r?`${i} - ${n}`:i).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f2(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return yi({inputs:{x:s.complexTensorInfos.imag},backend:n})}const MLe={kernelName:kx,backendName:"webgl",kernelFunc:f2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lm(t,e,n){const r=t[0].dtype;if(r==="complex64"){const f=t.map(v=>Vy({inputs:{input:v},backend:n})),p=t.map(v=>f2({inputs:{input:v},backend:n})),m=lm(f,e,n),y=lm(p,e,n),g=wc({inputs:{real:m,imag:y},backend:n});return f.forEach(v=>n.disposeIntermediateTensorInfo(v)),p.forEach(v=>n.disposeIntermediateTensorInfo(v)),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),g}let s=n.shouldExecuteOnCPU(t);if(r==="string"&&(s=!0),s){const f=t.map(b=>{const x=[-1,re(b.shape.slice(e))];return ke({inputs:{x:b},backend:n,attrs:{shape:x}})}),p=f.map(b=>({vals:n.readSync(b.dataId),shape:b.shape})),m=ja(f.map(b=>b.shape),1),y=f[0].shape[0]===1,g=IOe(p,m,r,y),v=ja(t.map(b=>b.shape),e),E=n.makeTensorInfo(v,r,g);return f.forEach(b=>n.disposeIntermediateTensorInfo(b)),E}const i=t.filter(f=>re(f.shape)>0),o=ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(i.length===1){const f=o?new Ma(t[0].shape,Cu):new Ou(t[0].shape,Cu);return n.runWebGLProgram(f,t,r)}const a=ee().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>a){const f=[];for(let m=0;m<i.length;m+=a){const y=i.slice(m,m+a);f.push(lm(y,e,n))}const p=lm(f,e,n);for(const m of f)n.disposeIntermediateTensorInfo(m);return p}if(o){const f=new PLe(i.map(p=>p.shape),e);return n.runWebGLProgram(f,i,r)}const{tensors2D:l,outShape:u}=BLe(i,e,n),c=new LLe(l.map(f=>f.shape)),d=n.runWebGLProgram(c,l,r);l.forEach(f=>n.disposeIntermediateTensorInfo(f));const h=ke({inputs:{x:d},attrs:{shape:u},backend:n});return n.disposeIntermediateTensorInfo(d),h}function BLe(t,e,n){const r=ja(t.map(i=>i.shape),e);return{tensors2D:t.map(i=>ke({inputs:{x:i},attrs:{shape:[-1,re(i.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HG(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,i=yt(s,e[0].shape)[0],o=e.map(u=>u.shape);OA(o,i);const a=ja(e.map(u=>u.shape),i);if(re(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(u=>re(u.shape)>0);return l.length===1?yi({inputs:{x:l[0]},backend:n}):lm(l,i,n)}const zLe={kernelName:g0,backendName:"webgl",kernelFunc:HG};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UG{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,a=e.padInfo.left,l=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,h=e.filterHeight,f=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4,y=e.dataFormat==="channelsLast",g=y?1:2,v=y?2:3,E=y?3:1;let b="",T="";r&&(s?b=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?b=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:b=`
          float activation(float x) {
            ${r}
          }
        `,T="result = activation(result);");const x=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${b}

      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${E}];

        ivec2 xRCCorner =
            ivec2(coords[${g}], coords[${v}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${h}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${f}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${p}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${y}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${m===1}) {

              if (${y}) {
                dotProd +=
                    getX(batch, xR, xC, ${p}) *
                    getW(wR, wC, ${p}, d2);
              } else {
                dotProd +=
                    getX(batch, ${p}, xR, xC) *
                    getW(wR, wC, ${p}, d2);
              }

            } else if (${m===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2)
              );

              if (${y}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${m===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2),
                getW(wR, wC, ${p} + 2, d2)
              );

              if (${y}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1),
                  getX(batch, xR, xC, ${p} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC),
                  getX(batch, ${p} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${x}
        ${T}
        setOutput(result);
      }
    `}}class HLe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,s=e.padInfo.left,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,d=e.filterDepth,h=e.filterHeight,f=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${o}, ${a});
      const ivec3 pads = ivec3(${n}, ${r}, ${s});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${h}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${p}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${m===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${p}) *
                  getW(wF, wR, wC, ${p}, d2);
              } else if (${m===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${m===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1),
                  getX(batch, xF, xR, xC, ${p} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2),
                  getW(wF, wR, wC, ${p} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class WG{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ns(this.outputShape.length);const o=e.padInfo.left,a=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,c=e.filterWidth,d=c;let h=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<c;y++)h+=`
           vec4 xTexelC${y*2};
           int xTexelC${y*2}Ready;
           vec4 xTexelC${y*2+1};
           int xTexelC${y*2+1}Ready;
           vec4 xC${y};`;h+=`
     for (int r = 0; r < ${u}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let y=0;y<c;y++)h+=`
           xTexelC${y*2} = vec4(0.0);
           xTexelC${y*2}Ready = 0;
           xTexelC${y*2+1} = vec4(0.0);
           xTexelC${y*2+1}Ready = 0;
           xC${y} = vec4(0.0);`;h+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let y=0;y<(d+1)/2;y++){const g=y*2;if(h+=`
           xC = xCCorner + ${g*l};
           `,a===1){if(g<c&&(o%2===1?(h+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }
               `,l===1&&g>0?h+=`
                 xC${g} = vec4(xTexelC${g-2}.zw, xTexelC${g}.xy);
                 `:h+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${g} = vec4(previous.zw, xTexelC${g}.xy);
                   } else {
                     xC${g} = vec4(0.0, 0.0, xTexelC${g}.xy);
                   }
                   `):h+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 xC${g} = xTexelC${g};
                 `,g+1<c)){const v=o%2===0?ex(l):l;l%2===0&&o%2===1||l%2!==0&&o%2!==1?(h+=`
                   xCOffset = xC + imod(pads[1], 2) + ${v};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                     xTexelC${g+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${g+1}.zw = vec2(0.0);
                     }
                     xTexelC${g+1}Ready = 1;
                   }
                   `,l>1?h+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${g+1} = vec4(previous.zw, xTexelC${g+1}.xy);
                     } else {
                      xC${g+1} = vec4(0.0, 0.0, xTexelC${g+1}.xy);
                     }
                     `:h+=`
                     xC${g+1} = vec4(xTexelC${g}.zw, xTexelC${g+1}.xy);
                     `):v===1?h+=`
                     xC${g+1} = xTexelC${g};
                     `:h+=`
                     xCOffset = xC + ${v};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                       xTexelC${g+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${g+1}.zw = vec2(0.0);
                       }
                       xTexelC${g+1}Ready = 1;
                     }

                     xC${g+1} = xTexelC${g+1};
                     `}}else g<c&&(o%2===1?(h+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${g+1}Ready == 0) {
                   xTexelC${g+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${g+1}.zw = vec2(0.0);
                   }
                   xTexelC${g+1}Ready = 1;
                 }

                 xC${g} = vec4(xTexelC${g}.zw, xTexelC${g+1}.zw);
               `,g+1<c&&(h+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${g+1} = vec4(xTexelC${g+1}.xy, final.xy);
                 `)):(h+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${g}Ready == 0) {
                   xTexelC${g} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${g}.zw = vec2(0.0);
                   }
                   xTexelC${g}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${g+1}Ready == 0) {
                   xTexelC${g+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${g+1}.zw = vec2(0.);
                   }
                   xTexelC${g+1}Ready = 1;
                 }

                 xC${g} = vec4(
                   xTexelC${g}.xy, xTexelC${g+1}.xy);
               `,g+1<c&&(h+=`
                   xC${g+1} = vec4(xTexelC${g}.zw, xTexelC${g+1}.zw);
                 `)));g<c&&(h+=`
             wTexel = getW(r, ${g}, d1, d2);
             dotProd += xC${g}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${g}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,g+1<c&&(h+=`
               wTexel = getW(r, ${g+1}, d1, d2);
               dotProd += xC${g+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${g+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}h+=`
     }
   `,h+=`
     }
   `,h+=`
     }
   `;let f="",p="";r&&(s?f=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:i?f=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:f=`vec4 activation(vec4 x) {
           ${r}
         }`,p="result = activation(result);");const m=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${f}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${h}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${m}
         ${p}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ULe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=ns(this.outputShape.length);const{dataFormat:r}=n,s=Es(),i=r==="channelsLast",o=i?1:2,a=i?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let u="";for(let c=0;c<=1;c++)for(let d=0;d<=1;d++)u+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${c};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${u}

        ${s.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eT(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function VG({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:a=null}){const l=t.shape,u=r.texData.get(t.dataId),c=n.inChannels,d=l[0]*l[1]*l[2],h=n.outChannels,f=n.dataFormat==="channelsLast",p=!1,m=!1;let y;const g=[];if(i!=null){const b=eT(i.shape,f);b!=null&&(i=ke({inputs:{x:i},backend:r,attrs:{shape:b}}),g.push(i))}if(s!=null){const b=eT(s.shape,f);b!=null&&(s=ke({inputs:{x:s},backend:r,attrs:{shape:b}}),g.push(s))}if(!((d===1||h===1)&&c>LG)&&u.isPacked&&f&&u.texture!=null&&l[2]%2!==0&&Et(u.shape.slice(-3),l.slice(-3))){const b=l[0]*l[1]*(l[2]+1),T={dataId:t.dataId,shape:[1,b,n.inChannels],dtype:t.dtype},x=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,D(ZE(u.shape,T.shape),()=>`packed reshape ${u.shape} to ${T.shape} isn't free`);const C=ke({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});g.push(C);const S=JE({a:T,b:C,backend:r,transposeA:p,transposeB:m,bias:s,activation:a,preluActivationWeights:i,leakyreluAlpha:o}),N=r.texData.get(S.dataId);D(N.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=x,N.shape=n.outShape,y=yi({inputs:{x:S},backend:r}),y.shape=n.outShape,g.push(S)}else{const b=n.outHeight*n.outWidth,T=ke({inputs:{x:t},backend:r,attrs:{shape:f?[n.batchSize,b,n.inChannels]:[n.batchSize,n.inChannels,b]}}),x=ke({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),C=JE({a:f?T:x,b:f?x:T,transposeA:!f,transposeB:m,backend:r,bias:s,activation:a,preluActivationWeights:i,leakyreluAlpha:o});y=ke({inputs:{x:C},backend:r,attrs:{shape:n.outShape}}),g.push(T),g.push(x),g.push(C)}for(const b of g)r.disposeIntermediateTensorInfo(b);return y}function GG({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:a=null}){const{filterWidth:l,filterHeight:u,inChannels:c,outWidth:d,outHeight:h,dataFormat:f}=n,p=f==="channelsLast",m=l*u*c,y=h*d,g=[n.batchSize,m,y],v=!0,E=!1,b=[];if(i!=null){const P=eT(i.shape,p);P!=null&&(i=ke({inputs:{x:i},backend:r,attrs:{shape:P}}),b.push(i))}if(s!=null){const P=eT(s.shape,p);P!=null&&(s=ke({inputs:{x:s},backend:r,attrs:{shape:P}}),b.push(s))}const T=ke({inputs:{x:e},backend:r,attrs:{shape:[1,m,re(e.shape)/m]}});b.push(T);const x=new ULe(g,n),C=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],S=r.runWebGLProgram(x,[t],"float32",C),N=ke({inputs:{x:S},backend:r,attrs:{shape:g}});b.push(S),b.push(N);const I=s!=null,F=i!=null,L=a==="leakyrelu",z=a?Ig(a,!0):null,H=new $G(p?N.shape:T.shape,p?T.shape:N.shape,p?[n.batchSize,y,n.outChannels]:[n.batchSize,n.outChannels,y],v,E,I,z,F,L),$=p?[N,T]:[T,N];if(s&&$.push(s),F&&$.push(i),L){const P=r.makeTensorInfo([],"float32",eu(o,"float32"));$.push(P),b.push(P)}const M=r.runWebGLProgram(H,$,"float32"),j=ke({inputs:{x:M},backend:r,attrs:{shape:n.outShape}});b.push(M);for(const P of b)r.disposeIntermediateTensorInfo(P);return j}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dataFormat:l,dilations:u,dimRoundingMode:c}=r,d=nu(l),h=kr(s.shape,i.shape,o,u,a,c,!1,d);let f;if(h.filterHeight===1&&h.filterWidth===1&&h.dilationHeight===1&&h.dilationWidth===1&&h.strideHeight===1&&h.strideWidth===1&&(h.padInfo.type==="SAME"||h.padInfo.type==="VALID"))f=VG({x:s,filter:i,convInfo:h,backend:n});else if(h.strideWidth<=2&&d==="channelsLast"&&ee().getBool("WEBGL_EXP_CONV")){const m=new WG(h),y=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];f=n.runWebGLProgram(m,[s,i],"float32",y)}else if(ee().getBool("WEBGL_CONV_IM2COL"))f=GG({x:s,filter:i,convInfo:h,backend:n});else{const m=new UG(h);f=n.runWebGLProgram(m,[s,i],"float32")}const p=ke({inputs:{x:f},backend:n,attrs:{shape:h.outShape}});return n.disposeIntermediateTensorInfo(f),p}const VLe={kernelName:y0,backendName:"webgl",kernelFunc:WLe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GLe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,i=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${o?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class jLe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=e.dataFormat==="channelsLast",a=n-1-e.padInfo.top,l=r-1-e.padInfo.left,u=o?1:2,c=o?2:3,d=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${u}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class KLe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,i=e.padInfo.front,o=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${i};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${s} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class qLe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=n-1-e.padInfo.front,u=r-1-e.padInfo.top,c=s-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${u}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${s}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${s} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XLe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:c}=r,d=nu(l),h=kr(s.shape,c,o,1,a,u,!1,d),f=new GLe(h);return n.runWebGLProgram(f,[s,i],"float32")}const YLe={kernelName:ux,backendName:"webgl",kernelFunc:XLe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QLe{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=ns(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,s=n-1-e.padInfo.top,i=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZLe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{inputShape:o,strides:a,pad:l,dataFormat:u,dimRoundingMode:c}=r,d=nu(u),h=kr(o,i.shape,a,1,l,c,!1,d);if(ee().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){const f=[[h.strideHeight,h.strideWidth]],p=new QLe(h);return n.runWebGLProgram(p,[s,i],"float32",f)}else{const f=new jLe(h);return n.runWebGLProgram(f,[s,i],"float32")}}const JLe={kernelName:v0,backendName:"webgl",kernelFunc:ZLe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ePe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l}=r,u=yc(s.shape,i.shape,o,l,a),c=new HLe(u);return n.runWebGLProgram(c,[s,i],"float32")}const tPe={kernelName:b0,backendName:"webgl",kernelFunc:ePe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,filterShape:l}=r,u=yc(s.shape,l,o,1,a),c=new KLe(u);return n.runWebGLProgram(c,[s,i],"float32")}const rPe={kernelName:cx,backendName:"webgl",kernelFunc:nPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sPe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{pad:o,strides:a,inputShape:l}=r,u=yc(l,i.shape,a,1,o),c=new qLe(u);return n.runWebGLProgram(c,[s,i],"float32")}const iPe={kernelName:dx,backendName:"webgl",kernelFunc:sPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oPe=m1+`
  return cos(x);
`,aPe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${dh}
  return result;
`,lPe=Ot({opSnippet:oPe,packedOpSnippet:aPe}),uPe={kernelName:gp,backendName:"webgl",kernelFunc:lPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cPe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,dPe=Ot({opSnippet:cPe}),hPe={kernelName:yp,backendName:"webgl",kernelFunc:dPe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fPe{constructor(e,n,r,s,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,a,l,u]=e,[c]=n,[d,h]=r;this.outputShape=[c,d,h,u];const f=s==="bilinear"?1:0,[p,m]=[`${a-1}.0`,`${l-1}.0`],[y,g,v]=d>1?[`${(a-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[E,b,T]=h>1?[`${(l-1)/(h-1)}`,"(x2-x1) * width_ratio",`x1*${m} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${m}`];this.userCode=`
      const float height_ratio = float(${y});
      const float width_ratio = float(${E});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${g};
        float width_scale = ${b};

        float in_y = ${v};
        if( in_y < 0.0 || in_y > ${p} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${T};
        if( in_x < 0.0 || in_x > ${m} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${f} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pPe=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:i,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:u}=r,c=new fPe(s.shape,i.shape,a,l,u);return n.runWebGLProgram(c,[s,i,o],"float32")},mPe={kernelName:fx,backendName:"webgl",kernelFunc:pPe};var Ag;(function(t){t.Prod="*",t.Sum="+"})(Ag||(Ag={}));class x8{constructor(e,n,r,s){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,o=this.op===Ag.Prod?"1.0":"0.0",a=r?o:`getX(${C8(i,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let u="",c="";r?(u=s?`end != ${l-1}`:"end != 0",c=s?"end + 1":"end - 1"):(u=s?`end + pow2 < ${l}`:"end >= pow2",c=s?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Yt(i)} coords = getOutputCoords();
        int end = ${S8(i,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${u}) {
          int idx = ${c};
          ${S8(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${C8(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function C8(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function S8(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jG(t,e,n,r,s,i){const o=e.shape.length,a=$n([r],o);let l=e;a!=null&&(l=vs({inputs:{x:e},backend:n,attrs:{perm:a}}));const u=Xn(1,o)[0];if(u!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const c=l.shape[u];let d=yi({inputs:{x:l},backend:n});for(let h=0;h<=Math.ceil(Math.log2(c))-1;h++){const f=new x8(t,l.shape,!1,i),p=[[h]],m=d;d=n.runWebGLProgram(f,[d],d.dtype,p),n.disposeIntermediateTensorInfo(m)}if(s){const h=new x8(t,l.shape,s,i),f=d;d=n.runWebGLProgram(h,[d],d.dtype),n.disposeIntermediateTensorInfo(f)}if(a!=null){const h=vc(a),f=vs({inputs:{x:d},backend:n,attrs:{perm:h}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),f}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;return jG(Ag.Prod,s,n,i,o,a)}const yPe={kernelName:hx,backendName:"webgl",kernelFunc:gPe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;return jG(Ag.Sum,s,n,i,o,a)}const bPe={kernelName:E0,backendName:"webgl",kernelFunc:vPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o,binaryOutput:a}=r;if(s.shape.length===1){const l=n.readSync(s.dataId),u=n.readSync(i.dataId),c=_G(l,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}else if(s.shape.length===2){const l=n.bufferSync(s),u=n.bufferSync(i),c=SOe(l,u,o,a);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const TPe={kernelName:px,backendName:"webgl",kernelFunc:EPe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xPe{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:i,dataFormat:o}=r,a=s.shape[0],l=o==="NHWC"?s.shape[1]:s.shape[2],u=o==="NHWC"?s.shape[2]:s.shape[3],c=o==="NHWC"?s.shape[3]:s.shape[1],d=l*i,h=u*i,f=c/(i*i),p=o==="NHWC"?[a,d,h,f]:[a,f,d,h],m=new xPe(p,i,o);return n.runWebGLProgram(m,[s],s.dtype)}const SPe={kernelName:mx,backendName:"webgl",kernelFunc:CPe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KG{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ns(this.outputShape.length);const o=e.filterHeight,a=e.filterWidth,l=e.outChannels/e.inChannels;let u="",c="";r&&(s?u=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?u=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:u=`
          float activation(float x) {
            ${r}
          }
        `,c="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${u}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${c}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qG{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=ns(this.outputShape.length);const o=e.outChannels/e.inChannels,a=e.padInfo.left,l=e.strideWidth,u=e.dilationWidth,c=e.filterHeight,d=e.filterWidth,h=d;let f=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let g=0;g<d;g++)f+=`
          vec4 xTexelC${g*2};
          int xTexelC${g*2}Ready;
          vec4 xTexelC${g*2+1};
          int xTexelC${g*2+1}Ready;
          vec4 xC${g};`;f+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let g=0;g<d;g++)f+=`
          xTexelC${g*2} = vec4(0.0);
          xTexelC${g*2}Ready = 0;
          xTexelC${g*2+1} = vec4(0.0);
          xTexelC${g*2+1}Ready = 0;
          xC${g} = vec4(0.0);`;f+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let g=0;g<(h+1)/2;g++){const v=g*2;if(f+=`
          xC = xCCorner + ${v*u};
          `,l===1){if(v<d&&(a%2===1?(f+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }
              `,u===1&&v>0?f+=`
                xC${v} = vec4(xTexelC${v-2}.zw, xTexelC${v}.xy);
                `:f+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${v} = vec4(previous.zw, xTexelC${v}.xy);
                  } else {
                    xC${v} = vec4(0.0, 0.0, xTexelC${v}.xy);
                  }
                  `):f+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xC${v} = xTexelC${v};
                `,v+1<d)){const E=a%2===0?ex(u):u;u%2===0&&a%2===1||u%2!==0&&a%2!==1?(f+=`
                  xCOffset = xC + imod(pads[1], 2) + ${E};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                    xTexelC${v+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${v+1}.zw = vec2(0.0);
                    }
                    xTexelC${v+1}Ready = 1;
                  }
                  `,u>1?f+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${v+1} = vec4(previous.zw, xTexelC${v+1}.xy);
                    } else {
                     xC${v+1} = vec4(0.0, 0.0, xTexelC${v+1}.xy);
                    }
                    `:f+=`
                    xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.xy);
                    `):E===1?f+=`
                    xC${v+1} = xTexelC${v};
                    `:f+=`
                    xCOffset = xC + ${E};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                      xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${v+1}.zw = vec2(0.0);
                      }
                      xTexelC${v+1}Ready = 1;
                    }

                    xC${v+1} = xTexelC${v+1};
                    `}}else v<d&&(a%2===1?(f+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.0);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
              `,v+1<d&&(f+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${v+1} = vec4(xTexelC${v+1}.xy, final.xy);
                `)):(f+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${v}Ready == 0) {
                  xTexelC${v} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${v}.zw = vec2(0.0);
                  }
                  xTexelC${v}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${v+1}Ready == 0) {
                  xTexelC${v+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${v+1}.zw = vec2(0.);
                  }
                  xTexelC${v+1}Ready = 1;
                }

                xC${v} = vec4(
                  xTexelC${v}.xy, xTexelC${v+1}.xy);
              `,v+1<d&&(f+=`
                  xC${v+1} = vec4(xTexelC${v}.zw, xTexelC${v+1}.zw);
                `)));v<d&&(f+=`
            wTexel = getW(r, ${v}, d1, q);
            dotProd += xC${v} * vec4(wTexel.xz, wTexel.xz);
          `,v+1<d&&(f+=`
              wTexel = getW(r, ${v+1}, d1, q);
              dotProd += xC${v+1} * vec4(wTexel.xz, wTexel.xz);
            `))}f+=`
    }
  `,f+=`
      }
    `;let p="",m="";r&&(s?p=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?p=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:p=`vec4 activation(vec4 x) {
          ${r}
        }`,m="result = activation(result);");const y=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${p}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${f}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${y}
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:u}=r;let c=l;c==null&&(c=[1,1]),D(Ur(o,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const d=kr(s.shape,i.shape,o,c,a,u,!0);let h;ee().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?h=new qG(d):h=new KG(d);const f=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(h,[s,i],"float32",f)}const _Pe={kernelName:T0,backendName:"webgl",kernelFunc:wPe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kPe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,i=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class IPe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=n-1-e.padInfo.top,a=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:u,filterShape:c}=r,d=kr(s.shape,c,o,a,l,u,!0),h=new kPe(d);return n.runWebGLProgram(h,[s,i],"float32")}const APe={kernelName:gx,backendName:"webgl",kernelFunc:NPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DPe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:u,inputShape:c}=r,d=kr(c,i.shape,o,a,l,u,!0),h=new IPe(d);return n.runWebGLProgram(h,[s,i],"float32")}const RPe={kernelName:yx,backendName:"webgl",kernelFunc:DPe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FPe{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OPe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=[...r.shape,...r.shape],i=re(r.shape),o=ke({inputs:{x:r},backend:n,attrs:{shape:[i]}}),a=new FPe(i),l=n.runWebGLProgram(a,[o],o.dtype),u=ke({inputs:{x:l},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),u}const $Pe={kernelName:vx,backendName:"webgl",kernelFunc:OPe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LPe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:s,strideHeight:i,strideWidth:o,filterHeight:a,filterWidth:l,dilationHeight:u,dilationWidth:c}=e,{top:d,left:h}=s;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${o});
      const ivec2 pads = ivec2(${d}, ${h});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PPe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l}=r,u=dy(s.shape,i.shape,o,a,"NHWC",l);let c;const d=new LPe(u);c=n.runWebGLProgram(d,[s,i],"float32");const h=ke({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),h}const MPe={kernelName:x0,backendName:"webgl",kernelFunc:PPe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BPe(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,i=e,{allDims:o,summedDims:a,idDims:l}=jA(s,i.length);qA(o.length,l,i);const{path:u,steps:c}=XA(a,l),d=c.length;let h=null,f=o.length;const p=[];for(let m=0;m<d;++m){for(const y of c[m]){const{permutationIndices:g,expandDims:v}=KA(f,l[y]);let E;YA(g)?E=i[y]:(E=vs({inputs:{x:i[y]},backend:n,attrs:{perm:g}}),p.push(E));const b=E.shape.slice();for(let T=0;T<v.length;++T)b.splice(v[T],0,1);Et(E.shape,b)||(E=ke({inputs:{x:E},backend:n,attrs:{shape:b}}),p.push(E)),h===null?h=E:(h=B5({inputs:{a:E,b:h},backend:n}),p.push(h))}m<d-1&&(u[m]>=0&&(h=h2({inputs:{x:h},backend:n,attrs:{axis:u[m]-(o.length-f),keepDims:!1}}),p.push(h)),f--)}for(const m of p)m!==h&&n.disposeIntermediateTensorInfo(m);return h}const zPe={kernelName:Ex,backendName:"webgl",kernelFunc:BPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HPe="return (x >= 0.0) ? x : (exp(x) - 1.0);",UPe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,WPe=Ot({opSnippet:HPe,packedOpSnippet:UPe}),VPe={kernelName:bp,backendName:"webgl",kernelFunc:WPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GPe="return (b >= 0.0) ? a : a * (b + 1.0);",jPe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,KPe=t=>{const{inputs:e,backend:n}=t,{dy:r,y:s}=e,i=ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new p1(jPe,r.shape,s.shape):new Hd(GPe,r.shape,s.shape);return n.runWebGLProgram(i,[r,s],r.dtype)},qPe={kernelName:Tx,backendName:"webgl",kernelFunc:KPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XPe=`
  return vec4(equal(a, b));
`,YPe="return float(a == b);",QPe=Gr({opSnippet:YPe,packedOpSnippet:XPe,dtype:"bool",cpuKernelImpl:NOe}),ZPe={kernelName:C0,backendName:"webgl",kernelFunc:QPe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JPe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${BA};
  float a1 = ${zA};
  float a2 = ${HA};
  float a3 = ${UA};
  float a4 = ${WA};
  float a5 = ${VA};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,e6e=Ot({opSnippet:JPe}),t6e={kernelName:Ep,backendName:"webgl",kernelFunc:e6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n6e=m1+`
  return exp(x);
`,r6e=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,XG=Ot({opSnippet:n6e,packedOpSnippet:r6e,cpuKernelImpl:AOe,dtype:"float32"}),s6e={kernelName:Tp,backendName:"webgl",kernelFunc:XG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yk(t){const{inputs:e,attrs:n,backend:r}=t,{dim:s}=n,{input:i}=e,o=i.shape.length,a=i.shape.slice();let l=s;return s<0&&(D(-(o+1)<=s,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+s+1),a.splice(l,0,1),ke({inputs:{x:i},backend:r,attrs:{shape:a}})}const i6e={kernelName:S0,backendName:"webgl",kernelFunc:Yk};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w8="return exp(x) - 1.0;",o6e=Ot({opSnippet:w8,packedOpSnippet:w8,cpuKernelImpl:DOe}),a6e={kernelName:xp,backendName:"webgl",kernelFunc:o6e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _8{constructor(e,n,r){this.variableNames=["real","imag"];const s=n[1];this.outputShape=n;const i=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${s}.0`:"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${s});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${s}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YG(t,e,n){const r=n.texData.get(t.dataId),s=re(t.shape),i=t.shape[t.shape.length-1],o=s/i,a=ke({inputs:{x:t},backend:n,attrs:{shape:[o,i]}}),l=a.shape,u=new _8("real",l,e),c=new _8("imag",l,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],h=n.runWebGLProgram(u,d,"float32"),f=n.runWebGLProgram(c,d,"float32"),p=wc({inputs:{real:h,imag:f},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f);const m=ke({inputs:{x:p},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(p),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l6e(t){const{inputs:e,backend:n}=t,{input:r}=e;return YG(r,!1,n)}const u6e={kernelName:xx,backendName:"webgl",kernelFunc:l6e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class c6e{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gy(t){const{backend:e,attrs:n}=t,{shape:r,value:s}=n;let{dtype:i}=n;if(i=i||Zd(s),i==="string"){const o=Bn(i,re(r));return o.fill(s),e.makeTensorInfo(r,i,o)}else{const o=new c6e(r,s),a=[[s]];return e.runWebGLProgram(o,[],i,a)}}const d6e={kernelName:Cx,backendName:"webgl",kernelFunc:Gy};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h6e{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f6e={kernelName:Sx,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,s=new h6e(n.shape);return r.runWebGLProgram(s,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k8="return floor(x);",p6e=Ot({opSnippet:k8,packedOpSnippet:k8,cpuKernelImpl:ROe}),m6e={kernelName:Cp,backendName:"webgl",kernelFunc:p6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g6e=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,y6e=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,v6e=Gr({opSnippet:g6e,packedOpSnippet:y6e,dtype:"int32"}),b6e={kernelName:Sp,backendName:"webgl",kernelFunc:v6e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class E6e{constructor(e){this.variableNames=["A"];const n=Es(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class T6e{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Es(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${s}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x6e={kernelName:NE,backendName:"webgl",kernelFunc:C6e};let _h,yw=ee().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function C6e(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:s}=e;const{numChannels:i}=r,o=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,[l,u]=o?[s.videoWidth,s.videoHeight]:[s.width,s.height],c=[u,l],d=[u,l,i];if(a||o){const m=ee().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(_h==null||m!==yw)&&(yw=m,_h=document.createElement("canvas").getContext("2d",{willReadFrequently:yw})),_h.canvas.width=l,_h.canvas.height=u,_h.drawImage(s,0,0,l,u),s=_h.canvas}const h=n.makeTensorInfo(c,"int32");n.texData.get(h.dataId).usage=Fi.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),s);const f=ee().getBool("WEBGL_PACK")?new T6e(d):new E6e(d),p=n.runWebGLProgram(f,[h],"int32");return n.disposeData(h.dataId),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:p}=r,m=nu(c),y=kr(s.shape,i.shape,l,d,u,h,!1,m);let g;const v=[],E=o!=null,b=a!=null,T=f==="leakyrelu",x=()=>{const S=[s,i],N=(I,F)=>{if(F==="NCHW"&&I.shape.length===1&&I.shape[0]!==1){const L=ke({inputs:{x:I},backend:n,attrs:{shape:[I.shape[0],1,1]}});return v.push(L),L}return I};if(E&&S.push(N(o,c)),b&&S.push(N(a,c)),T){const I=n.makeTensorInfo([],"float32",eu(p,"float32"));S.push(I),v.push(I)}return S};if(y.filterHeight===1&&y.filterWidth===1&&y.dilationHeight===1&&y.dilationWidth===1&&y.strideHeight===1&&y.strideWidth===1&&(y.padInfo.type==="SAME"||y.padInfo.type==="VALID"))g=VG({x:s,filter:i,convInfo:y,backend:n,bias:o,activation:f,preluActivationWeights:a,leakyreluAlpha:p});else if(y.strideWidth<=2&&m==="channelsLast"&&ee().getBool("WEBGL_EXP_CONV")){const S=f?Ig(f,!0):null,N=new WG(y,E,S,b,T),I=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],F=x();g=n.runWebGLProgram(N,F,"float32",I)}else if(ee().getBool("WEBGL_CONV_IM2COL"))g=GG({x:s,filter:i,convInfo:y,backend:n,bias:o,activation:f,preluActivationWeights:a,leakyreluAlpha:p});else{const S=f?Ig(f,!1):null,N=new UG(y,E,S,b,T),I=x();g=n.runWebGLProgram(N,I,"float32")}const C=ke({inputs:{x:g},backend:n,attrs:{shape:y.outShape}});return v.push(g),v.forEach(S=>n.disposeIntermediateTensorInfo(S)),C}const w6e={kernelName:fg,backendName:"webgl",kernelFunc:S6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _6e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:u,dilations:c,dimRoundingMode:d,activation:h,leakyreluAlpha:f}=r,p=[];let m=c;m==null&&(m=[1,1]),D(Ur(l,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`);const y=kr(s.shape,i.shape,l,m,u,d,!0),g=ee().getBool("WEBGL_PACK_DEPTHWISECONV")&&y.strideWidth<=2&&y.outChannels/y.inChannels===1,v=h?Ig(h,g):null,E=[s,i],b=o!=null,T=a!=null,x=h==="leakyrelu";if(b&&E.push(o),T&&E.push(a),x){const I=n.makeTensorInfo([],"float32",eu(f,"float32"));E.push(I),p.push(I)}let C;g?C=new qG(y,b,v,T,x):C=new KG(y,b,v,T,x);const S=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],N=n.runWebGLProgram(C,E,"float32",S);return p.forEach(I=>n.disposeIntermediateTensorInfo(I)),N}const k6e={kernelName:pg,backendName:"webgl",kernelFunc:_6e};class I6e{constructor(e,n,r,s){this.sliceDim=e,this.strides=n,this.paramsShape=s,this.variableNames=["x","indices"],this.outputShape=r;const i=Yt(r.length);let o=`
    int index;`;for(let a=0;a<this.sliceDim;a++)o+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N6e(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,i=s.shape,o=i[i.length-1],a=re(r.shape),[l,u,c,d]=jC(r,s),h=ke({inputs:{x:s},backend:n,attrs:{shape:[u,o]}}),f=ke({inputs:{x:r},backend:n,attrs:{shape:[re(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,s])||r.dtype==="string"){const g=n.readSync(s.dataId),v=n.bufferSync(r),E=FOe(g,v,r.dtype,u,o,c,d,r.shape,a);return n.makeTensorInfo(l,r.dtype,E.values)}const p=new I6e(o,d,[u,c],r.shape),m=n.runWebGLProgram(p,[f,h],f.dtype),y=ke({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),y}const A6e={kernelName:wx,backendName:"webgl",kernelFunc:N6e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class D6e{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=Yt(this.rank),s=R6e(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${s}));
      }
    `}}function R6e(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let s=0;s<t.length;s++)s===2?r.push("index"):r.push(`${n[s]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QG(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:i}=e,{axis:o,batchDims:a}=r,l=yt(o,s.shape)[0];if(ee().get("DEBUG")){const v=n.readSync(i.dataId),E=s.shape[l];for(let b=0;b<v.length;++b){const T=v[b];D(T<=E-1&&T>=0,()=>`GatherV2: the index value ${T} is not in [0, ${E-1}]`)}}const u=ZA(s,i,l,a),c=re(i.shape),d=[],h=ke({inputs:{x:s},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),f=ke({inputs:{x:i},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});d.push(h),d.push(f);const p=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([s,i])||s.dtype==="string"){const v=n.bufferSync(f),E=n.bufferSync(h),b=OOe(E,v,p);return d.forEach(T=>n.disposeIntermediateTensorInfo(T)),n.makeTensorInfo(u.outputShape,b.dtype,b.values)}const m=new D6e(h.shape,p),y=n.runWebGLProgram(m,[h,f],h.dtype);d.push(y);const g=ke({inputs:{x:y},backend:n,attrs:{shape:u.outputShape}});return d.forEach(v=>n.disposeIntermediateTensorInfo(v)),g}const F6e={kernelName:_0,backendName:"webgl",kernelFunc:QG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O6e="return float(a > b);",$6e=`
  return vec4(greaterThan(a, b));
`,L6e=Gr({opSnippet:O6e,packedOpSnippet:$6e,cpuKernelImpl:$Oe,dtype:"bool"}),P6e={kernelName:k0,backendName:"webgl",kernelFunc:L6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M6e="return float(a >= b);",B6e=`
  return vec4(greaterThanEqual(a, b));
`,z6e=Gr({opSnippet:M6e,packedOpSnippet:B6e,dtype:"bool",cpuKernelImpl:LOe}),H6e={kernelName:wp,backendName:"webgl",kernelFunc:z6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U6e(t){const{inputs:e,backend:n}=t,{input:r}=e;return YG(r,!0,n)}const W6e={kernelName:_x,backendName:"webgl",kernelFunc:U6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V6e="return float(!isnan(x) && !isinf(x));",G6e=Ot({opSnippet:V6e,dtype:"bool"}),j6e={kernelName:kp,backendName:"webgl",kernelFunc:G6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K6e="return float(isinf(x));",q6e=Ot({opSnippet:K6e,dtype:"bool"}),X6e={kernelName:Ip,backendName:"webgl",kernelFunc:q6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y6e="return float(isnan(x));",Q6e=Ot({opSnippet:Y6e,dtype:"bool"}),Z6e={kernelName:Np,backendName:"webgl",kernelFunc:Q6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J6e="return float(a < b);",eMe=`
  return vec4(lessThan(a, b));
`,tMe=Gr({opSnippet:J6e,packedOpSnippet:eMe,cpuKernelImpl:POe,dtype:"bool"}),nMe={kernelName:N0,backendName:"webgl",kernelFunc:tMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rMe="return float(a <= b);",sMe=`
  return vec4(lessThanEqual(a, b));
`,iMe=Gr({opSnippet:rMe,packedOpSnippet:sMe,cpuKernelImpl:MOe,dtype:"bool"}),oMe={kernelName:A0,backendName:"webgl",kernelFunc:iMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aMe(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:i}=n,o=BOe(r,s,i);return e.makeTensorInfo([o.length],"float32",o)}const lMe={kernelName:Ix,backendName:"webgl",kernelFunc:aMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uMe=m1+`
  return x < 0.0 ? 0./0. : log(x);
`,cMe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,dMe=Ot({opSnippet:uMe,packedOpSnippet:cMe,cpuKernelImpl:zOe}),hMe={kernelName:Ap,backendName:"webgl",kernelFunc:dMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fMe=m1+`
  return log(1.0 + x);
`,pMe=Ot({opSnippet:fMe}),mMe={kernelName:Dp,backendName:"webgl",kernelFunc:pMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gMe="return float(a >= 1.0 && b >= 1.0);",yMe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,vMe=Gr({opSnippet:gMe,packedOpSnippet:yMe,dtype:"bool"}),bMe={kernelName:D0,backendName:"webgl",kernelFunc:vMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EMe="return float(!(x >= 1.0));",TMe=Ot({opSnippet:EMe}),xMe={kernelName:R0,backendName:"webgl",kernelFunc:TMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CMe="return float(a >= 1.0 || b >= 1.0);",SMe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,wMe=Gr({opSnippet:CMe,packedOpSnippet:SMe,dtype:"bool"}),_Me={kernelName:F0,backendName:"webgl",kernelFunc:wMe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kMe{constructor(e,n,r,s,i){this.variableNames=["x"],this.outputShape=[];const o=n,a=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${s}) * sum`;i===.5?l=`inversesqrt(${u})`:i===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IMe{constructor(e,n,r,s,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=n,a=e[3]-1;this.outputShape=e;let l;const u=`float(${r}) + float(${s}) * sum`;i===.5?l=`inversesqrt(${u})`:i===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NMe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:i,bias:o,alpha:a,beta:l}=r,u=ee().getBool("WEBGL_PACK_NORMALIZATION")?new IMe(s.shape,i,o,a,l):new kMe(s.shape,i,o,a,l);return n.runWebGLProgram(u,[s],s.dtype)},AMe={kernelName:O0,backendName:"webgl",kernelFunc:NMe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DMe{constructor(e,n,r,s,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=s,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${s}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${s})
                * float(${i})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RMe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s,y:i,dy:o}=e,{depthRadius:a,bias:l,alpha:u,beta:c}=r,d=new DMe(s.shape,a,l,u,c);return n.runWebGLProgram(d,[s,i,o],s.dtype)},FMe={kernelName:Nx,backendName:"webgl",kernelFunc:RMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OMe(t,e,n,r){const s=re(e),o=re(t.shape)/s,a=ke({inputs:{x:t},attrs:{shape:[o,s]},backend:r}),l=hh(a,t.dtype,"max",r),u=ke({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZG(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:i,keepDims:o}=r,a=s.shape.length,l=yt(i,s.shape);let u=l;const c=$n(u,a),d=c!=null,h=n.shouldExecuteOnCPU([s]);let f=s;if(d){if(h){const E=n.texData.get(f.dataId).values,b=new Array(a);for(let C=0;C<b.length;C++)b[C]=s.shape[c[C]];const T=P5(E,s.shape,s.dtype,c,b);f=n.makeTensorInfo(b,s.dtype);const x=n.texData.get(f.dataId);x.values=T}else f=d2(s,c,n);u=Xn(u.length,a)}Wr("max",u,a);const[p,m]=Ir(f.shape,u);let y=p;o&&(y=Kn(p,l));let g;if(h){const E=n.texData.get(f.dataId).values,b=HOe(E,re(m),y,s.dtype);g=n.makeTensorInfo(y,s.dtype);const T=n.texData.get(g.dataId);T.values=b}else g=OMe(f,m,y,n);return d&&n.disposeIntermediateTensorInfo(f),g}const $Me={kernelName:$0,backendName:"webgl",kernelFunc:ZG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LMe=M5+`
  return max(a, b);
`,PMe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+dh+`
  return result;
`,MMe=Gr({opSnippet:LMe,packedOpSnippet:PMe,cpuKernelImpl:UOe}),BMe={kernelName:Rp,backendName:"webgl",kernelFunc:MMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;Uy(s,"maxPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,u=1;D(Ur(o,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const c=Io(s.shape,i,o,u,a,l);if(c.filterWidth===1&&c.filterHeight===1&&Et(c.inShape,c.outShape))return yi({inputs:{x:s},backend:n});const d=new Ng(c,"max",!1);return n.runWebGLProgram(d,[s],s.dtype)}const HMe={kernelName:L0,backendName:"webgl",kernelFunc:zMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UMe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dataFormat:l,dimRoundingMode:u}=r,c=[1,1,1],d=tu(s.shape,i,o,c,a,u,l),h=new z5(d,"max",!1);return n.runWebGLProgram(h,[s],s.dtype)}const WMe={kernelName:P0,backendName:"webgl",kernelFunc:UMe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VMe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,s=e.dilationHeight,i=e.effectiveFilterHeight,o=e.effectiveFilterWidth,a=i-1-e.padInfo.top,l=o-1-e.padInfo.left,u=i*o-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class GMe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,i=e.dilationDepth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterDepth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,d=l-1-e.padInfo.front,h=u-1-e.padInfo.top,f=c-1-e.padInfo.left,p=l*u*c-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${h}, ${f});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${p} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jMe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=r,d=[1,1,1],h=tu(o.shape,a,l,d,u,c),f=new z5(h,"max",!0),p=n.runWebGLProgram(f,[o],o.dtype),m=new GMe(h),y=n.runWebGLProgram(m,[s,p],o.dtype);return n.disposeIntermediateTensorInfo(p),y}const KMe={kernelName:Dx,backendName:"webgl",kernelFunc:jMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qMe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i,output:o}=e,a=i;Uy([i,o],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=r,h=Io(a.shape,l,u,1,c,d),f=!0,p=new Ng(h,"max",f),m=n.runWebGLProgram(p,[a],a.dtype),y=new VMe(h),g=n.runWebGLProgram(y,[s,m],a.dtype);return n.disposeIntermediateTensorInfo(m),g}const XMe={kernelName:Ax,backendName:"webgl",kernelFunc:qMe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YMe(t,e,n,r){let s=new Ng(n,"max",!1);const i=r.runWebGLProgram(s,[t],"float32");s=new Ng(n,"max",!0,!0,e);const o=r.runWebGLProgram(s,[t],"float32");return[i,o]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QMe={kernelName:Rx,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:i,pad:o,includeBatchInIndex:a}=e,l=n;D(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const u=[1,1];D(Ur(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=Io(r.shape,s,i,u,o),[d,h]=YMe(r,a,c,l);return[d,h]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZMe(t,e,n,r){const s=re(e),o=re(t.shape)/s,a=ke({inputs:{x:t},attrs:{shape:[o,s]},backend:r}),l=hh(a,"float32","mean",r),u=ke({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JMe={kernelName:M0,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:s,axis:i}=e,o=n,a=r.shape.length,l=yt(i,r.shape);let u=l;const c=$n(u,a),d=c!=null,h=o.shouldExecuteOnCPU([r]),f=[];let p=r;if(d){if(h){const b=o.texData.get(p.dataId).values,T=new Array(a);for(let S=0;S<T.length;S++)T[S]=r.shape[c[S]];const x=P5(b,r.shape,r.dtype,c,T);p=o.makeTensorInfo(T,r.dtype);const C=o.texData.get(p.dataId);C.values=x}else p=d2(r,c,o);f.push(p),u=Xn(u.length,a)}Wr("sum",u,a);const[m,y]=Ir(p.shape,u);let g=m;s&&(g=Kn(m,l));const v=ZMe(p,y,g,o);for(const E of f)o.disposeIntermediateTensorInfo(E);return v}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=yt(i,s.shape);let u=l;const c=$n(u,a);let d=s;c!=null&&(d=vs({inputs:{x:s},backend:n,attrs:{perm:c}}),u=Xn(u.length,s.shape.length)),Wr("min",u,a);const[h,f]=Ir(d.shape,u),p=re(f),m=ke({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),y=hh(m,m.dtype,"min",n);let g;if(o){const v=Kn(h,l);g=ke({inputs:{x:y},backend:n,attrs:{shape:v}})}else g=ke({inputs:{x:y},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),c!=null&&n.disposeIntermediateTensorInfo(d),g}const t7e={kernelName:B0,backendName:"webgl",kernelFunc:e7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n7e=M5+`
  return min(a, b);
`,r7e=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+dh+`
  return result;
`,s7e=Gr({opSnippet:n7e,packedOpSnippet:r7e,cpuKernelImpl:WOe}),i7e={kernelName:Fp,backendName:"webgl",kernelFunc:s7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class o7e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((c,d)=>c[0]+e[d]+c[1]);const s=e.length,i=Yt(s),o=n.map(c=>c[0]).join(","),a=n.map((c,d)=>c[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s),u=r==="reflect"?0:1;if(s===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${s}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a7e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((p,m)=>p[0]+e[m]+p[1]);const s=e.length,i=Yt(s),o=n.map(p=>p[0]).join(","),a=n.map((p,m)=>p[0]+e[m]).join(","),l=ms("rc",s),u=ms("source",s),c=`${l[s-1]} < ${this.outputShape[s-1]}`,d=s===1?"source":`vec2(${u.slice(-2).join()})`,h=r==="reflect"?0:1;let f="";if(s===1){const p=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${h};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${h};
        }
        source -= start;
      `;f=`
        ${i} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[s-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
      `}else{const p=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${h}) +
                gte * ((end - 1) * 2 - source + ${h});
        source -= start;
      `;f=`
        ${i} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[s-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
        rc = outputLoc;
        ${l[s-2]} += 1;
        if(${l[s-2]} < ${this.outputShape[s-2]}) {
          ${p}
          result[2] = getChannel(getX(${u.join()}), ${d});
          ${l[s-1]} += 1;
          if(${c}) {
            ${p}
            result[3] = getChannel(getX(${u.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${f}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l7e=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:s,mode:i}=n,o=ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new a7e(r.shape,s,i):new o7e(r.shape,s,i);return e.runWebGLProgram(o,[r],r.dtype)},u7e={kernelName:z0,backendName:"webgl",kernelFunc:l7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c7e=`if (b == 0.0) return NAN;
  return mod(a, b);`,d7e=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+dh+`
  return result;
`,h7e=Gr({opSnippet:c7e,packedOpSnippet:d7e}),f7e={kernelName:Op,backendName:"webgl",kernelFunc:h7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class p7e{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m7e=`
if (a == b) {
  return 1.0;
};
return a / b;`,g7e=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,JG=Gr({opSnippet:m7e,packedOpSnippet:g7e,checkOutOfBounds:!0}),y7e={kernelName:vp,backendName:"webgl",kernelFunc:JG};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const I8="return a - b;",ej=Gr({opSnippet:I8,packedOpSnippet:I8,supportsComplex:!0,cpuKernelImpl:c8e}),v7e={kernelName:Yp,backendName:"webgl",kernelFunc:ej};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tj(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:i}=r,o=yt([i],s.shape),a=ZG({inputs:{x:s},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),l=Kn(a.shape,o),u=ke({inputs:{x:a},backend:n,attrs:{shape:l}}),c=ej({inputs:{a:s,b:u},backend:n}),d=XG({inputs:{x:c},backend:n}),h=h2({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:!1}}),f=ke({inputs:{x:h},backend:n,attrs:{shape:l}}),p=JG({inputs:{a:d,b:f},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),p}const b7e={kernelName:sy,backendName:"webgl",kernelFunc:tj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E7e(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:i,seed:o,normalized:a}=r,l=a?s:tj({inputs:{logits:s},backend:n,attrs:{dim:s.shape.length-1}}),u=l.shape[0],c=l.shape[1],d=new p7e(u,c,i),h=[[o]],f=n.runWebGLProgram(d,[l],"int32",h);return a||n.disposeIntermediateTensorInfo(l),f}const T7e={kernelName:Fx,backendName:"webgl",kernelFunc:E7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x7e=Ao+`
  return -x;
`,C7e=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function S7e(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const i=n.texData.get(r.dataId),[o,a]=GOe(i.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,o)}let s;return ee().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new Ou(r.shape,C7e):s=new Ma(r.shape,x7e),n.runWebGLProgram(s,[r],r.dtype)}const w7e={kernelName:H0,backendName:"webgl",kernelFunc:S7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _7e=UC;function k7e(t){ki("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r,u=n.readSync(s.dataId),c=n.readSync(i.dataId),{selectedIndices:d}=_7e(u,c,o,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const I7e={kernelName:Ox,backendName:"webgl",kernelFunc:k7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N7e=WC;function A7e(t){ki("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=r,c=n.readSync(s.dataId),d=n.readSync(i.dataId),{selectedIndices:h,validOutputs:f}=N7e(c,d,o,a,l,u);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const D7e={kernelName:$x,backendName:"webgl",kernelFunc:A7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R7e=VC;function F7e(t){ki("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=r,c=n.readSync(s.dataId),d=n.readSync(i.dataId),h=o,f=a,p=l,m=u,{selectedIndices:y,selectedScores:g}=R7e(c,d,h,f,p,m);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([g.length],"float32",new Float32Array(g))]}const O7e={kernelName:Lx,backendName:"webgl",kernelFunc:F7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $7e{constructor(e,n,r,s){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${s}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L7e=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:i,depth:o,onValue:a,offValue:l}=r,u=re(s.shape),c=new $7e(u,o,a,l),d=ke({inputs:{x:s},backend:n,attrs:{shape:[u]}}),h=n.runWebGLProgram(c,[d],i);n.disposeIntermediateTensorInfo(d);const f=[...s.shape,o],p=ke({inputs:{x:h},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(h),p},P7e={kernelName:V0,backendName:"webgl",kernelFunc:L7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tT(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const s=Vy({inputs:{input:r},backend:n}),i=tT({inputs:{x:s},backend:n}),o=f2({inputs:{input:r},backend:n}),a=tT({inputs:{x:o},backend:n}),l=wc({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return Gy({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const M7e={kernelName:ly,backendName:"webgl",kernelFunc:tT};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nj(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const s=Vy({inputs:{input:r},backend:n}),i=nj({inputs:{x:s},backend:n}),o=f2({inputs:{input:r},backend:n}),a=tT({inputs:{x:o},backend:n}),l=wc({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return Gy({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const B7e={kernelName:W0,backendName:"webgl",kernelFunc:nj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z7e(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return Yk({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const i=e[0].shape,o=e[0].dtype;e.forEach(c=>{Hr(i,c.shape,"All tensors passed to stack must have matching shapes"),D(o===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(c=>{const d=Yk({inputs:{input:c},backend:n,attrs:{dim:s}});return a.push(d),d}),u=HG({inputs:l,backend:n,attrs:{axis:s}});return a.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const H7e={kernelName:G0,backendName:"webgl",kernelFunc:z7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class U7e{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((u,c)=>u[0]+e[c]+u[1]);const s=e.length,i=Yt(s),o=n.map(u=>u[0]).join(","),a=n.map((u,c)=>u[0]+e[c]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);if(s===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class W7e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((m,y)=>m[0]+e[y]+m[1]);const s=e.length,i=Yt(s),o=n.map(m=>m[0]).join(","),a=n.map((m,y)=>m[0]+e[y]).join(","),l=ms("rc",s),u=ms("source",s),c=`${l[s-1]} < ${this.outputShape[s-1]}`,d=s===1?"source":`vec2(${u.slice(-2).join()})`,h=[`${i} rc = outputLoc;`,`${l[s-1]} += 1;
       if(${c}) {
      `,s===1?"":`}
       rc = outputLoc;
       ${l[s-2]} += 1;
       if(${l[s-2]} < ${this.outputShape[s-2]}) {`,s===1?"":`  ${l[s-1]} += 1;
         if(${c}) {`],f=s===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let m=0,y=s===1?2:4;m<y;m++)p+=`
        ${h[m]}
        if (${f}) {
          result[${m}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${m}] = getChannel(getX(${u.join()}), ${d});
        }
      `;p+=s===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rj=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,constantValue:o}=r;if(re(s.shape)===0){const u=i.map((c,d)=>c[0]+s.shape[d]+c[1]);return Gy({backend:n,attrs:{shape:u,value:o,dtype:s.dtype}})}const a=ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new W7e(s.shape,i,o):new U7e(s.shape,i,o),l=[[o]];return n.runWebGLProgram(a,[s],s.dtype,l)},V7e={kernelName:j0,backendName:"webgl",kernelFunc:rj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G7e=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,j7e=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+dh+`
  return result;
`,K7e=Gr({opSnippet:G7e,packedOpSnippet:j7e}),q7e={kernelName:Lp,backendName:"webgl",kernelFunc:K7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X7e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=[],u=yt(i,s.shape);let c=u;const d=$n(c,a);let h=s;d!=null&&(h=vs({inputs:{x:s},backend:n,attrs:{perm:d}}),c=Xn(c.length,a),l.push(h)),Wr("prod",c,a);let f;if(n.shouldExecuteOnCPU([h])){const p=n.texData.get(h.dataId).values,{outVals:m,outShape:y,outDtype:g}=KOe(h.shape,h.dtype,p,c);f=n.makeTensorInfo(y,g,m)}else{const[p,m]=Ir(h.shape,c),y=re(m),g=ke({inputs:{x:h},backend:n,attrs:{shape:[-1,y]}}),v=lC(s.dtype),E=hh(g,v,"prod",n);f=ke({inputs:{x:E},backend:n,attrs:{shape:p}}),l.push(g),l.push(E)}if(o){l.push(f);const p=Kn(f.shape,u);f=ke({inputs:{x:f},backend:n,attrs:{shape:p}})}return l.forEach(p=>n.disposeIntermediateTensorInfo(p)),f}const Y7e={kernelName:q0,backendName:"webgl",kernelFunc:X7e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q7e(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:i,indices:o}=e,{outputRaggedRank:a}=r,l=s.map(g=>n.readSync(g.dataId)),u=s.map(g=>g.shape),c=n.readSync(i.dataId),d=n.readSync(o.dataId),[h,f,p]=qOe(l,u,c,i.shape,i.dtype,d,o.shape,a),m=h.map(g=>n.makeTensorInfo([g.length],"int32",g)),y=n.makeTensorInfo(p,i.dtype,f);return m.concat([y])}const Z7e={kernelName:Px,backendName:"webgl",kernelFunc:Q7e};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J7e(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:i}=e,o=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(i.dataId),[u,c]=XOe(o,r.shape,r.dtype,a,s.shape,l,i.shape),d=n.makeTensorInfo([u.length],"int32",u),h=n.makeTensorInfo([c.length],r.dtype,c);return[d,h]}const eBe={kernelName:Mx,backendName:"webgl",kernelFunc:J7e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tBe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:i,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,u=n.readSync(s.dataId),c=n.readSync(i.dataId),d=n.readSync(o.dataId),h=a.map(y=>n.readSync(y.dataId)),f=a.map(y=>y.shape),[p,m]=YOe(u,s.shape,c,i.shape,i.dtype,d,o.shape,h,f,l);return n.makeTensorInfo(p,i.dtype,m)}const nBe={kernelName:Bx,backendName:"webgl",kernelFunc:tBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sj=t=>{const{backend:e,attrs:n}=t,{start:r,stop:s,step:i,dtype:o}=n,a=QOe(r,s,i,o);return e.makeTensorInfo([a.length],o,a)},rBe={kernelName:zx,backendName:"webgl",kernelFunc:sj};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sBe="return 1.0 / x;",iBe=Ot({opSnippet:sBe}),oBe={kernelName:Pp,backendName:"webgl",kernelFunc:iBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aBe=Ao+`
  return (x < 0.0) ? 0.0 : x;
`,lBe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,uBe=Ot({opSnippet:aBe,packedOpSnippet:lBe}),cBe={kernelName:Mp,backendName:"webgl",kernelFunc:uBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dBe=Ao+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,hBe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,fBe=Ot({opSnippet:dBe,packedOpSnippet:hBe}),pBe={kernelName:Bp,backendName:"webgl",kernelFunc:fBe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mBe{constructor(e,n,r,s,i){this.variableNames=["A"],this.outputShape=[];const[o,a,l,u]=e;this.outputShape=[o,n,r,u];const c=[s&&n>1?a-1:a,s&&r>1?l-1:l],d=[s&&n>1?n-1:n,s&&r>1?r-1:r];let h;i?h="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gBe{constructor(e,n,r,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,u]=e;this.outputShape=[o,n,r,u];const c=[s&&n>1?a-1:a,s&&r>1?l-1:l],d=[s&&n>1?n-1:n,s&&r>1?r-1:r];let h;i?h="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yBe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r,[l,u]=a,c=ee().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new gBe(s.shape,l,u,i,o):new mBe(s.shape,l,u,i,o);return n.runWebGLProgram(c,[s],"float32")}const vBe={kernelName:Q0,backendName:"webgl",kernelFunc:yBe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bBe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,i]=n,[,o,a]=e,l=[r&&o>1?s-1:s,r&&a>1?i-1:i],u=[r&&o>1?o-1:o,r&&a>1?a-1:a],c=l[0]/u[0],d=l[1]/u[1],h=1/c,f=1/d,p=Math.ceil(h)*2+2,m=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${f});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${s-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EBe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r,a=new bBe(i.shape,s.shape,o);return n.runWebGLProgram(a,[i],i.dtype)}const TBe={kernelName:Wx,backendName:"webgl",kernelFunc:EBe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xBe{constructor(e,n,r,s,i){this.variableNames=["A"],this.outputShape=[];const[o,a,l,u]=e;this.outputShape=[o,n,r,u];const c=[s&&n>1?a-1:a,s&&r>1?l-1:l],d=[s&&n>1?n-1:n,s&&r>1?r-1:r],h=s?"0.5":"0.0";let f;i?f="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CBe{constructor(e,n,r,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,u]=e;this.outputShape=[o,n,r,u];const c=[s&&n>1?a-1:a,s&&r>1?l-1:l],d=[s&&n>1?n-1:n,s&&r>1?r-1:r],h=s?"0.5":"0.0";let f;i?f="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SBe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r,[l,u]=a,c=ee().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new CBe(s.shape,l,u,i,o):new xBe(s.shape,l,u,i,o);return n.runWebGLProgram(c,[s],s.dtype)}const wBe={kernelName:Y0,backendName:"webgl",kernelFunc:SBe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Be{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,i]=n,[,o,a]=e,l=[r&&o>1?s-1:s,r&&a>1?i-1:i],u=[r&&o>1?o-1:o,r&&a>1?a-1:a],c=l[0]/u[0],d=l[1]/u[1],h=1/c,f=1/d,p=Math.ceil(h)*2+2,m=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${f});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kBe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r,a=new _Be(i.shape,s.shape,o);return n.runWebGLProgram(a,[i],i.dtype)}const IBe={kernelName:Ux,backendName:"webgl",kernelFunc:kBe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NBe{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const s=a=>n.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,i=e.map((a,l)=>s(l)).join(","),o=Yt(r);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ABe{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const s=ms("rc",r),i=`${s[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${s[r-2]} + 1 < ${this.outputShape[r-2]}`,a=Yt(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(s.slice())};
          if(${i}){
            result.g = ${u(s.slice())};
          }
          if(${o}) {
            result.b = ${c(s.slice())};
            if(${i}) {
              result.a = ${d(s.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(p){return h(p)}function u(p){return p[r-1]="("+p[r-1]+" + 1)",h(p)}function c(p){return p[r-2]="("+p[r-2]+" + 1)",h(p)}function d(p){return p[r-1]="("+p[r-1]+" + 1)",p[r-2]="("+p[r-2]+" + 1)",h(p)}function h(p){const m=e.map((v,E)=>f(E,p)),y=m.join(","),g=m.slice(-2).join(",");return`getChannel(getX(${y}), vec2(${g}))`}function f(p,m){return n.indexOf(p)!==-1&&e[p]!==1?`${e[p]} - ${m[p]} - 1`:`${m[p]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DBe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:i}=r,o=s.shape.length,a=yt(i,s.shape);if(o===0)return yi({inputs:{x:s},backend:n});const l=ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ABe(s.shape,a):new NBe(s.shape,a);return n.runWebGLProgram(l,[s],s.dtype)}const RBe={kernelName:Z0,backendName:"webgl",kernelFunc:DBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FBe{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],s=e[2];this.outputShape=e;let i="";typeof n=="number"?i=`float outputValue = ${n.toFixed(2)};`:i=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${s} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OBe={kernelName:oC,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:i,center:o}=e,a=n,l=new FBe(r.shape,i),[u,c]=LA(o,r.shape[1],r.shape[2]),d=[[u,c,Math.sin(s),Math.cos(s)]];return a.runWebGLProgram(l,[r],r.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Be=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,LBe=Ot({opSnippet:$Be}),PBe={kernelName:zp,backendName:"webgl",kernelFunc:LBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MBe="return inversesqrt(x);",BBe=Ot({opSnippet:MBe,cpuKernelImpl:ZOe}),zBe={kernelName:Hp,backendName:"webgl",kernelFunc:BBe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class H5{constructor(e,n,r,s,i,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const u=Yt(i.length),c=Yt(o.length);let d="";r===1?d="i":r===2&&(d="i, j");const h=`getIndices(${d})`;let f="";s===1?f="i":s===2&&(f="i, coords[1]");const p=`getUpdates(${f})`;let m="";l&&(m="coords[0], coords[1]");const y=`getDefaultValue(${m})`,g=n>1?"strides[j]":"strides";this.userCode=`
        ${u} strides = ${u}(${i});

        void main() {
          ${c} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${h});
              flattenedIndex += index * ${g};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${p};
              found = true;
            }
          }
          setOutput(mix(${y}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HBe{constructor(e,n,r,s,i,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const u=Yt(i.length),c=Yt(o.length);let d="";r===1?d="i":r===2&&(d="i, j");const h=`getIndices(${d})`;let f="";s===1?f="i":s===2&&(f="i, coords[1]");const p=`getUpdates(${f})`;let m="";l&&(m="coords[0], coords[1]");const y=`getDefaultValue(${m})`,g=n>1?"strides[j]":"strides",v=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${u} strides = ${u}(${i});

        void main() {
          ${c} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${h});
              flattenedIndex += index.xz * ${g};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${v};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${p};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${y}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UBe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:i}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=xc(i,s,o),h=[d/u,u];if(d===0)return n.makeTensorInfo(o,s.dtype);const f=ke({inputs:{x:s},backend:n,attrs:{shape:[l,a]}}),p=ke({inputs:{x:i},backend:n,attrs:{shape:[l,u]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));let y;ee().getBool("WEBGL_PACK")?y=new HBe(l,a,f.shape.length,p.shape.length,c,h):y=new H5(l,a,f.shape.length,p.shape.length,c,h);const g=n.runWebGLProgram(y,[p,f,m],p.dtype),v=ke({inputs:{x:g},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(m),v}const WBe={kernelName:Vx,backendName:"webgl",kernelFunc:UBe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VBe{constructor(e,n,r,s){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const i="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=ee().getNumber("WEBGL_VERSION")===2?i:o,l=s==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GBe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:i}=e,{side:o}=r,a=new VBe(s.shape[0],s.shape[1],i.shape[1],o),l=[[s.shape[1]]];return n.runWebGLProgram(a,[s,i],"int32",l)}const jBe={kernelName:jx,backendName:"webgl",kernelFunc:GBe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KBe{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let s,i;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)i="resRC",s="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],u=[];for(let c=0;c<n.length;c++)u.push(`${a[c]}`),c<e&&l.push(`${a[c]}`);s=l.join(),i=u.join()}const o=Yt(r);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${s});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qBe(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:i}=e,o=new KBe(r.shape.length,s.shape,s.shape.length);return n.runWebGLProgram(o,[r,s,i],Bs(s.dtype,i.dtype))}const XBe={kernelName:J0,backendName:"webgl",kernelFunc:qBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YBe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${XC};
  float scale = ${YC};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,QBe=Ot({opSnippet:YBe}),ZBe={kernelName:Up,backendName:"webgl",kernelFunc:QBe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JBe=m1+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,eze=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,tze=Ot({opSnippet:JBe,packedOpSnippet:eze,cpuKernelImpl:e8e}),nze={kernelName:jp,backendName:"webgl",kernelFunc:tze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rze=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,sze=Ot({opSnippet:rze}),ize={kernelName:Gp,backendName:"webgl",kernelFunc:sze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oze=m1+`
  return sin(x);
`,aze=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${dh}
  return result;
`,lze=Ot({opSnippet:oze,packedOpSnippet:aze}),uze={kernelName:Wp,backendName:"webgl",kernelFunc:lze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cze=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,dze=Ot({opSnippet:cze}),hze={kernelName:Vp,backendName:"webgl",kernelFunc:dze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fze=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,pze=Ot({opSnippet:fze}),mze={kernelName:Kp,backendName:"webgl",kernelFunc:pze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gze=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,paddings:o}=r;D(s.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=i.reduce((g,v)=>g*v),l=[[0,0]];l.push(...o);for(let g=1+i.length;g<s.shape.length;++g)l.push([0,0]);const u=[],c=rj({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),d=Ny(c.shape,i,a,!1),h=Ay(d.length,i.length,!1),f=Dy(c.shape,i,a,!1),p=ke({inputs:{x:c},backend:n,attrs:{shape:d}}),m=vs({inputs:{x:p},backend:n,attrs:{perm:h}}),y=ke({inputs:{x:m},backend:n,attrs:{shape:f}});return u.push(c),u.push(p),u.push(m),u.forEach(g=>n.disposeIntermediateTensorInfo(g)),y},yze={kernelName:ny,backendName:"webgl",kernelFunc:gze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vze(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:i,defaultValue:o}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${s.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.readSync(r.dataId),l=n.readSync(s.dataId),u=n.readSync(i.dataId),c=n.readSync(o.dataId)[0],[d,h,f,p,m]=n8e(a,r.shape,r.dtype,l,s.dtype,u,c);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],s.dtype,f),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(y=>Number(y)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const bze={kernelName:Kx,backendName:"webgl",kernelFunc:vze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eze(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${s.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.readSync(s.dataId)),a=n.readSync(r.dataId),l=Array.from(n.readSync(i.dataId)),[u,c,d]=r8e(a,r.shape,r.dtype,o,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}const Tze={kernelName:qx,backendName:"webgl",kernelFunc:Eze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xze(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);const o=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(i.dataId),[u,c]=IG(o,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(c,r.dtype,u)}const Cze={kernelName:Xx,backendName:"webgl",kernelFunc:xze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sze(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);const o=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(i.dataId),[u,c]=IG(o,r.shape,r.dtype,a,l);return n.makeTensorInfo(c,r.dtype,u)}const wze={kernelName:Yx,backendName:"webgl",kernelFunc:Sze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ze(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:i,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:h}=xc(i,s,a),f=!1;if(i.dtype==="string"){const g=n.bufferSync(s),v=n.bufferSync(i),E=Hl(n.readSync(o.dataId)[0]),b=JOe(g,v,a,h,c,u,l,d,E,f);return n.makeTensorInfo(a,b.dtype,b.values)}const p=new H5(u,l,s.shape.length,i.shape.length,d,[h,1],f),m=n.runWebGLProgram(p,[i,s,o],i.dtype),y=ke({inputs:{x:m},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(m),y}const kze={kernelName:Qx,backendName:"webgl",kernelFunc:_ze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ize(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:i,axis:o}=r,a=yt(o,s.shape)[0],l=QA(s,i,a),u=s.shape.length,c=new Array(u).fill(0),d=s.shape.slice();return l.map(h=>{const f=[...d];f[a]=h;const p=g1({inputs:{x:s},backend:n,attrs:{begin:c,size:f}});return c[a]+=h,p})}const Nze={kernelName:ry,backendName:"webgl",kernelFunc:Ize};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N8="return sqrt(x);",Aze=Ot({opSnippet:N8,packedOpSnippet:N8,cpuKernelImpl:s8e}),Dze={kernelName:qp,backendName:"webgl",kernelFunc:Aze};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rze="return x * x;",Fze=Ot({opSnippet:Rze}),Oze={kernelName:Zx,backendName:"webgl",kernelFunc:Fze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A8="return (a - b) * (a - b);",$ze=Gr({opSnippet:A8,packedOpSnippet:A8}),Lze={kernelName:Xp,backendName:"webgl",kernelFunc:$ze};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");const i=n.readSync(s.dataId),o=Gl(i),a=i8e(o,"string",r);return n.makeTensorInfo(s.shape,"string",a)}const Mze={kernelName:iy,backendName:"webgl",kernelFunc:Pze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bze({inputs:t,attrs:e,backend:n}){const{x:r}=t,s=Ao+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,i=new Ma(r.shape,s);return n.runWebGLProgram(i,[r],r.dtype)}const zze={kernelName:e1,backendName:"webgl",kernelFunc:Bze};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hze{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const s=r.length,i=Yt(r.length),o=Yt(r.length);let a="";if(s===1)a="coords * strides + begin";else{let l=0;a=r.map((u,c)=>(l++,r.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${l-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${e});
      ${i} strides = ${i}(${n});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uze(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,end:o,strides:a,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:h}=r,{finalShapeSparse:f,finalShape:p,isIdentity:m,sliceDim0:y,isSimpleSlice:g,begin:v,end:E,strides:b}=RA(s.shape,i,o,a,l,u,c,d,h);let T;if(m)T=ke({inputs:{x:s},backend:n,attrs:{shape:p}});else if(y||g){D(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const C=NA(v,E,b),S=g1({inputs:{x:s},backend:n,attrs:{begin:v,size:C}});T=ke({inputs:{x:S},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(S)}else if(n.shouldExecuteOnCPU([s])){const S=n.readSync(s.dataId),N=ct(s.shape,s.dtype,S),I=o8e(f,N,b,v);T=n.makeTensorInfo(p,s.dtype,I.values)}else{const S=new Hze(v,b,f);T=n.runWebGLProgram(S,[s],s.dtype)}const x=ke({inputs:{x:T},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(T),x}const Wze={kernelName:Jx,backendName:"webgl",kernelFunc:Uze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vze(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:i,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:d}=e,h=n.readSync(c.dataId),f=n.readSync(d.dataId),[p,m]=a8e(h,f,s,i,o,a,l,u);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",m)]}const Gze={kernelName:eC,backendName:"webgl",kernelFunc:Vze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jze(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:i,delimiter:o}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.readSync(i.dataId),l=n.readSync(o.dataId)[0],[u,c,d]=l8e(a,l,s),h=c.length;return[n.makeTensorInfo([h,2],"int32",u),n.makeTensorInfo([h],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const Kze={kernelName:tC,backendName:"webgl",kernelFunc:jze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qze(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(i.dataId),a=u8e(o,s);return n.makeTensorInfo(i.shape,"int32",a)}const Xze={kernelName:nC,backendName:"webgl",kernelFunc:qze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yze="return tan(x);",Qze=Ot({opSnippet:Yze}),Zze={kernelName:Qp,backendName:"webgl",kernelFunc:Qze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jze=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,eHe=Ot({opSnippet:Jze}),tHe={kernelName:Zp,backendName:"webgl",kernelFunc:eHe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nHe(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:s,indices:i,updates:o}=e,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=xc(o,i,s.shape),h=[d/u,u];if(d===0)return n.makeTensorInfo(s.shape,i.dtype);const f=ke({inputs:{x:i},backend:n,attrs:{shape:[l,a]}}),p=ke({inputs:{x:o},backend:n,attrs:{shape:[l,u]}}),m=ke({inputs:{x:s},backend:n,attrs:{shape:h}}),y=new H5(l,a,f.shape.length,p.shape.length,c,h,!1,!0),g=n.runWebGLProgram(y,[p,f,m],m.dtype),v=ke({inputs:{x:g},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),v}const rHe={kernelName:Gx,backendName:"webgl",kernelFunc:nHe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sHe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[o]*n[o];this.outputShape=r,this.rank=r.length;const s=Yt(this.rank),i=iHe(e);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}}function iHe(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let s=0;s<t.length;s++)r.push(`imod(${n[s]}, ${t[s]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ij(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:i}=r;if(s.dtype==="string"||s.shape.length>5){const l=n.readSync(s.dataId),u=s.dtype==="string"?l.map(h=>Hl(h)):l,c=ct(s.shape,s.dtype,u),d=d8e(c,i);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const o=new sHe(s.shape,i);return n.runWebGLProgram(o,[s],s.dtype)}const oHe={kernelName:Jp,backendName:"webgl",kernelFunc:ij};class aHe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class lHe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mc(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function D8(t){let e=1;for(;e<t;)e*=2;return e}function uHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:i,sorted:o}=r,a=ee().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=ee().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=s.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([s])||c<a||i>l){const I=n.readSync(s.dataId),[F,L]=h8e(I,u,s.dtype,i,o);return[n.makeTensorInfo(F.shape,F.dtype,F.values),n.makeTensorInfo(L.shape,L.dtype,L.values)]}if(i===0)return u[u.length-1]=0,[n.makeTensorInfo(u,s.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(c===1)return[s,Gy({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const d=n.texData.get(s.dataId),h=d!==null&&d.isPacked,f=h?n.unpackTensor(s):s,m=re(u)/c,y=ke({inputs:{x:f},attrs:{shape:[m,c]},backend:n});h&&Mc(n,f);const g=D8(i),v=D8(c);let E=null;const b=()=>E===null?[y,y]:[y,E],T=(I,F,L)=>{const z=b(),H=new aHe(L),M=[[c],[E===null?1:0],[Number.NEGATIVE_INFINITY],[I],[F]],j=E;E=n.runWebGLProgram(H,z,"int32",M),Mc(n,j)};for(let I=1;I<g;I*=2){const F=I*2;for(let L=I;L>=1;L/=2)T(F,L,[m,v])}for(let I=v;I>g;I/=2){const F=b(),L=new lHe([m,I/2]),H=[[c],[E===null?1:0],[g]],$=E;E=n.runWebGLProgram(L,F,"int32",H),Mc(n,$);const M=g/2,j=M*2;for(let P=M;P>=1;P/=2)T(j,P,E.shape)}let x=E;E=g1({inputs:{x:E},backend:n,attrs:{begin:0,size:[m,i]}}),Mc(n,x);let C=QG({inputs:{x:y,indices:E},backend:n,attrs:{axis:1,batchDims:1}});Mc(n,y);const S=u.slice(0,-1);S.push(i),x=E,E=ke({inputs:{x:E},attrs:{shape:S},backend:n}),Mc(n,x);const N=C;return C=ke({inputs:{x:C},attrs:{shape:S},backend:n}),Mc(n,N),[C,E]}const cHe={kernelName:rC,backendName:"webgl",kernelFunc:uHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dHe{constructor(e,n,r,s,i,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const a=r==="nearest"?1:2;let l;switch(s){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hHe(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,transforms:i}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:u}=r,[c,d,h,f]=s.shape,[p,m]=u??[d,h],y=[c,p,m,f],g=new dHe(d,h,o,a,l,y);return n.runWebGLProgram(g,[s,i],"float32")}const fHe={kernelName:sC,backendName:"webgl",kernelFunc:hHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pHe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:i}=e;Uy(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(i.dataId),{outputValues:a,outputShape:l,indices:u}=f8e(o,s,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,a),r.makeTensorInfo([u.length],"int32",u)]}const mHe={kernelName:iC,backendName:"webgl",kernelFunc:pHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gHe(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:i}=r;i<0&&(i+=s.shape.length);const o=s,a=o.shape.length,l=s.shape[i],u=new Array(a-1);let c=0;for(let m=0;m<a;m++)m!==i&&(u[c++]=o.shape[m]);const d=[],h=new Array(a).fill(0),f=o.shape.slice();f[i]=1;const p=new Array(l);for(let m=0;m<p.length;m++){h[i]=m;const y=g1({inputs:{x:o},backend:n,attrs:{begin:h,size:f}}),g=ke({inputs:{x:y},backend:n,attrs:{shape:u}});p[m]=g,d.push(y)}return d.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const yHe={kernelName:oy,backendName:"webgl",kernelFunc:gHe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vHe{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,s=e.batchSize,i=e.inSize,o=e.numSegments,a=o*Math.ceil(i/r);this.outputShape=[s,a];const l="0.0",u="sumValue",c=Math.floor(r/4)*4,d=r%4,h=`
        sumValue += dot(values, segFilter);
    `;let f="";i%r>0&&(f=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let p="";i%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${p}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${h}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${h}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${h}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${h}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bHe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:i}=e,{numSegments:o}=r,a=s.shape.length,l=[];let u=0;const c=$n([u],a);let d=s;c!=null&&(d=vs({inputs:{x:s},backend:n,attrs:{perm:c}}),l.push(d),u=Xn(1,a)[0]);const h=LH(d.shape,u,o),f=re([d.shape[u]]),p=ke({inputs:{x:d},backend:n,attrs:{shape:[-1,f]}});l.push(p);const m=lC(s.dtype),y=(b,T,x,C,S)=>{const N=b.shape[0],I=b.shape[1],F=$H(I,S),L={windowSize:F,inSize:I,batchSize:N,numSegments:S},z=new vHe(L,T),H=n.compileAndRun(z,[b,x],C);if(l.push(H),H.shape[1]===S)return H;const $=sj({backend:n,attrs:{start:0,stop:S,step:1,dtype:"float32"}}),M=ij({inputs:{x:$},backend:n,attrs:{reps:[I/F]}});return l.push($),l.push(M),y(H,T,M,C,S)},g=y(p,"unsortedSegmentSum",i,m,o),v=ke({inputs:{x:g},backend:n,attrs:{shape:h}});let E=v;if(c!=null){l.push(v);const b=vc(c);E=vs({inputs:{x:E},backend:n,attrs:{perm:b}})}return l.forEach(b=>n.disposeIntermediateTensorInfo(b)),E}const EHe={kernelName:ay,backendName:"webgl",kernelFunc:bHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const THe=[s$e,o$e,u$e,h$e,p$e,y$e,b$e,T$e,w$e,k$e,A$e,F$e,L$e,z$e,W$e,G$e,K$e,Q$e,J$e,tLe,iLe,hLe,pLe,vLe,ELe,_Le,ILe,RLe,H8e,$Le,zLe,VLe,YLe,JLe,tPe,rPe,iPe,uPe,hPe,mPe,yPe,bPe,TPe,SPe,_Pe,APe,RPe,$Pe,MPe,zPe,VPe,qPe,ZPe,t6e,s6e,i6e,a6e,u6e,d6e,f6e,m6e,b6e,x6e,w6e,k6e,A6e,F6e,P6e,H6e,z8e,W6e,MLe,j6e,X6e,Z6e,W8e,nMe,oMe,lMe,hMe,mMe,bMe,xMe,_Me,AMe,FMe,$Me,BMe,HMe,WMe,KMe,XMe,QMe,JMe,t7e,i7e,u7e,f7e,T7e,j8e,w7e,I7e,D7e,O7e,xLe,P7e,B7e,H7e,V7e,q7e,G8e,Y7e,Z7e,eBe,nBe,rBe,CLe,y7e,oBe,cBe,pBe,q8e,vBe,TBe,wBe,IBe,RBe,OBe,PBe,zBe,WBe,jBe,XBe,ZBe,nze,ize,uze,hze,cLe,b7e,mze,yze,bze,Tze,Cze,wze,kze,Nze,Dze,Oze,Lze,Mze,zze,Wze,Gze,Kze,Xze,v7e,t$e,Zze,tHe,rHe,oHe,cHe,fHe,n$e,mHe,yHe,EHe,M7e];for(const t of THe)aC(t);/** @license See the LICENSE file. *//**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vw=(...t)=>{({}).REACT_APP_DEBUG==="true"&&console.log(...t)},xHe=()=>{const t=w.useRef(null),e=w.useRef(null),[n,r]=w.useState(""),[s,i]=w.useState(""),[o,a]=w.useState(!1),l=w.useRef([]),u=w.useContext(Xl);w.useState("");const[c,d,h]=["assistant","tool","error"],f=()=>/iPhone|iPad|iPod/i.test(navigator.userAgent),p=async()=>{try{return(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(S=>S.stop()),!0}catch(C){return console.error("Camera permissions check failed:",C),!1}},m=async()=>{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){i("Browser API navigator.mediaDevices.getUserMedia not available");return}try{const C=await navigator.mediaDevices.getUserMedia({video:{facingMode:f()?"environment":"user"}});t.current&&(t.current.srcObject=C,t.current.onloadedmetadata=()=>{var S;(S=t.current)==null||S.play(),a(!0),v()})}catch(C){console.error("Error accessing camera:",C),i("Error accessing camera. Please ensure camera permissions are granted.")}},y=async C=>{if(!t.current||!e.current)return;const S=await C.detect(t.current);g(S),requestAnimationFrame(()=>y(C))},g=C=>{if(!e.current||!t.current)return;const S=e.current.getContext("2d");S&&(e.current.width=t.current.videoWidth,e.current.height=t.current.videoHeight,S.clearRect(0,0,S.canvas.width,S.canvas.height),S.drawImage(t.current,0,0,S.canvas.width,S.canvas.height),C.forEach(N=>{S.beginPath(),S.rect(...N.bbox),S.lineWidth=2,S.strokeStyle="red",S.fillStyle="red",S.stroke(),S.fillText(`${N.class} (${Math.round(N.score*100)}%)`,N.bbox[0],N.bbox[1]>10?N.bbox[1]-5:10)}))},v=async()=>{try{const C=await CE.load();y(C)}catch(C){console.error("Error loading model:",C),i("Error loading model.")}},E=async()=>{var j,P,B;if(!e.current||!t.current)return;const C=e.current.getContext("2d");if(!C)return;const S=new AbortController;l.current.unshift(S),C.drawImage(t.current,0,0,e.current.width,e.current.height);const N=e.current.toDataURL("image/png"),I={id:wi(),role:"user",content:"Describe the following image, but do not include any descriptions of people",imageData:N,date:new Date().toISOString()},F={id:wi(),role:"system",content:"You are a helpful assistant that describes images.",date:new Date().toISOString()},L=(P=(j=u==null?void 0:u.state)==null?void 0:j.currentChat)==null?void 0:P.id;let z;if(!L)z={id:L??wi(),title:"Image Description",messages:[I,F],date:new Date().toISOString()};else if(z=(B=u==null?void 0:u.state)==null?void 0:B.currentChat,!z)return console.error("Conversation not found."),l.current=l.current.filter(K=>K!==S),[];const H={messages:[...z.messages.filter(K=>K.role!==s)]};vw("Request to conversationApi:",H);let $="";try{const K=await M6(H,S.signal);let A={};if(K!=null&&K.body){const O=K.body.getReader();let se="",ae="";for(;;){const{done:de,value:le}=await O.read();if(de)break;var M=new TextDecoder("utf-8").decode(le);vw("Text from conversationApi:",M),console.log("Text from conversationApi:",M),M.split(`
`).forEach(Ne=>{var _e;try{if(Ne!==""&&Ne!=="{}")se+=Ne,A=JSON.parse(se),((_e=A.choices)==null?void 0:_e.length)>0&&(A.choices[0].messages.forEach(Se=>{Se.id=A.id,Se.date=new Date().toISOString()}),A.choices[0].messages.forEach(Se=>{const Fe=x(Se,I,L)})),se="",ae=JSON.stringify(A);else if(A.error)throw Error(A.error)}catch(Se){if(Se instanceof SyntaxError)vw("Incomplete message. Continuing...");else throw console.error(Se),Se}})}}}catch(K){console.error("Error generating prompt ideas or parsing JSON:",K),console.error("Response received:",$)}finally{l.current=l.current.filter(K=>K!==S)}};let b={},T="";const x=(C,S,N)=>{C.role===c&&(C.role===c&&(T+=C.content,b=C,b.content=T,C.context&&(wi(),C.context,new Date().toISOString())),C.role)};return w.useEffect(()=>{(async()=>{if(!await p()){i("Camera permissions are not granted. Please allow camera access.");return}await m()})()},[]),Xe("div",{children:[s&&te("p",{style:{color:"red"},children:s}),te("video",{ref:t,style:{display:"none"}}),te("canvas",{ref:e,width:"640",height:"480",style:{display:o?"block":"none"}}),o&&te(Ba,{children:te("button",{onClick:E,children:"Capture Image"})}),n&&Xe("div",{style:{marginTop:"20px",padding:"10px",border:"1px solid #ccc",borderRadius:"5px",backgroundColor:"#f9f9f9"},children:[te("h2",{children:"Image Description:"}),te("p",{children:n})]})]})},CHe="_answerContainer_1xeyy_1",SHe="_answerText_1xeyy_12",wHe="_answerHeader_1xeyy_29",_He="_answerFooter_1xeyy_33",kHe="_answerDisclaimerContainer_1xeyy_42",IHe="_answerDisclaimer_1xeyy_42",NHe="_citationContainer_1xeyy_62",AHe="_citation_1xeyy_62",DHe="_accordionIcon_1xeyy_112",RHe="_accordionTitle_1xeyy_127",FHe="_clickableSup_1xeyy_143",Ca={answerContainer:CHe,answerText:SHe,answerHeader:wHe,answerFooter:_He,answerDisclaimerContainer:kHe,answerDisclaimer:IHe,citationContainer:NHe,citation:AHe,accordionIcon:DHe,accordionTitle:RHe,clickableSup:FHe},OHe=t=>{const e=new Map;for(const n of t){const{filepath:r}=n;let s=1;e.has(r)&&(s=e.get(r)+1),e.set(r,s),n.part_index=s}return t};function $He(t){let e=t.answer;const n=e.match(/\[(doc\d\d?\d?)]/g),r=4;let s=[],i=0;return n==null||n.forEach(o=>{let a=o.slice(r,o.length-1),l=e0e(t.citations[Number(a)-1]);!s.find(u=>u.id===a)&&l&&(e=e.replaceAll(o,` ^${++i}^ `),l.id=a,l.reindex_id=i.toString(),s.push(l))}),s=OHe(s),{citations:s,markdownFormatText:e}}function LHe(){return t=>{kf(t,["text"],(e,n,r)=>{if(e.type!=="text")return;const{value:s}=e,i=s.split(/\^/);if(i.length===1||i.length%2===0)return;const o=i.map((a,l)=>l%2===0?{type:"text",value:a}:{type:"superscript",data:{hName:"sup"},children:[{type:"text",value:a}]});r.children.splice(n,1,...o)}),kf(t,["text"],(e,n,r)=>{if(e.type!=="text")return;const{value:s}=e,i=s.split(/\~/);if(i.length===1||i.length%2===0)return;const o=i.map((a,l)=>l%2===0?{type:"text",value:a}:{type:"subscript",data:{hName:"sub"},children:[{type:"text",value:a}]});r.children.splice(n,1,...o)})}}const R8=({answer:t,onCitationClicked:e})=>{var z,H;const n=$=>{if($.message_id!=null&&$.feedback!=null)return $.feedback.split(",").length>1?kt.Negative:Object.values(kt).includes($.feedback)?$.feedback:kt.Neutral},[r,{toggle:s}]=Lg(!1),i=50,o=w.useMemo(()=>$He(t),[t]),[a,l]=w.useState(r),[u,c]=w.useState(n(t)),[d,h]=w.useState(!1),[f,p]=w.useState(!1),[m,y]=w.useState([]),g=w.useContext(Xl),v=((z=g==null?void 0:g.state.frontendSettings)==null?void 0:z.feedback_enabled)&&((H=g==null?void 0:g.state.isCosmosDBAvailable)==null?void 0:H.cosmosDB),E=()=>{l(!a),s()};w.useEffect(()=>{l(r)},[r]),w.useEffect(()=>{if(t.message_id==null)return;let $;g!=null&&g.state.feedbackState&&(g!=null&&g.state.feedbackState[t.message_id])?$=g==null?void 0:g.state.feedbackState[t.message_id]:$=n(t),c($)},[g==null?void 0:g.state.feedbackState,u,t.message_id]);const b=($,M,j=!1)=>{let P="";if($.filepath){const B=$.part_index??($.chunk_id?parseInt($.chunk_id)+1:"");if(j&&$.filepath.length>i){const K=$.filepath.length;P=`${$.filepath.substring(0,20)}...${$.filepath.substring(K-20)} - Part ${B}`}else P=`${$.filepath} - Part ${B}`}else $.filepath&&$.reindex_id?P=`${$.filepath} - Part ${$.reindex_id}`:P=`Citation ${M}`;return P},T=$=>{let M="";if($.title)M=$.title;else if($.filepath){const j=$.filepath.split("/");M=j[j.length-1]}else M="Untitled Citation";return M},x=async()=>{if(t.message_id==null)return;let $=u;u==kt.Positive?$=kt.Neutral:$=kt.Positive,g==null||g.dispatch({type:"SET_FEEDBACK_STATE",payload:{answerId:t.message_id,feedback:$}}),c($),await mS(t.message_id,$)},C=async()=>{if(t.message_id==null)return;let $=u;u===void 0||u===kt.Neutral||u===kt.Positive?($=kt.Negative,c($),h(!0)):($=kt.Neutral,c($),await mS(t.message_id,kt.Neutral)),g==null||g.dispatch({type:"SET_FEEDBACK_STATE",payload:{answerId:t.message_id,feedback:$}})},S=($,M)=>{var B;if(t.message_id==null)return;let j=(B=$==null?void 0:$.target)==null?void 0:B.id,P=m.slice();M?P.push(j):P=P.filter(K=>K!==j),y(P)},N=async()=>{t.message_id!=null&&(await mS(t.message_id,m.join(",")),I())},I=()=>{h(!1),p(!1),y([])},F=()=>Xe(Ba,{children:[te("div",{children:"Why wasn't this response helpful?"}),Xe(tt,{tokens:{childrenGap:4},children:[te(Mo,{label:"Citations are missing",id:kt.MissingCitation,defaultChecked:m.includes(kt.MissingCitation),onChange:S}),te(Mo,{label:"Citations are wrong",id:kt.WrongCitation,defaultChecked:m.includes(kt.WrongCitation),onChange:S}),te(Mo,{label:"The response is not from my data",id:kt.OutOfScope,defaultChecked:m.includes(kt.OutOfScope),onChange:S}),te(Mo,{label:"Inaccurate or irrelevant",id:kt.InaccurateOrIrrelevant,defaultChecked:m.includes(kt.InaccurateOrIrrelevant),onChange:S}),te(Mo,{label:"Other",id:kt.OtherUnhelpful,defaultChecked:m.includes(kt.OtherUnhelpful),onChange:S})]}),te("div",{onClick:()=>p(!0),style:{color:"#115EA3",cursor:"pointer"},children:"Report inappropriate content"})]}),L=()=>Xe(Ba,{children:[Xe("div",{children:["The content is ",te("span",{style:{color:"red"},children:"*"})]}),Xe(tt,{tokens:{childrenGap:4},children:[te(Mo,{label:"Hate speech, stereotyping, demeaning",id:kt.HateSpeech,defaultChecked:m.includes(kt.HateSpeech),onChange:S}),te(Mo,{label:"Violent: glorification of violence, self-harm",id:kt.Violent,defaultChecked:m.includes(kt.Violent),onChange:S}),te(Mo,{label:"Sexual: explicit content, grooming",id:kt.Sexual,defaultChecked:m.includes(kt.Sexual),onChange:S}),te(Mo,{label:"Manipulative: devious, emotional, pushy, bullying",defaultChecked:m.includes(kt.Manipulative),id:kt.Manipulative,onChange:S}),te(Mo,{label:"Other",id:kt.OtherHarmful,defaultChecked:m.includes(kt.OtherHarmful),onChange:S})]})]});return Xe(Ba,{children:[Xe(tt,{className:Ca.answerContainer,tabIndex:0,children:[te(tt.Item,{children:Xe(tt,{horizontal:!0,grow:!0,children:[te(tt.Item,{grow:!0,children:te(MT,{linkTarget:"_blank",remarkPlugins:[XM,LHe],children:rB.sanitize(o.markdownFormatText,{ALLOWED_TAGS:sB}),className:Ca.answerText})}),te(tt.Item,{className:Ca.answerHeader,children:v&&t.message_id!==void 0&&Xe(tt,{horizontal:!0,horizontalAlign:"space-between",children:[te(xse,{"aria-hidden":"false","aria-label":"Like this response",onClick:()=>x(),style:u===kt.Positive||(g==null?void 0:g.state.feedbackState[t.message_id])===kt.Positive?{color:"darkgreen",cursor:"pointer"}:{color:"slategray",cursor:"pointer"}}),te(Ese,{"aria-hidden":"false","aria-label":"Dislike this response",onClick:()=>C(),style:u!==kt.Positive&&u!==kt.Neutral&&u!==void 0?{color:"darkred",cursor:"pointer"}:{color:"slategray",cursor:"pointer"}})]})})]})}),Xe(tt,{horizontal:!0,className:Ca.answerFooter,children:[!!o.citations.length&&te(tt.Item,{onKeyDown:$=>$.key==="Enter"||$.key===" "?s():null,children:te(tt,{style:{width:"100%"},children:Xe(tt,{horizontal:!0,horizontalAlign:"start",verticalAlign:"center",children:[te(Dl,{className:Ca.accordionTitle,onClick:s,"aria-label":"Open references",tabIndex:0,role:"button",children:te("span",{children:o.citations.length>1?o.citations.length+" references":"1 reference"})}),te(fE,{className:Ca.accordionIcon,onClick:E,iconName:a?"ChevronDown":"ChevronRight"})]})})}),te(tt.Item,{className:Ca.answerDisclaimerContainer,children:te("span",{className:Ca.answerDisclaimer,children:"AI-generated content may be incorrect"})})]}),a&&te("div",{style:{marginTop:8,display:"flex",flexFlow:"wrap column",maxHeight:"150px",gap:"4px"},children:o.citations.map(($,M)=>Xe("span",{title:b($,++M),tabIndex:0,role:"link",onClick:()=>e($),onKeyDown:j=>j.key==="Enter"||j.key===" "?e($):null,className:Ca.citationContainer,"aria-label":b($,M),children:[te("div",{className:Ca.citation,children:M}),T($)]},M))})]}),te(Sd,{onDismiss:()=>{I(),c(kt.Neutral)},hidden:!d,styles:{main:[{selectors:{["@media (min-width: 480px)"]:{maxWidth:"600px",background:"#FFFFFF",boxShadow:"0px 14px 28.8px rgba(0, 0, 0, 0.24), 0px 0px 8px rgba(0, 0, 0, 0.2)",borderRadius:"8px",maxHeight:"600px",minHeight:"100px"}}}]},dialogContentProps:{title:"Submit Feedback",showCloseButton:!0},children:Xe(tt,{tokens:{childrenGap:4},children:[te("div",{children:"Your feedback will improve this experience."}),f?te(L,{}):te(F,{}),te("div",{children:"By pressing submit, your feedback will be visible to the application owner."}),te(Hg,{disabled:m.length<1,onClick:N,children:"Submit"})]})})]})},PHe="/assets/Send-d0601aaa.svg",MHe="_questionInputContainer_scmpq_1",BHe="_questionInputTextArea_scmpq_13",zHe="_questionInputSendButtonContainer_scmpq_22",HHe="_questionInputSendButton_scmpq_22",UHe="_questionInputSendButtonDisabled_scmpq_33",WHe="_questionInputBottomBorder_scmpq_41",VHe="_questionInputOptionsButton_scmpq_52",kh={questionInputContainer:MHe,questionInputTextArea:BHe,questionInputSendButtonContainer:zHe,questionInputSendButton:HHe,questionInputSendButtonDisabled:UHe,questionInputBottomBorder:WHe,questionInputOptionsButton:VHe},GHe=({onSend:t,disabled:e,placeholder:n,clearOnSend:r,conversationId:s})=>{const[i,o]=w.useState(""),a=()=>{e||!i.trim()||(s?t(i,s):t(i),r&&o(""))},l=d=>{var h;d.key==="Enter"&&!d.shiftKey&&((h=d.nativeEvent)==null?void 0:h.isComposing)!==!0&&(d.preventDefault(),a())},u=(d,h)=>{o(h||"")},c=e||!i.trim();return Xe(tt,{horizontal:!0,className:kh.questionInputContainer,children:[te(mN,{className:kh.questionInputTextArea,placeholder:n,multiline:!0,resizable:!1,borderless:!0,value:i,onChange:u,onKeyDown:l}),te("div",{className:kh.questionInputSendButtonContainer,role:"button",tabIndex:0,"aria-label":"Ask question button",onClick:a,onKeyDown:d=>d.key==="Enter"||d.key===" "?a():null,children:c?te(gse,{className:kh.questionInputSendButtonDisabled}):te("img",{src:PHe,className:kh.questionInputSendButton})}),te("div",{className:kh.questionInputBottomBorder})]})},jHe="_container_1jok3_1",KHe="_listContainer_1jok3_6",qHe="_itemCell_1jok3_11",XHe="_itemButton_1jok3_28",YHe="_chatGroup_1jok3_45",QHe="_spinnerContainer_1jok3_50",ZHe="_chatList_1jok3_57",JHe="_chatMonth_1jok3_61",eUe="_chatTitle_1jok3_68",ao={container:jHe,listContainer:KHe,itemCell:qHe,itemButton:XHe,chatGroup:YHe,spinnerContainer:QHe,chatList:ZHe,chatMonth:JHe,chatTitle:eUe},tUe=t=>{const n=new Date().getFullYear(),[r,s]=t.split(" ");return parseInt(s)===n?r:t},nUe=({item:t,onSelect:e})=>{var $,M,j;const[n,r]=w.useState(!1),[s,i]=w.useState(!1),[o,a]=w.useState(""),[l,{toggle:u}]=Lg(!0),[c,d]=w.useState(!1),[h,f]=w.useState(!1),[p,m]=w.useState(void 0),[y,g]=w.useState(!1),v=w.useRef(null),E=w.useContext(Xl),b=(t==null?void 0:t.id)===(($=E==null?void 0:E.state.currentChat)==null?void 0:$.id),T={type:La.close,title:"Are you sure you want to delete this item?",closeButtonAriaLabel:"Close",subText:"The history of this chat session will permanently removed."},x={titleAriaId:"labelId",subtitleAriaId:"subTextId",isBlocking:!0,styles:{main:{maxWidth:450}}};if(!t)return null;w.useEffect(()=>{y&&v.current&&(v.current.focus(),g(!1))},[y]),w.useEffect(()=>{var P;((P=E==null?void 0:E.state.currentChat)==null?void 0:P.id)!==(t==null?void 0:t.id)&&(i(!1),a(""))},[(M=E==null?void 0:E.state.currentChat)==null?void 0:M.id,t==null?void 0:t.id]);const C=async()=>{(await Dse(t.id)).ok?E==null||E.dispatch({type:"DELETE_CHAT_ENTRY",payload:t.id}):(d(!0),setTimeout(()=>{d(!1)},5e3)),u()},S=()=>{i(!0),g(!0),a(t==null?void 0:t.title)},N=()=>{e(t),E==null||E.dispatch({type:"UPDATE_CURRENT_CHAT",payload:t})},I=((j=t==null?void 0:t.title)==null?void 0:j.length)>28?`${t.title.substring(0,28)} ...`:t.title,F=async P=>{if(P.preventDefault(),p||h)return;if(o==t.title){m("Error: Enter a new title to proceed."),setTimeout(()=>{m(void 0),g(!0),v.current&&v.current.focus()},5e3);return}f(!0),(await Ose(t.id,o)).ok?(f(!1),i(!1),E==null||E.dispatch({type:"UPDATE_CHAT_TITLE",payload:{...t,title:o}}),a("")):(m("Error: could not rename item"),setTimeout(()=>{g(!0),m(void 0),v.current&&v.current.focus()},5e3))},L=P=>{a(P.target.value)},z=()=>{i(!1),a("")},H=P=>{if(P.key==="Enter")return F(P);if(P.key==="Escape"){z();return}};return Xe(tt,{tabIndex:0,"aria-label":"chat history item",className:ao.itemCell,onClick:()=>N(),onKeyDown:P=>P.key==="Enter"||P.key===" "?N():null,verticalAlign:"center",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),styles:{root:{backgroundColor:b?"#e6e6e6":"transparent"}},children:[s?te(Ba,{children:te(tt.Item,{style:{width:"100%"},children:Xe("form",{"aria-label":"edit title form",onSubmit:P=>F(P),style:{padding:"5px 0px"},children:[Xe(tt,{horizontal:!0,verticalAlign:"start",children:[te(tt.Item,{children:te(mN,{componentRef:v,autoFocus:y,value:o,placeholder:t.title,onChange:L,onKeyDown:H,disabled:!!p})}),o&&te(tt.Item,{children:Xe(tt,{"aria-label":"action button group",horizontal:!0,verticalAlign:"center",children:[te(Nu,{role:"button",disabled:p!==void 0,onKeyDown:P=>P.key===" "||P.key==="Enter"?F(P):null,onClick:P=>F(P),"aria-label":"confirm new title",iconProps:{iconName:"CheckMark"},styles:{root:{color:"green",marginLeft:"5px"}}}),te(Nu,{role:"button",disabled:p!==void 0,onKeyDown:P=>P.key===" "||P.key==="Enter"?z():null,onClick:()=>z(),"aria-label":"cancel edit title",iconProps:{iconName:"Cancel"},styles:{root:{color:"red",marginLeft:"5px"}}})]})})]}),p&&te(Dl,{role:"alert","aria-label":p,style:{fontSize:12,fontWeight:400,color:"rgb(164,38,44)"},children:p})]})})}):te(Ba,{children:Xe(tt,{horizontal:!0,verticalAlign:"center",style:{width:"100%"},children:[te("div",{className:ao.chatTitle,children:I}),(b||n)&&Xe(tt,{horizontal:!0,horizontalAlign:"end",children:[te(Nu,{className:ao.itemButton,iconProps:{iconName:"Delete"},title:"Delete",onClick:u,onKeyDown:P=>P.key===" "?u():null}),te(Nu,{className:ao.itemButton,iconProps:{iconName:"Edit"},title:"Edit",onClick:S,onKeyDown:P=>P.key===" "?S():null})]})]})}),c&&te(Dl,{styles:{root:{color:"red",marginTop:5,fontSize:14}},children:"Error: could not delete item"}),te(Sd,{hidden:l,onDismiss:u,dialogContentProps:T,modalProps:x,children:Xe(gN,{children:[te(d6,{onClick:C,text:"Delete"}),te(Hg,{onClick:u,text:"Cancel"})]})})]},t.id)},rUe=({groupedChatHistory:t})=>{const e=w.useContext(Xl),n=w.useRef(null),[,r]=w.useState(null),[s,i]=w.useState(25),[o,a]=w.useState(0),[l,u]=w.useState(!1),c=w.useRef(!0),d=p=>{p&&r(p)},h=p=>te(nUe,{item:p,onSelect:()=>d(p)});w.useEffect(()=>{if(c.current){c.current=!1;return}f(),i(p=>p+=25)},[o]);const f=async()=>{const p=e==null?void 0:e.state.chatHistory;u(!0),await B6(s).then(m=>{const y=p&&m&&p.concat(...m);return m?e==null||e.dispatch({type:"FETCH_CHAT_HISTORY",payload:y||m}):e==null||e.dispatch({type:"FETCH_CHAT_HISTORY",payload:null}),u(!1),m})};return w.useEffect(()=>{const p=new IntersectionObserver(m=>{m[0].isIntersecting&&a(y=>y+=1)},{threshold:1});return n.current&&p.observe(n.current),()=>{n.current&&p.unobserve(n.current)}},[n]),Xe("div",{className:ao.listContainer,"data-is-scrollable":!0,children:[t.map(p=>p.entries.length>0&&Xe(tt,{horizontalAlign:"start",verticalAlign:"center",className:ao.chatGroup,"aria-label":`chat history group: ${p.month}`,children:[te(tt,{"aria-label":p.month,className:ao.chatMonth,children:tUe(p.month)}),te(jee,{"aria-label":"chat history list",items:p.entries,onRenderCell:h,className:ao.chatList}),te("div",{ref:n}),te(v6,{styles:{root:{width:"100%",position:"relative","::before":{backgroundColor:"#d6d6d6"}}}})]},p.month)),l&&te("div",{className:ao.spinnerContainer,children:te(p6,{size:Yo.small,"aria-label":"loading more chat history",className:ao.spinner})})]})},sUe=t=>{const e=[{month:"Recent",entries:[]}],n=new Date;return t.forEach(r=>{const s=new Date(r.date),i=(n.getTime()-s.getTime())/(1e3*60*60*24),o=s.toLocaleString("default",{month:"long",year:"numeric"}),a=e.find(l=>l.month===o);i<=7?e[0].entries.push(r):a?a.entries.push(r):e.push({month:o,entries:[r]})}),e.sort((r,s)=>{if(r.entries.length===0&&s.entries.length===0)return 0;if(r.entries.length===0)return 1;if(s.entries.length===0)return-1;const i=new Date(r.entries[0].date);return new Date(s.entries[0].date).getTime()-i.getTime()}),e.forEach(r=>{r.entries.sort((s,i)=>{const o=new Date(s.date);return new Date(i.date).getTime()-o.getTime()})}),e},iUe=()=>{const t=w.useContext(Xl),e=t==null?void 0:t.state.chatHistory;ks.useEffect(()=>{},[t==null?void 0:t.state.chatHistory]);let n;if(e&&e.length>0)n=sUe(e);else return te(tt,{horizontal:!0,horizontalAlign:"center",verticalAlign:"center",style:{width:"100%",marginTop:10},children:te(_u,{children:te(Dl,{style:{alignSelf:"center",fontWeight:"400",fontSize:14},children:te("span",{children:"No chat history."})})})});return te(rUe,{groupedChatHistory:n})},F8={root:{padding:"0",display:"flex",justifyContent:"center",backgroundColor:"transparent"}},oUe={root:{height:"50px"}};function aUe(t){var v,E,b;const e=w.useContext(Xl),[n,r]=ks.useState(!1),[s,{toggle:i}]=Lg(!0),[o,a]=ks.useState(!1),[l,u]=ks.useState(!1),c={type:La.close,title:l?"Error deleting all of chat history":"Are you sure you want to clear all chat history?",closeButtonAriaLabel:"Close",subText:l?"Please try again. If the problem persists, please contact the site administrator.":"All chat history will be permanently removed."},d={titleAriaId:"labelId",subtitleAriaId:"subTextId",isBlocking:!0,styles:{main:{maxWidth:450}}},h=[{key:"clearAll",text:"Clear all chat history",iconProps:{iconName:"Delete"}}],f=()=>{e==null||e.dispatch({type:"TOGGLE_CHAT_HISTORY"})},p=ks.useCallback(T=>{T.preventDefault(),r(!0)},[]),m=ks.useCallback(()=>r(!1),[]),y=async()=>{a(!0),(await Rse()).ok?(e==null||e.dispatch({type:"DELETE_CHAT_HISTORY"}),i()):u(!0),a(!1)},g=()=>{i(),setTimeout(()=>{u(!1)},2e3)};return ks.useEffect(()=>{},[e==null?void 0:e.state.chatHistory,l]),Xe("section",{className:ao.container,"data-is-scrollable":!0,"aria-label":"chat history panel",children:[Xe(tt,{horizontal:!0,horizontalAlign:"space-between",verticalAlign:"center",wrap:!0,"aria-label":"chat history header",children:[te(_u,{children:te(Dl,{role:"heading","aria-level":2,style:{alignSelf:"center",fontWeight:"600",fontSize:"18px",marginRight:"auto",paddingLeft:"20px"},children:"Chat history"})}),te(tt,{verticalAlign:"start",children:Xe(tt,{horizontal:!0,styles:oUe,children:[te(ig,{iconProps:{iconName:"More"},title:"Clear all chat history",onClick:p,"aria-label":"clear all chat history",styles:F8,role:"button",id:"moreButton"}),te(pE,{items:h,hidden:!n,target:"#moreButton",onItemClick:i,onDismiss:m}),te(ig,{iconProps:{iconName:"Cancel"},title:"Hide",onClick:f,"aria-label":"hide button",styles:F8,role:"button"})]})})]}),te(tt,{"aria-label":"chat history panel content",styles:{root:{display:"flex",flexGrow:1,flexDirection:"column",paddingTop:"2.5px",maxWidth:"100%"}},style:{display:"flex",flexGrow:1,flexDirection:"column",flexWrap:"wrap",padding:"1px"},children:Xe(tt,{className:ao.chatHistoryListContainer,children:[(e==null?void 0:e.state.chatHistoryLoadingState)===_s.Success&&(e==null?void 0:e.state.isCosmosDBAvailable.cosmosDB)&&te(iUe,{}),(e==null?void 0:e.state.chatHistoryLoadingState)===_s.Fail&&(e==null?void 0:e.state.isCosmosDBAvailable)&&te(Ba,{children:te(tt,{children:Xe(tt,{horizontalAlign:"center",verticalAlign:"center",style:{width:"100%",marginTop:10},children:[te(_u,{children:Xe(Dl,{style:{alignSelf:"center",fontWeight:"400",fontSize:16},children:[((v=e==null?void 0:e.state.isCosmosDBAvailable)==null?void 0:v.status)&&te("span",{children:(E=e==null?void 0:e.state.isCosmosDBAvailable)==null?void 0:E.status}),!((b=e==null?void 0:e.state.isCosmosDBAvailable)!=null&&b.status)&&te("span",{children:"Error loading chat history"})]})}),te(_u,{children:te(Dl,{style:{alignSelf:"center",fontWeight:"400",fontSize:14},children:te("span",{children:"Chat history can't be saved at this time"})})})]})})}),(e==null?void 0:e.state.chatHistoryLoadingState)===_s.Loading&&te(Ba,{children:te(tt,{children:Xe(tt,{horizontal:!0,horizontalAlign:"center",verticalAlign:"center",style:{width:"100%",marginTop:10},children:[te(_u,{style:{justifyContent:"center",alignItems:"center"},children:te(p6,{style:{alignSelf:"flex-start",height:"100%",marginRight:"5px"},size:Yo.medium})}),te(_u,{children:te(Dl,{style:{alignSelf:"center",fontWeight:"400",fontSize:14},children:te("span",{style:{whiteSpace:"pre-wrap"},children:"Loading chat history"})})})]})})})]})}),te(Sd,{hidden:s,onDismiss:o?()=>{}:g,dialogContentProps:c,modalProps:d,children:Xe(gN,{children:[!l&&te(d6,{onClick:y,disabled:o,text:"Clear All"}),te(Hg,{onClick:g,disabled:o,text:l?"Close":"Cancel"})]})})]})}const lUe=()=>{var _e,Se,Fe,et,ot,dt,at,nt;const t=w.useContext(Xl),e=(_e=t==null?void 0:t.state.frontendSettings)==null?void 0:_e.ui,n=(Se=t==null?void 0:t.state.frontendSettings)==null?void 0:Se.auth_enabled,r=w.useRef(null),[s,i]=w.useState(!1),[o,a]=w.useState(!1),[l,u]=w.useState(),[c,d]=w.useState(!1),h=w.useRef([]),[f,p]=w.useState(!0),[m,y]=w.useState([]),[g,v]=w.useState("Not Running"),[E,b]=w.useState(!1),[T,{toggle:x}]=Lg(!0),[C,S]=w.useState(),N={type:La.close,title:C==null?void 0:C.title,closeButtonAriaLabel:"Close",subText:C==null?void 0:C.subtitle},I={titleAriaId:"labelId",subtitleAriaId:"subTextId",isBlocking:!0,styles:{main:{maxWidth:450}}},[F,L,z]=["assistant","tool","error"];w.useEffect(()=>{console.log("Chat component mounted")},[]),w.useEffect(()=>{var me,Oe;if(((me=t==null?void 0:t.state.isCosmosDBAvailable)==null?void 0:me.status)!==ds.Working&&((Oe=t==null?void 0:t.state.isCosmosDBAvailable)==null?void 0:Oe.status)!==ds.NotConfigured&&(t==null?void 0:t.state.chatHistoryLoadingState)===_s.Fail&&T){let Ge=`${t.state.isCosmosDBAvailable.status}. Please contact the site administrator.`;S({title:"Chat history is not enabled",subtitle:Ge}),x(),console.log("History loaded:")}},[t==null?void 0:t.state.isCosmosDBAvailable]);const H=()=>{x(),setTimeout(()=>{S(null)},500)};w.useEffect(()=>{i((t==null?void 0:t.state.chatHistoryLoadingState)===_s.Loading)},[t==null?void 0:t.state.chatHistoryLoadingState]);const $=async()=>{if(!n){p(!1);return}(await Ise()).length===0&&window.location.hostname!=="0.0.0.0"?p(!0):p(!1)};let M={},j={},P="";const B=(me,Oe,Ge)=>{me.role===F&&(P+=me.content,M=me,M.content=P,me.context&&(j={id:wi(),role:L,content:me.context,date:new Date().toISOString()})),me.role===L&&(j=me),Ge?W1(j)?y([...m,M]):y([...m,j,M]):W1(j)?y([...m,Oe,M]):y([...m,Oe,j,M])},K=async(me,Oe)=>{var Ln,Nn;i(!0),a(!0);const Ge=new AbortController;h.current.unshift(Ge);const Ye={id:wi(),role:"user",content:me,date:new Date().toISOString()};let lt;if(!Oe)lt={id:Oe??wi(),title:me,messages:[Ye],date:new Date().toISOString()};else if(lt=(Ln=t==null?void 0:t.state)==null?void 0:Ln.currentChat,lt)lt.messages.push(Ye);else{console.error("Conversation not found."),i(!1),a(!1),h.current=h.current.filter(ne=>ne!==Ge);return}t==null||t.dispatch({type:"UPDATE_CURRENT_CHAT",payload:lt}),y(lt.messages);const ft={messages:[...lt.messages.filter(ne=>ne.role!==z)]};let Ve={};try{const ne=await M6(ft,Ge.signal);if(ne!=null&&ne.body){const fe=ne.body.getReader();let De="";for(;;){v("Processing");const{done:Qe,value:ge}=await fe.read();if(Qe)break;var dn=new TextDecoder("utf-8").decode(ge);dn.split(`
`).forEach(Qt=>{var vn,pt;try{if(Qt!==""&&Qt!=="{}"){if(De+=Qt,Ve=JSON.parse(De),((vn=Ve.choices)==null?void 0:vn.length)>0)Ve.choices[0].messages.forEach(Tt=>{Tt.id=Ve.id,Tt.date=new Date().toISOString()}),(pt=Ve.choices[0].messages)!=null&&pt.some(Tt=>Tt.role===F)&&a(!1),Ve.choices[0].messages.forEach(Tt=>{B(Tt,Ye,Oe)});else if(Ve.error)throw Error(Ve.error);De=""}}catch(Tt){if(Tt instanceof SyntaxError)console.log("Incomplete message. Continuing...");else throw console.error(Tt),Tt}})}lt.messages.push(j,M),t==null||t.dispatch({type:"UPDATE_CURRENT_CHAT",payload:lt}),y([...m,j,M])}}catch{if(Ge.signal.aborted)y([...m,Ye]);else{let fe="An error occurred. Please try again. If the problem persists, please contact the site administrator.";(Nn=Ve.error)!=null&&Nn.message?fe=Ve.error.message:typeof Ve.error=="string"&&(fe=Ve.error);let De={id:wi(),role:z,content:fe,date:new Date().toISOString()};lt.messages.push(De),t==null||t.dispatch({type:"UPDATE_CURRENT_CHAT",payload:lt}),y([...m,De])}}finally{i(!1),a(!1),h.current=h.current.filter(ne=>ne!==Ge),v("Done")}return Ge.abort()},A=async(me,Oe)=>{var Nn,ne,fe,De,Qe,ge,Bt,Qt,vn;console.log("makeApiRequestWithCosmosDB"),i(!0),a(!0);const Ge=new AbortController;h.current.unshift(Ge);const Ye={id:wi(),role:"user",content:me,date:new Date().toISOString()};let lt,ft;if(Oe)if(ft=(ne=(Nn=t==null?void 0:t.state)==null?void 0:Nn.chatHistory)==null?void 0:ne.find(pt=>pt.id===Oe),ft)ft.messages.push(Ye),lt={messages:[...ft.messages.filter(pt=>pt.role!==z)]};else{console.error("Conversation not found."),i(!1),a(!1),h.current=h.current.filter(pt=>pt!==Ge);return}else lt={messages:[Ye].filter(pt=>pt.role!==z)},y(lt.messages);let Ve={};try{const pt=Oe?await u3(lt,Ge.signal,Oe):await u3(lt,Ge.signal);if(!(pt!=null&&pt.ok)){const Tt=await pt.json();var dn=Tt.error===void 0?"Please try again. If the problem persists, please contact the site administrator.":Tt.error;let xt={id:wi(),role:z,content:`There was an error generating a response. Chat history can't be saved at this time. ${dn}`,date:new Date().toISOString()},$t;if(Oe){if($t=(De=(fe=t==null?void 0:t.state)==null?void 0:fe.chatHistory)==null?void 0:De.find(He=>He.id===Oe),!$t){console.error("Conversation not found."),i(!1),a(!1),h.current=h.current.filter(He=>He!==Ge);return}$t.messages.push(xt)}else{y([...m,Ye,xt]),i(!1),a(!1),h.current=h.current.filter(He=>He!==Ge);return}t==null||t.dispatch({type:"UPDATE_CURRENT_CHAT",payload:$t}),y([...$t.messages]);return}if(pt!=null&&pt.body){const Tt=pt.body.getReader();let xt="";for(;;){v("Processing");const{done:He,value:rs}=await Tt.read();if(He)break;var Ln=new TextDecoder("utf-8").decode(rs);Ln.split(`
`).forEach(Do=>{var va,ul;try{if(Do!==""&&Do!=="{}")xt+=Do,Ve=JSON.parse(xt),((va=Ve.choices)==null?void 0:va.length)>0&&(Ve.choices[0].messages.forEach(Nr=>{Nr.id=Ve.id,Nr.date=new Date().toISOString()}),(ul=Ve.choices[0].messages)!=null&&ul.some(Nr=>Nr.role===F)&&a(!1),Ve.choices[0].messages.forEach(Nr=>{B(Nr,Ye,Oe)})),xt="";else if(Ve.error)throw Error(Ve.error)}catch(Nr){if(Nr instanceof SyntaxError)console.log("Incomplete message. Continuing...");else throw console.error(Nr),Nr}})}let $t;if(Oe){if($t=(ge=(Qe=t==null?void 0:t.state)==null?void 0:Qe.chatHistory)==null?void 0:ge.find(He=>He.id===Oe),!$t){console.error("Conversation not found."),i(!1),a(!1),h.current=h.current.filter(He=>He!==Ge);return}W1(j)?$t.messages.push(M):$t.messages.push(j,M)}else $t={id:Ve.history_metadata.conversation_id,title:Ve.history_metadata.title,messages:[Ye],date:Ve.history_metadata.date},W1(j)?$t.messages.push(M):$t.messages.push(j,M);if(!$t){i(!1),a(!1),h.current=h.current.filter(He=>He!==Ge);return}t==null||t.dispatch({type:"UPDATE_CURRENT_CHAT",payload:$t}),W1(j)?y([...m,M]):y([...m,j,M])}}catch{if(Ge.signal.aborted)y([...m,Ye]);else{let Tt=`An error occurred. ${dn}`;(Bt=Ve.error)!=null&&Bt.message?Tt=Ve.error.message:typeof Ve.error=="string"&&(Tt=Ve.error);let xt={id:wi(),role:z,content:Tt,date:new Date().toISOString()},$t;if(Oe){if($t=(vn=(Qt=t==null?void 0:t.state)==null?void 0:Qt.chatHistory)==null?void 0:vn.find(He=>He.id===Oe),!$t){console.error("Conversation not found."),i(!1),a(!1),h.current=h.current.filter(He=>He!==Ge);return}$t.messages.push(xt)}else{if(!Ve.history_metadata){console.error("Error retrieving data.",Ve),console.log("errorMessage",Tt);let He={id:wi(),role:z,content:Tt,date:new Date().toISOString()};y([...m,Ye,He]),i(!1),a(!1),h.current=h.current.filter(rs=>rs!==Ge);return}$t={id:Ve.history_metadata.conversation_id,title:Ve.history_metadata.title,messages:[Ye],date:Ve.history_metadata.date},$t.messages.push(xt)}if(!$t){i(!1),a(!1),h.current=h.current.filter(He=>He!==Ge);return}t==null||t.dispatch({type:"UPDATE_CURRENT_CHAT",payload:$t}),y([...m,xt])}}finally{i(!1),a(!1),h.current=h.current.filter(pt=>pt!==Ge),v("Done")}return Ge.abort()},O=async()=>{var me;b(!0),(me=t==null?void 0:t.state.currentChat)!=null&&me.id&&(t!=null&&t.state.isCosmosDBAvailable.cosmosDB)&&((await Fse(t==null?void 0:t.state.currentChat.id)).ok?(t==null||t.dispatch({type:"DELETE_CURRENT_CHAT_MESSAGES",payload:t==null?void 0:t.state.currentChat.id}),t==null||t.dispatch({type:"UPDATE_CHAT_HISTORY",payload:t==null?void 0:t.state.currentChat}),u(void 0),d(!1),y([])):(S({title:"Error clearing current chat",subtitle:"Please try again. If the problem persists, please contact the site administrator."}),x())),b(!1)},se=()=>{v("Processing"),y([]),d(!1),u(void 0),t==null||t.dispatch({type:"UPDATE_CURRENT_CHAT",payload:null}),v("Done")},ae=()=>{h.current.forEach(me=>me.abort()),a(!1),i(!1)};w.useEffect(()=>{t!=null&&t.state.currentChat?y(t.state.currentChat.messages):y([])},[t==null?void 0:t.state.currentChat]),w.useLayoutEffect(()=>{var Oe;const me=async(Ge,Ye)=>await Ase(Ge,Ye);if(t&&t.state.currentChat&&g==="Done"){if(t.state.isCosmosDBAvailable.cosmosDB){if(!((Oe=t==null?void 0:t.state.currentChat)!=null&&Oe.messages)){console.error("Failure fetching current chat state.");return}me(t.state.currentChat.messages,t.state.currentChat.id).then(Ge=>{var Ye,lt;if(!Ge.ok){let ft="An error occurred. Answers can't be saved at this time. If the problem persists, please contact the site administrator.",Ve={id:wi(),role:z,content:ft,date:new Date().toISOString()};if(!((Ye=t==null?void 0:t.state.currentChat)!=null&&Ye.messages))throw{...new Error,message:"Failure fetching current chat state."};y([...(lt=t==null?void 0:t.state.currentChat)==null?void 0:lt.messages,Ve])}return Ge}).catch(Ge=>(console.error("Error: ",Ge),{...new Response,ok:!1,status:500}))}t==null||t.dispatch({type:"UPDATE_CHAT_HISTORY",payload:t.state.currentChat}),y(t.state.currentChat.messages),v("Not Running")}},[g]),w.useEffect(()=>{n!==void 0&&$()},[n]),w.useLayoutEffect(()=>{var me;(me=r.current)==null||me.scrollIntoView({behavior:"smooth"})},[o,g]);const de=me=>{u(me),d(!0)},le=me=>{me.url&&!me.url.includes("blob.core")&&window.open(me.url,"_blank")},ve=me=>{if(me!=null&&me.role&&(me==null?void 0:me.role)==="tool")try{return JSON.parse(me.content).citations}catch{return[]}return[]},Ne=()=>s||m&&m.length===0||E||(t==null?void 0:t.state.chatHistoryLoadingState)===_s.Loading;return te("div",{className:Jt.container,role:"main",children:f?null:Xe(tt,{horizontal:!0,className:Jt.chatRoot,children:[Xe("div",{className:Jt.chatContainer,children:[!m||m.length<1?Xe(tt,{children:[Xe(tt,{className:Jt.chatEmptyState,children:[te("img",{src:e!=null&&e.chat_logo?e.chat_logo:O6,className:Jt.chatIcon,"aria-hidden":"true"}),te("h1",{className:Jt.chatEmptyStateTitle,children:e==null?void 0:e.chat_title}),te("h2",{className:Jt.chatEmptyStateSubtitle,children:e==null?void 0:e.chat_description})]}),te(tt,{children:te(xHe,{})})]}):Xe("div",{className:Jt.chatMessageStream,style:{marginBottom:s?"40px":"0px"},role:"log",children:[m.map((me,Oe)=>te(Ba,{children:me.role==="user"?te("div",{className:Jt.chatMessageUser,tabIndex:0,children:te("div",{className:Jt.chatMessageUserMessage,children:me.content})}):me.role==="assistant"?te("div",{className:Jt.chatMessageGpt,children:te(R8,{answer:{answer:me.content,citations:ve(m[Oe-1]),message_id:me.id,feedback:me.feedback},onCitationClicked:Ge=>de(Ge)})}):me.role===z?Xe("div",{className:Jt.chatMessageError,children:[Xe(tt,{horizontal:!0,className:Jt.chatMessageErrorContent,children:[te(pse,{className:Jt.errorIcon,style:{color:"rgba(182, 52, 67, 1)"}}),te("span",{children:"Error"})]}),te("span",{className:Jt.chatMessageErrorContent,children:me.content})]}):null})),o&&te(Ba,{children:te("div",{className:Jt.chatMessageGpt,children:te(R8,{answer:{answer:"Generating answer...",citations:[]},onCitationClicked:()=>null})})}),te("div",{ref:r})]}),Xe(tt,{horizontal:!0,className:Jt.chatInput,children:[s&&Xe(tt,{horizontal:!0,className:Jt.stopGeneratingContainer,role:"button","aria-label":"Stop generating",tabIndex:0,onClick:ae,onKeyDown:me=>me.key==="Enter"||me.key===" "?ae():null,children:[te(vse,{className:Jt.stopGeneratingIcon,"aria-hidden":"true"}),te("span",{className:Jt.stopGeneratingText,"aria-hidden":"true",children:"Stop generating"})]}),Xe(tt,{children:[((Fe=t==null?void 0:t.state.isCosmosDBAvailable)==null?void 0:Fe.status)!==ds.NotConfigured&&te(ig,{role:"button",styles:{icon:{color:"#FFFFFF"},iconDisabled:{color:"#BDBDBD !important"},root:{color:"#FFFFFF",background:"radial-gradient(109.81% 107.82% at 100.1% 90.19%, #0F6CBD 33.63%, #2D87C3 70.31%, #8DDDD8 100%)"},rootDisabled:{background:"#F0F0F0"}},className:Jt.newChatIcon,iconProps:{iconName:"Add"},onClick:se,disabled:Ne(),"aria-label":"start a new chat button"}),te(ig,{role:"button",styles:{icon:{color:"#FFFFFF"},iconDisabled:{color:"#BDBDBD !important"},root:{color:"#FFFFFF",background:"radial-gradient(109.81% 107.82% at 100.1% 90.19%, #0F6CBD 33.63%, #2D87C3 70.31%, #8DDDD8 100%)"},rootDisabled:{background:"#F0F0F0"}},className:((et=t==null?void 0:t.state.isCosmosDBAvailable)==null?void 0:et.status)!==ds.NotConfigured?Jt.clearChatBroom:Jt.clearChatBroomNoCosmos,iconProps:{iconName:"Broom"},onClick:((ot=t==null?void 0:t.state.isCosmosDBAvailable)==null?void 0:ot.status)!==ds.NotConfigured?O:se,disabled:Ne(),"aria-label":"clear chat button"}),te(Sd,{hidden:T,onDismiss:H,dialogContentProps:N,modalProps:I})]}),te(GHe,{clearOnSend:!0,placeholder:"Type a new question...",disabled:s,onSend:(me,Oe)=>{var Ge;(Ge=t==null?void 0:t.state.isCosmosDBAvailable)!=null&&Ge.cosmosDB?A(me,Oe):K(me,Oe)},conversationId:(dt=t==null?void 0:t.state.currentChat)!=null&&dt.id?(at=t==null?void 0:t.state.currentChat)==null?void 0:at.id:void 0})]})]}),m&&m.length>0&&c&&l&&Xe(tt.Item,{className:Jt.citationPanel,tabIndex:0,role:"tabpanel","aria-label":"Citations Panel",children:[Xe(tt,{"aria-label":"Citations Panel Header Container",horizontal:!0,className:Jt.citationPanelHeaderContainer,horizontalAlign:"space-between",verticalAlign:"center",children:[te("span",{"aria-label":"Citations",className:Jt.citationPanelHeader,children:"Citations"}),te(Nu,{iconProps:{iconName:"Cancel"},"aria-label":"Close citations panel",onClick:()=>d(!1)})]}),te("h5",{className:Jt.citationPanelTitle,tabIndex:0,title:l.url&&!l.url.includes("blob.core")?l.url:l.title??"",onClick:()=>le(l),children:l.title}),te("div",{tabIndex:0,children:te(MT,{linkTarget:"_blank",className:Jt.citationPanelContent,children:rB.sanitize(l.content,{ALLOWED_TAGS:sB}),remarkPlugins:[XM],rehypePlugins:[npe]})})]}),(t==null?void 0:t.state.isChatHistoryOpen)&&((nt=t==null?void 0:t.state.isCosmosDBAvailable)==null?void 0:nt.status)!==ds.NotConfigured&&te(aUe,{})]})})};Yte();function uUe(){return te(Mse,{children:te(Sre,{children:te(bre,{children:Xe(yb,{path:"/",element:te(zse,{}),children:[te(yb,{index:!0,element:te(lUe,{})}),te(yb,{path:"*",element:te(Hse,{})})]})})})})}wZ.render(te(ks.StrictMode,{children:te(uUe,{})}),document.getElementById("root"))});export default cUe();
//# sourceMappingURL=index-7e7ce0dc.js.map
